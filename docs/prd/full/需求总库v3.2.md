# éœ€æ±‚æ€»åº“ v3.2

## æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£æ˜¯ITè¿ç»´é—¨æˆ·ç³»ç»Ÿçš„ç»Ÿä¸€éœ€æ±‚æ€»åº“ï¼ˆSingle Source of Truthï¼‰ï¼Œæ•´åˆäº†æ‰€æœ‰19ä¸ªæ¨¡å—çš„å®Œæ•´éœ€æ±‚æ–‡æ¡£ï¼Œæ¶ˆé™¤äº†é‡å¤å’Œå†²çªï¼Œç»Ÿä¸€äº†æ ¼å¼å’Œå‘½åè§„èŒƒã€‚

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š
- ç‰ˆæœ¬å·ï¼šv3.2
- åˆ›å»ºæ—¥æœŸï¼š2025å¹´8æœˆ
- æœ€åæ›´æ–°ï¼š2025å¹´8æœˆ
- ç»´æŠ¤å›¢é˜Ÿï¼šITè¿ç»´é—¨æˆ·ç³»ç»Ÿå¼€å‘å›¢é˜Ÿ

## æ¨¡å—æ€»è§ˆè¡¨

| æ¨¡å—ç¼–å· | æ¨¡å—åç§° | ä¼˜å…ˆçº§ | ä¾èµ–æ¨¡å— | å®ç°çŠ¶æ€ | é¢„ä¼°å·¥æœŸ |
|---------|---------|--------|----------|----------|----------|
| REQ-001 | åŸºç¡€æ¶æ„ä¸è®¤è¯ç³»ç»Ÿ | P0 | æ—  | âœ… åŸºç¡€æ¡†æ¶å®Œæˆ | 2å‘¨ |
| REQ-002 | å·¥ä½œå°ä¸ä»ªè¡¨æ¿ | P0 | REQ-001 | âœ… å®Œæ•´å®ç° | 2å‘¨ |
| REQ-003 | å·¥å•ç®¡ç†ç³»ç»Ÿ | P0 | REQ-001 | âœ… åŠŸèƒ½å®Œæ•´ | 2å‘¨ |
| REQ-004 | æ™ºèƒ½æ´¾å•ç³»ç»Ÿ | P0 | REQ-001, REQ-003, REQ-006 | âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæ•´ | 2å‘¨ |
| REQ-005 | çŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿ | P1 | REQ-001, REQ-003 | âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæ•´ | 2å‘¨ |
| REQ-006 | å·¥ç¨‹å¸ˆç®¡ç†ç³»ç»Ÿ | P1 | REQ-001 | âœ… åŠŸèƒ½æœ€å®Œæ•´ | 2å‘¨ |
| REQ-007 | ç”²æ–¹ç®¡ç†ä¸æŠ¥è¡¨ç³»ç»Ÿ | P1 | REQ-001, REQ-003, REQ-002 | âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæ•´ | 2å‘¨ |
| REQ-008 | ç³»ç»Ÿè®¾ç½®æ¨¡å— | P2 | REQ-001 | âœ… åŠŸèƒ½å®Œæ•´ | 1å‘¨ |
| REQ-009 | è¿ç»´ç®¡ç†æ¨¡å— | P2 | REQ-001, REQ-012 | ğŸ”„ åŸºç¡€æ¡†æ¶å®Œæˆ | 2å‘¨ |
| REQ-010 | ç³»ç»Ÿç®¡ç†æ¨¡å— | P0 | REQ-001 | âœ… åŠŸèƒ½å®Œæ•´ | 1.5å‘¨ |
| REQ-011 | é€šçŸ¥ä¸æ¶ˆæ¯ç³»ç»Ÿ | P1 | REQ-001 | âœ… åŠŸèƒ½å®Œæ•´ | 1.5å‘¨ |
| REQ-012 | ç³»ç»Ÿé›†æˆæ¨¡å— | P1 | REQ-001 | âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæ•´ | 2å‘¨ |
| REQ-013 | æ™ºèƒ½åˆ†æä¸AIåŠŸèƒ½ | P2 | REQ-001, REQ-003 | ğŸ”„ åŸºç¡€æ¡†æ¶å®Œæˆ | 2å‘¨ |
| REQ-014 | å·¥ä½œæµå¼•æ“ç³»ç»Ÿ | P2 | REQ-001, REQ-003 | âœ… åŠŸèƒ½å®Œæ•´ | 2.5å‘¨ |
| REQ-015 | ç”¨æˆ·ä½“éªŒå¢å¼ºç³»ç»Ÿ | P2 | REQ-001 | âœ… åŠŸèƒ½å®Œæ•´ | 1.5å‘¨ |
| REQ-016 | å®¢æˆ·å…³ç³»ç®¡ç†æ¨¡å— | P1 | REQ-001 | âŒ æ–°å¢æ¨¡å— | 2.5å‘¨ |
| REQ-017 | æœåŠ¡ç­‰çº§åè®®ç®¡ç†æ¨¡å— | P1 | REQ-001, REQ-003, REQ-016 | âŒ æ–°å¢æ¨¡å— | 2å‘¨ |
| REQ-018 | è´¢åŠ¡ç®¡ç†æ¨¡å— | P1 | REQ-001, REQ-016, REQ-017 | âŒ æ–°å¢æ¨¡å— | 3å‘¨ |
| REQ-019 | å®¢æˆ·è‡ªåŠ©æœåŠ¡é—¨æˆ· | P2 | REQ-001, REQ-003, REQ-005, REQ-016 | âŒ æ–°å¢æ¨¡å— | 2å‘¨ |

**ç»Ÿè®¡ä¿¡æ¯**ï¼š
- P0æ¨¡å—ï¼š5ä¸ªï¼ˆæ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼‰
- P1æ¨¡å—ï¼š9ä¸ªï¼ˆé‡è¦ä¸šåŠ¡åŠŸèƒ½ï¼‰  
- P2æ¨¡å—ï¼š6ä¸ªï¼ˆæ‰©å±•å¢å¼ºåŠŸèƒ½ï¼‰
- æ€»å¼€å‘å·¥æœŸï¼šçº¦34å‘¨
- å·²å®Œæˆæ¨¡å—ï¼š13ä¸ª
- è¿›è¡Œä¸­æ¨¡å—ï¼š2ä¸ª
- æ–°å¢æ¨¡å—ï¼š4ä¸ª

---

## REQ-001 åŸºç¡€æ¶æ„ä¸è®¤è¯ç³»ç»Ÿ

### 1. ä¸šåŠ¡æè¿°

#### ä¸šåŠ¡èƒŒæ™¯
åœ¨å¤šç§Ÿæˆ·ITè¿ç»´æœåŠ¡åœºæ™¯ä¸­ï¼Œä¼ ç»Ÿçš„è®¤è¯æˆæƒç³»ç»Ÿå­˜åœ¨ä»¥ä¸‹å…³é”®ç—›ç‚¹ï¼š
- **æ•°æ®å®‰å…¨é£é™©**ï¼šä¸åŒå®¢æˆ·æ•°æ®æ··åˆå­˜å‚¨ï¼Œå­˜åœ¨æ•°æ®æ³„éœ²å’Œè¶Šæƒè®¿é—®é£é™©
- **è®¤è¯å¤æ‚æ€§**ï¼šä¾èµ–å¤–éƒ¨è®¤è¯æœåŠ¡å¢åŠ ç³»ç»Ÿå¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬
- **æƒé™ç®¡ç†å›°éš¾**ï¼šç¼ºä¹ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ï¼Œéš¾ä»¥æ»¡è¶³ä¸åŒè§’è‰²çš„è®¿é—®éœ€æ±‚
- **é›†æˆå›°éš¾**ï¼šç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆå¤æ‚ï¼Œç¼ºä¹ç»Ÿä¸€çš„è®¤è¯æ ‡å‡†
- **è¿ç»´æˆæœ¬é«˜**ï¼šå¤šå¥—è®¤è¯ç³»ç»Ÿç»´æŠ¤æˆæœ¬é«˜ï¼Œç®¡ç†å¤æ‚

#### ä¸šåŠ¡ç›®æ ‡
- **æ•°æ®å®‰å…¨æå‡**ï¼šå®ç°100%çš„å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»ï¼Œç¡®ä¿å®¢æˆ·æ•°æ®å®‰å…¨
- **è®¤è¯æ•ˆç‡æå‡**ï¼šå†…ç½®OIDC Providerï¼Œå‡å°‘å¤–éƒ¨ä¾èµ–ï¼Œæå‡è®¤è¯å“åº”é€Ÿåº¦50%
- **æƒé™ç®¡ç†ç²¾ç»†åŒ–**ï¼šå®ç°åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ï¼Œæ”¯æŒç»†ç²’åº¦æƒé™ç®¡ç†
- **é›†æˆæ ‡å‡†åŒ–**ï¼šæä¾›æ ‡å‡†OIDCæ¥å£ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹ç³»ç»Ÿæ— ç¼é›†æˆ
- **è¿ç»´æˆæœ¬é™ä½**ï¼šç»Ÿä¸€è®¤è¯å¹³å°ï¼Œé™ä½ç»´æŠ¤æˆæœ¬30%

#### ä¸šåŠ¡æµç¨‹
```mermaid
graph TD
    A[ç”¨æˆ·è®¿é—®ç³»ç»Ÿ] --> B{æ˜¯å¦å·²è®¤è¯}
    B -->|å¦| C[è·³è½¬åˆ°ç™»å½•é¡µé¢]
    C --> D[ç”¨æˆ·è¾“å…¥å‡­æ®]
    D --> E[OIDC ProvideréªŒè¯]
    E --> F{éªŒè¯æˆåŠŸ}
    F -->|æ˜¯| G[ç”ŸæˆJWTä»¤ç‰Œ]
    F -->|å¦| H[è¿”å›é”™è¯¯ä¿¡æ¯]
    G --> I[è®¾ç½®ç§Ÿæˆ·ä¸Šä¸‹æ–‡]
    I --> J[RBACæƒé™éªŒè¯]
    J --> K[è®¿é—®ä¸šåŠ¡åŠŸèƒ½]
    B -->|æ˜¯| L[éªŒè¯ä»¤ç‰Œæœ‰æ•ˆæ€§]
    L --> I
    H --> C
```

#### ç”¨æˆ·ç”»åƒ
- **ç³»ç»Ÿç®¡ç†å‘˜**ï¼šè´Ÿè´£æ•´ä¸ªç³»ç»Ÿçš„é…ç½®å’Œç®¡ç†ï¼Œæ‹¥æœ‰è·¨ç§Ÿæˆ·çš„æœ€é«˜æƒé™
- **ç§Ÿæˆ·ç®¡ç†å‘˜**ï¼šç®¡ç†ç‰¹å®šç§Ÿæˆ·çš„ç”¨æˆ·å’Œæƒé™ï¼Œæƒé™é™åˆ¶åœ¨ç§Ÿæˆ·èŒƒå›´å†…
- **è¿ç»´å·¥ç¨‹å¸ˆ**ï¼šæ‰§è¡Œæ—¥å¸¸è¿ç»´ä»»åŠ¡ï¼Œéœ€è¦ç›¸åº”çš„åŠŸèƒ½æƒé™å’Œæ•°æ®è®¿é—®æƒé™
- **ç”²æ–¹ç”¨æˆ·**ï¼šæŸ¥çœ‹è¿ç»´æŠ¥å‘Šå’ŒçŠ¶æ€ï¼Œæƒé™ç›¸å¯¹å—é™ï¼Œåªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®

### 2. åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ç¼–å· | åŠŸèƒ½åç§° | ä¼˜å…ˆçº§ | æè¿° |
|---------|---------|--------|------|
| F001-001 | å¤šç§Ÿæˆ·æ•°æ®éš”ç¦» | P0 | å®ç°ç§Ÿæˆ·çº§åˆ«çš„æ•°æ®å®Œå…¨éš”ç¦»ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ |
| F001-002 | OIDC Providerè®¤è¯ | P0 | å†…ç½®OpenID Connectè®¤è¯æœåŠ¡ï¼Œæ”¯æŒæ ‡å‡†åè®® |
| F001-003 | RBACæƒé™æ§åˆ¶ | P0 | åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼Œæ”¯æŒç»†ç²’åº¦æƒé™ç®¡ç† |
| F001-004 | JWTä»¤ç‰Œç®¡ç† | P0 | JWTä»¤ç‰Œç”Ÿæˆã€éªŒè¯ã€åˆ·æ–°å’Œæ’¤é”€ |
| F001-005 | ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆ | P1 | æ”¯æŒç¬¬ä¸‰æ–¹ç³»ç»Ÿé€šè¿‡OIDCåè®®é›†æˆè®¤è¯ |
| F001-006 | å•ç‚¹ç™»å½•(SSO) | P1 | æ”¯æŒè·¨ç³»ç»Ÿçš„å•ç‚¹ç™»å½•åŠŸèƒ½ |
| F001-007 | å¯†ç ç­–ç•¥ç®¡ç† | P1 | å¯é…ç½®çš„å¯†ç å¤æ‚åº¦å’Œè¿‡æœŸç­–ç•¥ |
| F001-008 | å®¡è®¡æ—¥å¿— | P1 | å®Œæ•´çš„è®¤è¯å’Œæˆæƒæ“ä½œå®¡è®¡è®°å½• |

### 3. ä¸šåŠ¡è§„åˆ™

#### å¤šç§Ÿæˆ·éš”ç¦»è§„åˆ™
- æ‰€æœ‰ä¸šåŠ¡æ•°æ®å¿…é¡»åŒ…å«tenant_idå­—æ®µ
- æ•°æ®åº“æŸ¥è¯¢å¿…é¡»è‡ªåŠ¨æ·»åŠ ç§Ÿæˆ·è¿‡æ»¤æ¡ä»¶
- è·¨ç§Ÿæˆ·æ•°æ®è®¿é—®ä¸¥æ ¼ç¦æ­¢ï¼Œé™¤ç³»ç»Ÿç®¡ç†å‘˜å¤–

#### è®¤è¯å®‰å…¨è§„åˆ™
- å¯†ç å¿…é¡»ç¬¦åˆå¤æ‚åº¦è¦æ±‚ï¼ˆ8ä½ä»¥ä¸Šï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼‰
- è¿ç»­ç™»å½•å¤±è´¥5æ¬¡åè´¦å·é”å®š30åˆ†é’Ÿ
- JWTä»¤ç‰Œæœ‰æ•ˆæœŸ8å°æ—¶ï¼Œåˆ·æ–°ä»¤ç‰Œæœ‰æ•ˆæœŸ7å¤©
- æ•æ„Ÿæ“ä½œéœ€è¦é‡æ–°éªŒè¯èº«ä»½

#### æƒé™æ§åˆ¶è§„åˆ™
- æƒé™åŸºäºèµ„æºå’Œæ“ä½œçš„ç»„åˆå®šä¹‰
- è§’è‰²å¯ä»¥ç»§æ‰¿å…¶ä»–è§’è‰²çš„æƒé™
- ç”¨æˆ·å¯ä»¥æ‹¥æœ‰å¤šä¸ªè§’è‰²ï¼Œæƒé™å–å¹¶é›†
- æƒé™å˜æ›´å®æ—¶ç”Ÿæ•ˆï¼Œæ— éœ€é‡æ–°ç™»å½•

### 4. ç”¨æˆ·æ•…äº‹

- **US001-001**: ä½œä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿåˆ›å»ºå’Œç®¡ç†å¤šä¸ªç§Ÿæˆ·ï¼Œä»¥ä¾¿ä¸ºä¸åŒå®¢æˆ·æä¾›ç‹¬ç«‹çš„æœåŠ¡ç¯å¢ƒ
- **US001-002**: ä½œä¸ºç§Ÿæˆ·ç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿç®¡ç†æœ¬ç§Ÿæˆ·çš„ç”¨æˆ·å’Œè§’è‰²ï¼Œä»¥ä¾¿æ§åˆ¶å›¢é˜Ÿæˆå‘˜çš„ç³»ç»Ÿè®¿é—®æƒé™
- **US001-003**: ä½œä¸ºè¿ç»´å·¥ç¨‹å¸ˆï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿä½¿ç”¨ç»Ÿä¸€çš„è´¦å·ç™»å½•æ‰€æœ‰é›†æˆç³»ç»Ÿï¼Œä»¥ä¾¿æé«˜å·¥ä½œæ•ˆç‡
- **US001-004**: ä½œä¸ºç”²æ–¹ç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›åªèƒ½çœ‹åˆ°å±äºæˆ‘ä»¬å…¬å¸çš„æ•°æ®ï¼Œä»¥ä¾¿ç¡®ä¿æ•°æ®å®‰å…¨å’Œéšç§

### 5. ç”¨ä¾‹

#### ç”¨ä¾‹1ï¼šç”¨æˆ·ç™»å½•è®¤è¯
- **Given**: ç”¨æˆ·è®¿é—®ç³»ç»Ÿç™»å½•é¡µé¢
- **When**: ç”¨æˆ·è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åã€å¯†ç å’Œç§Ÿæˆ·ä»£ç 
- **Then**: ç³»ç»ŸéªŒè¯æˆåŠŸå¹¶ç”ŸæˆJWTä»¤ç‰Œï¼Œç”¨æˆ·è¿›å…¥å·¥ä½œå°

#### ç”¨ä¾‹2ï¼šæƒé™éªŒè¯
- **Given**: å·²ç™»å½•ç”¨æˆ·å°è¯•è®¿é—®æŸä¸ªåŠŸèƒ½
- **When**: ç³»ç»Ÿæ£€æŸ¥ç”¨æˆ·çš„è§’è‰²æƒé™
- **Then**: å¦‚æœæœ‰æƒé™åˆ™å…è®¸è®¿é—®ï¼Œå¦åˆ™è¿”å›403é”™è¯¯

#### ç”¨ä¾‹3ï¼šå¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
- **Given**: ç§Ÿæˆ·Açš„ç”¨æˆ·æŸ¥è¯¢å·¥å•åˆ—è¡¨
- **When**: ç³»ç»Ÿæ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢
- **Then**: æŸ¥è¯¢ç»“æœåªåŒ…å«tenant_id=Açš„å·¥å•æ•°æ®

### 6. æ•°æ®æ¨¡å‹

```mermaid
erDiagram
    Tenant {
        id bigint PK
        name varchar
        code varchar UK
        status varchar
        created_at timestamp
        updated_at timestamp
    }

    User {
        id bigint PK
        tenant_id bigint FK
        username varchar UK
        password varchar
        email varchar
        status varchar
        created_at timestamp
        updated_at timestamp
    }

    Role {
        id bigint PK
        tenant_id bigint FK
        name varchar
        code varchar
        description text
        created_at timestamp
        updated_at timestamp
    }

    Permission {
        id bigint PK
        name varchar
        code varchar UK
        resource varchar
        action varchar
        created_at timestamp
    }

    UserRole {
        id bigint PK
        user_id bigint FK
        role_id bigint FK
        created_at timestamp
    }

    RolePermission {
        id bigint PK
        role_id bigint FK
        permission_id bigint FK
        created_at timestamp
    }

    Tenant ||--o{ User : has
    Tenant ||--o{ Role : has
    User ||--o{ UserRole : has
    Role ||--o{ UserRole : belongs_to
    Role ||--o{ RolePermission : has
    Permission ||--o{ RolePermission : belongs_to
```

#### æ•°æ®å­—å…¸

| è¡¨å | å­—æ®µå | ç±»å‹ | é•¿åº¦ | å¿…å¡« | è¯´æ˜ |
|------|--------|------|------|------|------|
| tenant | id | bigint | - | æ˜¯ | ç§Ÿæˆ·ä¸»é”®ID |
| tenant | name | varchar | 100 | æ˜¯ | ç§Ÿæˆ·åç§° |
| tenant | code | varchar | 50 | æ˜¯ | ç§Ÿæˆ·ä»£ç ï¼Œå”¯ä¸€æ ‡è¯† |
| tenant | status | varchar | 20 | æ˜¯ | ç§Ÿæˆ·çŠ¶æ€ï¼šactive/inactive |
| user | id | bigint | - | æ˜¯ | ç”¨æˆ·ä¸»é”®ID |
| user | tenant_id | bigint | - | æ˜¯ | æ‰€å±ç§Ÿæˆ·ID |
| user | username | varchar | 50 | æ˜¯ | ç”¨æˆ·åï¼Œç§Ÿæˆ·å†…å”¯ä¸€ |
| user | password | varchar | 255 | æ˜¯ | åŠ å¯†åçš„å¯†ç  |
| user | email | varchar | 100 | å¦ | é‚®ç®±åœ°å€ |
| user | status | varchar | 20 | æ˜¯ | ç”¨æˆ·çŠ¶æ€ï¼šactive/inactive/locked |

### 7. APIè§„èŒƒ

#### ç”¨æˆ·è®¤è¯API
- **URL**: `POST /api/v1/auth/login`
- **Method**: POST
- **è¯·æ±‚å‚æ•°**:
```json
{
  "username": "string",
  "password": "string", 
  "tenantCode": "string"
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "accessToken": "jwt_token",
    "refreshToken": "refresh_token", 
    "expiresIn": 28800,
    "userInfo": {
      "id": 1,
      "username": "admin",
      "tenantId": 1,
      "roles": ["admin"]
    }
  }
}
```
- **å¿…å¡«éªŒè¯**: usernameã€passwordã€tenantCodeä¸ºå¿…å¡«å­—æ®µ

#### æƒé™éªŒè¯API
- **URL**: `POST /api/v1/auth/verify`
- **Method**: POST
- **è¯·æ±‚å‚æ•°**:
```json
{
  "resource": "string",
  "action": "string"
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success", 
  "data": {
    "hasPermission": true
  }
}
```

### 8. éåŠŸèƒ½éœ€æ±‚

#### æ€§èƒ½è¦æ±‚
- è®¤è¯å“åº”æ—¶é—´ï¼šP95 â‰¤ 200msï¼ŒP99 â‰¤ 300ms
- å¹¶å‘è®¤è¯æ”¯æŒï¼šâ‰¥ 1000 TPS
- ä»¤ç‰ŒéªŒè¯å“åº”æ—¶é—´ï¼šâ‰¤ 50ms

#### å¯ç”¨æ€§è¦æ±‚
- ç³»ç»Ÿå¯ç”¨æ€§ï¼šâ‰¥ 99.9%
- æ•…éšœæ¢å¤æ—¶é—´ï¼šâ‰¤ 5åˆ†é’Ÿ
- æ•°æ®å¤‡ä»½é¢‘ç‡ï¼šæ¯æ—¥å¤‡ä»½

#### å®‰å…¨è¦æ±‚
- æ•°æ®éš”ç¦»ç‡ï¼šâ‰¥ 99.99%
- å¯†ç åŠ å¯†ï¼šBCryptç®—æ³•
- ä¼ è¾“åŠ å¯†ï¼šTLS 1.3
- å®¡è®¡æ—¥å¿—å®Œæ•´æ€§ï¼š100%

#### æ‰©å±•æ€§è¦æ±‚
- æ”¯æŒç§Ÿæˆ·æ•°é‡ï¼šâ‰¥ 1000ä¸ª
- æ”¯æŒç”¨æˆ·æ•°é‡ï¼šâ‰¥ 100,000ä¸ª
- æ°´å¹³æ‰©å±•èƒ½åŠ›ï¼šæ”¯æŒé›†ç¾¤éƒ¨ç½²

### 9. éªŒæ”¶æ ‡å‡†

#### åŠŸèƒ½éªŒæ”¶æ ‡å‡†
- å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»æµ‹è¯•é€šè¿‡ç‡100%
- è®¤è¯åŠŸèƒ½æµ‹è¯•é€šè¿‡ç‡100%
- æƒé™æ§åˆ¶æµ‹è¯•é€šè¿‡ç‡100%
- ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆæµ‹è¯•é€šè¿‡ç‡100%

#### æ€§èƒ½éªŒæ”¶æ ‡å‡†
- è®¤è¯å“åº”æ—¶é—´è¾¾æ ‡ç‡â‰¥95%
- å¹¶å‘è®¤è¯å‹åŠ›æµ‹è¯•é€šè¿‡
- ç³»ç»Ÿå¯ç”¨æ€§ç›‘æ§è¾¾æ ‡

#### å®‰å…¨éªŒè¯æ ‡å‡†
- å®‰å…¨æ¼æ´æ‰«æ0é«˜å±æ¼æ´
- æ¸—é€æµ‹è¯•é€šè¿‡
- æ•°æ®éš”ç¦»éªŒè¯é€šè¿‡

### 10. ä¾èµ–ä¸çº¦æŸ

#### æŠ€æœ¯ä¾èµ–
- Spring Security 6.2.1
- JWTåº“ï¼šjjwt 0.11.5
- æ•°æ®åº“ï¼šPostgreSQL 15.5
- ç¼“å­˜ï¼šRedis 7.2.4

#### ä¸šåŠ¡çº¦æŸ
- å¿…é¡»ç¬¦åˆç­‰ä¿ä¸‰çº§å®‰å…¨è¦æ±‚
- å¿…é¡»æ”¯æŒOIDC 1.0æ ‡å‡†
- å¿…é¡»æ”¯æŒOAuth 2.0åè®®
- ç§Ÿæˆ·æ•°æ®å¿…é¡»å®Œå…¨éš”ç¦»

#### å®æ–½çº¦æŸ
- ä½œä¸ºæ‰€æœ‰å…¶ä»–æ¨¡å—çš„åŸºç¡€ä¾èµ–
- å¿…é¡»åœ¨å…¶ä»–æ¨¡å—å¼€å‘å‰å®Œæˆ
- éœ€è¦ä¸ç°æœ‰ç³»ç»Ÿä¿æŒå…¼å®¹

---

## REQ-002 å·¥ä½œå°ä¸ä»ªè¡¨æ¿

### 1. ä¸šåŠ¡æè¿°

#### ä¸šåŠ¡èƒŒæ™¯
åœ¨ITè¿ç»´ç®¡ç†ä¸­ï¼Œè¿ç»´äººå‘˜å’Œç®¡ç†è€…éœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„å·¥ä½œå°æ¥ç®¡ç†æ—¥å¸¸å·¥ä½œï¼ŒåŒ…æ‹¬æŸ¥çœ‹ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ã€å¤„ç†å·¥ä½œæµå®¡æ‰¹ã€ç®¡ç†ä¸ªäººä»»åŠ¡å’Œæ¥æ”¶æ¶ˆæ¯é€šçŸ¥ã€‚ä¼ ç»Ÿçš„è¿ç»´ç®¡ç†ç³»ç»Ÿå­˜åœ¨ä»¥ä¸‹ç—›ç‚¹ï¼š
- **ä¿¡æ¯åˆ†æ•£**ï¼šå…³é”®è¿ç»´æ•°æ®ã€ä»»åŠ¡ã€æ¶ˆæ¯åˆ†å¸ƒåœ¨ä¸åŒç³»ç»Ÿä¸­ï¼Œç¼ºä¹ç»Ÿä¸€è§†å›¾
- **å·¥ä½œæµç¨‹å¤æ‚**ï¼šå®¡æ‰¹æµç¨‹ä¸å¤Ÿç›´è§‚ï¼Œç¼ºä¹å¯è§†åŒ–çš„æµç¨‹ç®¡ç†å·¥å…·
- **ä»»åŠ¡ç®¡ç†æ··ä¹±**ï¼šä¸ªäººä»»åŠ¡åˆ†æ•£åœ¨å„ä¸ªç³»ç»Ÿä¸­ï¼Œéš¾ä»¥ç»Ÿä¸€è·Ÿè¸ªå’Œç®¡ç†
- **æ¶ˆæ¯é€šçŸ¥æ»å**ï¼šé‡è¦é€šçŸ¥ä¸èƒ½åŠæ—¶åˆ°è¾¾ï¼Œå½±å“å·¥ä½œæ•ˆç‡
- **å®æ—¶æ€§å·®**ï¼šæ•°æ®æ›´æ–°ä¸åŠæ—¶ï¼Œå½±å“å†³ç­–æ•ˆç‡

#### ä¸šåŠ¡ç›®æ ‡
- **ç»Ÿä¸€å·¥ä½œå°**ï¼šæä¾›ä¸€ç«™å¼å·¥ä½œå¹³å°ï¼Œé›†æˆä»ªè¡¨æ¿ã€å·¥ä½œæµã€ä»»åŠ¡ã€æ¶ˆæ¯ç­‰åŠŸèƒ½
- **é«˜æ•ˆå®¡æ‰¹**ï¼šé€šè¿‡å¯è§†åŒ–å·¥ä½œæµç®¡ç†ï¼Œæå‡å®¡æ‰¹æ•ˆç‡å’Œæµç¨‹é€æ˜åº¦
- **ä»»åŠ¡ååŒ**ï¼šç»Ÿä¸€çš„ä»»åŠ¡ç®¡ç†å¹³å°ï¼Œæ”¯æŒä»»åŠ¡åˆ†é…ã€è·Ÿè¸ªå’Œåä½œ
- **åŠæ—¶é€šçŸ¥**ï¼šå®æ—¶æ¶ˆæ¯æ¨é€å’Œé€šçŸ¥ç®¡ç†ï¼Œç¡®ä¿é‡è¦ä¿¡æ¯åŠæ—¶ä¼ è¾¾
- **ç»Ÿä¸€è§†å›¾**ï¼šæä¾›è¿ç»´å…¨æ™¯æ¦‚è§ˆï¼Œä¸€å±æŒæ¡å…³é”®æŒ‡æ ‡

#### ä¸šåŠ¡æµç¨‹
```mermaid
graph TD
    A[ç”¨æˆ·ç™»å½•ç³»ç»Ÿ] --> B[åŠ è½½ä¸ªäººä»ªè¡¨æ¿]
    B --> C[å±•ç¤ºç»Ÿè®¡å¡ç‰‡]
    C --> D[åŠ è½½å›¾è¡¨æ•°æ®]
    D --> E[æ˜¾ç¤ºå®æ—¶çŠ¶æ€]
    E --> F[å¯åŠ¨æ•°æ®åˆ·æ–°]
    F --> G{ç”¨æˆ·æ“ä½œ}
    G -->|ç‚¹å‡»ç»Ÿè®¡å¡ç‰‡| H[è·³è½¬è¯¦ç»†é¡µé¢]
    G -->|åˆ·æ–°æ•°æ®| I[é‡æ–°åŠ è½½æ•°æ®]
    G -->|å¯¼å‡ºæŠ¥å‘Š| J[ç”ŸæˆæŠ¥å‘Šæ–‡ä»¶]
    G -->|åˆ‡æ¢ç§Ÿæˆ·| K[æ›´æ–°ç§Ÿæˆ·æ•°æ®]
    I --> C
    J --> L[ä¸‹è½½æŠ¥å‘Š]
    K --> B
```

#### ç”¨æˆ·ç”»åƒ
- **ç³»ç»Ÿç®¡ç†å‘˜**ï¼šéœ€è¦æŸ¥çœ‹å…¨å±€è¿ç»´çŠ¶æ€ï¼Œå…³æ³¨ç³»ç»Ÿæ€§èƒ½å’Œèµ„æºä½¿ç”¨ï¼Œç®¡ç†ç³»ç»Ÿçº§å·¥ä½œæµç¨‹
- **ç§Ÿæˆ·ç®¡ç†å‘˜**ï¼šå…³æ³¨æœ¬ç§Ÿæˆ·çš„å·¥å•å¤„ç†æƒ…å†µå’ŒæœåŠ¡è´¨é‡æŒ‡æ ‡ï¼Œå®¡æ‰¹ç§Ÿæˆ·å†…éƒ¨ç”³è¯·
- **è¿ç»´å·¥ç¨‹å¸ˆ**ï¼šéœ€è¦å¿«é€Ÿäº†è§£å¾…å¤„ç†å·¥å•å’Œå½“å‰ä»»åŠ¡çŠ¶æ€ï¼Œå¤„ç†æ—¥å¸¸è¿ç»´ä»»åŠ¡å’Œæ¶ˆæ¯
- **ç”²æ–¹ç”¨æˆ·**ï¼šæŸ¥çœ‹æœåŠ¡æ¦‚è§ˆå’ŒSLAè¾¾æˆæƒ…å†µï¼Œè·Ÿè¸ªæœåŠ¡è¯·æ±‚è¿›åº¦

### 2. åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ç¼–å· | åŠŸèƒ½åç§° | ä¼˜å…ˆçº§ | æè¿° |
|---------|---------|--------|------|
| F002-001 | è¿ç»´ä»ªè¡¨æ¿ | P0 | å±•ç¤ºå…³é”®è¿ç»´æŒ‡æ ‡å’Œç»Ÿè®¡æ•°æ®çš„å¯è§†åŒ–ä»ªè¡¨æ¿ |
| F002-002 | ç»Ÿè®¡å¡ç‰‡ | P0 | æ˜¾ç¤ºå·¥å•æ•°é‡ã€SLAè¾¾æˆç‡ç­‰å…³é”®æŒ‡æ ‡çš„å¡ç‰‡ç»„ä»¶ |
| F002-003 | å›¾è¡¨å±•ç¤º | P0 | å·¥å•è¶‹åŠ¿å›¾ã€åˆ†ç±»åˆ†å¸ƒå›¾ç­‰æ•°æ®å¯è§†åŒ–å›¾è¡¨ |
| F002-004 | å®æ—¶æ•°æ®åˆ·æ–° | P0 | 30ç§’è‡ªåŠ¨åˆ·æ–°æœºåˆ¶ï¼Œä¿è¯æ•°æ®å®æ—¶æ€§ |
| F002-005 | æˆ‘çš„ä»»åŠ¡ | P1 | ä¸ªäººä»»åŠ¡ç®¡ç†ï¼ŒåŒ…æ‹¬ä»»åŠ¡åˆ—è¡¨ã€çŠ¶æ€è·Ÿè¸ªã€æ“ä½œå¤„ç† |
| F002-006 | å·¥ä½œæµå®¡æ‰¹ | P1 | å¯è§†åŒ–å·¥ä½œæµå®¡æ‰¹ç•Œé¢ï¼Œæ”¯æŒå®¡æ‰¹æ“ä½œå’Œæµç¨‹è·Ÿè¸ª |
| F002-007 | æ¶ˆæ¯ä¸­å¿ƒ | P1 | ç»Ÿä¸€çš„æ¶ˆæ¯é€šçŸ¥ç®¡ç†ï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯ç±»å‹å’ŒçŠ¶æ€ |
| F002-008 | æŠ¥å‘Šå¯¼å‡º | P1 | æ”¯æŒä»ªè¡¨æ¿æ•°æ®å¯¼å‡ºä¸ºPDFã€Excelç­‰æ ¼å¼ |
| F002-009 | ä¸ªæ€§åŒ–é…ç½® | P2 | æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ä»ªè¡¨æ¿å¸ƒå±€å’Œç»„ä»¶é…ç½® |
| F002-010 | ç§»åŠ¨ç«¯é€‚é… | P2 | å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨è®¾å¤‡è®¿é—® |

### 3. ä¸šåŠ¡è§„åˆ™

#### æ•°æ®åˆ·æ–°è§„åˆ™
- ä»ªè¡¨æ¿æ•°æ®æ¯30ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡
- ç”¨æˆ·å¯æ‰‹åŠ¨è§¦å‘æ•°æ®åˆ·æ–°ï¼Œæœ€å°é—´éš”5ç§’
- å®æ—¶çŠ¶æ€æ•°æ®æ¯10ç§’æ›´æ–°ä¸€æ¬¡
- å›¾è¡¨æ•°æ®æ”¯æŒå†å²æ—¶é—´èŒƒå›´é€‰æ‹©

#### æƒé™æ§åˆ¶è§„åˆ™
- ç”¨æˆ·åªèƒ½æŸ¥çœ‹æœ‰æƒé™çš„æ•°æ®å’ŒåŠŸèƒ½æ¨¡å—
- ç§Ÿæˆ·ç®¡ç†å‘˜åªèƒ½æŸ¥çœ‹æœ¬ç§Ÿæˆ·çš„æ•°æ®
- ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç§Ÿæˆ·çš„æ±‡æ€»æ•°æ®
- æ•æ„Ÿæ•°æ®éœ€è¦é¢å¤–æƒé™éªŒè¯

#### ä»»åŠ¡ç®¡ç†è§„åˆ™
- ä»»åŠ¡çŠ¶æ€åŒ…æ‹¬ï¼šå¾…å¤„ç†ã€è¿›è¡Œä¸­ã€å·²å®Œæˆã€å·²å–æ¶ˆ
- ä»»åŠ¡ä¼˜å…ˆçº§åˆ†ä¸ºï¼šç´§æ€¥ã€é«˜ã€ä¸­ã€ä½å››ä¸ªçº§åˆ«
- ä»»åŠ¡å¯ä»¥åˆ†é…ç»™ä¸ªäººæˆ–å›¢é˜Ÿ
- ä»»åŠ¡å®Œæˆéœ€è¦ç›¸å…³äººå‘˜ç¡®è®¤

### 4. ç”¨æˆ·æ•…äº‹

- **US002-001**: ä½œä¸ºè¿ç»´å·¥ç¨‹å¸ˆï¼Œæˆ‘å¸Œæœ›åœ¨ä»ªè¡¨æ¿ä¸Šå¿«é€ŸæŸ¥çœ‹å½“å‰å¾…å¤„ç†å·¥å•æ•°é‡ï¼Œä»¥ä¾¿åˆç†å®‰æ’å·¥ä½œä¼˜å…ˆçº§
- **US002-002**: ä½œä¸ºç§Ÿæˆ·ç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤ŸæŸ¥çœ‹æœ¬ç§Ÿæˆ·çš„SLAè¾¾æˆæƒ…å†µï¼Œä»¥ä¾¿è¯„ä¼°æœåŠ¡è´¨é‡
- **US002-003**: ä½œä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤ŸæŸ¥çœ‹ç³»ç»Ÿæ•´ä½“è¿è¡ŒçŠ¶æ€ï¼Œä»¥ä¾¿åŠæ—¶å‘ç°å’Œå¤„ç†å¼‚å¸¸
- **US002-004**: ä½œä¸ºæ™®é€šç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿåœ¨ç§»åŠ¨è®¾å¤‡ä¸ŠæŸ¥çœ‹æˆ‘çš„ä»»åŠ¡åˆ—è¡¨ï¼Œä»¥ä¾¿éšæ—¶äº†è§£å·¥ä½œè¿›åº¦

### 5. ç”¨ä¾‹

#### ç”¨ä¾‹1ï¼šæŸ¥çœ‹è¿ç»´ä»ªè¡¨æ¿
- **Given**: ç”¨æˆ·å·²ç™»å½•ç³»ç»Ÿå¹¶æœ‰ä»ªè¡¨æ¿è®¿é—®æƒé™
- **When**: ç”¨æˆ·è®¿é—®å·¥ä½œå°é¡µé¢
- **Then**: ç³»ç»Ÿæ˜¾ç¤ºä¸ªæ€§åŒ–çš„è¿ç»´ä»ªè¡¨æ¿ï¼ŒåŒ…å«ç»Ÿè®¡å¡ç‰‡ã€å›¾è¡¨å’Œå®æ—¶çŠ¶æ€

#### ç”¨ä¾‹2ï¼šå¤„ç†ä¸ªäººä»»åŠ¡
- **Given**: ç”¨æˆ·æœ‰å¾…å¤„ç†çš„ä»»åŠ¡
- **When**: ç”¨æˆ·åœ¨æˆ‘çš„ä»»åŠ¡é¡µé¢ç‚¹å‡»æŸä¸ªä»»åŠ¡
- **Then**: ç³»ç»Ÿæ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…å¯¹è¯æ¡†ï¼Œç”¨æˆ·å¯ä»¥æ›´æ–°ä»»åŠ¡çŠ¶æ€æˆ–æ·»åŠ å¤„ç†è®°å½•

#### ç”¨ä¾‹3ï¼šå¯¼å‡ºè¿ç»´æŠ¥å‘Š
- **Given**: ç”¨æˆ·åœ¨ä»ªè¡¨æ¿é¡µé¢
- **When**: ç”¨æˆ·ç‚¹å‡»å¯¼å‡ºæŠ¥å‘ŠæŒ‰é’®å¹¶é€‰æ‹©å¯¼å‡ºæ ¼å¼
- **Then**: ç³»ç»Ÿç”ŸæˆåŒ…å«å½“å‰ä»ªè¡¨æ¿æ•°æ®çš„æŠ¥å‘Šæ–‡ä»¶ä¾›ç”¨æˆ·ä¸‹è½½

### 6. æ•°æ®æ¨¡å‹

```mermaid
erDiagram
    Dashboard {
        id bigint PK
        user_id bigint FK
        tenant_id bigint FK
        layout_config text
        created_at timestamp
        updated_at timestamp
    }

    DashboardWidget {
        id bigint PK
        dashboard_id bigint FK
        widget_type varchar
        widget_config text
        position_x int
        position_y int
        width int
        height int
        created_at timestamp
    }

    Task {
        id bigint PK
        tenant_id bigint FK
        title varchar
        description text
        status varchar
        priority varchar
        assigned_to bigint FK
        created_by bigint FK
        due_date timestamp
        created_at timestamp
        updated_at timestamp
    }

    TaskLog {
        id bigint PK
        task_id bigint FK
        user_id bigint FK
        action varchar
        comment text
        created_at timestamp
    }

    StatisticsData {
        id bigint PK
        tenant_id bigint FK
        metric_name varchar
        metric_value decimal
        metric_date date
        created_at timestamp
    }

    Dashboard ||--o{ DashboardWidget : contains
    Task ||--o{ TaskLog : has
    User ||--o{ Dashboard : owns
    User ||--o{ Task : assigned
    Tenant ||--o{ Dashboard : belongs_to
    Tenant ||--o{ Task : belongs_to
    Tenant ||--o{ StatisticsData : belongs_to
```

#### æ•°æ®å­—å…¸

| è¡¨å | å­—æ®µå | ç±»å‹ | é•¿åº¦ | å¿…å¡« | è¯´æ˜ |
|------|--------|------|------|------|------|
| dashboard | id | bigint | - | æ˜¯ | ä»ªè¡¨æ¿ä¸»é”®ID |
| dashboard | user_id | bigint | - | æ˜¯ | ç”¨æˆ·ID |
| dashboard | tenant_id | bigint | - | æ˜¯ | ç§Ÿæˆ·ID |
| dashboard | layout_config | text | - | å¦ | å¸ƒå±€é…ç½®JSON |
| dashboard_widget | id | bigint | - | æ˜¯ | ç»„ä»¶ä¸»é”®ID |
| dashboard_widget | widget_type | varchar | 50 | æ˜¯ | ç»„ä»¶ç±»å‹ï¼šchart/card/list |
| dashboard_widget | widget_config | text | - | å¦ | ç»„ä»¶é…ç½®JSON |
| task | id | bigint | - | æ˜¯ | ä»»åŠ¡ä¸»é”®ID |
| task | status | varchar | 20 | æ˜¯ | ä»»åŠ¡çŠ¶æ€ï¼špending/in_progress/completed/cancelled |
| task | priority | varchar | 20 | æ˜¯ | ä¼˜å…ˆçº§ï¼šurgent/high/medium/low |

### 7. APIè§„èŒƒ

#### è·å–ä»ªè¡¨æ¿æ•°æ®API
- **URL**: `GET /api/v1/dashboard/overview`
- **Method**: GET
- **è¯·æ±‚å‚æ•°**:
```json
{
  "tenantId": "number",
  "dateRange": "string"
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "statistics": {
      "totalTickets": 150,
      "resolvedTickets": 120,
      "pendingTickets": 30,
      "slaAchievementRate": 95.5
    },
    "charts": {
      "ticketTrend": [...],
      "categoryDistribution": [...]
    },
    "realTimeStatus": {
      "onlineUsers": 25,
      "systemLoad": 65.2,
      "memoryUsage": 78.5
    }
  }
}
```

#### è·å–æˆ‘çš„ä»»åŠ¡API
- **URL**: `GET /api/v1/tasks/my-tasks`
- **Method**: GET
- **è¯·æ±‚å‚æ•°**:
```json
{
  "page": 1,
  "size": 20,
  "status": "string",
  "priority": "string"
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 50,
    "items": [
      {
        "id": 1,
        "title": "ç³»ç»Ÿç»´æŠ¤ä»»åŠ¡",
        "description": "å®šæœŸç³»ç»Ÿç»´æŠ¤",
        "status": "pending",
        "priority": "high",
        "dueDate": "2025-08-15T10:00:00Z",
        "createdAt": "2025-08-10T09:00:00Z"
      }
    ]
  }
}
```

#### å¯¼å‡ºæŠ¥å‘ŠAPI
- **URL**: `POST /api/v1/dashboard/export`
- **Method**: POST
- **è¯·æ±‚å‚æ•°**:
```json
{
  "format": "pdf",
  "dateRange": "last_7_days",
  "includeCharts": true
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "downloadUrl": "/api/v1/files/download/report_20250810.pdf",
    "expiresAt": "2025-08-11T10:00:00Z"
  }
}
```

### 8. éåŠŸèƒ½éœ€æ±‚

#### æ€§èƒ½è¦æ±‚
- é¡µé¢åŠ è½½æ—¶é—´ï¼šé¦–å± â‰¤ 1.5ç§’ï¼Œå®Œæ•´ â‰¤ 2ç§’ï¼ˆP95ï¼‰
- æ•°æ®åˆ·æ–°å»¶è¿Ÿï¼šâ‰¤ 10ç§’
- å›¾è¡¨æ¸²æŸ“æ—¶é—´ï¼šâ‰¤ 500ms
- å¹¶å‘ç”¨æˆ·æ”¯æŒï¼šâ‰¥ 500ä¸ª

#### å¯ç”¨æ€§è¦æ±‚
- ç³»ç»Ÿå¯ç”¨æ€§ï¼šâ‰¥ 99.5%
- ç§»åŠ¨ç«¯é€‚é…ç‡ï¼šâ‰¥ 98%
- æµè§ˆå™¨å…¼å®¹æ€§ï¼šChrome 90+, Firefox 88+, Safari 14+

#### ç”¨æˆ·ä½“éªŒè¦æ±‚
- ç•Œé¢å“åº”æ—¶é—´ï¼šâ‰¤ 200ms
- æ“ä½œæˆåŠŸç‡ï¼šâ‰¥ 99%
- ç”¨æˆ·åœç•™æ—¶é—´ï¼šâ‰¥ 5åˆ†é’Ÿ
- åŠŸèƒ½ä½¿ç”¨ç‡ï¼šæ ¸å¿ƒç»„ä»¶ â‰¥ 80%

### 9. éªŒæ”¶æ ‡å‡†

#### åŠŸèƒ½éªŒæ”¶æ ‡å‡†
- ä»ªè¡¨æ¿æ‰€æœ‰ç»„ä»¶æ­£å¸¸æ˜¾ç¤ºå’Œäº¤äº’
- æ•°æ®åˆ·æ–°æœºåˆ¶æ­£å¸¸å·¥ä½œ
- ä»»åŠ¡ç®¡ç†åŠŸèƒ½å®Œæ•´å¯ç”¨
- æŠ¥å‘Šå¯¼å‡ºåŠŸèƒ½æ­£å¸¸
- ç§»åŠ¨ç«¯é€‚é…å®Œå…¨å…¼å®¹

#### æ€§èƒ½éªŒæ”¶æ ‡å‡†
- é¡µé¢åŠ è½½æ—¶é—´è¾¾æ ‡ç‡ â‰¥ 95%
- æ•°æ®åˆ·æ–°å»¶è¿Ÿè¾¾æ ‡ç‡ â‰¥ 99%
- å¹¶å‘å‹åŠ›æµ‹è¯•é€šè¿‡

#### ç”¨æˆ·ä½“éªŒéªŒæ”¶æ ‡å‡†
- ç”¨æˆ·æ»¡æ„åº¦è°ƒç ” â‰¥ 4.5/5
- åŠŸèƒ½ä½¿ç”¨ç‡è¾¾æ ‡
- ç§»åŠ¨ç«¯å…¼å®¹æ€§æµ‹è¯•é€šè¿‡

### 10. ä¾èµ–ä¸çº¦æŸ

#### æŠ€æœ¯ä¾èµ–
- Vue 3.4.15 + Composition API
- Element Plus 2.4.4
- ECharts 5.4 + Vue-ECharts 6.6
- WebSocketï¼ˆå®æ—¶æ•°æ®æ¨é€ï¼‰

#### æ¨¡å—ä¾èµ–
- REQ-001ï¼šåŸºç¡€æ¶æ„ä¸è®¤è¯ç³»ç»Ÿï¼ˆç”¨æˆ·è®¤è¯å’Œæƒé™æ§åˆ¶ï¼‰
- REQ-003ï¼šå·¥å•ç®¡ç†ç³»ç»Ÿï¼ˆå·¥å•æ•°æ®æ¥æºï¼‰
- REQ-011ï¼šé€šçŸ¥ä¸æ¶ˆæ¯ç³»ç»Ÿï¼ˆæ¶ˆæ¯ä¸­å¿ƒåŠŸèƒ½ï¼‰

#### ä¸šåŠ¡çº¦æŸ
- å¿…é¡»æ”¯æŒå¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
- å¿…é¡»æ”¯æŒä¸ªæ€§åŒ–é…ç½®
- å¿…é¡»æ”¯æŒç§»åŠ¨ç«¯è®¿é—®
- æ•°æ®å±•ç¤ºå¿…é¡»å®æ—¶å‡†ç¡®

---

## REQ-003 å·¥å•ç®¡ç†ç³»ç»Ÿ

### 1. ä¸šåŠ¡æè¿°

#### ä¸šåŠ¡èƒŒæ™¯
åœ¨å¤šç§Ÿæˆ·ITè¿ç»´æœåŠ¡åœºæ™¯ä¸­ï¼Œå·¥å•ç®¡ç†æ˜¯æ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼Œä¼ ç»Ÿå·¥å•ç®¡ç†å­˜åœ¨ä»¥ä¸‹å…³é”®ç—›ç‚¹ï¼š
- **æµç¨‹ä¸è§„èŒƒ**ï¼šç¼ºä¹æ ‡å‡†åŒ–çš„å·¥å•å¤„ç†æµç¨‹ï¼Œå¤„ç†è´¨é‡å‚å·®ä¸é½
- **å“åº”æ—¶é—´é•¿**ï¼šå·¥å•å“åº”å’Œå¤„ç†æ—¶é—´é•¿ï¼Œå½±å“å®¢æˆ·æ»¡æ„åº¦å’ŒSLAè¾¾æˆ
- **è·Ÿè¸ªå›°éš¾**ï¼šå·¥å•çŠ¶æ€æ›´æ–°ä¸åŠæ—¶ï¼Œè¿›åº¦è·Ÿè¸ªå›°éš¾ï¼Œç¼ºä¹é€æ˜åº¦
- **çŸ¥è¯†æ²‰æ·€ä¸è¶³**ï¼šå¤„ç†ç»éªŒéš¾ä»¥ç§¯ç´¯å’Œå¤ç”¨ï¼Œé‡å¤æ€§é—®é¢˜é¢‘å‘
- **å¤šç§Ÿæˆ·ç®¡ç†å¤æ‚**ï¼šä¸åŒå®¢æˆ·çš„å·¥å•æ··åˆç®¡ç†ï¼Œæ•°æ®å®‰å…¨é£é™©é«˜

#### ä¸šåŠ¡ç›®æ ‡
- **æµç¨‹æ ‡å‡†åŒ–**ï¼šå»ºç«‹æ ‡å‡†åŒ–çš„å·¥å•å¤„ç†æµç¨‹ï¼Œæå‡æœåŠ¡è´¨é‡ä¸€è‡´æ€§
- **å“åº”æ—¶é—´ç¼©çŸ­**ï¼šå·¥å•å¹³å‡å“åº”æ—¶é—´ä»4å°æ—¶ç¼©çŸ­åˆ°30åˆ†é’Ÿ
- **å¤„ç†æ•ˆç‡æå‡**ï¼šå·¥å•å¹³å‡å¤„ç†æ—¶é—´ç¼©çŸ­30%ï¼Œæå‡è¿ç»´æ•ˆç‡
- **SLAè¾¾æˆç‡æå‡**ï¼šSLAè¾¾æˆç‡ä»70%æå‡åˆ°95%ä»¥ä¸Š
- **å®¢æˆ·æ»¡æ„åº¦æå‡**ï¼šå®¢æˆ·æ»¡æ„åº¦ä»75%æå‡åˆ°90%ä»¥ä¸Š

#### ä¸šåŠ¡æµç¨‹
```mermaid
graph TD
    A[å·¥å•åˆ›å»º] --> B[è‡ªåŠ¨åˆ†ç±»æ ‡ç­¾]
    B --> C[ä¼˜å…ˆçº§è¯„ä¼°]
    C --> D[æ™ºèƒ½æ´¾å•]
    D --> E[å·¥ç¨‹å¸ˆæ¥å•]
    E --> F[é—®é¢˜è¯Šæ–­]
    F --> G[AIçŸ¥è¯†æ¨è]
    G --> H[è§£å†³æ–¹æ¡ˆåˆ¶å®š]
    H --> I[æ–¹æ¡ˆå®æ–½]
    I --> J[æµ‹è¯•éªŒè¯]
    J --> K[å®¢æˆ·ç¡®è®¤]
    K --> L{æ˜¯å¦æ»¡æ„}
    L -->|æ˜¯| M[å·¥å•å…³é—­]
    L -->|å¦| N[é‡æ–°å¤„ç†]
    M --> O[çŸ¥è¯†æ²‰æ·€]
    N --> F
    O --> P[ç»éªŒæ€»ç»“]
```

#### ç”¨æˆ·ç”»åƒ
- **ç”²æ–¹ç”¨æˆ·**ï¼šæäº¤å·¥å•ï¼Œè·Ÿè¸ªå¤„ç†è¿›åº¦ï¼Œè¯„ä»·æœåŠ¡è´¨é‡ï¼ŒæŸ¥çœ‹æœåŠ¡æŠ¥å‘Š
- **è¿ç»´å·¥ç¨‹å¸ˆ**ï¼šæ¥æ”¶å’Œå¤„ç†å·¥å•ï¼Œæ›´æ–°å¤„ç†è¿›åº¦ï¼Œè®°å½•è§£å†³æ–¹æ¡ˆ
- **ç§Ÿæˆ·ç®¡ç†å‘˜**ï¼šç›‘æ§æœ¬ç§Ÿæˆ·å·¥å•å¤„ç†æƒ…å†µï¼Œç®¡ç†SLAï¼ŒæŸ¥çœ‹ç»Ÿè®¡æŠ¥è¡¨
- **ç³»ç»Ÿç®¡ç†å‘˜**ï¼šå…¨å±€å·¥å•ç›‘æ§ï¼Œç³»ç»Ÿé…ç½®ç®¡ç†ï¼Œè·¨ç§Ÿæˆ·æ•°æ®åˆ†æ

### 2. åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ç¼–å· | åŠŸèƒ½åç§° | ä¼˜å…ˆçº§ | æè¿° |
|---------|---------|--------|------|
| F003-001 | å·¥å•CRUDæ“ä½œ | P0 | åˆ›å»ºã€æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤å·¥å•çš„åŸºæœ¬æ“ä½œ |
| F003-002 | å·¥å•çŠ¶æ€ç®¡ç† | P0 | å·¥å•çŠ¶æ€æµè½¬ã€æ‰¹é‡çŠ¶æ€æ›´æ–° |
| F003-003 | å·¥å•åˆ†é…ç®¡ç† | P0 | æ‰‹åŠ¨åˆ†é…ã€è‡ªåŠ¨åˆ†é…ã€æ‰¹é‡åˆ†é…å·¥å• |
| F003-004 | å·¥å•æœç´¢ç­›é€‰ | P0 | å¤šç»´åº¦ç­›é€‰ã€å…³é”®è¯æœç´¢ã€é«˜çº§æœç´¢ |
| F003-005 | å·¥å•ç»Ÿè®¡åˆ†æ | P0 | ç»Ÿè®¡å¡ç‰‡ã€å›¾è¡¨å±•ç¤ºã€è¶‹åŠ¿åˆ†æ |
| F003-006 | SLAç›‘æ§ç®¡ç† | P0 | SLAè®¾ç½®ã€ç›‘æ§ã€å‘Šè­¦ã€è¾¾æˆç‡ç»Ÿè®¡ |
| F003-007 | é™„ä»¶ç®¡ç† | P1 | æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€é¢„è§ˆã€ç—…æ¯’æ‰«æ |
| F003-008 | å¤„ç†è®°å½• | P1 | æ“ä½œæ—¥å¿—ã€å¤„ç†å†å²ã€æ—¶é—´çº¿å±•ç¤º |
| F003-009 | AIæ™ºèƒ½åˆ†æ | P1 | AIåˆ†æå¼€å…³ã€æ™ºèƒ½å»ºè®®ã€è‡ªåŠ¨åˆ†ç±» |
| F003-010 | å·¥å•å¯¼å‡º | P1 | Excelå¯¼å‡ºã€PDFæŠ¥è¡¨ç”Ÿæˆ |
| F003-011 | å·¥å•æ¨¡æ¿ | P2 | å¸¸ç”¨å·¥å•æ¨¡æ¿ç®¡ç†ã€å¿«é€Ÿåˆ›å»º |
| F003-012 | å·¥å•è¯„ä»· | P2 | å®¢æˆ·æ»¡æ„åº¦è¯„ä»·ã€æœåŠ¡è´¨é‡åé¦ˆ |

### 3. ä¸šåŠ¡è§„åˆ™

#### å·¥å•çŠ¶æ€æµè½¬è§„åˆ™
- å·¥å•çŠ¶æ€æµè½¬é¡ºåºï¼šå¾…åˆ†é…â†’å¤„ç†ä¸­â†’å¾…éªŒæ”¶â†’å·²å®Œæˆâ†’å·²å…³é—­
- åªæœ‰åˆ›å»ºäººã€åˆ†é…äººæˆ–ç®¡ç†å‘˜å¯ä»¥ä¿®æ”¹å·¥å•çŠ¶æ€
- å·¥å•å…³é—­å7å¤©å†…å…è®¸é‡æ–°æ‰“å¼€ï¼Œè¶…è¿‡7å¤©éœ€è¦åˆ›å»ºæ–°å·¥å•
- çŠ¶æ€å˜æ›´å¿…é¡»è®°å½•æ“ä½œäººã€æ“ä½œæ—¶é—´å’Œå˜æ›´åŸå› 

#### SLAç®¡ç†è§„åˆ™
- é«˜ä¼˜å…ˆçº§å·¥å•å¿…é¡»åœ¨2å°æ—¶å†…å“åº”ï¼Œ24å°æ—¶å†…è§£å†³
- ä¸­ä¼˜å…ˆçº§å·¥å•å¿…é¡»åœ¨4å°æ—¶å†…å“åº”ï¼Œ72å°æ—¶å†…è§£å†³
- ä½ä¼˜å…ˆçº§å·¥å•å¿…é¡»åœ¨8å°æ—¶å†…å“åº”ï¼Œ168å°æ—¶å†…è§£å†³
- SLAè¿çº¦è‡ªåŠ¨è§¦å‘å‘Šè­¦å’Œå‡çº§æµç¨‹

#### æƒé™æ§åˆ¶è§„åˆ™
- ç”¨æˆ·åªèƒ½æŸ¥çœ‹å’Œæ“ä½œæœ‰æƒé™çš„å·¥å•
- ç§Ÿæˆ·ç®¡ç†å‘˜åªèƒ½ç®¡ç†æœ¬ç§Ÿæˆ·çš„å·¥å•
- å·¥å•åˆ›å»ºäººå¯ä»¥æŸ¥çœ‹å’Œç¼–è¾‘è‡ªå·±åˆ›å»ºçš„å·¥å•
- å·¥å•åˆ†é…äººå¯ä»¥å¤„ç†åˆ†é…ç»™è‡ªå·±çš„å·¥å•

### 4. ç”¨æˆ·æ•…äº‹

- **US003-001**: ä½œä¸ºç”²æ–¹ç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿå¿«é€Ÿåˆ›å»ºå·¥å•å¹¶è·Ÿè¸ªå¤„ç†è¿›åº¦ï¼Œä»¥ä¾¿åŠæ—¶è§£å†³ITé—®é¢˜
- **US003-002**: ä½œä¸ºè¿ç»´å·¥ç¨‹å¸ˆï¼Œæˆ‘å¸Œæœ›èƒ½å¤ŸæŸ¥çœ‹åˆ†é…ç»™æˆ‘çš„å·¥å•åˆ—è¡¨ï¼Œä»¥ä¾¿åˆç†å®‰æ’å·¥ä½œä¼˜å…ˆçº§
- **US003-003**: ä½œä¸ºç§Ÿæˆ·ç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿç›‘æ§æœ¬ç§Ÿæˆ·çš„å·¥å•å¤„ç†æƒ…å†µå’ŒSLAè¾¾æˆç‡ï¼Œä»¥ä¾¿è¯„ä¼°æœåŠ¡è´¨é‡
- **US003-004**: ä½œä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤ŸæŸ¥çœ‹å…¨å±€å·¥å•ç»Ÿè®¡å’Œè¶‹åŠ¿åˆ†æï¼Œä»¥ä¾¿ä¼˜åŒ–èµ„æºé…ç½®

### 5. ç”¨ä¾‹

#### ç”¨ä¾‹1ï¼šåˆ›å»ºå·¥å•
- **Given**: ç”¨æˆ·å·²ç™»å½•ï¼Œæ‹¥æœ‰å·¥å•åˆ›å»ºæƒé™
- **When**: ç”¨æˆ·å¡«å†™å·¥å•åŸºæœ¬ä¿¡æ¯ï¼ˆæ ‡é¢˜ã€æè¿°ã€ä¼˜å…ˆçº§ç­‰ï¼‰å¹¶æäº¤
- **Then**: ç³»ç»Ÿè‡ªåŠ¨åˆ†é…å·¥å•å·ï¼Œè§¦å‘æ™ºèƒ½æ´¾å•æµç¨‹ï¼Œå·¥å•è¿›å…¥å¾…åˆ†é…çŠ¶æ€

#### ç”¨ä¾‹2ï¼šå·¥å•å¤„ç†æµç¨‹
- **Given**: å·¥ç¨‹å¸ˆå·²æ¥æ”¶å·¥å•ï¼Œå·¥å•çŠ¶æ€ä¸º"å¤„ç†ä¸­"
- **When**: å·¥ç¨‹å¸ˆåˆ†æé—®é¢˜ã€åˆ¶å®šè§£å†³æ–¹æ¡ˆã€å®æ–½å¹¶æµ‹è¯•éªŒè¯
- **Then**: å·¥å•çŠ¶æ€æ›´æ–°ä¸º"å¾…éªŒæ”¶"ï¼Œé€šçŸ¥å®¢æˆ·è¿›è¡ŒéªŒæ”¶

#### ç”¨ä¾‹3ï¼šSLAç›‘æ§å‘Šè­¦
- **Given**: å·¥å•è®¾ç½®äº†SLAæ—¶é™
- **When**: å·¥å•å¤„ç†æ—¶é—´æ¥è¿‘æˆ–è¶…è¿‡SLAæ—¶é™
- **Then**: ç³»ç»Ÿè‡ªåŠ¨å‘é€å‘Šè­¦é€šçŸ¥ï¼Œè§¦å‘å‡çº§æµç¨‹

### 6. æ•°æ®æ¨¡å‹

```mermaid
erDiagram
    Ticket {
        id bigint PK
        tenant_id bigint FK
        ticket_no varchar UK
        title varchar
        description text
        priority varchar
        status varchar
        category varchar
        creator_id bigint FK
        assignee_id bigint FK
        created_at timestamp
        updated_at timestamp
        closed_at timestamp
    }

    TicketRecord {
        id bigint PK
        ticket_id bigint FK
        operator_id bigint FK
        action varchar
        content text
        old_status varchar
        new_status varchar
        created_at timestamp
    }

    TicketAttachment {
        id bigint PK
        ticket_id bigint FK
        file_name varchar
        file_path varchar
        file_size bigint
        mime_type varchar
        uploaded_by bigint FK
        created_at timestamp
    }

    TicketSLA {
        id bigint PK
        ticket_id bigint FK
        response_deadline timestamp
        resolve_deadline timestamp
        response_time integer
        resolve_time integer
        sla_status varchar
        created_at timestamp
    }

    Ticket ||--o{ TicketRecord : has
    Ticket ||--o{ TicketAttachment : has
    Ticket ||--|| TicketSLA : has
    Ticket }o--|| Tenant : belongs_to
    Ticket }o--|| User : created_by
    Ticket }o--|| User : assigned_to
```

#### æ•°æ®å­—å…¸

| è¡¨å | å­—æ®µå | ç±»å‹ | é•¿åº¦ | å¿…å¡« | è¯´æ˜ |
|------|--------|------|------|------|------|
| ticket | id | bigint | - | æ˜¯ | å·¥å•ä¸»é”®ID |
| ticket | tenant_id | bigint | - | æ˜¯ | ç§Ÿæˆ·ID |
| ticket | ticket_no | varchar | 20 | æ˜¯ | å·¥å•å·ï¼Œæ ¼å¼ï¼šTK+å¹´æœˆæ—¥+4ä½åºå· |
| ticket | title | varchar | 200 | æ˜¯ | å·¥å•æ ‡é¢˜ |
| ticket | description | text | - | æ˜¯ | å·¥å•æè¿° |
| ticket | priority | varchar | 10 | æ˜¯ | ä¼˜å…ˆçº§ï¼šlow/medium/high/urgent |
| ticket | status | varchar | 20 | æ˜¯ | çŠ¶æ€ï¼špending/in_progress/pending_review/completed/closed |
| ticket | category | varchar | 50 | å¦ | å·¥å•åˆ†ç±» |
| ticket | creator_id | bigint | - | æ˜¯ | åˆ›å»ºäººID |
| ticket | assignee_id | bigint | - | å¦ | åˆ†é…äººID |

### 7. APIè§„èŒƒ

#### è·å–å·¥å•åˆ—è¡¨API
- **URL**: `GET /api/v1/tickets`
- **Method**: GET
- **è¯·æ±‚å‚æ•°**:
```json
{
  "page": 1,
  "size": 20,
  "status": "string",
  "priority": "string",
  "assigneeId": "number",
  "keyword": "string",
  "dateRange": "string"
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 1250,
    "page": 1,
    "size": 20,
    "items": [
      {
        "id": 1,
        "ticketNo": "TK202508100001",
        "title": "æœåŠ¡å™¨CPUä½¿ç”¨ç‡è¿‡é«˜",
        "priority": "high",
        "status": "in_progress",
        "assigneeName": "å¼ å·¥ç¨‹å¸ˆ",
        "createdAt": "2025-08-10T10:30:00Z"
      }
    ]
  }
}
```

#### åˆ›å»ºå·¥å•API
- **URL**: `POST /api/v1/tickets`
- **Method**: POST
- **è¯·æ±‚å‚æ•°**:
```json
{
  "title": "string",
  "description": "string",
  "priority": "string",
  "category": "string",
  "attachments": ["fileId1", "fileId2"]
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "ticketNo": "TK202508100001",
    "status": "pending"
  }
}
```

#### æ›´æ–°å·¥å•çŠ¶æ€API
- **URL**: `PUT /api/v1/tickets/{id}/status`
- **Method**: PUT
- **è¯·æ±‚å‚æ•°**:
```json
{
  "status": "string",
  "comment": "string"
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "status": "in_progress",
    "updatedAt": "2025-08-10T11:00:00Z"
  }
}
```

### 8. éåŠŸèƒ½éœ€æ±‚

#### æ€§èƒ½è¦æ±‚
- å·¥å•åˆ—è¡¨åŠ è½½æ—¶é—´ï¼š< 1ç§’
- å·¥å•è¯¦æƒ…åŠ è½½æ—¶é—´ï¼š< 500ms
- æœç´¢å“åº”æ—¶é—´ï¼š< 2ç§’ï¼ˆæ”¯æŒ10ä¸‡+å·¥å•ï¼‰
- å¹¶å‘æ”¯æŒï¼šâ‰¥ 500ç”¨æˆ·åŒæ—¶æ“ä½œ
- æ‰¹é‡æ“ä½œï¼šæ”¯æŒ1000+å·¥å•çš„æ‰¹é‡çŠ¶æ€æ›´æ–°

#### å¯ç”¨æ€§è¦æ±‚
- ç³»ç»Ÿå¯ç”¨æ€§ï¼šâ‰¥ 99.5%
- æ•°æ®ä¸€è‡´æ€§ï¼š> 99.9%
- æ•…éšœæ¢å¤æ—¶é—´ï¼š< 10åˆ†é’Ÿ
- æ”¯æŒç¦»çº¿æŸ¥çœ‹å·²åŠ è½½çš„å·¥å•ä¿¡æ¯

#### æ‰©å±•æ€§è¦æ±‚
- æ•°æ®é‡æ”¯æŒï¼šâ‰¥ 100ä¸‡å·¥å•æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢
- ç§Ÿæˆ·è§„æ¨¡ï¼šâ‰¥ 1000ç§Ÿæˆ·ç‹¬ç«‹å·¥å•ç®¡ç†
- æ”¯æŒè‡ªå®šä¹‰å·¥å•çŠ¶æ€å’Œæµè½¬è§„åˆ™
- é¢„ç•™ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆæ¥å£

#### å®‰å…¨è¦æ±‚
- å¤šç§Ÿæˆ·å·¥å•æ•°æ®å®Œå…¨éš”ç¦»
- åŸºäºè§’è‰²çš„å·¥å•è®¿é—®æ§åˆ¶
- å®Œæ•´çš„å·¥å•æ“ä½œå®¡è®¡æ—¥å¿—
- å·¥å•ä¸­çš„æ•æ„Ÿä¿¡æ¯åŠ å¯†å­˜å‚¨
- æ–‡ä»¶ä¸Šä¼ ç—…æ¯’æ‰«æï¼Œæ¶æ„æ–‡ä»¶æ‹¦æˆª

### 9. éªŒæ”¶æ ‡å‡†

#### åŠŸèƒ½éªŒæ”¶æ ‡å‡†
- å·¥å•CRUDæ“ä½œåŠŸèƒ½å®Œæ•´å¯ç”¨
- å·¥å•çŠ¶æ€æµè½¬è§„åˆ™æ­£ç¡®æ‰§è¡Œ
- SLAç›‘æ§å’Œå‘Šè­¦æœºåˆ¶æ­£å¸¸å·¥ä½œ
- æœç´¢å’Œç­›é€‰åŠŸèƒ½å‡†ç¡®æœ‰æ•ˆ
- é™„ä»¶ä¸Šä¼ ä¸‹è½½åŠŸèƒ½æ­£å¸¸
- å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»éªŒè¯é€šè¿‡

#### æ€§èƒ½éªŒæ”¶æ ‡å‡†
- å·¥å•åˆ—è¡¨åŠ è½½æ—¶é—´è¾¾æ ‡ç‡ â‰¥ 95%
- æœç´¢æ€§èƒ½æµ‹è¯•é€šè¿‡ï¼ˆ10ä¸‡æ¡æ•°æ®<2ç§’ï¼‰
- å¹¶å‘æµ‹è¯•é€šè¿‡ï¼ˆ500ç”¨æˆ·åŒæ—¶æ“ä½œï¼‰
- æ‰¹é‡æ“ä½œæ€§èƒ½æµ‹è¯•é€šè¿‡

#### ç”¨æˆ·ä½“éªŒéªŒæ”¶æ ‡å‡†
- æ–°ç”¨æˆ·10åˆ†é’Ÿå†…æŒæ¡å·¥å•åŸºæœ¬æ“ä½œ
- ç§»åŠ¨ç«¯å·¥å•æ“ä½œåŠŸèƒ½å®Œæ•´å¯ç”¨
- æ”¯æŒé”®ç›˜å¯¼èˆªå’Œå±å¹•é˜…è¯»å™¨

### 10. ä¾èµ–ä¸çº¦æŸ

#### æŠ€æœ¯ä¾èµ–
- Spring Boot 3.2 + Java 17
- PostgreSQL 15 + Druidè¿æ¥æ± 
- Redis 7.0ï¼ˆç¼“å­˜ï¼‰
- Elasticsearch 8.0ï¼ˆæœç´¢ï¼‰
- MinIOï¼ˆæ–‡ä»¶å­˜å‚¨ï¼‰
- RabbitMQ 3.12ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰

#### æ¨¡å—ä¾èµ–
- REQ-001ï¼šåŸºç¡€æ¶æ„ä¸è®¤è¯ç³»ç»Ÿï¼ˆç”¨æˆ·è®¤è¯å’Œæƒé™æ§åˆ¶ï¼‰
- REQ-004ï¼šæ™ºèƒ½æ´¾å•ç³»ç»Ÿï¼ˆè‡ªåŠ¨åˆ†é…åŠŸèƒ½ï¼‰
- REQ-005ï¼šçŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿï¼ˆAIæ¨èåŠŸèƒ½ï¼‰
- REQ-011ï¼šé€šçŸ¥ä¸æ¶ˆæ¯ç³»ç»Ÿï¼ˆå®æ—¶é€šçŸ¥ï¼‰

#### ä¸šåŠ¡çº¦æŸ
- å¿…é¡»æ”¯æŒå¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
- å¿…é¡»ç¬¦åˆä¸ªäººä¿¡æ¯ä¿æŠ¤æ³•è§„
- å¿…é¡»æ»¡è¶³ä¼ä¸šå†…æ§å®¡è®¡è¦æ±‚
- å·¥å•æ•°æ®ä¿ç•™3å¹´ï¼Œé™„ä»¶ä¿ç•™1å¹´

#### èµ„æºçº¦æŸ
- å¼€å‘æ—¶é—´ï¼š2å‘¨å¼€å‘å‘¨æœŸ
- å¼€å‘äººåŠ›ï¼š2ååç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œ1åå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ
- æ€§èƒ½è¦æ±‚ï¼šæ”¯æŒ500+å¹¶å‘ç”¨æˆ·ï¼Œ10ä¸‡+å·¥å•æ•°æ®

---

## REQ-004 æ™ºèƒ½æ´¾å•ç³»ç»Ÿ

### 1. ä¸šåŠ¡æè¿°

#### ä¸šåŠ¡èƒŒæ™¯
åœ¨å¤šç§Ÿæˆ·ITè¿ç»´æœåŠ¡åœºæ™¯ä¸­ï¼Œæ™ºèƒ½æ´¾å•æ˜¯æå‡æœåŠ¡æ•ˆç‡å’Œè´¨é‡çš„æ ¸å¿ƒç¯èŠ‚ï¼Œä¼ ç»Ÿäººå·¥æ´¾å•å­˜åœ¨ä»¥ä¸‹å…³é”®ç—›ç‚¹ï¼š
- **æ´¾å•æ•ˆç‡ä½**ï¼šäººå·¥æ´¾å•è€—æ—¶é•¿ï¼Œå¹³å‡éœ€è¦15-30åˆ†é’Ÿï¼Œå½±å“å“åº”é€Ÿåº¦
- **èµ„æºé…ç½®ä¸å‡**ï¼šå·¥ç¨‹å¸ˆè´Ÿè½½ä¸å‡è¡¡ï¼Œéƒ¨åˆ†å·¥ç¨‹å¸ˆè¿‡è½½ï¼Œéƒ¨åˆ†é—²ç½®ï¼Œèµ„æºæµªè´¹ä¸¥é‡
- **æŠ€èƒ½åŒ¹é…åº¦ä½**ï¼šæ´¾å•æ—¶éš¾ä»¥å‡†ç¡®åŒ¹é…å·¥ç¨‹å¸ˆæŠ€èƒ½ï¼Œå¯¼è‡´å¤„ç†æ•ˆç‡ä½ä¸‹å’Œè¿”å·¥ç‡é«˜
- **å†³ç­–ä¾èµ–ç»éªŒ**ï¼šæ´¾å•å†³ç­–ä¸»è¦ä¾èµ–ç®¡ç†å‘˜ç»éªŒï¼Œç¼ºä¹æ•°æ®æ”¯æ’‘ï¼Œä¸»è§‚æ€§å¼º
- **å¤šç§Ÿæˆ·å¤æ‚æ€§**ï¼šä¸åŒç§Ÿæˆ·çš„å·¥ç¨‹å¸ˆèµ„æºå’ŒæœåŠ¡è¦æ±‚å·®å¼‚å¤§ï¼Œç®¡ç†å¤æ‚

#### ä¸šåŠ¡ç›®æ ‡
- **æ´¾å•æ•ˆç‡æå‡**ï¼šè‡ªåŠ¨åŒ–æ´¾å•ï¼Œå°†æ´¾å•æ—¶é—´ä»15-30åˆ†é’Ÿç¼©çŸ­åˆ°30ç§’å†…
- **è´Ÿè½½å‡è¡¡ä¼˜åŒ–**ï¼šå®ç°å·¥ç¨‹å¸ˆè´Ÿè½½å‡è¡¡ï¼Œè´Ÿè½½æ–¹å·®é™ä½70%
- **æŠ€èƒ½åŒ¹é…ç²¾å‡†**ï¼šæŠ€èƒ½åŒ¹é…å‡†ç¡®ç‡è¾¾åˆ°95%ä»¥ä¸Š
- **å“åº”æ—¶é—´ç¼©çŸ­**ï¼šå·¥å•å“åº”æ—¶é—´ç¼©çŸ­60%ï¼Œæå‡å®¢æˆ·æ»¡æ„åº¦
- **æ´¾å•æˆåŠŸç‡æå‡**ï¼šæ´¾å•æˆåŠŸç‡è¾¾åˆ°98%ä»¥ä¸Šï¼Œå‡å°‘é‡æ–°æ´¾å•

#### ä¸šåŠ¡æµç¨‹
```mermaid
graph TD
    A[å·¥å•åˆ›å»º] --> B[æ™ºèƒ½æ´¾å•å¼•æ“]
    B --> C[å·¥å•åˆ†æ]
    C --> D[æŠ€èƒ½éœ€æ±‚è¯†åˆ«]
    D --> E[å·¥ç¨‹å¸ˆæ± ç­›é€‰]
    E --> F{æ´¾å•ç­–ç•¥é€‰æ‹©}
    F -->|æœ€ä½³åŒ¹é…| G[å¤šç»´åº¦è¯„åˆ†ç®—æ³•]
    F -->|è´Ÿè½½å‡è¡¡| H[è´Ÿè½½å‡è¡¡ç®—æ³•]
    F -->|æŠ€èƒ½ä¼˜å…ˆ| I[æŠ€èƒ½åŒ¹é…ç®—æ³•]
    F -->|è½®è¯¢åˆ†é…| J[è½®è¯¢ç®—æ³•]
    G --> K[å·¥ç¨‹å¸ˆæ’åº]
    H --> K
    I --> K
    J --> K
    K --> L[é€‰æ‹©æœ€ä¼˜å·¥ç¨‹å¸ˆ]
    L --> M[æ´¾å•é€šçŸ¥]
    M --> N[å·¥ç¨‹å¸ˆå“åº”]
    N --> O{æ˜¯å¦æ¥å—}
    O -->|æ¥å—| P[å¼€å§‹å¤„ç†]
    O -->|æ‹’ç»| Q[é‡æ–°æ´¾å•]
    O -->|è¶…æ—¶| R[è‡ªåŠ¨é‡æ´¾]
    Q --> B
    R --> B
    P --> S[æ•ˆæœè¯„ä¼°]
    S --> T[ç®—æ³•ä¼˜åŒ–]
```

#### ç”¨æˆ·ç”»åƒ
- **è¿ç»´ç®¡ç†å‘˜**ï¼šé…ç½®æ´¾å•è§„åˆ™ï¼Œç›‘æ§æ´¾å•æ•ˆæœï¼Œå¤„ç†å¼‚å¸¸æƒ…å†µ
- **å·¥ç¨‹å¸ˆ**ï¼šæ¥æ”¶æ´¾å•é€šçŸ¥ï¼Œç¡®è®¤æˆ–æ‹’ç»å·¥å•ï¼Œå…³æ³¨å·¥ä½œè´Ÿè½½
- **ç§Ÿæˆ·ç®¡ç†å‘˜**ï¼šæŸ¥çœ‹æœ¬ç§Ÿæˆ·æ´¾å•ç»Ÿè®¡ï¼Œè¯„ä¼°æœåŠ¡è´¨é‡
- **ç³»ç»Ÿç®¡ç†å‘˜**ï¼šç›‘æ§æ´¾å•ç³»ç»Ÿæ€§èƒ½ï¼Œä¼˜åŒ–ç®—æ³•å‚æ•°

### 2. åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ç¼–å· | åŠŸèƒ½åç§° | ä¼˜å…ˆçº§ | æè¿° |
|---------|---------|--------|------|
| F004-001 | è‡ªåŠ¨æ´¾å•å¼•æ“ | P0 | åŸºäºAIç®—æ³•çš„è‡ªåŠ¨æ´¾å•æ ¸å¿ƒå¼•æ“ |
| F004-002 | å¤šç»´åº¦è¯„åˆ†ç®—æ³• | P0 | æŠ€èƒ½ã€è´Ÿè½½ã€å†å²è¡¨ç°ç»¼åˆè¯„åˆ†ç®—æ³• |
| F004-003 | æ´¾å•ç­–ç•¥é…ç½® | P0 | æœ€ä½³åŒ¹é…ã€è´Ÿè½½å‡è¡¡ã€æŠ€èƒ½ä¼˜å…ˆã€è½®è¯¢ç­‰ç­–ç•¥ |
| F004-004 | å·¥ç¨‹å¸ˆæŠ€èƒ½åŒ¹é… | P0 | åŸºäºæŠ€èƒ½æ ‡ç­¾çš„ç²¾å‡†åŒ¹é…ç®—æ³• |
| F004-005 | è´Ÿè½½å‡è¡¡ç®—æ³• | P0 | å·¥ç¨‹å¸ˆå·¥ä½œè´Ÿè½½åŠ¨æ€å¹³è¡¡ç®—æ³• |
| F004-006 | æ‰‹åŠ¨æ´¾å•åŠŸèƒ½ | P0 | ç®¡ç†å‘˜æ‰‹åŠ¨æŒ‡å®šå·¥ç¨‹å¸ˆçš„æ´¾å•åŠŸèƒ½ |
| F004-007 | æ‰¹é‡æ´¾å•æ“ä½œ | P1 | æ‰¹é‡è‡ªåŠ¨æ´¾å•å’Œæ‰‹åŠ¨æ´¾å•åŠŸèƒ½ |
| F004-008 | æ´¾å•è§„åˆ™æµ‹è¯• | P1 | è§„åˆ™é…ç½®æµ‹è¯•å’Œæ•ˆæœé¢„è§ˆåŠŸèƒ½ |
| F004-009 | æ´¾å•ç›‘æ§ç»Ÿè®¡ | P1 | å®æ—¶ç›‘æ§å’Œç»Ÿè®¡åˆ†æåŠŸèƒ½ |
| F004-010 | æ´¾å•å†å²è®°å½• | P1 | æ´¾å•è®°å½•æŸ¥è¯¢å’Œåˆ†æåŠŸèƒ½ |
| F004-011 | æ™ºèƒ½å­¦ä¹ ä¼˜åŒ– | P2 | åŸºäºå†å²æ•°æ®çš„ç®—æ³•è‡ªå­¦ä¹ ä¼˜åŒ– |
| F004-012 | æ´¾å•æ•ˆæœè¯„ä¼° | P2 | æ´¾å•è´¨é‡è¯„ä¼°å’Œæ”¹è¿›å»ºè®® |

### 3. ä¸šåŠ¡è§„åˆ™

#### æ´¾å•ä¼˜å…ˆçº§è§„åˆ™
- é«˜ä¼˜å…ˆçº§å·¥å•ä¼˜å…ˆæ´¾ç»™é«˜æŠ€èƒ½å·¥ç¨‹å¸ˆ
- ç´§æ€¥å·¥å•å¯ä»¥æ‰“æ–­å½“å‰ä½ä¼˜å…ˆçº§å·¥å•çš„å¤„ç†
- åŒä¼˜å…ˆçº§å·¥å•æŒ‰ç…§åˆ›å»ºæ—¶é—´å…ˆåé¡ºåºæ´¾å•
- VIPå®¢æˆ·çš„å·¥å•äº«æœ‰æ›´é«˜çš„æ´¾å•ä¼˜å…ˆçº§

#### å·¥ç¨‹å¸ˆåŒ¹é…è§„åˆ™
- å·¥ç¨‹å¸ˆå½“å‰è´Ÿè½½è¶…è¿‡80%æ—¶ä¸å‚ä¸è‡ªåŠ¨æ´¾å•
- æŠ€èƒ½åŒ¹é…åº¦ä½äº60%çš„å·¥ç¨‹å¸ˆä¸å‚ä¸æ´¾å•
- åŒä¸€å·¥ç¨‹å¸ˆè¿ç»­æ‹’ç»3æ¬¡æ´¾å•åæš‚åœ1å°æ—¶
- å·¥ç¨‹å¸ˆä¼‘å‡æˆ–ç¦»çº¿çŠ¶æ€ä¸å‚ä¸æ´¾å•

#### æ´¾å•è¶…æ—¶è§„åˆ™
- æ´¾å•é€šçŸ¥å‘å‡ºå15åˆ†é’Ÿå†…æ— å“åº”è§†ä¸ºè¶…æ—¶
- è¶…æ—¶åè‡ªåŠ¨é‡æ–°æ´¾å•ç»™æ¬¡ä¼˜å·¥ç¨‹å¸ˆ
- è¿ç»­3æ¬¡æ´¾å•å¤±è´¥çš„å·¥å•è½¬ä¸ºæ‰‹åŠ¨æ´¾å•
- æ‰‹åŠ¨æ´¾å•ä¼˜å…ˆçº§é«˜äºè‡ªåŠ¨æ´¾å•

### 4. ç”¨æˆ·æ•…äº‹

- **US004-001**: ä½œä¸ºè¿ç»´ç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿé…ç½®æ™ºèƒ½æ´¾å•è§„åˆ™ï¼Œä»¥ä¾¿æ ¹æ®ä¸šåŠ¡éœ€æ±‚ä¼˜åŒ–æ´¾å•ç­–ç•¥
- **US004-002**: ä½œä¸ºå·¥ç¨‹å¸ˆï¼Œæˆ‘å¸Œæœ›èƒ½å¤ŸåŠæ—¶æ¥æ”¶æ´¾å•é€šçŸ¥ï¼Œä»¥ä¾¿å¿«é€Ÿå“åº”å’Œå¤„ç†å·¥å•
- **US004-003**: ä½œä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿç›‘æ§æ´¾å•ç³»ç»Ÿæ€§èƒ½ï¼Œä»¥ä¾¿ç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ
- **US004-004**: ä½œä¸ºç§Ÿæˆ·ç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤ŸæŸ¥çœ‹æ´¾å•ç»Ÿè®¡æ•°æ®ï¼Œä»¥ä¾¿è¯„ä¼°æœåŠ¡è´¨é‡

### 5. ç”¨ä¾‹

#### ç”¨ä¾‹1ï¼šè‡ªåŠ¨æ™ºèƒ½æ´¾å•
- **Given**: å·¥å•å·²åˆ›å»ºï¼Œæ´¾å•è§„åˆ™å·²é…ç½®ï¼Œæœ‰å¯ç”¨å·¥ç¨‹å¸ˆ
- **When**: å·¥å•åˆ›å»ºè§¦å‘æ´¾å•å¼•æ“ï¼Œæ‰§è¡Œå¤šç»´åº¦è¯„åˆ†ç®—æ³•
- **Then**: ç³»ç»Ÿé€‰æ‹©æœ€ä¼˜å·¥ç¨‹å¸ˆå¹¶å‘é€æ´¾å•é€šçŸ¥ï¼Œè®°å½•æ´¾å•ç»“æœ

#### ç”¨ä¾‹2ï¼šæ´¾å•è§„åˆ™é…ç½®
- **Given**: ç”¨æˆ·æ‹¥æœ‰æ´¾å•è§„åˆ™é…ç½®æƒé™
- **When**: ç”¨æˆ·è®¾ç½®æŠ€èƒ½ã€è´Ÿè½½ã€ç»©æ•ˆç­‰æƒé‡å‚æ•°å¹¶æµ‹è¯•è§„åˆ™
- **Then**: æ–°çš„æ´¾å•è§„åˆ™ç”Ÿæ•ˆï¼Œå½±å“åç»­æ´¾å•å†³ç­–

#### ç”¨ä¾‹3ï¼šæ´¾å•å¤±è´¥é‡è¯•
- **Given**: å·¥ç¨‹å¸ˆæ‹’ç»æˆ–è¶…æ—¶æœªå“åº”æ´¾å•
- **When**: ç³»ç»Ÿæ£€æµ‹åˆ°æ´¾å•å¤±è´¥
- **Then**: è‡ªåŠ¨é‡æ–°æ´¾å•ç»™æ¬¡ä¼˜å·¥ç¨‹å¸ˆï¼Œè®°å½•å¤±è´¥åŸå› 

### 6. æ•°æ®æ¨¡å‹

```mermaid
erDiagram
    DispatchRule {
        id bigint PK
        tenant_id bigint FK
        rule_name varchar
        skill_weight decimal
        load_weight decimal
        performance_weight decimal
        strategy_type varchar
        is_active boolean
        created_at timestamp
        updated_at timestamp
    }

    DispatchRecord {
        id bigint PK
        ticket_id bigint FK
        engineer_id bigint FK
        dispatch_strategy varchar
        match_score decimal
        dispatch_time timestamp
        response_time timestamp
        accept_status varchar
        created_at timestamp
    }

    EngineerSkill {
        id bigint PK
        engineer_id bigint FK
        skill_name varchar
        skill_level int
        certification_date timestamp
        created_at timestamp
    }

    EngineerWorkload {
        id bigint PK
        engineer_id bigint FK
        current_tickets int
        load_percentage decimal
        last_updated timestamp
    }

    DispatchQueue {
        id bigint PK
        ticket_id bigint FK
        priority int
        retry_count int
        last_attempt timestamp
        status varchar
        created_at timestamp
    }

    DispatchRule ||--o{ DispatchRecord : uses
    Ticket ||--|| DispatchRecord : has
    Engineer ||--|| DispatchRecord : receives
    Engineer ||--o{ EngineerSkill : has
    Engineer ||--|| EngineerWorkload : has
    Ticket ||--o{ DispatchQueue : queued
```

#### æ•°æ®å­—å…¸

| è¡¨å | å­—æ®µå | ç±»å‹ | é•¿åº¦ | å¿…å¡« | è¯´æ˜ |
|------|--------|------|------|------|------|
| dispatch_rule | id | bigint | - | æ˜¯ | æ´¾å•è§„åˆ™ä¸»é”®ID |
| dispatch_rule | tenant_id | bigint | - | æ˜¯ | ç§Ÿæˆ·ID |
| dispatch_rule | rule_name | varchar | 100 | æ˜¯ | è§„åˆ™åç§° |
| dispatch_rule | skill_weight | decimal | 3,2 | æ˜¯ | æŠ€èƒ½æƒé‡ï¼ˆ0-1ï¼‰ |
| dispatch_rule | load_weight | decimal | 3,2 | æ˜¯ | è´Ÿè½½æƒé‡ï¼ˆ0-1ï¼‰ |
| dispatch_rule | performance_weight | decimal | 3,2 | æ˜¯ | ç»©æ•ˆæƒé‡ï¼ˆ0-1ï¼‰ |
| dispatch_rule | strategy_type | varchar | 50 | æ˜¯ | ç­–ç•¥ç±»å‹ï¼šbest_match/load_balance/skill_first/round_robin |
| dispatch_record | id | bigint | - | æ˜¯ | æ´¾å•è®°å½•ä¸»é”®ID |
| dispatch_record | ticket_id | bigint | - | æ˜¯ | å·¥å•ID |
| dispatch_record | engineer_id | bigint | - | æ˜¯ | å·¥ç¨‹å¸ˆID |
| dispatch_record | match_score | decimal | 5,2 | æ˜¯ | åŒ¹é…åˆ†æ•°ï¼ˆ0-100ï¼‰ |
| dispatch_record | accept_status | varchar | 20 | æ˜¯ | æ¥å—çŠ¶æ€ï¼šaccepted/rejected/timeout |

### 7. APIè§„èŒƒ

#### è‡ªåŠ¨æ´¾å•API
- **URL**: `POST /api/v1/dispatch/auto`
- **Method**: POST
- **è¯·æ±‚å‚æ•°**:
```json
{
  "ticketId": "number",
  "strategy": "string",
  "priority": "string"
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "dispatchId": 1,
    "engineerId": 123,
    "engineerName": "å¼ å·¥ç¨‹å¸ˆ",
    "matchScore": 95.5,
    "estimatedTime": "2025-08-10T11:00:00Z"
  }
}
```

#### è·å–æ´¾å•è§„åˆ™API
- **URL**: `GET /api/v1/dispatch/rules`
- **Method**: GET
- **è¯·æ±‚å‚æ•°**:
```json
{
  "tenantId": "number",
  "isActive": "boolean"
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 1,
      "ruleName": "é»˜è®¤æ´¾å•è§„åˆ™",
      "skillWeight": 0.4,
      "loadWeight": 0.3,
      "performanceWeight": 0.3,
      "strategyType": "best_match",
      "isActive": true
    }
  ]
}
```

#### æ´¾å•ç»Ÿè®¡API
- **URL**: `GET /api/v1/dispatch/statistics`
- **Method**: GET
- **è¯·æ±‚å‚æ•°**:
```json
{
  "tenantId": "number",
  "dateRange": "string",
  "engineerId": "number"
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "totalDispatches": 1500,
    "successRate": 98.5,
    "averageMatchScore": 92.3,
    "averageResponseTime": 8.5,
    "loadBalanceVariance": 0.08
  }
}
```

### 8. éåŠŸèƒ½éœ€æ±‚

#### æ€§èƒ½è¦æ±‚
- æ´¾å•å“åº”æ—¶é—´ï¼šè‡ªåŠ¨æ´¾å•ç®—æ³•æ‰§è¡Œæ—¶é—´ < 500ms
- å¹¶å‘å¤„ç†èƒ½åŠ›ï¼šæ”¯æŒ100+å·¥å•åŒæ—¶æ´¾å•
- ç®—æ³•è®¡ç®—æ€§èƒ½ï¼š1000åå·¥ç¨‹å¸ˆçš„åŒ¹é…è®¡ç®— < 2ç§’
- é€šçŸ¥å‘é€é€Ÿåº¦ï¼šæ´¾å•é€šçŸ¥å‘é€å»¶è¿Ÿ < 3ç§’
- æ•°æ®æŸ¥è¯¢æ€§èƒ½ï¼šæ´¾å•å†å²æŸ¥è¯¢å“åº”æ—¶é—´ < 1ç§’

#### å¯ç”¨æ€§è¦æ±‚
- ç³»ç»Ÿå¯ç”¨æ€§ï¼šâ‰¥ 99.5%
- æ´¾å•æˆåŠŸç‡ï¼šâ‰¥ 98%ï¼ˆå·¥ç¨‹å¸ˆæ¥å—ç‡ï¼‰
- ç®—æ³•å‡†ç¡®æ€§ï¼šæŠ€èƒ½åŒ¹é…å‡†ç¡®ç‡ â‰¥ 95%
- æ•…éšœæ¢å¤ï¼šæ´¾å•æœåŠ¡æ•…éšœæ¢å¤æ—¶é—´ < 5åˆ†é’Ÿ
- æ•°æ®ä¸€è‡´æ€§ï¼šæ´¾å•çŠ¶æ€å®æ—¶åŒæ­¥ï¼Œä¸€è‡´æ€§ â‰¥ 99.9%

#### æ‰©å±•æ€§è¦æ±‚
- å·¥ç¨‹å¸ˆè§„æ¨¡ï¼šæ”¯æŒ10,000+å·¥ç¨‹å¸ˆçš„æ´¾å•è®¡ç®—
- å·¥å•å¤„ç†é‡ï¼šæ”¯æŒæ¯æ—¥100,000+å·¥å•çš„æ´¾å•å¤„ç†
- ç®—æ³•æ‰©å±•ï¼šæ”¯æŒæ–°å¢è‡ªå®šä¹‰æ´¾å•ç®—æ³•
- è§„åˆ™æ‰©å±•ï¼šæ”¯æŒå¤æ‚çš„ä¸šåŠ¡è§„åˆ™é…ç½®
- å¤šç§Ÿæˆ·æ‰©å±•ï¼šæ”¯æŒ1000+ç§Ÿæˆ·ç‹¬ç«‹æ´¾å•é…ç½®

#### å®‰å…¨è¦æ±‚
- å¤šç§Ÿæˆ·æ´¾å•æ•°æ®å®Œå…¨éš”ç¦»
- åŸºäºè§’è‰²çš„æ´¾å•æ“ä½œæƒé™æ§åˆ¶
- å®Œæ•´çš„æ´¾å•æ“ä½œå®¡è®¡æ—¥å¿—
- é˜²æ­¢æ¶æ„æ“ä½œå½±å“æ´¾å•å…¬å¹³æ€§

### 9. éªŒæ”¶æ ‡å‡†

#### åŠŸèƒ½éªŒæ”¶æ ‡å‡†
- è‡ªåŠ¨æ´¾å•å¼•æ“æ­£å¸¸å·¥ä½œï¼Œæ´¾å•æˆåŠŸç‡ â‰¥ 98%
- å¤šç»´åº¦è¯„åˆ†ç®—æ³•å‡†ç¡®æ€§ â‰¥ 95%
- æ´¾å•ç­–ç•¥é…ç½®åŠŸèƒ½å®Œæ•´å¯ç”¨
- è´Ÿè½½å‡è¡¡æ•ˆæœè¾¾æ ‡ï¼Œæ–¹å·® â‰¤ 0.15
- æ‰‹åŠ¨æ´¾å•åŠŸèƒ½æ­£å¸¸
- æ‰¹é‡æ´¾å•æ“ä½œæ­£å¸¸

#### æ€§èƒ½éªŒæ”¶æ ‡å‡†
- æ´¾å•å“åº”æ—¶é—´è¾¾æ ‡ç‡ â‰¥ 95%
- å¹¶å‘å¤„ç†èƒ½åŠ›æµ‹è¯•é€šè¿‡
- ç®—æ³•è®¡ç®—æ€§èƒ½æµ‹è¯•é€šè¿‡
- é€šçŸ¥å‘é€é€Ÿåº¦æµ‹è¯•é€šè¿‡

#### æ™ºèƒ½åŒ–éªŒæ”¶æ ‡å‡†
- AIæ¨¡å‹å‡†ç¡®ç‡ â‰¥ 97%
- è‡ªå­¦ä¹ æ•ˆæœæœˆç¯æ¯” â‰¥ 0.5%
- æ´¾å•æ•ˆæœæŒç»­ä¼˜åŒ–

### 10. ä¾èµ–ä¸çº¦æŸ

#### æŠ€æœ¯ä¾èµ–
- Spring Boot 3.2 + Java 17
- æœºå™¨å­¦ä¹ ç®—æ³•åº“ï¼ˆå¦‚Wekaã€Smileï¼‰
- Redisï¼ˆç¼“å­˜å·¥ç¨‹å¸ˆçŠ¶æ€å’Œè´Ÿè½½ä¿¡æ¯ï¼‰
- RabbitMQï¼ˆæ´¾å•é€šçŸ¥æ¶ˆæ¯é˜Ÿåˆ—ï¼‰
- PostgreSQLï¼ˆæ´¾å•è®°å½•å’Œè§„åˆ™å­˜å‚¨ï¼‰

#### æ¨¡å—ä¾èµ–
- REQ-001ï¼šåŸºç¡€æ¶æ„ä¸è®¤è¯ç³»ç»Ÿï¼ˆç”¨æˆ·è®¤è¯å’Œæƒé™æ§åˆ¶ï¼‰
- REQ-003ï¼šå·¥å•ç®¡ç†ç³»ç»Ÿï¼ˆå·¥å•æ•°æ®æ¥æºï¼‰
- REQ-006ï¼šå·¥ç¨‹å¸ˆç®¡ç†ç³»ç»Ÿï¼ˆå·¥ç¨‹å¸ˆä¿¡æ¯å’ŒæŠ€èƒ½æ•°æ®ï¼‰
- REQ-011ï¼šé€šçŸ¥ä¸æ¶ˆæ¯ç³»ç»Ÿï¼ˆæ´¾å•é€šçŸ¥æ¨é€ï¼‰

#### ä¸šåŠ¡çº¦æŸ
- å¿…é¡»æ”¯æŒå¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
- å¿…é¡»ä¿è¯æ´¾å•çš„å…¬å¹³æ€§å’Œé€æ˜æ€§
- å¿…é¡»æ”¯æŒäººå·¥å¹²é¢„å’Œè§„åˆ™è°ƒæ•´
- ç®—æ³•å†³ç­–è¿‡ç¨‹å¿…é¡»å¯è¿½æº¯å’Œå¯è§£é‡Š

#### èµ„æºçº¦æŸ
- å¼€å‘æ—¶é—´ï¼š2å‘¨å¼€å‘å‘¨æœŸ
- å¼€å‘äººåŠ›ï¼š2ååç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œ1åç®—æ³•å·¥ç¨‹å¸ˆ
- æ€§èƒ½è¦æ±‚ï¼šæ”¯æŒ100+å¹¶å‘æ´¾å•ï¼Œ10,000+å·¥ç¨‹å¸ˆè§„æ¨¡

---

## REQ-010 ç³»ç»Ÿç®¡ç†æ¨¡å—

### 1. ä¸šåŠ¡æè¿°

#### ä¸šåŠ¡èƒŒæ™¯
ç³»ç»Ÿç®¡ç†æ¨¡å—æ˜¯ITè¿ç»´é—¨æˆ·ç³»ç»Ÿçš„åŸºç¡€æ”¯æ’‘æ¨¡å—ï¼Œè´Ÿè´£ç§Ÿæˆ·ç®¡ç†ã€éƒ¨é—¨ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿé…ç½®ç­‰æ ¸å¿ƒç®¡ç†åŠŸèƒ½ï¼Œä¼ ç»Ÿç³»ç»Ÿç®¡ç†å­˜åœ¨ä»¥ä¸‹ç—›ç‚¹ï¼š
- **å¤šç§Ÿæˆ·ç®¡ç†å¤æ‚**ï¼šç¼ºä¹ç»Ÿä¸€çš„å¤šç§Ÿæˆ·ç®¡ç†æœºåˆ¶ï¼Œæ•°æ®éš”ç¦»å›°éš¾
- **ç”¨æˆ·æƒé™ç®¡ç†æ··ä¹±**ï¼šæƒé™åˆ†é…ä¸æ¸…æ™°ï¼Œå®‰å…¨é£é™©é«˜
- **ç³»ç»Ÿé…ç½®åˆ†æ•£**ï¼šå„æ¨¡å—é…ç½®åˆ†æ•£ï¼Œç¼ºä¹ç»Ÿä¸€ç®¡ç†
- **ç»„ç»‡æ¶æ„å˜æ›´å›°éš¾**ï¼šéƒ¨é—¨å’Œäººå‘˜å˜æ›´æµç¨‹å¤æ‚ï¼Œå½±å“ä¸šåŠ¡
- **å®¡è®¡è¿½è¸ªä¸å®Œæ•´**ï¼šç¼ºä¹å®Œæ•´çš„æ“ä½œå®¡è®¡å’Œå˜æ›´è¿½è¸ª

#### ä¸šåŠ¡ç›®æ ‡
- **å¤šç§Ÿæˆ·ç»Ÿä¸€ç®¡ç†**ï¼šæä¾›å®Œå–„çš„å¤šç§Ÿæˆ·ç®¡ç†æœºåˆ¶ï¼Œç¡®ä¿æ•°æ®å®‰å…¨éš”ç¦»
- **æƒé™ç²¾ç»†åŒ–æ§åˆ¶**ï¼šå»ºç«‹åŸºäºè§’è‰²çš„æƒé™ç®¡ç†ä½“ç³»ï¼Œç¡®ä¿ç³»ç»Ÿå®‰å…¨
- **é…ç½®é›†ä¸­åŒ–ç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†ç³»ç»Ÿé…ç½®ï¼Œæå‡ç®¡ç†æ•ˆç‡
- **ç»„ç»‡æ¶æ„çµæ´»è°ƒæ•´**ï¼šæ”¯æŒç»„ç»‡æ¶æ„çš„çµæ´»å˜æ›´å’Œç®¡ç†
- **æ“ä½œå…¨ç¨‹å®¡è®¡**ï¼šå»ºç«‹å®Œæ•´çš„æ“ä½œå®¡è®¡ä½“ç³»ï¼Œç¡®ä¿åˆè§„æ€§

#### ä¸šåŠ¡æµç¨‹
```mermaid
graph TD
    A[ç§Ÿæˆ·åˆ›å»º] --> B[ç»„ç»‡æ¶æ„è®¾ç½®]
    B --> C[ç”¨æˆ·è´¦å·åˆ›å»º]
    C --> D[è§’è‰²æƒé™åˆ†é…]
    D --> E[ç³»ç»Ÿé…ç½®]
    E --> F[åŠŸèƒ½æ¨¡å—å¯ç”¨]
    F --> G[æ•°æ®åˆå§‹åŒ–]
    G --> H[æœåŠ¡å¼€é€š]
    H --> I[è¿è¥ç›‘æ§]
    I --> J[å˜æ›´ç®¡ç†]
    J --> K[å®¡è®¡æŠ¥å‘Š]
```

#### ç”¨æˆ·ç”»åƒ
- **ç³»ç»Ÿç®¡ç†å‘˜**ï¼šè´Ÿè´£æ•´ä¸ªç³»ç»Ÿçš„ç®¡ç†å’Œç»´æŠ¤ï¼Œæ‹¥æœ‰æœ€é«˜æƒé™
- **ç§Ÿæˆ·ç®¡ç†å‘˜**ï¼šç®¡ç†æœ¬ç§Ÿæˆ·çš„ç”¨æˆ·å’Œé…ç½®ï¼Œæƒé™èŒƒå›´é™å®šåœ¨ç§Ÿæˆ·å†…
- **éƒ¨é—¨ç®¡ç†å‘˜**ï¼šç®¡ç†æœ¬éƒ¨é—¨çš„ç”¨æˆ·å’Œèµ„æºï¼Œæƒé™èŒƒå›´é™å®šåœ¨éƒ¨é—¨å†…
- **æ™®é€šç”¨æˆ·**ï¼šä½¿ç”¨ç³»ç»ŸåŠŸèƒ½ï¼ŒæŸ¥çœ‹ä¸ªäººä¿¡æ¯å’Œæƒé™èŒƒå›´å†…çš„æ•°æ®

### 2. åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ç¼–å· | åŠŸèƒ½åç§° | ä¼˜å…ˆçº§ | æè¿° |
|---------|---------|--------|------|
| F010-001 | ç§Ÿæˆ·ç®¡ç† | P0 | å¤šç§Ÿæˆ·çš„åˆ›å»ºã€é…ç½®ã€ç®¡ç†å’Œæ•°æ®éš”ç¦» |
| F010-002 | ç”¨æˆ·ç®¡ç† | P0 | ç”¨æˆ·è´¦å·çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç† |
| F010-003 | è§’è‰²æƒé™ç®¡ç† | P0 | åŸºäºè§’è‰²çš„æƒé™åˆ†é…å’Œæ§åˆ¶ |
| F010-004 | éƒ¨é—¨ç®¡ç† | P0 | ç»„ç»‡æ¶æ„å’Œéƒ¨é—¨ä¿¡æ¯ç®¡ç† |
| F010-005 | ç³»ç»Ÿé…ç½®ç®¡ç† | P0 | ç³»ç»Ÿå‚æ•°å’ŒåŠŸèƒ½é…ç½®ç®¡ç† |
| F010-006 | æ“ä½œå®¡è®¡ | P1 | æ“ä½œæ—¥å¿—è®°å½•å’Œå®¡è®¡è¿½è¸ª |
| F010-007 | æ•°æ®å¤‡ä»½æ¢å¤ | P1 | ç³»ç»Ÿæ•°æ®çš„å¤‡ä»½å’Œæ¢å¤ |
| F010-008 | ç³»ç»Ÿç›‘æ§ | P1 | ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ç›‘æ§ |
| F010-009 | å®‰å…¨ç­–ç•¥ç®¡ç† | P1 | å¯†ç ç­–ç•¥ã€ç™»å½•ç­–ç•¥ç­‰å®‰å…¨é…ç½® |
| F010-010 | è®¸å¯è¯ç®¡ç† | P2 | ç³»ç»Ÿè®¸å¯è¯å’Œæˆæƒç®¡ç† |

### 3. ä¸šåŠ¡è§„åˆ™

#### å¤šç§Ÿæˆ·ç®¡ç†è§„åˆ™
- æ¯ä¸ªç§Ÿæˆ·å¿…é¡»æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦å’Œåç§°
- ç§Ÿæˆ·æ•°æ®å¿…é¡»å®Œå…¨éš”ç¦»ï¼Œä¸å…è®¸è·¨ç§Ÿæˆ·è®¿é—®
- ç§Ÿæˆ·èµ„æºé…é¢ä¸èƒ½è¶…è¿‡ç³»ç»Ÿæ€»é…é¢
- ç§Ÿæˆ·åˆ é™¤éœ€è¦å…ˆæ¸…ç†æ‰€æœ‰å…³è”æ•°æ®

#### ç”¨æˆ·æƒé™ç®¡ç†è§„åˆ™
- ç”¨æˆ·åªèƒ½è®¿é—®å…¶æƒé™èŒƒå›´å†…çš„æ•°æ®å’ŒåŠŸèƒ½
- è§’è‰²æƒé™é‡‡ç”¨æœ€å°æƒé™åŸåˆ™
- æƒé™å˜æ›´éœ€è¦ç®¡ç†å‘˜å®¡æ‰¹
- ç”¨æˆ·å¯†ç å¿…é¡»ç¬¦åˆå®‰å…¨ç­–ç•¥è¦æ±‚

#### ç³»ç»Ÿé…ç½®ç®¡ç†è§„åˆ™
- ç³»ç»Ÿé…ç½®å˜æ›´å¿…é¡»è®°å½•æ“ä½œæ—¥å¿—
- é‡è¦é…ç½®å˜æ›´éœ€è¦ç®¡ç†å‘˜å®¡æ‰¹æˆ–äºŒæ¬¡ç¡®è®¤
- é…ç½®å˜æ›´éœ€è¦æ”¯æŒå›æ»šæœºåˆ¶
- é…ç½®å‚æ•°å¿…é¡»è¿›è¡Œæœ‰æ•ˆæ€§éªŒè¯

### 4. ç”¨æˆ·æ•…äº‹

- **US010-001**: ä½œä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿç®¡ç†å¤šä¸ªç§Ÿæˆ·ï¼Œä»¥ä¾¿ä¸ºä¸åŒå®¢æˆ·æä¾›ç‹¬ç«‹çš„æœåŠ¡ç¯å¢ƒ
- **US010-002**: ä½œä¸ºç§Ÿæˆ·ç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿç®¡ç†æœ¬ç§Ÿæˆ·çš„ç”¨æˆ·å’Œæƒé™ï¼Œä»¥ä¾¿ç¡®ä¿æ•°æ®å®‰å…¨å’Œè®¿é—®æ§åˆ¶
- **US010-003**: ä½œä¸ºéƒ¨é—¨ç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿç®¡ç†éƒ¨é—¨ç»„ç»‡æ¶æ„ï¼Œä»¥ä¾¿åˆç†åˆ†é…äººå‘˜å’Œæƒé™
- **US010-004**: ä½œä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿç»Ÿä¸€ç®¡ç†ç³»ç»Ÿé…ç½®ï¼Œä»¥ä¾¿ç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ

### 5. ç”¨ä¾‹

#### ç”¨ä¾‹1ï¼šç§Ÿæˆ·ç®¡ç†
- **Given**: ç”¨æˆ·ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰ç§Ÿæˆ·ç®¡ç†æƒé™
- **When**: ç”¨æˆ·åˆ›å»ºæ–°ç§Ÿæˆ·å¹¶é…ç½®åŸºæœ¬ä¿¡æ¯ã€èµ„æºé…é¢å’ŒåŠŸèƒ½æ¨¡å—
- **Then**: ç§Ÿæˆ·åˆ›å»ºæˆåŠŸï¼Œæ•°æ®éš”ç¦»ç­–ç•¥ç”Ÿæ•ˆï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨

#### ç”¨ä¾‹2ï¼šç”¨æˆ·æƒé™ç®¡ç†
- **Given**: ç”¨æˆ·ä¸ºç®¡ç†å‘˜ï¼Œæ‹¥æœ‰ç”¨æˆ·ç®¡ç†æƒé™
- **When**: ç”¨æˆ·åˆ›å»ºæ–°ç”¨æˆ·å¹¶åˆ†é…è§’è‰²å’Œæƒé™èŒƒå›´
- **Then**: ç”¨æˆ·æƒé™é…ç½®å®Œæˆï¼Œå¯ä»¥æŒ‰ç…§æƒé™èŒƒå›´è®¿é—®ç³»ç»ŸåŠŸèƒ½

#### ç”¨ä¾‹3ï¼šç³»ç»Ÿé…ç½®ç®¡ç†
- **Given**: ç”¨æˆ·ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰é…ç½®ç®¡ç†æƒé™
- **When**: ç”¨æˆ·ä¿®æ”¹ç³»ç»Ÿé…ç½®å‚æ•°å¹¶ä¿å­˜
- **Then**: é…ç½®å˜æ›´ç”Ÿæ•ˆï¼Œæ“ä½œæ—¥å¿—è®°å½•å®Œæ•´

### 6. æ•°æ®æ¨¡å‹

```mermaid
erDiagram
    Tenant {
        id bigint PK
        name varchar
        code varchar UK
        status varchar
        resource_quota json
        config json
        created_at timestamp
        updated_at timestamp
    }

    Department {
        id bigint PK
        tenant_id bigint FK
        parent_id bigint FK
        name varchar
        description text
        manager_id bigint FK
        created_at timestamp
        updated_at timestamp
    }

    User {
        id bigint PK
        tenant_id bigint FK
        department_id bigint FK
        username varchar UK
        password varchar
        email varchar
        phone varchar
        status varchar
        last_login_at timestamp
        created_at timestamp
        updated_at timestamp
    }

    Role {
        id bigint PK
        tenant_id bigint FK
        name varchar
        code varchar
        description text
        is_system boolean
        created_at timestamp
        updated_at timestamp
    }

    Permission {
        id bigint PK
        name varchar
        code varchar UK
        resource varchar
        action varchar
        description text
        created_at timestamp
    }

    UserRole {
        id bigint PK
        user_id bigint FK
        role_id bigint FK
        created_at timestamp
    }

    RolePermission {
        id bigint PK
        role_id bigint FK
        permission_id bigint FK
        created_at timestamp
    }

    SystemConfig {
        id bigint PK
        tenant_id bigint FK
        config_key varchar
        config_value text
        config_type varchar
        description text
        is_encrypted boolean
        created_at timestamp
        updated_at timestamp
    }

    AuditLog {
        id bigint PK
        tenant_id bigint FK
        user_id bigint FK
        action varchar
        resource varchar
        resource_id varchar
        old_value text
        new_value text
        ip_address varchar
        user_agent text
        created_at timestamp
    }

    Tenant ||--o{ Department : has
    Tenant ||--o{ User : has
    Tenant ||--o{ Role : has
    Tenant ||--o{ SystemConfig : has
    Tenant ||--o{ AuditLog : has
    Department ||--o{ User : belongs_to
    Department ||--o{ Department : parent_child
    User ||--o{ UserRole : has
    Role ||--o{ UserRole : belongs_to
    Role ||--o{ RolePermission : has
    Permission ||--o{ RolePermission : belongs_to
```

#### æ•°æ®å­—å…¸

| è¡¨å | å­—æ®µå | ç±»å‹ | é•¿åº¦ | å¿…å¡« | è¯´æ˜ |
|------|--------|------|------|------|------|
| tenant | id | bigint | - | æ˜¯ | ç§Ÿæˆ·ä¸»é”®ID |
| tenant | name | varchar | 100 | æ˜¯ | ç§Ÿæˆ·åç§° |
| tenant | code | varchar | 50 | æ˜¯ | ç§Ÿæˆ·ä»£ç ï¼Œå”¯ä¸€æ ‡è¯† |
| tenant | status | varchar | 20 | æ˜¯ | ç§Ÿæˆ·çŠ¶æ€ï¼šactive/inactive/suspended |
| tenant | resource_quota | json | - | å¦ | èµ„æºé…é¢é…ç½® |
| user | id | bigint | - | æ˜¯ | ç”¨æˆ·ä¸»é”®ID |
| user | tenant_id | bigint | - | æ˜¯ | æ‰€å±ç§Ÿæˆ·ID |
| user | department_id | bigint | - | å¦ | æ‰€å±éƒ¨é—¨ID |
| user | username | varchar | 50 | æ˜¯ | ç”¨æˆ·åï¼Œå…¨å±€å”¯ä¸€ |
| user | status | varchar | 20 | æ˜¯ | ç”¨æˆ·çŠ¶æ€ï¼šactive/inactive/locked |
| role | id | bigint | - | æ˜¯ | è§’è‰²ä¸»é”®ID |
| role | tenant_id | bigint | - | æ˜¯ | æ‰€å±ç§Ÿæˆ·ID |
| role | name | varchar | 100 | æ˜¯ | è§’è‰²åç§° |
| role | code | varchar | 50 | æ˜¯ | è§’è‰²ä»£ç  |
| role | is_system | boolean | - | æ˜¯ | æ˜¯å¦ç³»ç»Ÿè§’è‰² |

### 7. APIè§„èŒƒ

#### è·å–ç§Ÿæˆ·åˆ—è¡¨API
- **URL**: `GET /api/v1/tenants`
- **Method**: GET
- **è¯·æ±‚å‚æ•°**:
```json
{
  "page": 1,
  "size": 20,
  "status": "string",
  "keyword": "string"
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 50,
    "page": 1,
    "size": 20,
    "items": [
      {
        "id": 1,
        "name": "å®¢æˆ·A",
        "code": "TENANT_A",
        "status": "active",
        "userCount": 25,
        "createdAt": "2025-08-01T00:00:00Z"
      }
    ]
  }
}
```

#### åˆ›å»ºç”¨æˆ·API
- **URL**: `POST /api/v1/users`
- **Method**: POST
- **è¯·æ±‚å‚æ•°**:
```json
{
  "username": "string",
  "password": "string",
  "email": "string",
  "phone": "string",
  "departmentId": "number",
  "roleIds": ["number"]
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "username": "newuser",
    "email": "user@example.com",
    "status": "active",
    "createdAt": "2025-08-10T10:00:00Z"
  }
}
```

#### æ›´æ–°ç³»ç»Ÿé…ç½®API
- **URL**: `PUT /api/v1/system-config`
- **Method**: PUT
- **è¯·æ±‚å‚æ•°**:
```json
{
  "configs": [
    {
      "configKey": "string",
      "configValue": "string",
      "description": "string"
    }
  ]
}
```
- **å“åº”æ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "updatedCount": 5,
    "updatedAt": "2025-08-10T10:00:00Z"
  }
}
```

### 8. éåŠŸèƒ½éœ€æ±‚

#### æ€§èƒ½è¦æ±‚
- é¡µé¢åŠ è½½æ—¶é—´ï¼šç®¡ç†ç•Œé¢åŠ è½½ < 2ç§’
- ç”¨æˆ·æŸ¥è¯¢æ€§èƒ½ï¼šæ”¯æŒ100,000+ç”¨æˆ·çš„å¿«é€ŸæŸ¥è¯¢ï¼Œå“åº”æ—¶é—´ < 1ç§’
- æƒé™éªŒè¯æ€§èƒ½ï¼šæƒé™éªŒè¯å“åº”æ—¶é—´ < 100ms
- é…ç½®æ›´æ–°æ€§èƒ½ï¼šé…ç½®å˜æ›´ç”Ÿæ•ˆæ—¶é—´ < 30ç§’
- å¹¶å‘æ”¯æŒï¼šæ”¯æŒ50+ç®¡ç†å‘˜åŒæ—¶æ“ä½œ

#### å¯ç”¨æ€§è¦æ±‚
- ç³»ç»Ÿå¯ç”¨æ€§ï¼šâ‰¥ 99.9%
- æ•°æ®ä¸€è‡´æ€§ï¼šç”¨æˆ·æƒé™å’Œé…ç½®æ•°æ®ä¸€è‡´æ€§ â‰¥ 99.9%
- æ“ä½œæˆåŠŸç‡ï¼šç®¡ç†æ“ä½œæˆåŠŸç‡ â‰¥ 99%
- å®¡è®¡å®Œæ•´æ€§ï¼šæ“ä½œå®¡è®¡è®°å½•å®Œæ•´ç‡ 100%

#### å®‰å…¨è¦æ±‚
- å¤šç§Ÿæˆ·æ•°æ®å®Œå…¨éš”ç¦»ï¼Œé›¶æ³„éœ²
- åŸºäºè§’è‰²çš„ç»†ç²’åº¦æƒé™æ§åˆ¶
- æ‰€æœ‰ç®¡ç†æ“ä½œå®Œæ•´è®°å½•
- å¼ºå¯†ç ç­–ç•¥å’Œå®šæœŸæ›´æ¢æœºåˆ¶
- æ•æ„Ÿé…ç½®ä¿¡æ¯åŠ å¯†å­˜å‚¨

### 9. éªŒæ”¶æ ‡å‡†

#### åŠŸèƒ½éªŒæ”¶æ ‡å‡†
- ç§Ÿæˆ·ç®¡ç†ï¼šæ”¯æŒç§Ÿæˆ·çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ç”¨æˆ·ç®¡ç†ï¼šæ”¯æŒç”¨æˆ·è´¦å·å’Œæƒé™çš„ç²¾ç»†ç®¡ç†
- ç³»ç»Ÿé…ç½®ï¼šæ”¯æŒç³»ç»Ÿå‚æ•°çš„ç»Ÿä¸€é…ç½®å’Œç®¡ç†
- æ“ä½œå®¡è®¡ï¼šå®Œæ•´è®°å½•æ‰€æœ‰ç®¡ç†æ“ä½œ
- å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»éªŒè¯é€šè¿‡

#### æ€§èƒ½éªŒæ”¶æ ‡å‡†
- æŸ¥è¯¢æ€§èƒ½ï¼š100,000ç”¨æˆ·æŸ¥è¯¢1ç§’å†…å“åº”
- æƒé™éªŒè¯ï¼šæƒé™éªŒè¯100mså†…å®Œæˆ
- é…ç½®æ›´æ–°ï¼šé…ç½®å˜æ›´30ç§’å†…ç”Ÿæ•ˆ
- å¹¶å‘æµ‹è¯•ï¼š50ç®¡ç†å‘˜åŒæ—¶æ“ä½œæ­£å¸¸

#### å®‰å…¨éªŒæ”¶æ ‡å‡†
- æ•°æ®éš”ç¦»ï¼šå¤šç§Ÿæˆ·æ•°æ®å®Œå…¨éš”ç¦»
- æƒé™æ§åˆ¶ï¼šæƒé™éªŒè¯å‡†ç¡®ç‡100%
- å®¡è®¡å®Œæ•´ï¼šæ“ä½œå®¡è®¡è®°å½•å®Œæ•´æ— é—æ¼
- å¯†ç å®‰å…¨ï¼šå¯†ç ç­–ç•¥éªŒè¯é€šè¿‡

### 10. ä¾èµ–ä¸çº¦æŸ

#### æŠ€æœ¯ä¾èµ–
- Spring Boot 3.2 + Java 17
- Spring Security + JWT
- PostgreSQL 15 + Redis 7
- è‡ªç ”å®¡è®¡ç»„ä»¶

#### æ¨¡å—ä¾èµ–
- REQ-001ï¼šåŸºç¡€æ¶æ„ä¸è®¤è¯ç³»ç»Ÿï¼ˆè®¤è¯å’ŒæˆæƒåŸºç¡€ï¼‰
- ä½œä¸ºå…¶ä»–æ‰€æœ‰æ¨¡å—çš„åŸºç¡€ä¾èµ–

#### ä¸šåŠ¡çº¦æŸ
- å¿…é¡»ç¬¦åˆæ•°æ®ä¿æŠ¤å’Œéšç§æ³•è§„è¦æ±‚
- å¿…é¡»ç¬¦åˆä¼ä¸šå®‰å…¨ç®¡ç†æ ‡å‡†
- å¿…é¡»æ»¡è¶³å†…æ§å’Œå¤–éƒ¨å®¡è®¡è¦æ±‚
- å¿…é¡»æ”¯æŒå¤šç§Ÿæˆ·å®Œå…¨æ•°æ®éš”ç¦»

#### èµ„æºçº¦æŸ
- å¼€å‘æ—¶é—´ï¼š1.5å‘¨å¼€å‘å‘¨æœŸ
- å¼€å‘äººåŠ›ï¼š2ååç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œ1åå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ
- æ€§èƒ½è¦æ±‚ï¼šæ”¯æŒ50+ç®¡ç†å‘˜å¹¶å‘ï¼Œ100,000+ç”¨æˆ·ç®¡ç†

---

## å‘½åç»Ÿä¸€è¡¨

åŸºäºå¯¹æ‰€æœ‰æ¨¡å—çš„åˆ†æï¼Œä»¥ä¸‹æ˜¯å‘ç°çš„å‘½åå·®å¼‚å’Œç»Ÿä¸€è§„èŒƒï¼š

| åŸå‘½å | æ–°å‘½å | å½±å“èŒƒå›´ | è¯´æ˜ |
|--------|--------|----------|------|
| ticket_no | ticketNo | APIå“åº” | å·¥å•ç¼–å·å­—æ®µç»Ÿä¸€ä½¿ç”¨camelCase |
| assignee_id | assigneeId | APIè¯·æ±‚/å“åº” | åˆ†é…äººIDå­—æ®µç»Ÿä¸€ä½¿ç”¨camelCase |
| created_at | createdAt | APIå“åº” | åˆ›å»ºæ—¶é—´å­—æ®µç»Ÿä¸€ä½¿ç”¨camelCase |
| updated_at | updatedAt | APIå“åº” | æ›´æ–°æ—¶é—´å­—æ®µç»Ÿä¸€ä½¿ç”¨camelCase |
| tenant_id | tenantId | APIè¯·æ±‚/å“åº” | ç§Ÿæˆ·IDå­—æ®µç»Ÿä¸€ä½¿ç”¨camelCase |
| user_id | userId | APIè¯·æ±‚/å“åº” | ç”¨æˆ·IDå­—æ®µç»Ÿä¸€ä½¿ç”¨camelCase |
| file_name | fileName | APIå“åº” | æ–‡ä»¶åå­—æ®µç»Ÿä¸€ä½¿ç”¨camelCase |
| file_path | filePath | APIå“åº” | æ–‡ä»¶è·¯å¾„å­—æ®µç»Ÿä¸€ä½¿ç”¨camelCase |
| file_size | fileSize | APIå“åº” | æ–‡ä»¶å¤§å°å­—æ®µç»Ÿä¸€ä½¿ç”¨camelCase |
| mime_type | mimeType | APIå“åº” | MIMEç±»å‹å­—æ®µç»Ÿä¸€ä½¿ç”¨camelCase |
| date_range | dateRange | APIè¯·æ±‚ | æ—¥æœŸèŒƒå›´å‚æ•°ç»Ÿä¸€ä½¿ç”¨camelCase |
| page_size | pageSize | APIè¯·æ±‚ | åˆ†é¡µå¤§å°å‚æ•°ç»Ÿä¸€ä½¿ç”¨camelCase |

**ç»Ÿä¸€è§„èŒƒè¯´æ˜**ï¼š
- **æ•°æ®åº“å­—æ®µ**ï¼šç»Ÿä¸€ä½¿ç”¨ snake_caseï¼ˆå¦‚ created_at, tenant_idï¼‰
- **API JSONå­—æ®µ**ï¼šç»Ÿä¸€ä½¿ç”¨ camelCaseï¼ˆå¦‚ createdAt, tenantIdï¼‰
- **APIè·¯å¾„**ï¼šç»Ÿä¸€ä½¿ç”¨ kebab-caseï¼ˆå¦‚ /api/v1/my-tasksï¼‰
- **è¡¨å**ï¼šç»Ÿä¸€ä½¿ç”¨ snake_caseï¼ˆå¦‚ ticket_record, user_roleï¼‰
- **å¸¸é‡**ï¼šç»Ÿä¸€ä½¿ç”¨ UPPER_SNAKE_CASEï¼ˆå¦‚ MAX_FILE_SIZEï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv3.2
**åˆ›å»ºæ—¥æœŸ**ï¼š2025å¹´8æœˆ
**æœ€åæ›´æ–°**ï¼š2025å¹´8æœˆ10æ—¥
**ç»´æŠ¤å›¢é˜Ÿ**ï¼šITè¿ç»´é—¨æˆ·ç³»ç»Ÿå¼€å‘å›¢é˜Ÿ
**æ–‡æ¡£çŠ¶æ€**ï¼šå·²å®ŒæˆP0æ¨¡å—æ•´åˆï¼Œå¾…ç»§ç»­P1å’ŒP2æ¨¡å—
