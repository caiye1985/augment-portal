## 任务：生成 IT运维门户系统模块后端开发PRD

### 背景与目标
基于模块PRD和API设计，生成详细的后端开发需求文档。采用迭代式处理，每次专注1-2个模块，确保生成的PRD信息密度高、技术方案具体可执行，能够直接指导后端开发工作。

### 前置要求
1. **核心参考文档**：
   - 全局上下文：`docs/global-context.md`
   - 模块 PRD：`docs/prd/split/4.5/modules/REQ-003.md`
   - API 定义：`（文件不存在，跳过引用）`
   - Mock 数据规范：`docs/prd/split/4.5/globals/05-mock-data-guidelines.md`
   - 技术栈规范：`docs/prd/split/4.5/appendix/03-technology-stack.md`
   - 架构设计：`docs/prd/split/4.5/appendix/05-architecture-diagrams.md`
   - 业务流程：`docs/prd/split/4.5/globals/04-business-processes.md`

2. **技术约束**：
   - Spring Boot 3.2.11 + Spring Security + Spring Data JPA
   - PostgreSQL 15.5 + Redis 7.2.4
   - 多租户架构，所有业务实体包含tenant_id
   - RESTful API设计，统一异常处理
   - 代码覆盖率 ≥ 80%，接口响应时间 ≤ 500ms

### 实现步骤

#### Step 1：深度需求分析
1. **业务需求映射**：
   - 分析模块PRD中的功能需求表
   - 将业务功能映射到技术实现
   - 识别核心业务实体和关系

2. **API接口分析**：
   - 基于API定义分析所需的Controller层
   - 确定Service层业务逻辑
   - 设计Repository层数据访问

3. **数据流分析**：
   - 梳理数据的创建、读取、更新、删除流程
   - 识别数据验证和转换需求
   - 设计缓存策略和数据同步机制

#### Step 2：技术架构设计
1. **分层架构设计**：
   - **Controller层**：API端点实现，参数验证，异常处理
   - **Service层**：业务逻辑实现，事务管理，权限控制
   - **Repository层**：数据访问，查询优化，缓存集成
   - **Entity层**：JPA实体设计，关系映射，审计字段

2. **核心组件设计**：
   - 业务服务类的职责划分
   - 数据传输对象（DTO）设计
   - 异常处理和错误码定义
   - 配置管理和环境隔离

3. **安全架构**：
   - JWT认证集成
   - 基于角色的权限控制（RBAC）
   - 数据权限过滤（多租户）
   - 敏感数据加密存储

#### Step 3：数据模型设计
1. **实体类设计**：
   - JPA Entity注解配置
   - 字段类型和约束定义
   - 关系映射（@OneToMany, @ManyToOne等）
   - 审计字段（创建时间、更新时间、操作人）

2. **数据库设计**：
   - 表结构定义（DDL语句）
   - 索引设计和查询优化
   - 外键约束和数据完整性
   - 分区策略（如适用）

3. **数据访问层**：
   - Repository接口定义
   - 自定义查询方法
   - 分页和排序支持
   - 缓存注解配置

#### Step 4：业务逻辑实现
1. **服务层设计**：
   - 业务方法的输入输出定义
   - 事务边界和隔离级别
   - 业务规则验证
   - 异步处理和消息队列

2. **集成接口**：
   - 与其他模块的API调用
   - 外部系统集成方案
   - 数据同步和一致性保证
   - 错误重试和熔断机制

#### Step 5：技术质量设计
1. **性能设计**：
   - 响应时间优化策略（缓存、索引、查询优化）
   - 并发处理能力设计（连接池、线程池配置）
   - 资源使用监控和限制
   - 性能瓶颈识别和解决方案

2. **测试设计**：
   - **单元测试**：Service层业务逻辑测试，Repository层数据访问测试
   - **集成测试**：API端点测试，数据库集成测试，外部服务Mock测试
   - **性能测试**：接口压力测试，数据库性能测试，并发场景测试
   - **测试数据**：Mock数据准备，测试环境配置，自动化测试流程

3. **代码质量保证**：
   - 编码规范和静态检查配置
   - 代码审查要点和检查清单
   - 异常处理和日志记录规范
   - 文档注释和API文档生成

### 输出要求
生成文件：`docs/prd/backend/REQ-003-backend-prd.md`

**文档结构**：
1. **模块概述**（业务价值、技术目标、架构定位）
2. **技术架构**（分层设计、核心组件、技术选型）
3. **API实现**（Controller设计、参数验证、响应处理）
4. **业务逻辑**（Service层设计、业务规则、事务管理）
5. **数据模型**（Entity设计、Repository实现、缓存策略）
6. **安全设计**（认证授权、数据权限、审计日志）
7. **性能优化**（查询优化、缓存使用、异步处理、性能指标）
8. **测试设计**（测试策略、覆盖率要求、Mock方案、验收标准）
9. **技术实施**（开发任务分解、技术难点、实现顺序）

### 技术质量标准
1. **架构一致性**：遵循分层架构，符合Spring Boot最佳实践
2. **性能要求**：接口响应时间≤500ms，支持1000并发用户，数据库查询优化
3. **代码质量**：单元测试覆盖率≥80%，遵循项目编码规范，通过静态代码检查
4. **安全标准**：JWT认证集成，RBAC权限控制，敏感数据加密，SQL注入防护
5. **API规范**：与OpenAPI定义完全对齐，支持Mock Server联调，错误处理统一
6. **数据完整性**：事务边界明确，多租户数据隔离，审计日志完整
