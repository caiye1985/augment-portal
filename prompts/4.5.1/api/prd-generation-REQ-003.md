## 任务：生成 AI开发助手专用的高密度模块PRD文档

### 背景与目标
基于现有的API文档和需求文档，生成适合AI开发助手使用的高密度、结构化PRD文档。此文档专门设计为AI可解析的格式，包含完整的业务需求、技术规范、数据模型和实现指导，确保AI能够基于此PRD生成高质量的系统实现代码。

### 前置要求
1. **核心参考文档**：
   - 全局上下文：`docs/global-context.md`
   - 当前模块 PRD：`docs/prd/split/4.5.1/modules/REQ-003.md`
   - 当前模块 API 文档：`docs/api/4.5.1/modules/REQ-003-工单管理系统/openapi.yaml`
   - Mock 数据规范：`docs/prd/split/4.5.1/globals/05-mock-data-guidelines.md`
   - 技术栈规范：`docs/prd/split/4.5.1/appendix/03-technology-stack.md`
   - 业务流程文档：`docs/prd/split/4.5.1/globals/04-business-processes.md`
   - 术语表：`docs/prd/split/4.5.1/appendix/01-glossary-and-references.md`

2. **技术约束**：
   - 严格遵循 IT运维门户系统统一开发规则
   - 技术栈：Java 21 + Spring Boot 3.3.6 + Spring Security + Spring Data JPA
   - 前端：Vue 3.5.13 + Vite 6 + Element Plus 2.8.8
   - 支持多租户数据隔离
   - 符合RESTful设计原则
   - API 统一前缀 /api/v1，返回类型 Result<T>

### 实现步骤

#### Step 1：需求整合与分析
1. **业务需求提取**：
   - 从模块PRD中提取核心业务需求
   - 识别功能需求表中的所有功能点
   - 分析业务流程和用户场景
   - 确定模块边界和依赖关系

2. **API文档整合**：
   - 分析模块API文档中的接口定义
   - 提取数据模型和业务实体
   - 识别API操作和业务逻辑
   - 确认技术实现约束

3. **跨模块关系分析**：
   - 识别与其他模块的交互点
   - 确定数据流和事件驱动机制
   - 分析依赖关系和集成要求

#### Step 2：技术规范整合
1. **数据模型统一**：
   - 整合PRD和API中的数据模型定义
   - 确保字段类型、约束条件一致
   - 补充缺失的业务规则和验证逻辑
   - 明确多租户数据隔离策略

2. **接口规范统一**：
   - 确保API接口与业务需求的对应关系
   - 验证接口设计的完整性和一致性
   - 补充缺失的业务接口需求
   - 明确错误处理和异常场景

3. **性能安全要求**：
   - 整合性能指标和安全要求
   - 明确具体的技术实现方案
   - 定义监控和告警策略

#### Step 3：生成高密度PRD文档
基于整合分析的结果，生成包含以下核心部分的PRD文档：

1. **模块概述**：业务价值、功能范围、技术定位
2. **功能需求规格**：详细的功能需求表，包含验收标准
3. **技术架构设计**：数据模型、接口设计、集成方案
4. **实现指导**：具体的开发指导和最佳实践
5. **质量要求**：性能、安全、可用性等非功能需求
6. **验收标准**：明确的测试场景和验收条件

### 输出要求

#### 1. 文档结构规范
生成完整的PRD文档，包含：
- **文档头部**：模块信息、版本、变更说明
- **业务概述**：业务价值、功能范围、KPI指标
- **功能需求规格**：详细的功能需求表
- **技术架构设计**：数据模型、API接口、集成方案
- **实现指导**：开发指导、代码规范、最佳实践
- **质量要求**：性能、安全、监控等要求
- **验收标准**：测试场景、验收条件

#### 2. 内容质量要求
- **完整性**：覆盖所有业务需求和技术要求，文档字数不少于3000词
- **准确性**：确保PRD与API文档的一致性，技术栈信息准确
- **可实施性**：提供明确的技术实现指导，包含具体的代码示例
- **可测试性**：定义清晰的验收标准和测试场景
- **丰富性**：包含详细的业务流程、技术架构、实现指导和配置示例

#### 3. AI友好格式
- **结构化内容**：使用标准的Markdown格式
- **明确的标识**：功能点、接口、数据模型等使用统一标识
- **详细的示例**：提供具体的代码示例和配置示例
- **清晰的约束**：明确技术约束和业务规则

### 输出格式模板

```markdown
# REQ-003 - 工单管理系统

## 文档信息
- **模块编号**：REQ-003
- **模块名称**：工单管理系统
- **文档版本**：4.5.1-PRD
- **生成日期**：[当前日期]
- **文档类型**：AI开发助手专用PRD
- **技术栈**：Java 21 + Spring Boot 3.3.6 + Vue.js 3.5.13 + Element Plus 2.8.8

## 1. 模块概述

### 1.1 业务价值
[基于原PRD提取的业务价值和目标]

### 1.2 功能范围
[明确的功能边界和模块职责]

### 1.3 技术定位
[在整体架构中的技术定位和依赖关系]

### 1.4 KPI指标
[量化的业务指标和技术指标]

## 2. 功能需求规格

### 2.1 核心功能需求表
[详细的功能需求表，使用表格格式，包含以下列：
- 功能模块：主要功能分组
- 功能点：具体功能描述
- 优先级：P0/P1/P2
- 验收标准：具体的、可测量的验收条件
- API接口：对应的API端点
- 前端组件：对应的Vue.js组件]

### 2.2 业务流程设计
[关键业务流程的详细描述，包含：
- 主要业务流程图（用文字描述）
- 每个步骤的技术实现要点
- 异常处理流程
- 状态流转规则
- 与其他模块的交互点]

### 2.3 用户交互设计
[用户界面和交互流程的设计要求，包含：
- Vue.js组件设计规范
- Element Plus组件使用指导
- 响应式设计要求
- 用户体验优化策略
- 前端路由设计]

## 3. 技术架构设计

### 3.1 数据模型设计
[完整的数据模型定义，包含：
- 核心实体关系图（用文字描述）
- 数据表结构定义（包含字段类型、约束、索引）
- 多租户数据隔离策略
- 数据完整性约束
- 分库分表策略（如适用）
- 缓存设计方案]

### 3.2 API接口设计
[基于API文档的接口设计规范，包含：
- 完整的API接口列表
- 请求/响应数据结构
- 统一的Result<T>响应格式
- 错误码定义和异常处理
- API版本管理策略
- 接口性能要求]

### 3.3 集成方案设计
[与其他模块的集成方案，包含：
- 模块间依赖关系图
- 数据交互接口定义
- 事件驱动机制设计
- 消息队列使用方案
- 分布式事务处理
- 服务降级和熔断策略]

### 3.4 安全架构设计
[权限控制和数据安全设计，包含：
- RBAC权限模型设计
- JWT认证机制
- API接口权限控制
- 数据加密策略
- 审计日志设计
- 安全漏洞防护措施]

## 4. 实现指导

### 4.1 开发指导
[具体的开发步骤和技术实现要点，包含：
- 后端开发步骤（Spring Boot项目结构、JPA实体设计、Service层实现、Controller层实现）
- 前端开发步骤（Vue.js项目结构、组件设计、状态管理、API集成）
- 数据库设计和迁移脚本
- 单元测试和集成测试编写指导
- 代码审查检查清单]

### 4.2 代码规范
[代码结构、命名规范、最佳实践，包含：
- Java包结构规范（com.fxtech.portal.{module}）
- 类命名规范（Entity、Service、Controller、Repository）
- Vue.js组件命名规范
- API接口命名规范
- 数据库表和字段命名规范
- 代码注释和文档规范]

### 4.3 配置要求
[数据库配置、应用配置、部署配置，包含：
- Spring Boot配置文件示例
- 数据库连接配置
- Redis缓存配置
- 日志配置
- 安全配置
- 环境变量配置
- Docker部署配置]

## 5. 质量要求

### 5.1 性能要求
[具体的性能指标和优化策略]

### 5.2 安全要求
[详细的安全策略和实施方案]

### 5.3 可用性要求
[系统可用性、容错性、监控要求]

## 6. 验收标准

### 6.1 功能验收
[功能完整性验收标准和测试场景]

### 6.2 技术验收
[技术实现验收标准和性能测试]

### 6.3 集成验收
[模块集成验收标准和端到端测试]
```

### 质量控制要求
1. **内容一致性**：确保PRD与API文档的完全一致
2. **技术可行性**：所有技术方案在当前技术栈下可实现
3. **业务完整性**：覆盖所有业务需求和边界条件
4. **实施指导性**：提供明确的开发和测试指导
5. **AI可解析性**：使用标准化格式，便于AI理解和处理

### 重要提示
- **直接输出完整PRD文档**，不要输出分析报告格式
- **确保技术规范一致性**：严格遵循IT运维门户系统统一开发规则
- **保持业务逻辑完整性**：基于原PRD的核心业务逻辑进行技术增强
- **文档应直接可用**：生成的PRD文档应能直接用于AI开发助手的系统开发
