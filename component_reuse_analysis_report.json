{
  "total_issues": 0,
  "affected_modules": 0,
  "all_issues": [],
  "module_components": {
    "REQ-002-工作台与仪表板": {
      "file_path": "docs/api/4.5.1/modules/REQ-002-工作台与仪表板/openapi.yaml",
      "components": {
        "DashboardConfigInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "format": "int64",
                  "description": "租户ID",
                  "example": 1
                },
                "user_id": {
                  "type": "integer",
                  "format": "int64",
                  "description": "用户ID",
                  "example": 2001
                },
                "config_code": {
                  "type": "string",
                  "description": "配置编码",
                  "example": "DSH-20250815-001"
                },
                "config_name": {
                  "type": "string",
                  "description": "配置名称",
                  "example": "我的运维工作台"
                },
                "is_default": {
                  "type": "boolean",
                  "description": "是否默认配置",
                  "example": true
                },
                "is_shared": {
                  "type": "boolean",
                  "description": "是否共享配置",
                  "example": false
                },
                "version": {
                  "type": "integer",
                  "description": "配置版本号",
                  "example": 1
                },
                "status": {
                  "type": "integer",
                  "enum": [
                    1,
                    2
                  ],
                  "description": "状态：1-启用，2-禁用",
                  "example": 1
                }
              }
            }
          ]
        },
        "DashboardConfigDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/DashboardConfigInfo"
            },
            {
              "type": "object",
              "properties": {
                "layout_config": {
                  "type": "object",
                  "description": "布局配置（JSON格式）",
                  "properties": {
                    "grid_size": {
                      "type": "integer",
                      "description": "网格大小",
                      "example": 12
                    },
                    "row_height": {
                      "type": "integer",
                      "description": "行高度（像素）",
                      "example": 60
                    },
                    "widgets": {
                      "type": "array",
                      "description": "组件布局配置",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "description": "组件实例ID",
                            "example": "widget_1"
                          },
                          "x": {
                            "type": "integer",
                            "description": "X坐标",
                            "example": 0
                          },
                          "y": {
                            "type": "integer",
                            "description": "Y坐标",
                            "example": 0
                          },
                          "w": {
                            "type": "integer",
                            "description": "宽度",
                            "example": 6
                          },
                          "h": {
                            "type": "integer",
                            "description": "高度",
                            "example": 4
                          },
                          "widget_code": {
                            "type": "string",
                            "description": "组件编码",
                            "example": "ticket_overview"
                          },
                          "config": {
                            "type": "object",
                            "description": "组件个性化配置",
                            "example": {
                              "title": "工单概览",
                              "refresh_interval": 30
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "shared_users": {
                  "type": "array",
                  "description": "共享用户列表",
                  "items": {
                    "type": "object",
                    "properties": {
                      "user_id": {
                        "type": "integer",
                        "format": "int64",
                        "example": 2002
                      },
                      "username": {
                        "type": "string",
                        "example": "john_doe"
                      },
                      "real_name": {
                        "type": "string",
                        "example": "约翰·多伊"
                      },
                      "permission": {
                        "type": "string",
                        "enum": [
                          "read",
                          "write"
                        ],
                        "description": "共享权限",
                        "example": "read"
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "CreateDashboardConfigRequest": {
          "type": "object",
          "required": [
            "config_name",
            "layout_config"
          ],
          "properties": {
            "config_name": {
              "type": "string",
              "description": "配置名称",
              "example": "我的运维工作台"
            },
            "layout_config": {
              "type": "object",
              "description": "布局配置",
              "properties": {
                "grid_size": {
                  "type": "integer",
                  "description": "网格大小",
                  "example": 12
                },
                "row_height": {
                  "type": "integer",
                  "description": "行高度",
                  "example": 60
                },
                "widgets": {
                  "type": "array",
                  "description": "组件配置列表",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "widget_1"
                      },
                      "x": {
                        "type": "integer",
                        "example": 0
                      },
                      "y": {
                        "type": "integer",
                        "example": 0
                      },
                      "w": {
                        "type": "integer",
                        "example": 6
                      },
                      "h": {
                        "type": "integer",
                        "example": 4
                      },
                      "widget_code": {
                        "type": "string",
                        "example": "ticket_overview"
                      },
                      "config": {
                        "type": "object",
                        "example": {
                          "title": "工单概览"
                        }
                      }
                    }
                  }
                }
              }
            },
            "is_default": {
              "type": "boolean",
              "description": "是否设为默认配置",
              "example": false
            },
            "description": {
              "type": "string",
              "description": "配置描述",
              "example": "专为运维工程师设计的工作台"
            }
          }
        },
        "UpdateDashboardConfigRequest": {
          "type": "object",
          "properties": {
            "config_name": {
              "type": "string",
              "description": "配置名称",
              "example": "我的运维工作台（更新版）"
            },
            "layout_config": {
              "type": "object",
              "description": "布局配置"
            },
            "is_default": {
              "type": "boolean",
              "description": "是否设为默认配置",
              "example": true
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2
              ],
              "description": "状态",
              "example": 1
            },
            "description": {
              "type": "string",
              "description": "配置描述",
              "example": "更新后的工作台配置"
            }
          }
        },
        "ShareConfigRequest": {
          "type": "object",
          "required": [
            "shared_users"
          ],
          "properties": {
            "shared_users": {
              "type": "array",
              "description": "共享用户列表",
              "items": {
                "type": "object",
                "required": [
                  "user_id",
                  "permission"
                ],
                "properties": {
                  "user_id": {
                    "type": "integer",
                    "format": "int64",
                    "description": "用户ID",
                    "example": 2002
                  },
                  "permission": {
                    "type": "string",
                    "enum": [
                      "read",
                      "write"
                    ],
                    "description": "共享权限",
                    "example": "read"
                  }
                }
              }
            },
            "expire_time": {
              "type": "string",
              "format": "date-time",
              "description": "共享过期时间",
              "example": "2025-12-31T23:59:59Z"
            }
          }
        },
        "WidgetInfo": {
          "type": "object",
          "properties": {
            "widget_code": {
              "type": "string",
              "description": "组件编码",
              "example": "ticket_overview"
            },
            "widget_name": {
              "type": "string",
              "description": "组件名称",
              "example": "工单概览"
            },
            "widget_type": {
              "type": "string",
              "enum": [
                "chart",
                "table",
                "metric",
                "text"
              ],
              "description": "组件类型",
              "example": "chart"
            },
            "category": {
              "type": "string",
              "enum": [
                "ticket",
                "performance",
                "system",
                "custom"
              ],
              "description": "组件分类",
              "example": "ticket"
            },
            "description": {
              "type": "string",
              "description": "组件描述",
              "example": "显示工单统计信息和趋势图表"
            },
            "icon_url": {
              "type": "string",
              "format": "uri",
              "description": "组件图标URL",
              "example": "https://cdn.example.com/icons/ticket-overview.svg"
            },
            "preview_url": {
              "type": "string",
              "format": "uri",
              "description": "组件预览图URL",
              "example": "https://cdn.example.com/previews/ticket-overview.png"
            },
            "default_size": {
              "type": "object",
              "description": "默认尺寸",
              "properties": {
                "width": {
                  "type": "integer",
                  "example": 6
                },
                "height": {
                  "type": "integer",
                  "example": 4
                }
              }
            },
            "refresh_interval": {
              "type": "integer",
              "description": "默认刷新间隔（秒）",
              "example": 30
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2
              ],
              "description": "状态：1-启用，2-禁用",
              "example": 1
            }
          }
        },
        "WidgetDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/WidgetInfo"
            },
            {
              "type": "object",
              "properties": {
                "config_schema": {
                  "type": "object",
                  "description": "配置项Schema（JSON Schema格式）",
                  "example": {
                    "type": "object",
                    "properties": {
                      "title": {
                        "type": "string",
                        "description": "组件标题"
                      },
                      "show_legend": {
                        "type": "boolean",
                        "description": "是否显示图例"
                      },
                      "chart_type": {
                        "type": "string",
                        "enum": [
                          "line",
                          "bar",
                          "pie"
                        ],
                        "description": "图表类型"
                      }
                    }
                  }
                },
                "data_source_config": {
                  "type": "object",
                  "description": "数据源配置",
                  "properties": {
                    "source_type": {
                      "type": "string",
                      "enum": [
                        "api",
                        "database",
                        "static"
                      ],
                      "example": "api"
                    },
                    "api_endpoint": {
                      "type": "string",
                      "example": "/api/v1/tickets/statistics"
                    },
                    "query_params": {
                      "type": "object",
                      "example": {
                        "time_range": "24h"
                      }
                    },
                    "cache_duration": {
                      "type": "integer",
                      "description": "缓存时长（秒）",
                      "example": 300
                    }
                  }
                }
              }
            }
          ]
        },
        "WidgetDataResponse": {
          "type": "object",
          "properties": {
            "widget_code": {
              "type": "string",
              "description": "组件编码",
              "example": "ticket_overview"
            },
            "data_type": {
              "type": "string",
              "enum": [
                "chart",
                "table",
                "metric",
                "text"
              ],
              "description": "数据类型",
              "example": "chart"
            },
            "data": {
              "type": "object",
              "description": "组件数据（格式根据组件类型而定）",
              "example": {
                "total_tickets": 156,
                "pending_tickets": 23,
                "processing_tickets": 45,
                "completed_tickets": 88,
                "chart_data": [
                  {
                    "date": "2025-08-15",
                    "count": 12
                  },
                  {
                    "date": "2025-08-14",
                    "count": 18
                  }
                ]
              }
            },
            "last_updated": {
              "type": "string",
              "format": "date-time",
              "description": "数据最后更新时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "cache_expires": {
              "type": "string",
              "format": "date-time",
              "description": "缓存过期时间",
              "example": "2025-08-15T14:35:00Z"
            }
          }
        },
        "UserPreferences": {
          "type": "object",
          "properties": {
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 2001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "theme": {
              "type": "string",
              "enum": [
                "light",
                "dark",
                "auto"
              ],
              "description": "主题设置",
              "example": "light"
            },
            "language": {
              "type": "string",
              "enum": [
                "zh-CN",
                "en-US"
              ],
              "description": "语言设置",
              "example": "zh-CN"
            },
            "timezone": {
              "type": "string",
              "description": "时区设置",
              "example": "Asia/Shanghai"
            },
            "notification_settings": {
              "type": "object",
              "description": "通知设置",
              "properties": {
                "email_enabled": {
                  "type": "boolean",
                  "description": "邮件通知",
                  "example": true
                },
                "sms_enabled": {
                  "type": "boolean",
                  "description": "短信通知",
                  "example": false
                },
                "push_enabled": {
                  "type": "boolean",
                  "description": "推送通知",
                  "example": true
                },
                "sound_enabled": {
                  "type": "boolean",
                  "description": "声音提醒",
                  "example": true
                }
              }
            },
            "layout_preferences": {
              "type": "object",
              "description": "布局偏好",
              "properties": {
                "sidebar_collapsed": {
                  "type": "boolean",
                  "description": "侧边栏是否折叠",
                  "example": false
                },
                "grid_size": {
                  "type": "integer",
                  "description": "默认网格大小",
                  "example": 12
                },
                "widget_spacing": {
                  "type": "integer",
                  "description": "组件间距",
                  "example": 10
                }
              }
            },
            "auto_refresh_interval": {
              "type": "integer",
              "description": "自动刷新间隔（秒）",
              "example": 30
            },
            "default_dashboard_id": {
              "type": "integer",
              "format": "int64",
              "description": "默认工作台ID",
              "example": 1001
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "UpdateUserPreferencesRequest": {
          "type": "object",
          "properties": {
            "theme": {
              "type": "string",
              "enum": [
                "light",
                "dark",
                "auto"
              ],
              "description": "主题设置",
              "example": "dark"
            },
            "language": {
              "type": "string",
              "enum": [
                "zh-CN",
                "en-US"
              ],
              "description": "语言设置",
              "example": "zh-CN"
            },
            "timezone": {
              "type": "string",
              "description": "时区设置",
              "example": "Asia/Shanghai"
            },
            "notification_settings": {
              "type": "object",
              "description": "通知设置",
              "properties": {
                "email_enabled": {
                  "type": "boolean",
                  "example": true
                },
                "sms_enabled": {
                  "type": "boolean",
                  "example": false
                },
                "push_enabled": {
                  "type": "boolean",
                  "example": true
                },
                "sound_enabled": {
                  "type": "boolean",
                  "example": true
                }
              }
            },
            "layout_preferences": {
              "type": "object",
              "description": "布局偏好",
              "properties": {
                "sidebar_collapsed": {
                  "type": "boolean",
                  "example": false
                },
                "grid_size": {
                  "type": "integer",
                  "example": 12
                },
                "widget_spacing": {
                  "type": "integer",
                  "example": 10
                }
              }
            },
            "auto_refresh_interval": {
              "type": "integer",
              "description": "自动刷新间隔（秒）",
              "example": 60
            },
            "default_dashboard_id": {
              "type": "integer",
              "format": "int64",
              "description": "默认工作台ID",
              "example": 1002
            }
          }
        },
        "TaskInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "任务ID",
              "example": 3001
            },
            "task_type": {
              "type": "string",
              "enum": [
                "ticket",
                "maintenance",
                "inspection",
                "other"
              ],
              "description": "任务类型",
              "example": "ticket"
            },
            "title": {
              "type": "string",
              "description": "任务标题",
              "example": "处理服务器CPU使用率过高问题"
            },
            "description": {
              "type": "string",
              "description": "任务描述",
              "example": "生产服务器CPU使用率持续超过90%，需要紧急处理"
            },
            "priority": {
              "type": "string",
              "enum": [
                "urgent",
                "high",
                "medium",
                "low"
              ],
              "description": "优先级",
              "example": "high"
            },
            "status": {
              "type": "string",
              "enum": [
                "pending",
                "processing",
                "completed",
                "cancelled"
              ],
              "description": "任务状态",
              "example": "pending"
            },
            "assigned_to": {
              "type": "string",
              "description": "分配给",
              "example": "张三"
            },
            "due_date": {
              "type": "string",
              "format": "date-time",
              "description": "截止时间",
              "example": "2025-08-15T18:00:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:00:00Z"
            },
            "source_id": {
              "type": "string",
              "description": "来源ID（如工单ID）",
              "example": "TCK-20250815-001"
            }
          }
        },
        "NotificationInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "通知ID",
              "example": 5001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 2001
            },
            "type": {
              "type": "string",
              "enum": [
                "system",
                "ticket",
                "alert",
                "announcement"
              ],
              "description": "通知类型",
              "example": "ticket"
            },
            "title": {
              "type": "string",
              "description": "通知标题",
              "example": "新工单分配"
            },
            "content": {
              "type": "string",
              "description": "通知内容",
              "example": "您有一个新的高优先级工单需要处理"
            },
            "action_url": {
              "type": "string",
              "format": "uri",
              "description": "操作链接",
              "example": "/tickets/TCK-20250815-001"
            },
            "is_read": {
              "type": "boolean",
              "description": "是否已读",
              "example": false
            },
            "priority": {
              "type": "string",
              "enum": [
                "urgent",
                "high",
                "medium",
                "low"
              ],
              "description": "通知优先级",
              "example": "high"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "read_at": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "阅读时间",
              "example": null
            }
          }
        },
        "OverviewStatistics": {
          "type": "object",
          "properties": {
            "time_range": {
              "type": "string",
              "description": "统计时间范围",
              "example": "month"
            },
            "ticket_stats": {
              "type": "object",
              "description": "工单统计",
              "properties": {
                "total_tickets": {
                  "type": "integer",
                  "description": "总工单数",
                  "example": 156
                },
                "pending_tickets": {
                  "type": "integer",
                  "description": "待处理工单数",
                  "example": 23
                },
                "processing_tickets": {
                  "type": "integer",
                  "description": "处理中工单数",
                  "example": 45
                },
                "completed_tickets": {
                  "type": "integer",
                  "description": "已完成工单数",
                  "example": 88
                },
                "completion_rate": {
                  "type": "number",
                  "format": "float",
                  "description": "完成率（百分比）",
                  "example": 56.41
                }
              }
            },
            "performance_stats": {
              "type": "object",
              "description": "绩效统计",
              "properties": {
                "avg_response_time": {
                  "type": "number",
                  "format": "float",
                  "description": "平均响应时间（分钟）",
                  "example": 12.5
                },
                "avg_resolution_time": {
                  "type": "number",
                  "format": "float",
                  "description": "平均解决时间（小时）",
                  "example": 4.2
                },
                "customer_satisfaction": {
                  "type": "number",
                  "format": "float",
                  "description": "客户满意度（1-5分）",
                  "example": 4.3
                }
              }
            },
            "system_stats": {
              "type": "object",
              "description": "系统统计",
              "properties": {
                "active_users": {
                  "type": "integer",
                  "description": "活跃用户数",
                  "example": 45
                },
                "system_uptime": {
                  "type": "number",
                  "format": "float",
                  "description": "系统正常运行时间（百分比）",
                  "example": 99.8
                },
                "alert_count": {
                  "type": "integer",
                  "description": "告警数量",
                  "example": 3
                }
              }
            },
            "trend_data": {
              "type": "array",
              "description": "趋势数据",
              "items": {
                "type": "object",
                "properties": {
                  "date": {
                    "type": "string",
                    "format": "date",
                    "description": "日期",
                    "example": "2025-08-15"
                  },
                  "ticket_count": {
                    "type": "integer",
                    "description": "工单数量",
                    "example": 12
                  },
                  "completion_rate": {
                    "type": "number",
                    "format": "float",
                    "description": "完成率",
                    "example": 75.0
                  }
                }
              }
            },
            "last_updated": {
              "type": "string",
              "format": "date-time",
              "description": "数据最后更新时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "ApiResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "响应状态码",
              "example": 200
            },
            "message": {
              "type": "string",
              "description": "响应消息",
              "example": "操作成功"
            },
            "data": {
              "type": "object",
              "description": "响应数据"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "响应时间",
              "example": "2025-08-15T15:30:00Z"
            }
          }
        },
        "PagedResponse": {
          "allOf": [
            {
              "$ref": "#/components/schemas/ApiResponse"
            },
            {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "type": "integer",
                      "description": "总记录数",
                      "example": 100
                    },
                    "page": {
                      "type": "integer",
                      "description": "当前页码",
                      "example": 1
                    },
                    "size": {
                      "type": "integer",
                      "description": "每页大小",
                      "example": 20
                    },
                    "items": {
                      "type": "array",
                      "description": "数据列表",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "ErrorResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "错误状态码",
              "example": 400
            },
            "message": {
              "type": "string",
              "description": "错误消息",
              "example": "请求参数错误"
            },
            "error": {
              "type": "string",
              "description": "错误详情",
              "example": "配置名称不能为空"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "错误时间",
              "example": "2025-08-15T15:30:00Z"
            }
          }
        }
      },
      "issues": []
    },
    "REQ-005-知识库管理系统": {
      "file_path": "docs/api/4.5.1/modules/REQ-005-知识库管理系统/openapi.yaml",
      "components": {
        "KnowledgeArticle": {
          "type": "object",
          "description": "知识文档完整信息",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "文档ID",
              "example": 12345
            },
            "title": {
              "type": "string",
              "maxLength": 200,
              "description": "文档标题",
              "example": "Linux服务器性能优化完整指南"
            },
            "content": {
              "type": "string",
              "description": "富文本HTML内容",
              "example": "<h1>性能优化概述</h1><p>本文档详细介绍Linux服务器性能优化的方法...</p>"
            },
            "summary": {
              "type": "string",
              "maxLength": 500,
              "description": "文档摘要",
              "example": "全面介绍Linux服务器性能优化的方法、工具和最佳实践"
            },
            "category": {
              "$ref": "#/components/schemas/KnowledgeCategoryInfo"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "标签列表",
              "example": [
                "Linux",
                "性能优化",
                "服务器",
                "运维"
              ]
            },
            "keywords": {
              "type": "string",
              "maxLength": 500,
              "description": "关键词",
              "example": "Linux,性能优化,服务器,CPU,内存,磁盘,网络"
            },
            "author": {
              "$ref": "#/components/schemas/AuthorInfo"
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2,
                3,
                4,
                5
              ],
              "description": "状态：1-草稿，2-审核中，3-已发布，4-已下线，5-争议中",
              "example": 3
            },
            "visibility": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "可见性：1-公开，2-内部，3-私有",
              "example": 1
            },
            "version_no": {
              "type": "string",
              "pattern": "^\\d+\\.\\d+\\.\\d+$",
              "description": "当前版本号",
              "example": "1.2.0"
            },
            "statistics": {
              "$ref": "#/components/schemas/ArticleStatistics"
            },
            "quality_metrics": {
              "$ref": "#/components/schemas/QualityMetrics"
            },
            "timestamps": {
              "$ref": "#/components/schemas/ArticleTimestamps"
            },
            "attachments": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/AttachmentInfo"
              }
            },
            "metadata": {
              "$ref": "#/components/schemas/ArticleMetadata"
            }
          },
          "required": [
            "id",
            "title",
            "status",
            "author",
            "timestamps"
          ]
        },
        "KnowledgeArticleListItem": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string",
                  "description": "文档标题",
                  "example": "Linux服务器性能优化完整指南"
                },
                "summary": {
                  "type": "string",
                  "description": "文档摘要",
                  "example": "全面介绍Linux服务器性能优化的方法、工具和最佳实践"
                },
                "category_name": {
                  "type": "string",
                  "description": "分类名称",
                  "example": "系统运维"
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "标签列表",
                  "example": [
                    "Linux",
                    "性能优化",
                    "服务器"
                  ]
                },
                "author_name": {
                  "type": "string",
                  "description": "作者姓名",
                  "example": "张工程师"
                },
                "status": {
                  "type": "integer",
                  "enum": [
                    1,
                    2,
                    3,
                    4,
                    5
                  ],
                  "description": "状态：1-草稿，2-审核中，3-已发布，4-已下线，5-争议中",
                  "example": 3
                },
                "view_count": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "浏览次数",
                  "example": 1256
                },
                "like_count": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "点赞次数",
                  "example": 89
                },
                "rating": {
                  "type": "number",
                  "format": "float",
                  "minimum": 0,
                  "maximum": 5,
                  "description": "评分",
                  "example": 4.7
                },
                "quality_score": {
                  "type": "number",
                  "format": "float",
                  "minimum": 0,
                  "maximum": 100,
                  "description": "质量评分",
                  "example": 92.5
                }
              },
              "required": [
                "title",
                "status",
                "author_name"
              ]
            }
          ]
        },
        "CreateKnowledgeArticleRequest": {
          "type": "object",
          "description": "创建知识文档请求",
          "properties": {
            "title": {
              "type": "string",
              "maxLength": 200,
              "description": "文档标题",
              "example": "Linux服务器性能优化完整指南"
            },
            "content": {
              "type": "string",
              "description": "富文本HTML内容",
              "example": "<h1>性能优化概述</h1><p>本文档详细介绍Linux服务器性能优化的方法...</p>"
            },
            "summary": {
              "type": "string",
              "maxLength": 500,
              "description": "文档摘要",
              "example": "全面介绍Linux服务器性能优化的方法、工具和最佳实践"
            },
            "category_id": {
              "type": "integer",
              "format": "int64",
              "description": "分类ID",
              "example": 101
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "标签列表",
              "example": [
                "Linux",
                "性能优化",
                "服务器",
                "运维"
              ]
            },
            "keywords": {
              "type": "string",
              "maxLength": 500,
              "description": "关键词",
              "example": "Linux,性能优化,服务器,CPU,内存,磁盘,网络"
            },
            "visibility": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "可见性：1-公开，2-内部，3-私有",
              "default": 1,
              "example": 1
            },
            "is_template": {
              "type": "boolean",
              "description": "是否为模板",
              "default": false,
              "example": false
            },
            "attachments": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/AttachmentUpload"
              },
              "description": "附件列表"
            },
            "metadata": {
              "$ref": "#/components/schemas/ArticleMetadata"
            }
          },
          "required": [
            "title",
            "content",
            "category_id"
          ]
        },
        "UpdateKnowledgeArticleRequest": {
          "type": "object",
          "description": "更新知识文档请求",
          "properties": {
            "title": {
              "type": "string",
              "maxLength": 200,
              "description": "文档标题",
              "example": "Linux服务器性能优化完整指南"
            },
            "content": {
              "type": "string",
              "description": "富文本HTML内容",
              "example": "<h1>性能优化概述</h1><p>本文档详细介绍Linux服务器性能优化的方法...</p>"
            },
            "summary": {
              "type": "string",
              "maxLength": 500,
              "description": "文档摘要",
              "example": "全面介绍Linux服务器性能优化的方法、工具和最佳实践"
            },
            "category_id": {
              "type": "integer",
              "format": "int64",
              "description": "分类ID",
              "example": 101
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "标签列表",
              "example": [
                "Linux",
                "性能优化",
                "服务器",
                "运维"
              ]
            },
            "keywords": {
              "type": "string",
              "maxLength": 500,
              "description": "关键词",
              "example": "Linux,性能优化,服务器,CPU,内存,磁盘,网络"
            },
            "visibility": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "可见性：1-公开，2-内部，3-私有",
              "example": 1
            },
            "metadata": {
              "$ref": "#/components/schemas/ArticleMetadata"
            }
          },
          "required": [
            "title",
            "content",
            "category_id"
          ]
        },
        "PatchKnowledgeArticleRequest": {
          "type": "object",
          "description": "部分更新知识文档请求",
          "properties": {
            "title": {
              "type": "string",
              "maxLength": 200,
              "description": "文档标题",
              "example": "Linux服务器性能优化完整指南"
            },
            "content": {
              "type": "string",
              "description": "富文本HTML内容",
              "example": "<h1>性能优化概述</h1><p>本文档详细介绍Linux服务器性能优化的方法...</p>"
            },
            "summary": {
              "type": "string",
              "maxLength": 500,
              "description": "文档摘要",
              "example": "全面介绍Linux服务器性能优化的方法、工具和最佳实践"
            },
            "category_id": {
              "type": "integer",
              "format": "int64",
              "description": "分类ID",
              "example": 101
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "标签列表",
              "example": [
                "Linux",
                "性能优化",
                "服务器",
                "运维"
              ]
            },
            "keywords": {
              "type": "string",
              "maxLength": 500,
              "description": "关键词",
              "example": "Linux,性能优化,服务器,CPU,内存,磁盘,网络"
            },
            "visibility": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "可见性：1-公开，2-内部，3-私有",
              "example": 1
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2,
                3,
                4,
                5
              ],
              "description": "状态：1-草稿，2-审核中，3-已发布，4-已下线，5-争议中",
              "example": 3
            }
          }
        },
        "KnowledgeCategory": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "category_name": {
                  "type": "string",
                  "maxLength": 100,
                  "description": "分类名称",
                  "example": "系统运维"
                },
                "category_code": {
                  "type": "string",
                  "maxLength": 50,
                  "description": "分类编码",
                  "example": "system_ops"
                },
                "parent_id": {
                  "type": "integer",
                  "format": "int64",
                  "nullable": true,
                  "description": "父分类ID",
                  "example": 100
                },
                "description": {
                  "type": "string",
                  "description": "分类描述",
                  "example": "系统运维相关的技术文档和操作指南"
                },
                "icon": {
                  "type": "string",
                  "maxLength": 100,
                  "description": "分类图标",
                  "example": "icon-server"
                },
                "color": {
                  "type": "string",
                  "maxLength": 20,
                  "description": "分类颜色",
                  "example": "#1890ff"
                },
                "level_depth": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 5,
                  "description": "层级深度",
                  "example": 2
                },
                "path_names": {
                  "type": "string",
                  "maxLength": 500,
                  "description": "路径名称串",
                  "example": "技术文档/系统运维"
                },
                "article_count": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "文档数量",
                  "example": 156
                },
                "total_views": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "总浏览量",
                  "example": 25680
                },
                "avg_rating": {
                  "type": "number",
                  "format": "float",
                  "minimum": 0,
                  "maximum": 5,
                  "description": "平均评分",
                  "example": 4.3
                },
                "sort_order": {
                  "type": "integer",
                  "description": "排序权重",
                  "example": 10
                },
                "is_active": {
                  "type": "boolean",
                  "description": "是否启用",
                  "example": true
                },
                "access_level": {
                  "type": "integer",
                  "enum": [
                    1,
                    2,
                    3
                  ],
                  "description": "访问级别：1-公开，2-内部，3-受限",
                  "example": 1
                },
                "children": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/KnowledgeCategory"
                  },
                  "description": "子分类列表（树形结构时使用）"
                }
              },
              "required": [
                "category_name",
                "category_code",
                "level_depth",
                "is_active"
              ]
            }
          ]
        },
        "CreateKnowledgeCategoryRequest": {
          "type": "object",
          "description": "创建知识分类请求",
          "properties": {
            "category_name": {
              "type": "string",
              "maxLength": 100,
              "description": "分类名称",
              "example": "系统运维"
            },
            "category_code": {
              "type": "string",
              "maxLength": 50,
              "description": "分类编码",
              "example": "system_ops"
            },
            "parent_id": {
              "type": "integer",
              "format": "int64",
              "nullable": true,
              "description": "父分类ID",
              "example": 100
            },
            "description": {
              "type": "string",
              "description": "分类描述",
              "example": "系统运维相关的技术文档和操作指南"
            },
            "icon": {
              "type": "string",
              "maxLength": 100,
              "description": "分类图标",
              "example": "icon-server"
            },
            "color": {
              "type": "string",
              "maxLength": 20,
              "description": "分类颜色",
              "example": "#1890ff"
            },
            "sort_order": {
              "type": "integer",
              "description": "排序权重",
              "default": 0,
              "example": 10
            },
            "access_level": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "访问级别：1-公开，2-内部，3-受限",
              "default": 1,
              "example": 1
            }
          },
          "required": [
            "category_name",
            "category_code"
          ]
        },
        "KnowledgeVersion": {
          "type": "object",
          "description": "知识文档版本信息",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "版本ID",
              "example": 5001
            },
            "article_id": {
              "type": "integer",
              "format": "int64",
              "description": "文档ID",
              "example": 12345
            },
            "version_no": {
              "type": "string",
              "pattern": "^\\d+\\.\\d+\\.\\d+$",
              "description": "版本号",
              "example": "1.2.0"
            },
            "version_type": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "版本类型：1-主要，2-次要，3-修订",
              "example": 2
            },
            "title": {
              "type": "string",
              "maxLength": 200,
              "description": "版本标题",
              "example": "Linux服务器性能优化完整指南"
            },
            "content": {
              "type": "string",
              "description": "版本内容",
              "example": "<h1>性能优化概述</h1><p>本文档详细介绍...</p>"
            },
            "change_log": {
              "type": "string",
              "description": "变更日志",
              "example": "新增Docker容器性能优化章节，修复网络配置示例错误"
            },
            "change_summary": {
              "type": "string",
              "maxLength": 500,
              "description": "变更摘要",
              "example": "增加容器化环境优化内容，修复配置示例"
            },
            "file_size": {
              "type": "integer",
              "format": "int64",
              "description": "内容大小（字节）",
              "example": 51200
            },
            "word_count": {
              "type": "integer",
              "description": "字数统计",
              "example": 8500
            },
            "change_count": {
              "type": "integer",
              "description": "变更数量",
              "example": 15
            },
            "created_by": {
              "type": "integer",
              "format": "int64",
              "description": "创建人ID",
              "example": 1001
            },
            "created_by_name": {
              "type": "string",
              "description": "创建人姓名",
              "example": "张工程师"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-10T15:30:00Z"
            },
            "version_tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "版本标签",
              "example": [
                "stable",
                "reviewed"
              ]
            },
            "notes": {
              "type": "string",
              "description": "版本备注",
              "example": "经过专家审核的稳定版本"
            }
          },
          "required": [
            "id",
            "article_id",
            "version_no",
            "version_type",
            "title",
            "created_by",
            "created_at"
          ]
        },
        "CreateKnowledgeVersionRequest": {
          "type": "object",
          "description": "创建知识版本请求",
          "properties": {
            "version_type": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "版本类型：1-主要，2-次要，3-修订",
              "default": 3,
              "example": 2
            },
            "change_log": {
              "type": "string",
              "description": "变更日志",
              "example": "新增Docker容器性能优化章节，修复网络配置示例错误"
            },
            "change_summary": {
              "type": "string",
              "maxLength": 500,
              "description": "变更摘要",
              "example": "增加容器化环境优化内容，修复配置示例"
            },
            "version_tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "版本标签",
              "example": [
                "stable",
                "reviewed"
              ]
            },
            "notes": {
              "type": "string",
              "description": "版本备注",
              "example": "经过专家审核的稳定版本"
            },
            "auto_increment": {
              "type": "boolean",
              "description": "是否自动递增版本号",
              "default": true,
              "example": true
            }
          },
          "required": [
            "change_log"
          ]
        },
        "KnowledgeSearchResult": {
          "type": "object",
          "description": "知识搜索结果项",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "文档ID",
              "example": 12345
            },
            "title": {
              "type": "string",
              "description": "文档标题",
              "example": "Linux服务器性能优化完整指南"
            },
            "summary": {
              "type": "string",
              "description": "文档摘要",
              "example": "全面介绍Linux服务器性能优化的方法、工具和最佳实践"
            },
            "category_name": {
              "type": "string",
              "description": "分类名称",
              "example": "系统运维"
            },
            "category_path": {
              "type": "string",
              "description": "分类路径",
              "example": "技术文档/系统运维"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "标签列表",
              "example": [
                "Linux",
                "性能优化",
                "服务器"
              ]
            },
            "author_name": {
              "type": "string",
              "description": "作者姓名",
              "example": "张工程师"
            },
            "author_avatar": {
              "type": "string",
              "description": "作者头像URL",
              "example": "https://cdn.example.com/avatar/1001.jpg"
            },
            "view_count": {
              "type": "integer",
              "minimum": 0,
              "description": "浏览次数",
              "example": 1256
            },
            "like_count": {
              "type": "integer",
              "minimum": 0,
              "description": "点赞次数",
              "example": 89
            },
            "rating": {
              "type": "number",
              "format": "float",
              "minimum": 0,
              "maximum": 5,
              "description": "评分",
              "example": 4.7
            },
            "quality_score": {
              "type": "number",
              "format": "float",
              "minimum": 0,
              "maximum": 100,
              "description": "质量评分",
              "example": 92.5
            },
            "relevance_score": {
              "type": "number",
              "format": "float",
              "minimum": 0,
              "maximum": 100,
              "description": "相关性评分",
              "example": 95.6
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-10T15:30:00Z"
            },
            "highlights": {
              "type": "object",
              "description": "高亮显示的搜索匹配内容",
              "properties": {
                "title": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "标题中的高亮片段",
                  "example": [
                    "<em>Linux</em>服务器<em>性能优化</em>完整指南"
                  ]
                },
                "content": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "内容中的高亮片段",
                  "example": [
                    "...CPU<em>性能优化</em>是<em>Linux</em>服务器调优的重要环节..."
                  ]
                },
                "summary": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "摘要中的高亮片段",
                  "example": [
                    "全面介绍<em>Linux</em>服务器<em>性能优化</em>的方法..."
                  ]
                }
              }
            }
          },
          "required": [
            "id",
            "title",
            "category_name",
            "author_name",
            "relevance_score",
            "updated_at"
          ]
        },
        "SearchAggregations": {
          "type": "object",
          "description": "搜索聚合统计信息",
          "properties": {
            "categories": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "分类名称",
                    "example": "系统运维"
                  },
                  "count": {
                    "type": "integer",
                    "description": "文档数量",
                    "example": 89
                  }
                }
              },
              "description": "分类统计"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "标签名称",
                    "example": "Linux"
                  },
                  "count": {
                    "type": "integer",
                    "description": "文档数量",
                    "example": 67
                  }
                }
              },
              "description": "标签统计"
            },
            "authors": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "作者姓名",
                    "example": "张工程师"
                  },
                  "count": {
                    "type": "integer",
                    "description": "文档数量",
                    "example": 23
                  }
                }
              },
              "description": "作者统计"
            },
            "date_ranges": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "range": {
                    "type": "string",
                    "description": "时间范围",
                    "example": "最近一个月"
                  },
                  "count": {
                    "type": "integer",
                    "description": "文档数量",
                    "example": 45
                  }
                }
              },
              "description": "时间范围统计"
            }
          }
        },
        "SearchSuggestion": {
          "type": "object",
          "description": "搜索建议项",
          "properties": {
            "text": {
              "type": "string",
              "description": "建议文本",
              "example": "Linux系统优化"
            },
            "type": {
              "type": "string",
              "enum": [
                "keyword",
                "title",
                "tag",
                "category"
              ],
              "description": "建议类型",
              "example": "keyword"
            },
            "score": {
              "type": "number",
              "format": "float",
              "description": "建议评分",
              "example": 0.95
            },
            "count": {
              "type": "integer",
              "description": "相关文档数量",
              "example": 156
            },
            "highlight": {
              "type": "string",
              "description": "高亮显示的建议文本",
              "example": "<em>Linux</em>系统优化"
            }
          },
          "required": [
            "text",
            "type",
            "score"
          ]
        },
        "KnowledgeCategoryInfo": {
          "type": "object",
          "description": "知识分类基本信息",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "分类ID",
              "example": 101
            },
            "name": {
              "type": "string",
              "description": "分类名称",
              "example": "系统运维"
            },
            "path": {
              "type": "string",
              "description": "分类路径",
              "example": "技术文档/系统运维"
            }
          },
          "required": [
            "id",
            "name"
          ]
        },
        "AuthorInfo": {
          "type": "object",
          "description": "作者信息",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "作者ID",
              "example": 1001
            },
            "name": {
              "type": "string",
              "description": "作者姓名",
              "example": "张工程师"
            },
            "avatar": {
              "type": "string",
              "description": "作者头像URL",
              "example": "https://cdn.example.com/avatar/1001.jpg"
            },
            "title": {
              "type": "string",
              "description": "作者职位",
              "example": "高级运维工程师"
            },
            "department": {
              "type": "string",
              "description": "所属部门",
              "example": "运维部"
            }
          },
          "required": [
            "id",
            "name"
          ]
        },
        "ArticleStatistics": {
          "type": "object",
          "description": "文档统计信息",
          "properties": {
            "view_count": {
              "type": "integer",
              "minimum": 0,
              "description": "浏览次数",
              "example": 1256
            },
            "like_count": {
              "type": "integer",
              "minimum": 0,
              "description": "点赞次数",
              "example": 89
            },
            "use_count": {
              "type": "integer",
              "minimum": 0,
              "description": "使用次数",
              "example": 234
            },
            "comment_count": {
              "type": "integer",
              "minimum": 0,
              "description": "评论次数",
              "example": 23
            },
            "rating": {
              "type": "number",
              "format": "float",
              "minimum": 0,
              "maximum": 5,
              "description": "评分",
              "example": 4.7
            },
            "rating_count": {
              "type": "integer",
              "minimum": 0,
              "description": "评分人数",
              "example": 156
            }
          },
          "required": [
            "view_count",
            "like_count",
            "rating"
          ]
        },
        "QualityMetrics": {
          "type": "object",
          "description": "质量评估指标",
          "properties": {
            "quality_score": {
              "type": "number",
              "format": "float",
              "minimum": 0,
              "maximum": 100,
              "description": "综合质量评分",
              "example": 92.5
            },
            "completeness_score": {
              "type": "number",
              "format": "float",
              "minimum": 0,
              "maximum": 100,
              "description": "完整性评分",
              "example": 95.0
            },
            "accuracy_score": {
              "type": "number",
              "format": "float",
              "minimum": 0,
              "maximum": 100,
              "description": "准确性评分",
              "example": 90.0
            },
            "timeliness_score": {
              "type": "number",
              "format": "float",
              "minimum": 0,
              "maximum": 100,
              "description": "时效性评分",
              "example": 88.0
            },
            "usability_score": {
              "type": "number",
              "format": "float",
              "minimum": 0,
              "maximum": 100,
              "description": "可用性评分",
              "example": 94.0
            }
          },
          "required": [
            "quality_score"
          ]
        },
        "ArticleTimestamps": {
          "type": "object",
          "description": "文档时间信息",
          "properties": {
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-01T10:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-10T15:30:00Z"
            },
            "published_at": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "发布时间",
              "example": "2024-08-02T09:00:00Z"
            },
            "last_reviewed_at": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "最后审核时间",
              "example": "2024-08-09T14:00:00Z"
            }
          },
          "required": [
            "created_at",
            "updated_at"
          ]
        },
        "AttachmentInfo": {
          "type": "object",
          "description": "附件信息",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "附件ID",
              "example": 5001
            },
            "file_name": {
              "type": "string",
              "description": "文件名",
              "example": "performance_script.sh"
            },
            "file_type": {
              "type": "string",
              "description": "文件类型",
              "example": "application/x-sh"
            },
            "file_size": {
              "type": "integer",
              "format": "int64",
              "description": "文件大小（字节）",
              "example": 2048
            },
            "download_url": {
              "type": "string",
              "description": "下载链接",
              "example": "https://cdn.example.com/attachments/5001"
            },
            "upload_time": {
              "type": "string",
              "format": "date-time",
              "description": "上传时间",
              "example": "2024-08-01T10:30:00Z"
            }
          },
          "required": [
            "id",
            "file_name",
            "file_type",
            "file_size",
            "download_url"
          ]
        },
        "AttachmentUpload": {
          "type": "object",
          "description": "附件上传信息",
          "properties": {
            "file_name": {
              "type": "string",
              "description": "文件名",
              "example": "performance_script.sh"
            },
            "file_type": {
              "type": "string",
              "description": "文件类型",
              "example": "application/x-sh"
            },
            "file_size": {
              "type": "integer",
              "format": "int64",
              "description": "文件大小（字节）",
              "example": 2048
            },
            "file_content": {
              "type": "string",
              "format": "byte",
              "description": "Base64编码的文件内容",
              "example": "IyEvYmluL2Jhc2gKZWNobyAiSGVsbG8gV29ybGQi"
            }
          },
          "required": [
            "file_name",
            "file_type",
            "file_size",
            "file_content"
          ]
        },
        "ArticleMetadata": {
          "type": "object",
          "description": "文档元数据",
          "properties": {
            "difficulty_level": {
              "type": "string",
              "enum": [
                "beginner",
                "intermediate",
                "advanced",
                "expert"
              ],
              "description": "难度级别",
              "example": "intermediate"
            },
            "estimated_read_time": {
              "type": "integer",
              "minimum": 1,
              "description": "预估阅读时间（分钟）",
              "example": 15
            },
            "target_audience": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "目标受众",
              "example": [
                "运维工程师",
                "系统管理员"
              ]
            },
            "prerequisites": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "前置知识要求",
              "example": [
                "Linux基础",
                "Shell脚本"
              ]
            },
            "related_tools": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "相关工具",
              "example": [
                "htop",
                "iotop",
                "netstat"
              ]
            },
            "update_frequency": {
              "type": "string",
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly",
                "as_needed"
              ],
              "description": "更新频率",
              "example": "monthly"
            }
          }
        }
      },
      "issues": []
    },
    "REQ-008-系统设置": {
      "file_path": "docs/api/4.5.1/modules/REQ-008-系统设置/openapi.yaml",
      "components": {
        "SystemConfigInfo": {
          "type": "object",
          "description": "系统配置基本信息",
          "properties": {
            "config_id": {
              "type": "integer",
              "description": "配置ID",
              "example": 12345
            },
            "tenant_id": {
              "type": "integer",
              "nullable": true,
              "description": "租户ID（NULL为全局配置）",
              "example": 1001
            },
            "config_key": {
              "type": "string",
              "description": "配置键名",
              "example": "session.timeout"
            },
            "config_value": {
              "type": "string",
              "description": "配置值",
              "example": "3600"
            },
            "config_type": {
              "type": "string",
              "enum": [
                "STRING",
                "NUMBER",
                "BOOLEAN",
                "JSON",
                "XML"
              ],
              "description": "配置类型",
              "example": "NUMBER"
            },
            "scope": {
              "type": "string",
              "enum": [
                "GLOBAL",
                "MODULE",
                "FEATURE"
              ],
              "description": "配置范围",
              "example": "GLOBAL"
            },
            "effective_mode": {
              "type": "string",
              "enum": [
                "IMMEDIATE",
                "SCHEDULED",
                "MANUAL"
              ],
              "description": "生效模式",
              "example": "IMMEDIATE"
            },
            "version": {
              "type": "integer",
              "description": "配置版本号",
              "example": 1
            },
            "is_encrypted": {
              "type": "boolean",
              "description": "是否加密存储",
              "example": false
            },
            "effective_time": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "生效时间",
              "example": "2024-08-15T10:30:00Z"
            },
            "expire_time": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "过期时间",
              "example": null
            },
            "description": {
              "type": "string",
              "nullable": true,
              "description": "配置描述",
              "example": "会话超时时间（秒）"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "nullable": true,
              "description": "配置标签",
              "example": [
                "security",
                "session"
              ]
            },
            "is_active": {
              "type": "boolean",
              "description": "是否激活",
              "example": true
            },
            "created_by": {
              "type": "integer",
              "description": "创建人ID",
              "example": 1001
            },
            "updated_by": {
              "type": "integer",
              "description": "更新人ID",
              "example": 1001
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-01T09:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-15T10:30:00Z"
            }
          }
        },
        "SystemConfigDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/SystemConfigInfo"
            },
            {
              "type": "object",
              "properties": {
                "template_id": {
                  "type": "integer",
                  "nullable": true,
                  "description": "配置模板ID",
                  "example": 123
                },
                "validation_rule": {
                  "type": "object",
                  "nullable": true,
                  "description": "验证规则",
                  "example": {
                    "type": "range",
                    "min": 300,
                    "max": 86400
                  }
                },
                "change_history": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ConfigChangeLogInfo"
                  },
                  "description": "变更历史（最近10条）"
                }
              }
            }
          ]
        },
        "SystemConfigCreateRequest": {
          "type": "object",
          "required": [
            "config_key",
            "config_value",
            "config_type"
          ],
          "properties": {
            "tenant_id": {
              "type": "integer",
              "nullable": true,
              "description": "租户ID（可选，为空时创建全局配置）",
              "example": 1001
            },
            "config_key": {
              "type": "string",
              "description": "配置键名",
              "example": "session.timeout"
            },
            "config_value": {
              "type": "string",
              "description": "配置值",
              "example": "3600"
            },
            "config_type": {
              "type": "string",
              "enum": [
                "STRING",
                "NUMBER",
                "BOOLEAN",
                "JSON",
                "XML"
              ],
              "description": "配置类型",
              "example": "NUMBER"
            },
            "scope": {
              "type": "string",
              "enum": [
                "GLOBAL",
                "MODULE",
                "FEATURE"
              ],
              "description": "配置范围",
              "default": "GLOBAL",
              "example": "GLOBAL"
            },
            "effective_mode": {
              "type": "string",
              "enum": [
                "IMMEDIATE",
                "SCHEDULED",
                "MANUAL"
              ],
              "description": "生效模式",
              "default": "IMMEDIATE",
              "example": "IMMEDIATE"
            },
            "effective_time": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "生效时间（仅在SCHEDULED模式下有效）",
              "example": "2024-08-15T10:30:00Z"
            },
            "expire_time": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "过期时间",
              "example": null
            },
            "template_id": {
              "type": "integer",
              "nullable": true,
              "description": "配置模板ID",
              "example": 123
            },
            "validation_rule": {
              "type": "object",
              "nullable": true,
              "description": "验证规则",
              "example": {
                "type": "range",
                "min": 300,
                "max": 86400
              }
            },
            "description": {
              "type": "string",
              "nullable": true,
              "description": "配置描述",
              "example": "会话超时时间（秒）"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "nullable": true,
              "description": "配置标签",
              "example": [
                "security",
                "session"
              ]
            }
          }
        },
        "SystemConfigUpdateRequest": {
          "type": "object",
          "properties": {
            "config_value": {
              "type": "string",
              "description": "配置值",
              "example": "7200"
            },
            "effective_mode": {
              "type": "string",
              "enum": [
                "IMMEDIATE",
                "SCHEDULED",
                "MANUAL"
              ],
              "description": "生效模式",
              "example": "SCHEDULED"
            },
            "effective_time": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "生效时间",
              "example": "2024-08-15T00:00:00Z"
            },
            "expire_time": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "过期时间",
              "example": null
            },
            "validation_rule": {
              "type": "object",
              "nullable": true,
              "description": "验证规则",
              "example": {
                "type": "range",
                "min": 300,
                "max": 86400
              }
            },
            "description": {
              "type": "string",
              "nullable": true,
              "description": "配置描述",
              "example": "会话超时时间（秒）"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "nullable": true,
              "description": "配置标签",
              "example": [
                "security",
                "session"
              ]
            },
            "change_reason": {
              "type": "string",
              "nullable": true,
              "description": "变更原因",
              "example": "延长会话时间以提升用户体验"
            }
          }
        },
        "BatchConfigRequest": {
          "type": "object",
          "required": [
            "operation",
            "configs"
          ],
          "properties": {
            "operation": {
              "type": "string",
              "enum": [
                "CREATE",
                "UPDATE",
                "DELETE"
              ],
              "description": "批量操作类型",
              "example": "UPDATE"
            },
            "configs": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "config_key": {
                    "type": "string",
                    "description": "配置键名",
                    "example": "session.timeout"
                  },
                  "config_value": {
                    "type": "string",
                    "description": "配置值",
                    "example": "3600"
                  },
                  "config_type": {
                    "type": "string",
                    "enum": [
                      "STRING",
                      "NUMBER",
                      "BOOLEAN",
                      "JSON",
                      "XML"
                    ],
                    "description": "配置类型",
                    "example": "NUMBER"
                  },
                  "scope": {
                    "type": "string",
                    "enum": [
                      "GLOBAL",
                      "MODULE",
                      "FEATURE"
                    ],
                    "description": "配置范围",
                    "example": "GLOBAL"
                  },
                  "tenant_id": {
                    "type": "integer",
                    "nullable": true,
                    "description": "租户ID",
                    "example": 1001
                  }
                },
                "required": [
                  "config_key"
                ]
              },
              "description": "配置项列表"
            },
            "effective_mode": {
              "type": "string",
              "enum": [
                "IMMEDIATE",
                "SCHEDULED",
                "MANUAL"
              ],
              "description": "生效模式",
              "default": "IMMEDIATE",
              "example": "IMMEDIATE"
            },
            "effective_time": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "生效时间",
              "example": "2024-08-15T10:30:00Z"
            },
            "change_reason": {
              "type": "string",
              "nullable": true,
              "description": "变更原因",
              "example": "批量安全配置更新"
            }
          }
        },
        "BatchConfigResult": {
          "type": "object",
          "properties": {
            "total_count": {
              "type": "integer",
              "description": "总数量",
              "example": 10
            },
            "success_count": {
              "type": "integer",
              "description": "成功数量",
              "example": 8
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 2
            },
            "success_items": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "config_key": {
                    "type": "string",
                    "example": "session.timeout"
                  },
                  "status": {
                    "type": "string",
                    "example": "SUCCESS"
                  }
                }
              },
              "description": "成功项列表"
            },
            "failed_items": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "config_key": {
                    "type": "string",
                    "example": "invalid.config"
                  },
                  "error_code": {
                    "type": "string",
                    "example": "VALIDATION_FAILED"
                  },
                  "error_message": {
                    "type": "string",
                    "example": "配置值格式不正确"
                  }
                }
              },
              "description": "失败项列表"
            }
          }
        },
        "ConfigImportResult": {
          "type": "object",
          "properties": {
            "total_count": {
              "type": "integer",
              "description": "导入总数量",
              "example": 50
            },
            "success_count": {
              "type": "integer",
              "description": "成功数量",
              "example": 45
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 5
            },
            "skipped_count": {
              "type": "integer",
              "description": "跳过数量",
              "example": 0
            },
            "validation_errors": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "row_number": {
                    "type": "integer",
                    "example": 3
                  },
                  "config_key": {
                    "type": "string",
                    "example": "invalid.config"
                  },
                  "error_message": {
                    "type": "string",
                    "example": "配置键名格式不正确"
                  }
                }
              },
              "description": "验证错误列表"
            },
            "import_summary": {
              "type": "object",
              "properties": {
                "file_name": {
                  "type": "string",
                  "example": "system_config_20240815.xlsx"
                },
                "import_time": {
                  "type": "string",
                  "format": "date-time",
                  "example": "2024-08-15T10:30:00Z"
                },
                "operator_id": {
                  "type": "integer",
                  "example": 1001
                }
              },
              "description": "导入摘要信息"
            }
          }
        },
        "FeatureFlagInfo": {
          "type": "object",
          "description": "功能开关基本信息",
          "properties": {
            "flag_id": {
              "type": "integer",
              "description": "开关ID",
              "example": 2001
            },
            "flag_key": {
              "type": "string",
              "description": "开关键名",
              "example": "new_feature_v2"
            },
            "flag_name": {
              "type": "string",
              "description": "开关名称",
              "example": "新功能V2版本"
            },
            "description": {
              "type": "string",
              "nullable": true,
              "description": "开关描述",
              "example": "新版本功能的灰度发布开关"
            },
            "is_enabled": {
              "type": "boolean",
              "description": "是否启用",
              "example": true
            },
            "flag_type": {
              "type": "string",
              "enum": [
                "BOOLEAN",
                "PERCENTAGE",
                "TARGETING"
              ],
              "description": "开关类型",
              "example": "BOOLEAN"
            },
            "target_rules": {
              "type": "object",
              "nullable": true,
              "description": "目标规则配置",
              "example": {
                "tenants": [
                  "tenant1",
                  "tenant2"
                ],
                "users": [
                  "user1",
                  "user2"
                ],
                "percentage": 50
              }
            },
            "default_value": {
              "type": "string",
              "nullable": true,
              "description": "默认值",
              "example": "false"
            },
            "environment": {
              "type": "string",
              "enum": [
                "DEV",
                "TEST",
                "PROD"
              ],
              "description": "环境",
              "example": "PROD"
            },
            "owner_id": {
              "type": "integer",
              "nullable": true,
              "description": "负责人ID",
              "example": 1001
            },
            "created_by": {
              "type": "integer",
              "description": "创建人ID",
              "example": 1001
            },
            "updated_by": {
              "type": "integer",
              "description": "更新人ID",
              "example": 1001
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-01T09:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-15T10:30:00Z"
            }
          }
        },
        "FeatureFlagDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/FeatureFlagInfo"
            },
            {
              "type": "object",
              "properties": {
                "usage_statistics": {
                  "type": "object",
                  "description": "使用统计",
                  "properties": {
                    "total_requests": {
                      "type": "integer",
                      "example": 10000
                    },
                    "enabled_requests": {
                      "type": "integer",
                      "example": 5000
                    },
                    "enabled_percentage": {
                      "type": "number",
                      "format": "float",
                      "example": 50.0
                    },
                    "last_accessed": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-08-15T10:30:00Z"
                    }
                  }
                },
                "change_history": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ConfigChangeLogInfo"
                  },
                  "description": "变更历史（最近10条）"
                }
              }
            }
          ]
        },
        "FeatureFlagCreateRequest": {
          "type": "object",
          "required": [
            "flag_key",
            "flag_name",
            "flag_type"
          ],
          "properties": {
            "flag_key": {
              "type": "string",
              "description": "开关键名",
              "example": "new_feature_v2"
            },
            "flag_name": {
              "type": "string",
              "description": "开关名称",
              "example": "新功能V2版本"
            },
            "description": {
              "type": "string",
              "nullable": true,
              "description": "开关描述",
              "example": "新版本功能的灰度发布开关"
            },
            "flag_type": {
              "type": "string",
              "enum": [
                "BOOLEAN",
                "PERCENTAGE",
                "TARGETING"
              ],
              "description": "开关类型",
              "example": "BOOLEAN"
            },
            "target_rules": {
              "type": "object",
              "nullable": true,
              "description": "目标规则配置",
              "example": {
                "tenants": [
                  "tenant1",
                  "tenant2"
                ],
                "users": [
                  "user1",
                  "user2"
                ],
                "percentage": 50
              }
            },
            "default_value": {
              "type": "string",
              "nullable": true,
              "description": "默认值",
              "example": "false"
            },
            "environment": {
              "type": "string",
              "enum": [
                "DEV",
                "TEST",
                "PROD"
              ],
              "description": "环境",
              "default": "PROD",
              "example": "PROD"
            },
            "owner_id": {
              "type": "integer",
              "nullable": true,
              "description": "负责人ID",
              "example": 1001
            }
          }
        },
        "FeatureFlagUpdateRequest": {
          "type": "object",
          "properties": {
            "flag_name": {
              "type": "string",
              "description": "开关名称",
              "example": "新功能V2版本"
            },
            "description": {
              "type": "string",
              "nullable": true,
              "description": "开关描述",
              "example": "新版本功能的灰度发布开关"
            },
            "is_enabled": {
              "type": "boolean",
              "description": "是否启用",
              "example": true
            },
            "target_rules": {
              "type": "object",
              "nullable": true,
              "description": "目标规则配置",
              "example": {
                "tenants": [
                  "tenant1",
                  "tenant2"
                ],
                "users": [
                  "user1",
                  "user2"
                ],
                "percentage": 50
              }
            },
            "default_value": {
              "type": "string",
              "nullable": true,
              "description": "默认值",
              "example": "false"
            },
            "owner_id": {
              "type": "integer",
              "nullable": true,
              "description": "负责人ID",
              "example": 1001
            }
          }
        },
        "GrayReleaseInfo": {
          "type": "object",
          "description": "灰度发布基本信息",
          "properties": {
            "release_id": {
              "type": "integer",
              "description": "发布ID",
              "example": 3001
            },
            "release_name": {
              "type": "string",
              "description": "发布名称",
              "example": "新功能灰度发布"
            },
            "feature_key": {
              "type": "string",
              "description": "功能键名",
              "example": "new_feature_v2"
            },
            "strategy_type": {
              "type": "string",
              "enum": [
                "PERCENTAGE",
                "USER_LIST",
                "TENANT_LIST"
              ],
              "description": "策略类型",
              "example": "PERCENTAGE"
            },
            "strategy_config": {
              "type": "object",
              "description": "策略配置",
              "example": {
                "target_percentage": 10,
                "increment_step": 5,
                "increment_interval": 3600
              }
            },
            "status": {
              "type": "string",
              "enum": [
                "DRAFT",
                "ACTIVE",
                "PAUSED",
                "COMPLETED",
                "CANCELLED"
              ],
              "description": "状态",
              "example": "ACTIVE"
            },
            "target_percentage": {
              "type": "number",
              "format": "float",
              "nullable": true,
              "description": "目标百分比",
              "example": 10.0
            },
            "current_percentage": {
              "type": "number",
              "format": "float",
              "description": "当前百分比",
              "example": 5.0
            },
            "start_time": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "开始时间",
              "example": "2024-08-15T10:00:00Z"
            },
            "end_time": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "结束时间",
              "example": null
            },
            "auto_rollback": {
              "type": "boolean",
              "description": "自动回滚",
              "example": true
            },
            "created_by": {
              "type": "integer",
              "description": "创建人ID",
              "example": 1001
            },
            "updated_by": {
              "type": "integer",
              "description": "更新人ID",
              "example": 1001
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-15T09:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-15T10:30:00Z"
            }
          }
        },
        "GrayReleaseDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/GrayReleaseInfo"
            },
            {
              "type": "object",
              "properties": {
                "rollback_condition": {
                  "type": "object",
                  "nullable": true,
                  "description": "回滚条件",
                  "example": {
                    "error_rate": 0.05,
                    "response_time": 5000
                  }
                },
                "metrics_config": {
                  "type": "object",
                  "nullable": true,
                  "description": "监控指标配置",
                  "example": {
                    "monitor_interval": 300,
                    "alert_threshold": 0.1
                  }
                },
                "execution_log": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "timestamp": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-08-15T10:30:00Z"
                      },
                      "action": {
                        "type": "string",
                        "example": "PERCENTAGE_INCREASED"
                      },
                      "details": {
                        "type": "string",
                        "example": "百分比从5%增加到10%"
                      }
                    }
                  },
                  "description": "执行日志"
                }
              }
            }
          ]
        },
        "GrayReleaseCreateRequest": {
          "type": "object",
          "required": [
            "release_name",
            "feature_key",
            "strategy_type",
            "strategy_config"
          ],
          "properties": {
            "release_name": {
              "type": "string",
              "description": "发布名称",
              "example": "新功能灰度发布"
            },
            "feature_key": {
              "type": "string",
              "description": "功能键名",
              "example": "new_feature_v2"
            },
            "strategy_type": {
              "type": "string",
              "enum": [
                "PERCENTAGE",
                "USER_LIST",
                "TENANT_LIST"
              ],
              "description": "策略类型",
              "example": "PERCENTAGE"
            },
            "strategy_config": {
              "type": "object",
              "description": "策略配置",
              "example": {
                "target_percentage": 10,
                "increment_step": 5,
                "increment_interval": 3600
              }
            },
            "auto_rollback": {
              "type": "boolean",
              "description": "自动回滚",
              "default": false,
              "example": true
            },
            "rollback_condition": {
              "type": "object",
              "nullable": true,
              "description": "回滚条件",
              "example": {
                "error_rate": 0.05,
                "response_time": 5000
              }
            },
            "metrics_config": {
              "type": "object",
              "nullable": true,
              "description": "监控指标配置",
              "example": {
                "monitor_interval": 300,
                "alert_threshold": 0.1
              }
            }
          }
        },
        "GrayReleaseUpdateRequest": {
          "type": "object",
          "properties": {
            "release_name": {
              "type": "string",
              "description": "发布名称",
              "example": "新功能灰度发布"
            },
            "strategy_config": {
              "type": "object",
              "description": "策略配置",
              "example": {
                "target_percentage": 20,
                "increment_step": 10
              }
            },
            "auto_rollback": {
              "type": "boolean",
              "description": "自动回滚",
              "example": true
            },
            "rollback_condition": {
              "type": "object",
              "nullable": true,
              "description": "回滚条件",
              "example": {
                "error_rate": 0.05,
                "response_time": 5000
              }
            }
          }
        },
        "ConfigChangeLogInfo": {
          "type": "object",
          "description": "配置变更日志信息",
          "properties": {
            "log_id": {
              "type": "integer",
              "description": "日志ID",
              "example": 10001
            },
            "config_id": {
              "type": "integer",
              "description": "配置ID",
              "example": 12345
            },
            "tenant_id": {
              "type": "integer",
              "nullable": true,
              "description": "租户ID",
              "example": 1001
            },
            "config_key": {
              "type": "string",
              "description": "配置键名",
              "example": "session.timeout"
            },
            "old_value": {
              "type": "string",
              "nullable": true,
              "description": "变更前值",
              "example": "3600"
            },
            "new_value": {
              "type": "string",
              "description": "变更后值",
              "example": "7200"
            },
            "operation_type": {
              "type": "string",
              "enum": [
                "CREATE",
                "UPDATE",
                "DELETE",
                "ROLLBACK"
              ],
              "description": "操作类型",
              "example": "UPDATE"
            },
            "change_reason": {
              "type": "string",
              "nullable": true,
              "description": "变更原因",
              "example": "延长会话时间以提升用户体验"
            },
            "approval_status": {
              "type": "string",
              "enum": [
                "PENDING",
                "APPROVED",
                "REJECTED"
              ],
              "nullable": true,
              "description": "审批状态",
              "example": "APPROVED"
            },
            "approver_id": {
              "type": "integer",
              "nullable": true,
              "description": "审批人ID",
              "example": 2001
            },
            "operator_id": {
              "type": "integer",
              "description": "操作人ID",
              "example": 1001
            },
            "operator_name": {
              "type": "string",
              "description": "操作人姓名",
              "example": "张三"
            },
            "operation_time": {
              "type": "string",
              "format": "date-time",
              "description": "操作时间",
              "example": "2024-08-15T10:30:00Z"
            },
            "ip_address": {
              "type": "string",
              "nullable": true,
              "description": "操作IP地址",
              "example": "192.168.1.100"
            },
            "user_agent": {
              "type": "string",
              "nullable": true,
              "description": "用户代理信息",
              "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
            },
            "session_id": {
              "type": "string",
              "nullable": true,
              "description": "会话ID",
              "example": "sess_abc123def456"
            },
            "request_id": {
              "type": "string",
              "nullable": true,
              "description": "请求ID",
              "example": "req_789xyz012"
            }
          }
        },
        "ConfigVersionInfo": {
          "type": "object",
          "description": "配置版本信息",
          "properties": {
            "version": {
              "type": "integer",
              "description": "版本号",
              "example": 3
            },
            "config_value": {
              "type": "string",
              "description": "配置值",
              "example": "3600"
            },
            "change_reason": {
              "type": "string",
              "nullable": true,
              "description": "变更原因",
              "example": "调整会话超时时间"
            },
            "operator_id": {
              "type": "integer",
              "description": "操作人ID",
              "example": 1001
            },
            "operator_name": {
              "type": "string",
              "description": "操作人姓名",
              "example": "张三"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-15T10:30:00Z"
            },
            "is_current": {
              "type": "boolean",
              "description": "是否为当前版本",
              "example": true
            }
          }
        },
        "SystemSettings": {
          "type": "object",
          "description": "系统设置（向后兼容）",
          "properties": {
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            },
            "system_name": {
              "type": "string",
              "description": "系统名称",
              "example": "IT运维门户系统"
            },
            "system_logo": {
              "type": "string",
              "description": "系统Logo URL",
              "example": "https://cdn.example.com/logo.png"
            },
            "timezone": {
              "type": "string",
              "description": "系统时区",
              "example": "Asia/Shanghai"
            },
            "language": {
              "type": "string",
              "description": "系统语言",
              "example": "zh-CN"
            },
            "date_format": {
              "type": "string",
              "description": "日期格式",
              "example": "YYYY-MM-DD"
            },
            "time_format": {
              "type": "string",
              "description": "时间格式",
              "example": "HH:mm:ss"
            },
            "session_timeout": {
              "type": "integer",
              "description": "会话超时时间（分钟）",
              "example": 30
            },
            "max_login_attempts": {
              "type": "integer",
              "description": "最大登录尝试次数",
              "example": 5
            },
            "password_policy": {
              "type": "object",
              "description": "密码策略",
              "properties": {
                "min_length": {
                  "type": "integer",
                  "description": "最小长度",
                  "example": 8
                },
                "require_uppercase": {
                  "type": "boolean",
                  "description": "需要大写字母",
                  "example": true
                },
                "require_lowercase": {
                  "type": "boolean",
                  "description": "需要小写字母",
                  "example": true
                },
                "require_numbers": {
                  "type": "boolean",
                  "description": "需要数字",
                  "example": true
                },
                "require_special_chars": {
                  "type": "boolean",
                  "description": "需要特殊字符",
                  "example": true
                }
              }
            },
            "email_settings": {
              "type": "object",
              "description": "邮件设置",
              "properties": {
                "smtp_host": {
                  "type": "string",
                  "description": "SMTP服务器",
                  "example": "smtp.example.com"
                },
                "smtp_port": {
                  "type": "integer",
                  "description": "SMTP端口",
                  "example": 587
                },
                "smtp_username": {
                  "type": "string",
                  "description": "SMTP用户名",
                  "example": "noreply@example.com"
                },
                "smtp_password": {
                  "type": "string",
                  "description": "SMTP密码",
                  "example": "********"
                },
                "from_email": {
                  "type": "string",
                  "description": "发件人邮箱",
                  "example": "noreply@example.com"
                },
                "from_name": {
                  "type": "string",
                  "description": "发件人名称",
                  "example": "IT运维门户系统"
                }
              }
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-15T10:30:00Z"
            },
            "updated_by": {
              "type": "integer",
              "description": "更新人ID",
              "example": 1001
            }
          }
        },
        "SystemSettingsUpdateRequest": {
          "type": "object",
          "description": "系统设置更新请求（向后兼容）",
          "properties": {
            "system_name": {
              "type": "string",
              "description": "系统名称",
              "example": "IT运维门户系统"
            },
            "system_logo": {
              "type": "string",
              "description": "系统Logo URL",
              "example": "https://cdn.example.com/logo.png"
            },
            "timezone": {
              "type": "string",
              "description": "系统时区",
              "example": "Asia/Shanghai"
            },
            "language": {
              "type": "string",
              "description": "系统语言",
              "example": "zh-CN"
            },
            "date_format": {
              "type": "string",
              "description": "日期格式",
              "example": "YYYY-MM-DD"
            },
            "time_format": {
              "type": "string",
              "description": "时间格式",
              "example": "HH:mm:ss"
            },
            "session_timeout": {
              "type": "integer",
              "description": "会话超时时间（分钟）",
              "example": 30
            },
            "max_login_attempts": {
              "type": "integer",
              "description": "最大登录尝试次数",
              "example": 5
            },
            "password_policy": {
              "type": "object",
              "description": "密码策略",
              "additionalProperties": true
            },
            "email_settings": {
              "type": "object",
              "description": "邮件设置",
              "additionalProperties": true
            }
          }
        }
      },
      "issues": []
    },
    "REQ-003-工单管理系统": {
      "file_path": "docs/api/4.5.1/modules/REQ-003-工单管理系统/openapi.yaml",
      "components": {
        "TicketCreateRequest": {
          "type": "object",
          "required": [
            "title",
            "description",
            "customer_id",
            "priority"
          ],
          "properties": {
            "title": {
              "type": "string",
              "maxLength": 200,
              "description": "工单标题",
              "example": "邮件服务器故障"
            },
            "description": {
              "type": "string",
              "description": "问题描述",
              "example": "邮件服务器无法发送邮件，影响公司正常业务运营"
            },
            "category": {
              "type": "string",
              "maxLength": 50,
              "description": "问题分类",
              "example": "硬件故障"
            },
            "priority": {
              "type": "integer",
              "minimum": 1,
              "maximum": 4,
              "description": "优先级：1-紧急，2-高，3-中，4-低",
              "example": 2
            },
            "source": {
              "type": "string",
              "enum": [
                "WEB",
                "EMAIL",
                "API",
                "MONITORING",
                "PHONE"
              ],
              "default": "WEB",
              "description": "工单来源",
              "example": "WEB"
            },
            "customer_id": {
              "type": "integer",
              "description": "客户ID",
              "example": 12345
            },
            "customer_name": {
              "type": "string",
              "maxLength": 100,
              "description": "客户姓名",
              "example": "张三"
            },
            "customer_phone": {
              "type": "string",
              "maxLength": 20,
              "description": "客户电话",
              "example": "13800138000"
            },
            "customer_email": {
              "type": "string",
              "maxLength": 100,
              "format": "email",
              "description": "客户邮箱",
              "example": "zhangsan@company.com"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "标签数组",
              "example": [
                "邮件",
                "服务器",
                "紧急"
              ]
            },
            "custom_fields": {
              "type": "object",
              "description": "自定义字段",
              "example": {
                "server_ip": "192.168.1.100",
                "affected_users": 50,
                "business_impact": "high"
              }
            },
            "attachments": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/AttachmentInfo"
              },
              "description": "附件信息"
            }
          }
        },
        "TicketCreateResponse": {
          "type": "object",
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "ticket_no": {
              "type": "string",
              "description": "工单编号",
              "example": "TK-20240814-0001"
            },
            "status": {
              "type": "string",
              "enum": [
                "NEW",
                "PENDING",
                "ASSIGNED",
                "IN_PROGRESS",
                "SUSPENDED",
                "ESCALATED",
                "PENDING_VERIFICATION",
                "RESOLVED",
                "CLOSED",
                "CANCELLED"
              ],
              "description": "工单状态",
              "example": "NEW"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-14T10:30:00Z"
            },
            "estimated_resolve_time": {
              "type": "string",
              "format": "date-time",
              "description": "预计解决时间",
              "example": "2024-08-14T18:30:00Z"
            }
          }
        },
        "TicketListItem": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "ticket_no": {
                  "type": "string",
                  "description": "工单编号",
                  "example": "TK-20240814-0001"
                },
                "title": {
                  "type": "string",
                  "description": "工单标题",
                  "example": "邮件服务器故障"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "NEW",
                    "PENDING",
                    "ASSIGNED",
                    "IN_PROGRESS",
                    "SUSPENDED",
                    "ESCALATED",
                    "PENDING_VERIFICATION",
                    "RESOLVED",
                    "CLOSED",
                    "CANCELLED"
                  ],
                  "description": "工单状态",
                  "example": "IN_PROGRESS"
                },
                "priority": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 4,
                  "description": "优先级",
                  "example": 2
                },
                "category": {
                  "type": "string",
                  "description": "问题分类",
                  "example": "硬件故障"
                },
                "customer_name": {
                  "type": "string",
                  "description": "客户姓名",
                  "example": "张三"
                },
                "assigned_to_name": {
                  "type": "string",
                  "description": "分配给工程师姓名",
                  "example": "李工程师"
                },
                "response_due_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "响应截止时间",
                  "example": "2024-08-14T11:00:00Z"
                },
                "resolve_due_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "解决截止时间",
                  "example": "2024-08-14T18:30:00Z"
                },
                "sla_status": {
                  "type": "string",
                  "enum": [
                    "NORMAL",
                    "WARNING",
                    "OVERDUE"
                  ],
                  "description": "SLA状态",
                  "example": "NORMAL"
                }
              }
            }
          ]
        },
        "TicketDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/TicketListItem"
            },
            {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "description": "问题描述",
                  "example": "邮件服务器无法发送邮件，影响公司正常业务运营"
                },
                "source": {
                  "type": "string",
                  "enum": [
                    "WEB",
                    "EMAIL",
                    "API",
                    "MONITORING",
                    "PHONE"
                  ],
                  "description": "工单来源",
                  "example": "WEB"
                },
                "customer_id": {
                  "type": "integer",
                  "description": "客户ID",
                  "example": 12345
                },
                "customer_phone": {
                  "type": "string",
                  "description": "客户电话",
                  "example": "13800138000"
                },
                "customer_email": {
                  "type": "string",
                  "description": "客户邮箱",
                  "example": "zhangsan@company.com"
                },
                "assigned_to": {
                  "type": "integer",
                  "description": "分配给工程师ID",
                  "example": 67890
                },
                "assigned_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "分配时间",
                  "example": "2024-08-14T10:35:00Z"
                },
                "started_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "开始处理时间",
                  "example": "2024-08-14T10:40:00Z"
                },
                "resolved_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "解决时间",
                  "example": "2024-08-14T16:30:00Z"
                },
                "closed_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "关闭时间",
                  "example": "2024-08-14T17:00:00Z"
                },
                "sla_level": {
                  "type": "string",
                  "description": "SLA等级",
                  "example": "GOLD"
                },
                "satisfaction_score": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 5,
                  "description": "满意度评分",
                  "example": 5
                },
                "satisfaction_comment": {
                  "type": "string",
                  "description": "满意度评价",
                  "example": "服务及时，问题解决彻底"
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "标签数组",
                  "example": [
                    "邮件",
                    "服务器",
                    "紧急"
                  ]
                },
                "custom_fields": {
                  "type": "object",
                  "description": "自定义字段",
                  "example": {
                    "server_ip": "192.168.1.100",
                    "affected_users": 50,
                    "business_impact": "high"
                  }
                },
                "logs": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TicketLog"
                  },
                  "description": "处理记录"
                },
                "attachments": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TicketAttachment"
                  },
                  "description": "附件列表"
                },
                "version": {
                  "type": "integer",
                  "description": "版本号（乐观锁）",
                  "example": 1
                }
              }
            }
          ]
        },
        "TicketUpdateRequest": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string",
              "maxLength": 200,
              "description": "工单标题",
              "example": "邮件服务器故障（已修复）"
            },
            "description": {
              "type": "string",
              "description": "问题描述",
              "example": "邮件服务器无法发送邮件，影响公司正常业务运营。已重启服务解决。"
            },
            "category": {
              "type": "string",
              "maxLength": 50,
              "description": "问题分类",
              "example": "硬件故障"
            },
            "priority": {
              "type": "integer",
              "minimum": 1,
              "maximum": 4,
              "description": "优先级",
              "example": 3
            },
            "customer_phone": {
              "type": "string",
              "maxLength": 20,
              "description": "客户电话",
              "example": "13800138001"
            },
            "customer_email": {
              "type": "string",
              "maxLength": 100,
              "format": "email",
              "description": "客户邮箱",
              "example": "zhangsan@company.com"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "标签数组",
              "example": [
                "邮件",
                "服务器",
                "已解决"
              ]
            },
            "custom_fields": {
              "type": "object",
              "description": "自定义字段",
              "example": {
                "server_ip": "192.168.1.100",
                "affected_users": 0,
                "business_impact": "low"
              }
            },
            "version": {
              "type": "integer",
              "description": "版本号（乐观锁）",
              "example": 1
            }
          }
        },
        "TicketStatusUpdateRequest": {
          "type": "object",
          "required": [
            "status"
          ],
          "properties": {
            "status": {
              "type": "string",
              "enum": [
                "NEW",
                "PENDING",
                "ASSIGNED",
                "IN_PROGRESS",
                "SUSPENDED",
                "ESCALATED",
                "PENDING_VERIFICATION",
                "RESOLVED",
                "CLOSED",
                "CANCELLED"
              ],
              "description": "目标状态",
              "example": "IN_PROGRESS"
            },
            "comment": {
              "type": "string",
              "description": "状态变更说明",
              "example": "开始处理邮件服务器故障问题"
            },
            "estimated_resolve_time": {
              "type": "string",
              "format": "date-time",
              "description": "预计解决时间",
              "example": "2024-08-14T18:30:00Z"
            }
          }
        },
        "TicketStatusUpdateResponse": {
          "type": "object",
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "old_status": {
              "type": "string",
              "description": "原状态",
              "example": "ASSIGNED"
            },
            "new_status": {
              "type": "string",
              "description": "新状态",
              "example": "IN_PROGRESS"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-14T10:40:00Z"
            }
          }
        },
        "TicketAssignRequest": {
          "type": "object",
          "required": [
            "assigned_to"
          ],
          "properties": {
            "assigned_to": {
              "type": "integer",
              "description": "分配给工程师ID",
              "example": 67890
            },
            "comment": {
              "type": "string",
              "description": "派单说明",
              "example": "根据技能匹配分配给李工程师处理"
            },
            "priority": {
              "type": "integer",
              "minimum": 1,
              "maximum": 4,
              "description": "调整优先级",
              "example": 2
            }
          }
        },
        "TicketAssignResponse": {
          "type": "object",
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "assigned_to": {
              "type": "integer",
              "description": "分配给工程师ID",
              "example": 67890
            },
            "assigned_to_name": {
              "type": "string",
              "description": "工程师姓名",
              "example": "李工程师"
            },
            "assigned_at": {
              "type": "string",
              "format": "date-time",
              "description": "分配时间",
              "example": "2024-08-14T10:35:00Z"
            },
            "response_due_time": {
              "type": "string",
              "format": "date-time",
              "description": "响应截止时间",
              "example": "2024-08-14T11:05:00Z"
            }
          }
        },
        "TicketAcceptRequest": {
          "type": "object",
          "properties": {
            "comment": {
              "type": "string",
              "description": "接单说明",
              "example": "已接单，开始处理邮件服务器故障"
            },
            "estimated_resolve_time": {
              "type": "string",
              "format": "date-time",
              "description": "预计解决时间",
              "example": "2024-08-14T18:30:00Z"
            }
          }
        },
        "TicketAcceptResponse": {
          "type": "object",
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "status": {
              "type": "string",
              "description": "工单状态",
              "example": "IN_PROGRESS"
            },
            "started_at": {
              "type": "string",
              "format": "date-time",
              "description": "开始处理时间",
              "example": "2024-08-14T10:40:00Z"
            },
            "estimated_resolve_time": {
              "type": "string",
              "format": "date-time",
              "description": "预计解决时间",
              "example": "2024-08-14T18:30:00Z"
            }
          }
        },
        "TicketEscalateRequest": {
          "type": "object",
          "required": [
            "escalate_type",
            "reason"
          ],
          "properties": {
            "escalate_type": {
              "type": "string",
              "enum": [
                "TECHNICAL",
                "TIMEOUT",
                "CUSTOMER_COMPLAINT"
              ],
              "description": "升级类型",
              "example": "TECHNICAL"
            },
            "reason": {
              "type": "string",
              "description": "升级原因",
              "example": "技术难度超出当前工程师能力范围"
            },
            "escalate_to": {
              "type": "integer",
              "description": "升级到工程师ID（可选）",
              "example": 78901
            },
            "comment": {
              "type": "string",
              "description": "升级说明",
              "example": "需要高级工程师协助处理复杂的邮件服务器配置问题"
            }
          }
        },
        "TicketEscalateResponse": {
          "type": "object",
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "escalate_type": {
              "type": "string",
              "description": "升级类型",
              "example": "TECHNICAL"
            },
            "escalated_to": {
              "type": "integer",
              "description": "升级到工程师ID",
              "example": 78901
            },
            "escalated_to_name": {
              "type": "string",
              "description": "升级到工程师姓名",
              "example": "王高级工程师"
            },
            "escalated_at": {
              "type": "string",
              "format": "date-time",
              "description": "升级时间",
              "example": "2024-08-14T14:30:00Z"
            }
          }
        },
        "TicketResolveRequest": {
          "type": "object",
          "required": [
            "solution"
          ],
          "properties": {
            "solution": {
              "type": "string",
              "description": "解决方案",
              "example": "重启邮件服务器，重新配置SMTP设置，问题已解决"
            },
            "resolution_time": {
              "type": "string",
              "format": "date-time",
              "description": "解决时间",
              "example": "2024-08-14T16:30:00Z"
            },
            "comment": {
              "type": "string",
              "description": "解决说明",
              "example": "邮件服务器已恢复正常，建议客户定期检查服务器状态"
            }
          }
        },
        "TicketResolveResponse": {
          "type": "object",
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "status": {
              "type": "string",
              "description": "工单状态",
              "example": "RESOLVED"
            },
            "resolved_at": {
              "type": "string",
              "format": "date-time",
              "description": "解决时间",
              "example": "2024-08-14T16:30:00Z"
            },
            "solution": {
              "type": "string",
              "description": "解决方案",
              "example": "重启邮件服务器，重新配置SMTP设置，问题已解决"
            }
          }
        },
        "TicketBatchCreateRequest": {
          "type": "object",
          "required": [
            "tickets"
          ],
          "properties": {
            "tickets": {
              "type": "array",
              "maxItems": 1000,
              "items": {
                "$ref": "#/components/schemas/TicketCreateRequest"
              },
              "description": "工单列表"
            },
            "auto_assign": {
              "type": "boolean",
              "default": false,
              "description": "是否自动派单",
              "example": true
            }
          }
        },
        "TicketBatchCreateResponse": {
          "type": "object",
          "properties": {
            "total": {
              "type": "integer",
              "description": "总数量",
              "example": 100
            },
            "success_count": {
              "type": "integer",
              "description": "成功数量",
              "example": 98
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 2
            },
            "results": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "index": {
                    "type": "integer",
                    "description": "索引",
                    "example": 0
                  },
                  "success": {
                    "type": "boolean",
                    "description": "是否成功",
                    "example": true
                  },
                  "ticket_id": {
                    "type": "integer",
                    "description": "工单ID（成功时）",
                    "example": 12345
                  },
                  "ticket_no": {
                    "type": "string",
                    "description": "工单编号（成功时）",
                    "example": "TK-20240814-0001"
                  },
                  "error": {
                    "type": "string",
                    "description": "错误信息（失败时）",
                    "example": "标题不能为空"
                  }
                }
              }
            }
          }
        },
        "TicketBatchUpdateRequest": {
          "type": "object",
          "required": [
            "ticket_ids",
            "updates"
          ],
          "properties": {
            "ticket_ids": {
              "type": "array",
              "maxItems": 1000,
              "items": {
                "type": "integer"
              },
              "description": "工单ID列表",
              "example": [
                12345,
                12346,
                12347
              ]
            },
            "updates": {
              "type": "object",
              "description": "更新字段",
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "NEW",
                    "PENDING",
                    "ASSIGNED",
                    "IN_PROGRESS",
                    "SUSPENDED",
                    "ESCALATED",
                    "PENDING_VERIFICATION",
                    "RESOLVED",
                    "CLOSED",
                    "CANCELLED"
                  ],
                  "description": "状态",
                  "example": "CLOSED"
                },
                "priority": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 4,
                  "description": "优先级",
                  "example": 3
                },
                "category": {
                  "type": "string",
                  "description": "分类",
                  "example": "软件故障"
                },
                "assigned_to": {
                  "type": "integer",
                  "description": "分配给工程师ID",
                  "example": 67890
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "标签",
                  "example": [
                    "批量处理",
                    "已解决"
                  ]
                }
              }
            }
          }
        },
        "TicketBatchUpdateResponse": {
          "type": "object",
          "properties": {
            "total": {
              "type": "integer",
              "description": "总数量",
              "example": 50
            },
            "success_count": {
              "type": "integer",
              "description": "成功数量",
              "example": 48
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 2
            },
            "results": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "ticket_id": {
                    "type": "integer",
                    "description": "工单ID",
                    "example": 12345
                  },
                  "success": {
                    "type": "boolean",
                    "description": "是否成功",
                    "example": true
                  },
                  "error": {
                    "type": "string",
                    "description": "错误信息（失败时）",
                    "example": "工单不存在"
                  }
                }
              }
            }
          }
        },
        "TicketBatchAssignRequest": {
          "type": "object",
          "required": [
            "ticket_ids",
            "assigned_to"
          ],
          "properties": {
            "ticket_ids": {
              "type": "array",
              "maxItems": 1000,
              "items": {
                "type": "integer"
              },
              "description": "工单ID列表",
              "example": [
                12345,
                12346,
                12347
              ]
            },
            "assigned_to": {
              "type": "integer",
              "description": "分配给工程师ID",
              "example": 67890
            },
            "comment": {
              "type": "string",
              "description": "派单说明",
              "example": "批量分配给李工程师处理"
            }
          }
        },
        "TicketBatchAssignResponse": {
          "type": "object",
          "properties": {
            "total": {
              "type": "integer",
              "description": "总数量",
              "example": 30
            },
            "success_count": {
              "type": "integer",
              "description": "成功数量",
              "example": 28
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 2
            },
            "assigned_to": {
              "type": "integer",
              "description": "分配给工程师ID",
              "example": 67890
            },
            "assigned_to_name": {
              "type": "string",
              "description": "工程师姓名",
              "example": "李工程师"
            },
            "results": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "ticket_id": {
                    "type": "integer",
                    "description": "工单ID",
                    "example": 12345
                  },
                  "success": {
                    "type": "boolean",
                    "description": "是否成功",
                    "example": true
                  },
                  "error": {
                    "type": "string",
                    "description": "错误信息（失败时）",
                    "example": "工单状态不允许派单"
                  }
                }
              }
            }
          }
        },
        "TicketBatchCloseRequest": {
          "type": "object",
          "required": [
            "ticket_ids"
          ],
          "properties": {
            "ticket_ids": {
              "type": "array",
              "maxItems": 1000,
              "items": {
                "type": "integer"
              },
              "description": "工单ID列表",
              "example": [
                12345,
                12346,
                12347
              ]
            },
            "comment": {
              "type": "string",
              "description": "关闭说明",
              "example": "批量关闭已解决的工单"
            }
          }
        },
        "TicketBatchCloseResponse": {
          "type": "object",
          "properties": {
            "total": {
              "type": "integer",
              "description": "总数量",
              "example": 20
            },
            "success_count": {
              "type": "integer",
              "description": "成功数量",
              "example": 18
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 2
            },
            "results": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "ticket_id": {
                    "type": "integer",
                    "description": "工单ID",
                    "example": 12345
                  },
                  "success": {
                    "type": "boolean",
                    "description": "是否成功",
                    "example": true
                  },
                  "error": {
                    "type": "string",
                    "description": "错误信息（失败时）",
                    "example": "工单状态不允许关闭"
                  }
                }
              }
            }
          }
        },
        "TicketSearchResult": {
          "allOf": [
            {
              "$ref": "#/components/schemas/TicketListItem"
            },
            {
              "type": "object",
              "properties": {
                "highlight": {
                  "type": "object",
                  "description": "高亮字段",
                  "properties": {
                    "title": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "标题高亮",
                      "example": [
                        "<em>邮件</em>服务器故障"
                      ]
                    },
                    "description": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "描述高亮",
                      "example": [
                        "<em>邮件</em>服务器无法发送邮件"
                      ]
                    }
                  }
                },
                "score": {
                  "type": "number",
                  "description": "相关性评分",
                  "example": 0.95
                }
              }
            }
          ]
        },
        "TicketStatistics": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "description": "统计类型",
              "example": "status"
            },
            "period": {
              "type": "object",
              "description": "统计周期",
              "properties": {
                "start_date": {
                  "type": "string",
                  "format": "date",
                  "description": "开始日期",
                  "example": "2024-08-01"
                },
                "end_date": {
                  "type": "string",
                  "format": "date",
                  "description": "结束日期",
                  "example": "2024-08-31"
                }
              }
            },
            "data": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "label": {
                    "type": "string",
                    "description": "标签",
                    "example": "IN_PROGRESS"
                  },
                  "value": {
                    "type": "integer",
                    "description": "数值",
                    "example": 25
                  },
                  "percentage": {
                    "type": "number",
                    "description": "百分比",
                    "example": 35.7
                  }
                }
              },
              "description": "统计数据"
            },
            "trend": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "date": {
                    "type": "string",
                    "format": "date",
                    "description": "日期",
                    "example": "2024-08-14"
                  },
                  "count": {
                    "type": "integer",
                    "description": "数量",
                    "example": 15
                  }
                }
              },
              "description": "趋势数据"
            }
          }
        },
        "TicketDashboard": {
          "type": "object",
          "properties": {
            "summary": {
              "type": "object",
              "description": "概要统计",
              "properties": {
                "total_tickets": {
                  "type": "integer",
                  "description": "总工单数",
                  "example": 1567
                },
                "open_tickets": {
                  "type": "integer",
                  "description": "未关闭工单数",
                  "example": 234
                },
                "overdue_tickets": {
                  "type": "integer",
                  "description": "超期工单数",
                  "example": 12
                },
                "avg_resolution_time": {
                  "type": "number",
                  "description": "平均解决时间（小时）",
                  "example": 4.5
                }
              }
            },
            "status_distribution": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "description": "状态",
                    "example": "IN_PROGRESS"
                  },
                  "count": {
                    "type": "integer",
                    "description": "数量",
                    "example": 89
                  },
                  "percentage": {
                    "type": "number",
                    "description": "百分比",
                    "example": 38.0
                  }
                }
              },
              "description": "状态分布"
            },
            "priority_distribution": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "priority": {
                    "type": "integer",
                    "description": "优先级",
                    "example": 1
                  },
                  "priority_name": {
                    "type": "string",
                    "description": "优先级名称",
                    "example": "紧急"
                  },
                  "count": {
                    "type": "integer",
                    "description": "数量",
                    "example": 15
                  }
                }
              },
              "description": "优先级分布"
            },
            "recent_tickets": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/TicketListItem"
              },
              "description": "最近工单"
            },
            "sla_performance": {
              "type": "object",
              "description": "SLA表现",
              "properties": {
                "response_rate": {
                  "type": "number",
                  "description": "响应达标率",
                  "example": 96.5
                },
                "resolution_rate": {
                  "type": "number",
                  "description": "解决达标率",
                  "example": 92.3
                },
                "avg_response_time": {
                  "type": "number",
                  "description": "平均响应时间（分钟）",
                  "example": 18.5
                }
              }
            }
          }
        },
        "AttachmentInfo": {
          "type": "object",
          "properties": {
            "file_name": {
              "type": "string",
              "description": "文件名",
              "example": "error_log.txt"
            },
            "file_path": {
              "type": "string",
              "description": "文件路径",
              "example": "/uploads/2024/08/error_log.txt"
            },
            "file_size": {
              "type": "integer",
              "description": "文件大小（字节）",
              "example": 1024
            },
            "file_type": {
              "type": "string",
              "description": "文件类型",
              "example": "text/plain"
            }
          }
        },
        "TicketAttachment": {
          "allOf": [
            {
              "$ref": "#/components/schemas/AttachmentInfo"
            },
            {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer",
                  "description": "附件ID",
                  "example": 67890
                },
                "ticket_id": {
                  "type": "integer",
                  "description": "工单ID",
                  "example": 12345
                },
                "file_hash": {
                  "type": "string",
                  "description": "文件哈希值",
                  "example": "d41d8cd98f00b204e9800998ecf8427e"
                },
                "scan_status": {
                  "type": "string",
                  "enum": [
                    "PENDING",
                    "CLEAN",
                    "INFECTED",
                    "ERROR"
                  ],
                  "description": "病毒扫描状态",
                  "example": "CLEAN"
                },
                "upload_by": {
                  "type": "integer",
                  "description": "上传人ID",
                  "example": 78901
                },
                "upload_by_name": {
                  "type": "string",
                  "description": "上传人姓名",
                  "example": "张三"
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "上传时间",
                  "example": "2024-08-14T10:32:00Z"
                },
                "download_url": {
                  "type": "string",
                  "description": "下载链接",
                  "example": "https://api.example.com/v1/tickets/12345/attachments/67890/download"
                }
              }
            }
          ]
        },
        "TicketLog": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "description": "记录ID",
              "example": 98765
            },
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "action_type": {
              "type": "string",
              "enum": [
                "CREATE",
                "UPDATE",
                "ASSIGN",
                "ACCEPT",
                "REJECT",
                "ESCALATE",
                "RESOLVE",
                "CLOSE",
                "REOPEN",
                "COMMENT",
                "ATTACH"
              ],
              "description": "操作类型",
              "example": "ASSIGN"
            },
            "action_description": {
              "type": "string",
              "description": "操作描述",
              "example": "工单已分配给李工程师"
            },
            "old_value": {
              "type": "string",
              "description": "变更前值",
              "example": "null"
            },
            "new_value": {
              "type": "string",
              "description": "变更后值",
              "example": "67890"
            },
            "operator_id": {
              "type": "integer",
              "description": "操作人ID",
              "example": 11111
            },
            "operator_name": {
              "type": "string",
              "description": "操作人姓名",
              "example": "管理员"
            },
            "operator_role": {
              "type": "string",
              "description": "操作人角色",
              "example": "ADMIN"
            },
            "ip_address": {
              "type": "string",
              "description": "操作IP地址",
              "example": "192.168.1.100"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "操作时间",
              "example": "2024-08-14T10:35:00Z"
            }
          }
        }
      },
      "issues": []
    },
    "REQ-016-客户关系管理模块": {
      "file_path": "docs/api/4.5.1/modules/REQ-016-客户关系管理模块/openapi.yaml",
      "components": {
        "Customer": {
          "type": "object",
          "description": "客户档案信息",
          "properties": {
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "customer_code": {
              "type": "string",
              "description": "客户编码",
              "example": "CUST-20250815-0001"
            },
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "example": "ABC科技有限公司"
            },
            "customer_type": {
              "type": "integer",
              "description": "客户类型：1-企业，2-政府，3-个人",
              "enum": [
                1,
                2,
                3
              ],
              "example": 1
            },
            "industry": {
              "type": "string",
              "description": "所属行业",
              "example": "软件开发"
            },
            "scale": {
              "type": "string",
              "description": "企业规模",
              "example": "中型企业"
            },
            "address": {
              "type": "string",
              "description": "客户地址",
              "example": "北京市朝阳区xxx路xxx号"
            },
            "website": {
              "type": "string",
              "format": "uri",
              "description": "官方网站",
              "example": "https://www.abc-tech.com"
            },
            "description": {
              "type": "string",
              "description": "客户描述",
              "example": "专注于企业级软件开发的科技公司"
            },
            "status": {
              "type": "integer",
              "description": "状态：1-潜在客户，2-正式客户，3-流失客户",
              "enum": [
                1,
                2,
                3
              ],
              "example": 2
            },
            "level": {
              "type": "integer",
              "description": "客户等级：1-普通，2-重要，3-VIP，4-战略",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 3
            },
            "source": {
              "type": "string",
              "description": "客户来源",
              "example": "网络推广"
            },
            "assigned_manager_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户经理ID",
              "example": 1001
            },
            "health_score": {
              "type": "number",
              "format": "float",
              "description": "健康度评分",
              "minimum": 0,
              "maximum": 100,
              "example": 85.5
            },
            "ltv": {
              "type": "number",
              "format": "float",
              "description": "客户生命周期价值",
              "example": 360000.0
            },
            "last_contact_date": {
              "type": "string",
              "format": "date-time",
              "description": "最后联系时间",
              "example": "2025-08-10T15:30:00Z"
            },
            "next_renewal_date": {
              "type": "string",
              "format": "date",
              "description": "下次续约时间",
              "example": "2025-12-31"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:30:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "CustomerCreateRequest": {
          "type": "object",
          "description": "创建客户请求",
          "required": [
            "customer_name",
            "customer_type"
          ],
          "properties": {
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "minLength": 1,
              "maxLength": 200,
              "example": "ABC科技有限公司"
            },
            "customer_type": {
              "type": "integer",
              "description": "客户类型：1-企业，2-政府，3-个人",
              "enum": [
                1,
                2,
                3
              ],
              "example": 1
            },
            "industry": {
              "type": "string",
              "description": "所属行业",
              "maxLength": 100,
              "example": "软件开发"
            },
            "scale": {
              "type": "string",
              "description": "企业规模",
              "maxLength": 50,
              "example": "中型企业"
            },
            "address": {
              "type": "string",
              "description": "客户地址",
              "example": "北京市朝阳区xxx路xxx号"
            },
            "website": {
              "type": "string",
              "format": "uri",
              "description": "官方网站",
              "example": "https://www.abc-tech.com"
            },
            "description": {
              "type": "string",
              "description": "客户描述",
              "example": "专注于企业级软件开发的科技公司"
            },
            "level": {
              "type": "integer",
              "description": "客户等级：1-普通，2-重要，3-VIP，4-战略",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "default": 1,
              "example": 2
            },
            "source": {
              "type": "string",
              "description": "客户来源",
              "maxLength": 50,
              "example": "网络推广"
            },
            "assigned_manager_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户经理ID",
              "example": 1001
            },
            "contacts": {
              "type": "array",
              "description": "联系人列表",
              "items": {
                "$ref": "#/components/schemas/CustomerContactCreateRequest"
              }
            }
          }
        },
        "CustomerUpdateRequest": {
          "type": "object",
          "description": "更新客户请求",
          "properties": {
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "minLength": 1,
              "maxLength": 200,
              "example": "ABC科技有限公司"
            },
            "customer_type": {
              "type": "integer",
              "description": "客户类型：1-企业，2-政府，3-个人",
              "enum": [
                1,
                2,
                3
              ],
              "example": 1
            },
            "industry": {
              "type": "string",
              "description": "所属行业",
              "maxLength": 100,
              "example": "软件开发"
            },
            "scale": {
              "type": "string",
              "description": "企业规模",
              "maxLength": 50,
              "example": "中型企业"
            },
            "address": {
              "type": "string",
              "description": "客户地址",
              "example": "北京市朝阳区xxx路xxx号"
            },
            "website": {
              "type": "string",
              "format": "uri",
              "description": "官方网站",
              "example": "https://www.abc-tech.com"
            },
            "description": {
              "type": "string",
              "description": "客户描述",
              "example": "专注于企业级软件开发的科技公司"
            },
            "status": {
              "type": "integer",
              "description": "状态：1-潜在客户，2-正式客户，3-流失客户",
              "enum": [
                1,
                2,
                3
              ],
              "example": 2
            },
            "level": {
              "type": "integer",
              "description": "客户等级：1-普通，2-重要，3-VIP，4-战略",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 3
            },
            "source": {
              "type": "string",
              "description": "客户来源",
              "maxLength": 50,
              "example": "网络推广"
            },
            "assigned_manager_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户经理ID",
              "example": 1001
            }
          }
        },
        "CustomerCreateResponse": {
          "type": "object",
          "description": "创建客户响应",
          "properties": {
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "customer_code": {
              "type": "string",
              "description": "客户编码",
              "example": "CUST-20250815-0001"
            },
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "example": "ABC科技有限公司"
            },
            "status": {
              "type": "integer",
              "description": "状态",
              "example": 1
            },
            "health_score": {
              "type": "number",
              "format": "float",
              "description": "健康度评分",
              "example": 75.0
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "CustomerListItem": {
          "type": "object",
          "description": "客户列表项",
          "properties": {
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "customer_code": {
              "type": "string",
              "description": "客户编码",
              "example": "CUST-20250815-0001"
            },
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "example": "ABC科技有限公司"
            },
            "customer_type": {
              "type": "integer",
              "description": "客户类型",
              "example": 1
            },
            "industry": {
              "type": "string",
              "description": "所属行业",
              "example": "软件开发"
            },
            "level": {
              "type": "integer",
              "description": "客户等级",
              "example": 3
            },
            "status": {
              "type": "integer",
              "description": "状态",
              "example": 2
            },
            "health_score": {
              "type": "number",
              "format": "float",
              "description": "健康度评分",
              "example": 85.5
            },
            "ltv": {
              "type": "number",
              "format": "float",
              "description": "客户生命周期价值",
              "example": 360000.0
            },
            "assigned_manager": {
              "type": "object",
              "description": "客户经理信息",
              "properties": {
                "id": {
                  "type": "integer",
                  "format": "int64",
                  "example": 1001
                },
                "name": {
                  "type": "string",
                  "example": "李经理"
                }
              }
            },
            "last_contact_date": {
              "type": "string",
              "format": "date-time",
              "description": "最后联系时间",
              "example": "2025-08-10T15:30:00Z"
            },
            "next_renewal_date": {
              "type": "string",
              "format": "date",
              "description": "下次续约时间",
              "example": "2025-12-31"
            }
          }
        },
        "CustomerDetailResponse": {
          "type": "object",
          "description": "客户详情响应",
          "properties": {
            "customer_info": {
              "$ref": "#/components/schemas/Customer"
            },
            "contacts": {
              "type": "array",
              "description": "联系人列表",
              "items": {
                "$ref": "#/components/schemas/CustomerContact"
              }
            },
            "tags": {
              "type": "array",
              "description": "客户标签",
              "items": {
                "$ref": "#/components/schemas/CustomerTag"
              }
            }
          }
        },
        "CustomerContact": {
          "type": "object",
          "description": "客户联系人信息",
          "properties": {
            "contact_id": {
              "type": "integer",
              "format": "int64",
              "description": "联系人ID",
              "example": 1001
            },
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "contact_name": {
              "type": "string",
              "description": "联系人姓名",
              "example": "张总"
            },
            "position": {
              "type": "string",
              "description": "职位",
              "example": "总经理"
            },
            "department": {
              "type": "string",
              "description": "部门",
              "example": "管理层"
            },
            "phone": {
              "type": "string",
              "description": "电话",
              "example": "010-12345678"
            },
            "mobile": {
              "type": "string",
              "description": "手机",
              "example": "13800138000"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "example": "zhang@abc-tech.com"
            },
            "wechat": {
              "type": "string",
              "description": "微信",
              "example": "zhang_ceo"
            },
            "is_primary": {
              "type": "integer",
              "description": "是否主要联系人：0-否，1-是",
              "enum": [
                0,
                1
              ],
              "example": 1
            },
            "is_decision_maker": {
              "type": "integer",
              "description": "是否决策人：0-否，1-是",
              "enum": [
                0,
                1
              ],
              "example": 1
            },
            "influence_level": {
              "type": "integer",
              "description": "影响力等级：1-低，2-中，3-高",
              "enum": [
                1,
                2,
                3
              ],
              "example": 3
            },
            "last_contact_date": {
              "type": "string",
              "format": "date-time",
              "description": "最后联系时间",
              "example": "2025-08-10T15:30:00Z"
            },
            "contact_preference": {
              "type": "string",
              "description": "联系偏好",
              "example": "邮件"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:30:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "CustomerContactCreateRequest": {
          "type": "object",
          "description": "创建联系人请求",
          "required": [
            "contact_name"
          ],
          "properties": {
            "contact_name": {
              "type": "string",
              "description": "联系人姓名",
              "minLength": 1,
              "maxLength": 100,
              "example": "张总"
            },
            "position": {
              "type": "string",
              "description": "职位",
              "maxLength": 100,
              "example": "总经理"
            },
            "department": {
              "type": "string",
              "description": "部门",
              "maxLength": 100,
              "example": "管理层"
            },
            "phone": {
              "type": "string",
              "description": "电话",
              "maxLength": 20,
              "example": "010-12345678"
            },
            "mobile": {
              "type": "string",
              "description": "手机",
              "maxLength": 20,
              "example": "13800138000"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "maxLength": 100,
              "example": "zhang@abc-tech.com"
            },
            "wechat": {
              "type": "string",
              "description": "微信",
              "maxLength": 100,
              "example": "zhang_ceo"
            },
            "is_primary": {
              "type": "integer",
              "description": "是否主要联系人：0-否，1-是",
              "enum": [
                0,
                1
              ],
              "default": 0,
              "example": 1
            },
            "is_decision_maker": {
              "type": "integer",
              "description": "是否决策人：0-否，1-是",
              "enum": [
                0,
                1
              ],
              "default": 0,
              "example": 1
            },
            "influence_level": {
              "type": "integer",
              "description": "影响力等级：1-低，2-中，3-高",
              "enum": [
                1,
                2,
                3
              ],
              "default": 1,
              "example": 3
            },
            "contact_preference": {
              "type": "string",
              "description": "联系偏好",
              "maxLength": 50,
              "example": "邮件"
            }
          }
        },
        "CustomerContactUpdateRequest": {
          "type": "object",
          "description": "更新联系人请求",
          "properties": {
            "contact_name": {
              "type": "string",
              "description": "联系人姓名",
              "minLength": 1,
              "maxLength": 100,
              "example": "张总"
            },
            "position": {
              "type": "string",
              "description": "职位",
              "maxLength": 100,
              "example": "总经理"
            },
            "department": {
              "type": "string",
              "description": "部门",
              "maxLength": 100,
              "example": "管理层"
            },
            "phone": {
              "type": "string",
              "description": "电话",
              "maxLength": 20,
              "example": "010-12345678"
            },
            "mobile": {
              "type": "string",
              "description": "手机",
              "maxLength": 20,
              "example": "13800138000"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "maxLength": 100,
              "example": "zhang@abc-tech.com"
            },
            "wechat": {
              "type": "string",
              "description": "微信",
              "maxLength": 100,
              "example": "zhang_ceo"
            },
            "is_decision_maker": {
              "type": "integer",
              "description": "是否决策人：0-否，1-是",
              "enum": [
                0,
                1
              ],
              "example": 1
            },
            "influence_level": {
              "type": "integer",
              "description": "影响力等级：1-低，2-中，3-高",
              "enum": [
                1,
                2,
                3
              ],
              "example": 3
            },
            "contact_preference": {
              "type": "string",
              "description": "联系偏好",
              "maxLength": 50,
              "example": "邮件"
            }
          }
        },
        "CustomerHealthScore": {
          "type": "object",
          "description": "客户健康度信息",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "健康度记录ID",
              "example": 5001
            },
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "score_date": {
              "type": "string",
              "format": "date",
              "description": "评分日期",
              "example": "2025-08-15"
            },
            "overall_score": {
              "type": "number",
              "format": "float",
              "description": "总体健康度评分",
              "minimum": 0,
              "maximum": 100,
              "example": 85.5
            },
            "satisfaction_score": {
              "type": "number",
              "format": "float",
              "description": "满意度评分",
              "minimum": 0,
              "maximum": 100,
              "example": 88.0
            },
            "activity_score": {
              "type": "number",
              "format": "float",
              "description": "活跃度评分",
              "minimum": 0,
              "maximum": 100,
              "example": 82.0
            },
            "financial_score": {
              "type": "number",
              "format": "float",
              "description": "财务健康度评分",
              "minimum": 0,
              "maximum": 100,
              "example": 90.0
            },
            "contract_score": {
              "type": "number",
              "format": "float",
              "description": "合同稳定性评分",
              "minimum": 0,
              "maximum": 100,
              "example": 83.0
            },
            "risk_level": {
              "type": "integer",
              "description": "风险等级：1-低，2-中，3-高，4-极高",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 1
            },
            "churn_probability": {
              "type": "number",
              "format": "float",
              "description": "流失概率",
              "minimum": 0,
              "maximum": 1,
              "example": 0.085
            },
            "factors": {
              "type": "object",
              "description": "影响因素详情",
              "properties": {
                "positive_factors": {
                  "type": "array",
                  "description": "正面因素",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "付款及时性良好",
                    "服务满意度高",
                    "使用频率稳定"
                  ]
                },
                "negative_factors": {
                  "type": "array",
                  "description": "负面因素",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "近期登录频率下降",
                    "工单数量增加"
                  ]
                }
              }
            },
            "recommendations": {
              "type": "array",
              "description": "改进建议",
              "items": {
                "type": "string"
              },
              "example": [
                "建议主动联系客户了解使用情况",
                "提供产品使用培训",
                "关注工单处理质量"
              ]
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:30:00Z"
            }
          }
        },
        "CustomerHealthScoreResponse": {
          "type": "object",
          "description": "客户健康度计算响应",
          "properties": {
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "score_date": {
              "type": "string",
              "format": "date",
              "description": "评分日期",
              "example": "2025-08-15"
            },
            "overall_score": {
              "type": "number",
              "format": "float",
              "description": "总体健康度评分",
              "example": 85.5
            },
            "satisfaction_score": {
              "type": "number",
              "format": "float",
              "description": "满意度评分",
              "example": 88.0
            },
            "activity_score": {
              "type": "number",
              "format": "float",
              "description": "活跃度评分",
              "example": 82.0
            },
            "financial_score": {
              "type": "number",
              "format": "float",
              "description": "财务健康度评分",
              "example": 90.0
            },
            "contract_score": {
              "type": "number",
              "format": "float",
              "description": "合同稳定性评分",
              "example": 83.0
            },
            "risk_level": {
              "type": "integer",
              "description": "风险等级",
              "example": 1
            },
            "churn_probability": {
              "type": "number",
              "format": "float",
              "description": "流失概率",
              "example": 0.085
            },
            "factors": {
              "type": "object",
              "description": "影响因素详情",
              "properties": {
                "positive_factors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "付款及时性良好",
                    "服务满意度高",
                    "使用频率稳定"
                  ]
                },
                "negative_factors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "近期登录频率下降",
                    "工单数量增加"
                  ]
                }
              }
            },
            "recommendations": {
              "type": "array",
              "description": "改进建议",
              "items": {
                "type": "string"
              },
              "example": [
                "建议主动联系客户了解使用情况",
                "提供产品使用培训",
                "关注工单处理质量"
              ]
            }
          }
        },
        "CustomerHealthScoreTrendResponse": {
          "type": "object",
          "description": "客户健康度趋势响应",
          "properties": {
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "period": {
              "type": "string",
              "description": "时间周期",
              "example": "6m"
            },
            "trend_data": {
              "type": "array",
              "description": "趋势数据",
              "items": {
                "type": "object",
                "properties": {
                  "score_date": {
                    "type": "string",
                    "format": "date",
                    "description": "评分日期",
                    "example": "2025-03-15"
                  },
                  "overall_score": {
                    "type": "number",
                    "format": "float",
                    "description": "总体健康度评分",
                    "example": 78.5
                  },
                  "risk_level": {
                    "type": "integer",
                    "description": "风险等级",
                    "example": 2
                  }
                }
              }
            },
            "trend_analysis": {
              "type": "object",
              "description": "趋势分析",
              "properties": {
                "direction": {
                  "type": "string",
                  "description": "趋势方向",
                  "enum": [
                    "上升",
                    "下降",
                    "稳定"
                  ],
                  "example": "上升"
                },
                "change_rate": {
                  "type": "number",
                  "format": "float",
                  "description": "变化率",
                  "example": 0.089
                },
                "stability": {
                  "type": "string",
                  "description": "稳定性",
                  "enum": [
                    "稳定",
                    "波动",
                    "剧烈波动"
                  ],
                  "example": "稳定"
                }
              }
            }
          }
        },
        "CustomerTag": {
          "type": "object",
          "description": "客户标签信息",
          "properties": {
            "tag_id": {
              "type": "integer",
              "format": "int64",
              "description": "标签ID",
              "example": 2001
            },
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "tag_name": {
              "type": "string",
              "description": "标签名称",
              "example": "高价值客户"
            },
            "tag_type": {
              "type": "integer",
              "description": "标签类型：1-手动，2-自动，3-系统",
              "enum": [
                1,
                2,
                3
              ],
              "example": 2
            },
            "tag_category": {
              "type": "string",
              "description": "标签分类",
              "example": "价值分类"
            },
            "tag_value": {
              "type": "string",
              "description": "标签值",
              "example": "VIP"
            },
            "confidence": {
              "type": "number",
              "format": "float",
              "description": "置信度（自动标签）",
              "minimum": 0,
              "maximum": 1,
              "example": 0.95
            },
            "created_by": {
              "type": "integer",
              "format": "int64",
              "description": "创建人",
              "example": 1001
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:30:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "CustomerSuccessTask": {
          "type": "object",
          "description": "客户成功任务信息",
          "properties": {
            "task_id": {
              "type": "integer",
              "format": "int64",
              "description": "任务ID",
              "example": 5001
            },
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "task_title": {
              "type": "string",
              "description": "任务标题",
              "example": "客户健康度改善计划"
            },
            "task_description": {
              "type": "string",
              "description": "任务描述",
              "example": "针对客户健康度下降，制定改善计划"
            },
            "task_type": {
              "type": "integer",
              "description": "任务类型：1-健康度改善，2-续约跟进，3-满意度提升，4-问题解决",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 1
            },
            "priority": {
              "type": "integer",
              "description": "优先级：1-低，2-中，3-高，4-紧急",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 3
            },
            "status": {
              "type": "integer",
              "description": "状态：1-待处理，2-进行中，3-已完成，4-已取消",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 1
            },
            "assigned_to": {
              "type": "integer",
              "format": "int64",
              "description": "分配给",
              "example": 1001
            },
            "due_date": {
              "type": "string",
              "format": "date-time",
              "description": "截止时间",
              "example": "2025-08-25T18:00:00Z"
            },
            "completion_date": {
              "type": "string",
              "format": "date-time",
              "description": "完成时间",
              "example": null
            },
            "result": {
              "type": "string",
              "description": "执行结果",
              "example": null
            },
            "effectiveness_score": {
              "type": "number",
              "format": "float",
              "description": "效果评分",
              "minimum": 0,
              "maximum": 5,
              "example": null
            },
            "auto_generated": {
              "type": "integer",
              "description": "是否自动生成：0-否，1-是",
              "enum": [
                0,
                1
              ],
              "example": 0
            },
            "trigger_condition": {
              "type": "string",
              "description": "触发条件",
              "example": null
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T16:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T16:00:00Z"
            }
          }
        },
        "CustomerSuccessTaskCreateRequest": {
          "type": "object",
          "description": "创建客户成功任务请求",
          "required": [
            "task_title",
            "task_type",
            "assigned_to"
          ],
          "properties": {
            "task_title": {
              "type": "string",
              "description": "任务标题",
              "minLength": 1,
              "maxLength": 200,
              "example": "客户健康度改善计划"
            },
            "task_description": {
              "type": "string",
              "description": "任务描述",
              "example": "针对客户健康度下降，制定改善计划"
            },
            "task_type": {
              "type": "integer",
              "description": "任务类型：1-健康度改善，2-续约跟进，3-满意度提升，4-问题解决",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 1
            },
            "priority": {
              "type": "integer",
              "description": "优先级：1-低，2-中，3-高，4-紧急",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "default": 2,
              "example": 3
            },
            "assigned_to": {
              "type": "integer",
              "format": "int64",
              "description": "分配给",
              "example": 1001
            },
            "due_date": {
              "type": "string",
              "format": "date-time",
              "description": "截止时间",
              "example": "2025-08-25T18:00:00Z"
            }
          }
        },
        "CustomerSuccessTaskListItem": {
          "type": "object",
          "description": "客户成功任务列表项",
          "properties": {
            "task_id": {
              "type": "integer",
              "format": "int64",
              "description": "任务ID",
              "example": 5001
            },
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "example": "ABC科技有限公司"
            },
            "task_title": {
              "type": "string",
              "description": "任务标题",
              "example": "客户健康度改善计划"
            },
            "task_type": {
              "type": "integer",
              "description": "任务类型",
              "example": 1
            },
            "priority": {
              "type": "integer",
              "description": "优先级",
              "example": 3
            },
            "status": {
              "type": "integer",
              "description": "状态",
              "example": 1
            },
            "due_date": {
              "type": "string",
              "format": "date-time",
              "description": "截止时间",
              "example": "2025-08-25T18:00:00Z"
            },
            "auto_generated": {
              "type": "integer",
              "description": "是否自动生成",
              "example": 0
            }
          }
        },
        "CustomerValueAnalysisResponse": {
          "type": "object",
          "description": "客户价值分析响应",
          "properties": {
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "value_analysis": {
              "type": "object",
              "description": "价值分析",
              "properties": {
                "ltv": {
                  "type": "number",
                  "format": "float",
                  "description": "客户生命周期价值",
                  "example": 360000.0
                },
                "arpu": {
                  "type": "number",
                  "format": "float",
                  "description": "用户平均收入",
                  "example": 10000.0
                },
                "profit_margin": {
                  "type": "number",
                  "format": "float",
                  "description": "利润率",
                  "example": 0.35
                },
                "revenue_trend": {
                  "type": "string",
                  "description": "收入趋势",
                  "enum": [
                    "上升",
                    "下降",
                    "稳定"
                  ],
                  "example": "上升"
                },
                "value_rank": {
                  "type": "string",
                  "description": "价值排名",
                  "example": "前10%"
                }
              }
            },
            "financial_metrics": {
              "type": "object",
              "description": "财务指标",
              "properties": {
                "total_revenue": {
                  "type": "number",
                  "format": "float",
                  "description": "总收入",
                  "example": 120000.0
                },
                "monthly_revenue": {
                  "type": "number",
                  "format": "float",
                  "description": "月收入",
                  "example": 10000.0
                },
                "payment_punctuality": {
                  "type": "number",
                  "format": "float",
                  "description": "付款及时性",
                  "minimum": 0,
                  "maximum": 1,
                  "example": 0.95
                },
                "contract_stability": {
                  "type": "number",
                  "format": "float",
                  "description": "合同稳定性",
                  "minimum": 0,
                  "maximum": 1,
                  "example": 0.88
                }
              }
            },
            "growth_potential": {
              "type": "object",
              "description": "增长潜力",
              "properties": {
                "upsell_probability": {
                  "type": "number",
                  "format": "float",
                  "description": "向上销售概率",
                  "minimum": 0,
                  "maximum": 1,
                  "example": 0.75
                },
                "expansion_opportunities": {
                  "type": "array",
                  "description": "扩展机会",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "增加用户数量",
                    "升级服务等级",
                    "购买附加模块"
                  ]
                },
                "estimated_growth": {
                  "type": "number",
                  "format": "float",
                  "description": "预估增长率",
                  "example": 0.3
                }
              }
            }
          }
        },
        "CustomerContract": {
          "type": "object",
          "description": "客户合同信息",
          "properties": {
            "contract_id": {
              "type": "integer",
              "format": "int64",
              "description": "合同ID",
              "example": 10001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "contract_code": {
              "type": "string",
              "description": "合同编号",
              "example": "CONT-20250815-0001"
            },
            "contract_name": {
              "type": "string",
              "description": "合同名称",
              "example": "IT运维服务合同"
            },
            "contract_type": {
              "type": "integer",
              "description": "合同类型：1-服务合同，2-采购合同，3-框架协议",
              "enum": [
                1,
                2,
                3
              ],
              "example": 1
            },
            "contract_amount": {
              "type": "number",
              "format": "float",
              "description": "合同金额",
              "example": 120000.0
            },
            "currency": {
              "type": "string",
              "description": "币种",
              "default": "CNY",
              "example": "CNY"
            },
            "start_date": {
              "type": "string",
              "format": "date",
              "description": "合同开始日期",
              "example": "2025-01-01"
            },
            "end_date": {
              "type": "string",
              "format": "date",
              "description": "合同结束日期",
              "example": "2025-12-31"
            },
            "status": {
              "type": "integer",
              "description": "状态：1-草稿，2-生效，3-到期，4-终止",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 2
            },
            "renewal_type": {
              "type": "integer",
              "description": "续约类型：1-手动，2-自动",
              "enum": [
                1,
                2
              ],
              "example": 1
            },
            "renewal_notice_days": {
              "type": "integer",
              "description": "续约提醒天数",
              "default": 90,
              "example": 90
            },
            "payment_terms": {
              "type": "string",
              "description": "付款条件",
              "example": "月付"
            },
            "service_level": {
              "type": "string",
              "description": "服务等级",
              "example": "专业版"
            },
            "contract_file_url": {
              "type": "string",
              "format": "uri",
              "description": "合同文件URL",
              "example": "https://cdn.example.com/contracts/CONT-20250815-0001.pdf"
            },
            "signed_date": {
              "type": "string",
              "format": "date",
              "description": "签署日期",
              "example": "2024-12-15"
            },
            "created_by": {
              "type": "integer",
              "format": "int64",
              "description": "创建人",
              "example": 1001
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-12-15T10:30:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "CustomerContractCreateRequest": {
          "type": "object",
          "description": "创建客户合同请求",
          "required": [
            "contract_name",
            "contract_type",
            "contract_amount",
            "start_date",
            "end_date"
          ],
          "properties": {
            "contract_name": {
              "type": "string",
              "description": "合同名称",
              "minLength": 1,
              "maxLength": 200,
              "example": "IT运维服务合同"
            },
            "contract_type": {
              "type": "integer",
              "description": "合同类型：1-服务合同，2-采购合同，3-框架协议",
              "enum": [
                1,
                2,
                3
              ],
              "example": 1
            },
            "contract_amount": {
              "type": "number",
              "format": "float",
              "description": "合同金额",
              "minimum": 0,
              "example": 120000.0
            },
            "currency": {
              "type": "string",
              "description": "币种",
              "default": "CNY",
              "example": "CNY"
            },
            "start_date": {
              "type": "string",
              "format": "date",
              "description": "合同开始日期",
              "example": "2025-01-01"
            },
            "end_date": {
              "type": "string",
              "format": "date",
              "description": "合同结束日期",
              "example": "2025-12-31"
            },
            "renewal_type": {
              "type": "integer",
              "description": "续约类型：1-手动，2-自动",
              "enum": [
                1,
                2
              ],
              "default": 1,
              "example": 1
            },
            "renewal_notice_days": {
              "type": "integer",
              "description": "续约提醒天数",
              "minimum": 1,
              "maximum": 365,
              "default": 90,
              "example": 90
            },
            "payment_terms": {
              "type": "string",
              "description": "付款条件",
              "maxLength": 100,
              "example": "月付"
            },
            "service_level": {
              "type": "string",
              "description": "服务等级",
              "maxLength": 100,
              "example": "专业版"
            },
            "contract_file_url": {
              "type": "string",
              "format": "uri",
              "description": "合同文件URL",
              "example": "https://cdn.example.com/contracts/CONT-20250815-0001.pdf"
            },
            "signed_date": {
              "type": "string",
              "format": "date",
              "description": "签署日期",
              "example": "2024-12-15"
            }
          }
        },
        "CustomerContractUpdateRequest": {
          "type": "object",
          "description": "更新客户合同请求",
          "properties": {
            "contract_name": {
              "type": "string",
              "description": "合同名称",
              "minLength": 1,
              "maxLength": 200,
              "example": "IT运维服务合同"
            },
            "contract_amount": {
              "type": "number",
              "format": "float",
              "description": "合同金额",
              "minimum": 0,
              "example": 120000.0
            },
            "end_date": {
              "type": "string",
              "format": "date",
              "description": "合同结束日期",
              "example": "2025-12-31"
            },
            "status": {
              "type": "integer",
              "description": "状态：1-草稿，2-生效，3-到期，4-终止",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 2
            },
            "renewal_type": {
              "type": "integer",
              "description": "续约类型：1-手动，2-自动",
              "enum": [
                1,
                2
              ],
              "example": 1
            },
            "renewal_notice_days": {
              "type": "integer",
              "description": "续约提醒天数",
              "minimum": 1,
              "maximum": 365,
              "example": 90
            },
            "payment_terms": {
              "type": "string",
              "description": "付款条件",
              "maxLength": 100,
              "example": "月付"
            },
            "service_level": {
              "type": "string",
              "description": "服务等级",
              "maxLength": 100,
              "example": "专业版"
            },
            "contract_file_url": {
              "type": "string",
              "format": "uri",
              "description": "合同文件URL",
              "example": "https://cdn.example.com/contracts/CONT-20250815-0001.pdf"
            }
          }
        },
        "ContractRenewalRequest": {
          "type": "object",
          "description": "合同续约请求",
          "required": [
            "new_end_date"
          ],
          "properties": {
            "new_end_date": {
              "type": "string",
              "format": "date",
              "description": "新的合同结束日期",
              "example": "2026-12-31"
            },
            "new_amount": {
              "type": "number",
              "format": "float",
              "description": "新的合同金额",
              "minimum": 0,
              "example": 150000.0
            },
            "renewal_terms": {
              "type": "string",
              "description": "续约条款",
              "example": "按原合同条款续约，金额上调25%"
            }
          }
        },
        "CustomerTagCreateRequest": {
          "type": "object",
          "description": "创建客户标签请求",
          "required": [
            "tag_name"
          ],
          "properties": {
            "tag_name": {
              "type": "string",
              "description": "标签名称",
              "minLength": 1,
              "maxLength": 100,
              "example": "高价值客户"
            },
            "tag_type": {
              "type": "integer",
              "description": "标签类型：1-手动，2-自动，3-系统",
              "enum": [
                1,
                2,
                3
              ],
              "default": 1,
              "example": 1
            },
            "tag_category": {
              "type": "string",
              "description": "标签分类",
              "maxLength": 50,
              "example": "价值分类"
            },
            "tag_value": {
              "type": "string",
              "description": "标签值",
              "maxLength": 200,
              "example": "VIP"
            }
          }
        },
        "CustomerBehaviorAnalysisResponse": {
          "type": "object",
          "description": "客户行为分析响应",
          "properties": {
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "analysis_period": {
              "type": "string",
              "description": "分析周期",
              "example": "3m"
            },
            "login_behavior": {
              "type": "object",
              "description": "登录行为分析",
              "properties": {
                "total_logins": {
                  "type": "integer",
                  "description": "总登录次数",
                  "example": 156
                },
                "avg_daily_logins": {
                  "type": "number",
                  "format": "float",
                  "description": "日均登录次数",
                  "example": 1.73
                },
                "login_frequency_trend": {
                  "type": "string",
                  "description": "登录频率趋势",
                  "enum": [
                    "上升",
                    "下降",
                    "稳定"
                  ],
                  "example": "稳定"
                },
                "peak_hours": {
                  "type": "array",
                  "description": "高峰时段",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "09:00-11:00",
                    "14:00-16:00"
                  ]
                }
              }
            },
            "usage_behavior": {
              "type": "object",
              "description": "使用行为分析",
              "properties": {
                "most_used_features": {
                  "type": "array",
                  "description": "最常用功能",
                  "items": {
                    "type": "object",
                    "properties": {
                      "feature_name": {
                        "type": "string",
                        "example": "工单管理"
                      },
                      "usage_count": {
                        "type": "integer",
                        "example": 89
                      },
                      "usage_percentage": {
                        "type": "number",
                        "format": "float",
                        "example": 0.57
                      }
                    }
                  }
                },
                "feature_adoption_rate": {
                  "type": "number",
                  "format": "float",
                  "description": "功能采用率",
                  "minimum": 0,
                  "maximum": 1,
                  "example": 0.75
                },
                "session_duration_avg": {
                  "type": "number",
                  "format": "float",
                  "description": "平均会话时长（分钟）",
                  "example": 45.6
                }
              }
            },
            "service_interaction": {
              "type": "object",
              "description": "服务交互分析",
              "properties": {
                "ticket_submission_rate": {
                  "type": "number",
                  "format": "float",
                  "description": "工单提交频率（次/月）",
                  "example": 2.3
                },
                "satisfaction_trend": {
                  "type": "string",
                  "description": "满意度趋势",
                  "enum": [
                    "上升",
                    "下降",
                    "稳定"
                  ],
                  "example": "上升"
                },
                "communication_preference": {
                  "type": "string",
                  "description": "沟通偏好",
                  "example": "邮件"
                }
              }
            },
            "engagement_score": {
              "type": "number",
              "format": "float",
              "description": "参与度评分",
              "minimum": 0,
              "maximum": 100,
              "example": 78.5
            },
            "behavior_insights": {
              "type": "array",
              "description": "行为洞察",
              "items": {
                "type": "string"
              },
              "example": [
                "客户使用频率稳定，主要集中在工作时间",
                "对新功能接受度较高",
                "偏好邮件沟通方式"
              ]
            }
          }
        },
        "CustomerCommunication": {
          "type": "object",
          "description": "客户沟通记录信息",
          "properties": {
            "communication_id": {
              "type": "integer",
              "format": "int64",
              "description": "沟通记录ID",
              "example": 30001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "contact_id": {
              "type": "integer",
              "format": "int64",
              "description": "联系人ID",
              "example": 1001
            },
            "communication_type": {
              "type": "integer",
              "description": "沟通类型：1-电话，2-邮件，3-会议，4-在线聊天",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 2
            },
            "direction": {
              "type": "integer",
              "description": "方向：1-呼入，2-呼出",
              "enum": [
                1,
                2
              ],
              "example": 2
            },
            "subject": {
              "type": "string",
              "description": "主题",
              "example": "月度服务回顾会议"
            },
            "content": {
              "type": "string",
              "description": "沟通内容",
              "example": "讨论了本月服务质量情况，客户对响应速度表示满意"
            },
            "duration_minutes": {
              "type": "integer",
              "description": "持续时间（分钟）",
              "example": 60
            },
            "outcome": {
              "type": "string",
              "description": "沟通结果",
              "example": "达成一致"
            },
            "next_action": {
              "type": "string",
              "description": "下一步行动",
              "example": "下月继续跟进服务质量"
            },
            "sentiment": {
              "type": "integer",
              "description": "情感倾向：1-负面，2-中性，3-正面",
              "enum": [
                1,
                2,
                3
              ],
              "example": 3
            },
            "importance": {
              "type": "integer",
              "description": "重要性：1-低，2-中，3-高",
              "enum": [
                1,
                2,
                3
              ],
              "default": 2,
              "example": 2
            },
            "staff_id": {
              "type": "integer",
              "format": "int64",
              "description": "员工ID",
              "example": 1001
            },
            "staff_name": {
              "type": "string",
              "description": "员工姓名",
              "example": "李经理"
            },
            "communication_date": {
              "type": "string",
              "format": "date-time",
              "description": "沟通时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T15:00:00Z"
            }
          }
        },
        "CustomerCommunicationCreateRequest": {
          "type": "object",
          "description": "创建沟通记录请求",
          "required": [
            "communication_type",
            "direction",
            "subject",
            "content",
            "communication_date"
          ],
          "properties": {
            "contact_id": {
              "type": "integer",
              "format": "int64",
              "description": "联系人ID",
              "example": 1001
            },
            "communication_type": {
              "type": "integer",
              "description": "沟通类型：1-电话，2-邮件，3-会议，4-在线聊天",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 2
            },
            "direction": {
              "type": "integer",
              "description": "方向：1-呼入，2-呼出",
              "enum": [
                1,
                2
              ],
              "example": 2
            },
            "subject": {
              "type": "string",
              "description": "主题",
              "minLength": 1,
              "maxLength": 200,
              "example": "月度服务回顾会议"
            },
            "content": {
              "type": "string",
              "description": "沟通内容",
              "minLength": 1,
              "example": "讨论了本月服务质量情况，客户对响应速度表示满意"
            },
            "duration_minutes": {
              "type": "integer",
              "description": "持续时间（分钟）",
              "minimum": 0,
              "example": 60
            },
            "outcome": {
              "type": "string",
              "description": "沟通结果",
              "maxLength": 100,
              "example": "达成一致"
            },
            "next_action": {
              "type": "string",
              "description": "下一步行动",
              "maxLength": 200,
              "example": "下月继续跟进服务质量"
            },
            "sentiment": {
              "type": "integer",
              "description": "情感倾向：1-负面，2-中性，3-正面",
              "enum": [
                1,
                2,
                3
              ],
              "example": 3
            },
            "importance": {
              "type": "integer",
              "description": "重要性：1-低，2-中，3-高",
              "enum": [
                1,
                2,
                3
              ],
              "default": 2,
              "example": 2
            },
            "communication_date": {
              "type": "string",
              "format": "date-time",
              "description": "沟通时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "CustomerServiceRecord": {
          "type": "object",
          "description": "客户服务记录信息",
          "properties": {
            "record_id": {
              "type": "integer",
              "format": "int64",
              "description": "服务记录ID",
              "example": 40001
            },
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "ticket_id": {
              "type": "string",
              "description": "关联工单ID",
              "example": "TCK-20250815-0001"
            },
            "service_type": {
              "type": "string",
              "description": "服务类型",
              "example": "故障处理"
            },
            "service_description": {
              "type": "string",
              "description": "服务描述",
              "example": "解决服务器CPU使用率过高问题"
            },
            "service_duration": {
              "type": "integer",
              "description": "服务时长（分钟）",
              "example": 120
            },
            "engineer_id": {
              "type": "integer",
              "format": "int64",
              "description": "工程师ID",
              "example": 1001
            },
            "engineer_name": {
              "type": "string",
              "description": "工程师姓名",
              "example": "张工程师"
            },
            "resolution_time": {
              "type": "integer",
              "description": "解决时间（分钟）",
              "example": 90
            },
            "satisfaction_score": {
              "type": "number",
              "format": "float",
              "description": "满意度评分",
              "minimum": 1,
              "maximum": 5,
              "example": 4.5
            },
            "sla_met": {
              "type": "boolean",
              "description": "是否满足SLA",
              "example": true
            },
            "service_date": {
              "type": "string",
              "format": "date-time",
              "description": "服务时间",
              "example": "2025-08-15T10:30:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T16:00:00Z"
            }
          }
        },
        "CustomerSatisfactionData": {
          "type": "object",
          "description": "客户满意度数据",
          "properties": {
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 12345
            },
            "period": {
              "type": "string",
              "description": "统计周期",
              "example": "3m"
            },
            "overall_satisfaction": {
              "type": "number",
              "format": "float",
              "description": "总体满意度",
              "minimum": 1,
              "maximum": 5,
              "example": 4.3
            },
            "satisfaction_trend": {
              "type": "string",
              "description": "满意度趋势",
              "enum": [
                "上升",
                "下降",
                "稳定"
              ],
              "example": "上升"
            },
            "service_satisfaction": {
              "type": "object",
              "description": "服务满意度详情",
              "properties": {
                "response_time": {
                  "type": "number",
                  "format": "float",
                  "description": "响应时间满意度",
                  "example": 4.5
                },
                "solution_quality": {
                  "type": "number",
                  "format": "float",
                  "description": "解决方案质量满意度",
                  "example": 4.2
                },
                "communication": {
                  "type": "number",
                  "format": "float",
                  "description": "沟通满意度",
                  "example": 4.4
                },
                "professionalism": {
                  "type": "number",
                  "format": "float",
                  "description": "专业性满意度",
                  "example": 4.6
                }
              }
            },
            "satisfaction_history": {
              "type": "array",
              "description": "满意度历史",
              "items": {
                "type": "object",
                "properties": {
                  "date": {
                    "type": "string",
                    "format": "date",
                    "example": "2025-08-01"
                  },
                  "score": {
                    "type": "number",
                    "format": "float",
                    "example": 4.3
                  }
                }
              }
            },
            "improvement_suggestions": {
              "type": "array",
              "description": "改进建议",
              "items": {
                "type": "string"
              },
              "example": [
                "提高响应速度",
                "加强技术培训",
                "优化沟通流程"
              ]
            }
          }
        }
      },
      "issues": []
    },
    "REQ-022-用户与权限管理模块": {
      "file_path": "docs/api/4.5.1/modules/REQ-022-用户与权限管理模块/openapi.yaml",
      "components": {
        "UserInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "format": "int64",
                  "description": "租户ID",
                  "example": 1
                },
                "username": {
                  "type": "string",
                  "description": "用户名",
                  "example": "zhangsan"
                },
                "email": {
                  "type": "string",
                  "format": "email",
                  "description": "邮箱",
                  "example": "zhangsan@company.com"
                },
                "phone": {
                  "type": "string",
                  "description": "手机号",
                  "example": "13800138000"
                },
                "real_name": {
                  "type": "string",
                  "description": "真实姓名",
                  "example": "张三"
                },
                "employee_id": {
                  "type": "string",
                  "description": "员工编号",
                  "example": "EMP001"
                },
                "department_id": {
                  "type": "integer",
                  "format": "int64",
                  "description": "部门ID",
                  "example": 1001
                },
                "department_name": {
                  "type": "string",
                  "description": "部门名称",
                  "example": "运维部"
                },
                "position": {
                  "type": "string",
                  "description": "职位",
                  "example": "高级运维工程师"
                },
                "avatar_url": {
                  "type": "string",
                  "format": "uri",
                  "description": "头像URL",
                  "example": "https://cdn.example.com/avatars/zhangsan.png"
                },
                "status": {
                  "type": "integer",
                  "enum": [
                    1,
                    2,
                    3,
                    4
                  ],
                  "description": "状态：1-正常，2-禁用，3-锁定，4-过期",
                  "example": 1
                },
                "last_login_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "最后登录时间",
                  "example": "2024-08-14T14:30:00Z"
                },
                "login_count": {
                  "type": "integer",
                  "description": "登录次数",
                  "example": 156
                },
                "mfa_enabled": {
                  "type": "boolean",
                  "description": "是否启用多因子认证",
                  "example": true
                },
                "external_source": {
                  "type": "string",
                  "description": "外部身份源",
                  "example": "ldap"
                }
              }
            }
          ]
        },
        "UserDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/UserInfo"
            },
            {
              "type": "object",
              "properties": {
                "roles": {
                  "type": "array",
                  "description": "用户角色列表",
                  "items": {
                    "$ref": "#/components/schemas/RoleInfo"
                  }
                },
                "permissions": {
                  "type": "array",
                  "description": "用户权限列表",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "user:read",
                    "user:write",
                    "role:read"
                  ]
                },
                "password_updated_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "密码更新时间",
                  "example": "2024-08-01T09:00:00Z"
                },
                "locked_until": {
                  "type": "string",
                  "format": "date-time",
                  "nullable": true,
                  "description": "锁定到期时间",
                  "example": null
                },
                "failed_login_count": {
                  "type": "integer",
                  "description": "失败登录次数",
                  "example": 0
                }
              }
            }
          ]
        },
        "CreateUserRequest": {
          "type": "object",
          "required": [
            "username",
            "email",
            "real_name",
            "password"
          ],
          "properties": {
            "username": {
              "type": "string",
              "description": "用户名",
              "example": "lisi"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "example": "lisi@company.com"
            },
            "phone": {
              "type": "string",
              "description": "手机号",
              "example": "13900139000"
            },
            "real_name": {
              "type": "string",
              "description": "真实姓名",
              "example": "李四"
            },
            "employee_id": {
              "type": "string",
              "description": "员工编号",
              "example": "EMP002"
            },
            "department_id": {
              "type": "integer",
              "format": "int64",
              "description": "部门ID",
              "example": 1001
            },
            "position": {
              "type": "string",
              "description": "职位",
              "example": "初级运维工程师"
            },
            "password": {
              "type": "string",
              "description": "初始密码",
              "example": "TempPassword123!"
            },
            "role_ids": {
              "type": "array",
              "description": "角色ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                2,
                3
              ]
            },
            "force_password_change": {
              "type": "boolean",
              "description": "是否强制首次登录修改密码",
              "example": true
            },
            "send_welcome_email": {
              "type": "boolean",
              "description": "是否发送欢迎邮件",
              "example": true
            },
            "mfa_enabled": {
              "type": "boolean",
              "description": "是否启用多因子认证",
              "example": false
            }
          }
        },
        "UpdateUserRequest": {
          "type": "object",
          "properties": {
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "example": "lisi.updated@company.com"
            },
            "phone": {
              "type": "string",
              "description": "手机号",
              "example": "13900139001"
            },
            "real_name": {
              "type": "string",
              "description": "真实姓名",
              "example": "李四（更新）"
            },
            "employee_id": {
              "type": "string",
              "description": "员工编号",
              "example": "EMP002-UPD"
            },
            "department_id": {
              "type": "integer",
              "format": "int64",
              "description": "部门ID",
              "example": 1002
            },
            "position": {
              "type": "string",
              "description": "职位",
              "example": "中级运维工程师"
            },
            "avatar_url": {
              "type": "string",
              "format": "uri",
              "description": "头像URL",
              "example": "https://cdn.example.com/avatars/lisi_updated.png"
            },
            "timezone": {
              "type": "string",
              "description": "时区",
              "example": "Asia/Shanghai"
            },
            "language": {
              "type": "string",
              "description": "语言",
              "example": "zh-CN"
            }
          }
        },
        "UpdateUserStatusRequest": {
          "type": "object",
          "required": [
            "status"
          ],
          "properties": {
            "status": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "用户状态：1-正常，2-禁用，3-锁定",
              "example": 1
            },
            "reason": {
              "type": "string",
              "description": "状态变更原因",
              "example": "管理员手动启用"
            }
          }
        },
        "UserStatusInfo": {
          "type": "object",
          "properties": {
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 1001
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "description": "用户状态",
              "example": 1
            },
            "status_name": {
              "type": "string",
              "description": "状态名称",
              "example": "正常"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "状态更新时间",
              "example": "2024-08-14T14:30:00Z"
            }
          }
        },
        "ResetPasswordRequest": {
          "type": "object",
          "properties": {
            "new_password": {
              "type": "string",
              "description": "新密码（可选，不提供则自动生成）",
              "example": "NewPassword123!"
            },
            "force_change": {
              "type": "boolean",
              "description": "是否强制下次登录修改密码",
              "example": true
            },
            "send_notification": {
              "type": "boolean",
              "description": "是否发送通知",
              "example": true
            }
          }
        },
        "ResetPasswordResult": {
          "type": "object",
          "properties": {
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 1001
            },
            "password_sent": {
              "type": "boolean",
              "description": "是否已发送密码",
              "example": true
            },
            "temp_password": {
              "type": "string",
              "description": "临时密码（仅在未发送时返回）",
              "example": "TempPass789!"
            },
            "force_change_required": {
              "type": "boolean",
              "description": "是否需要强制修改",
              "example": true
            }
          }
        },
        "BatchImportResult": {
          "type": "object",
          "properties": {
            "total": {
              "type": "integer",
              "description": "总记录数",
              "example": 100
            },
            "success": {
              "type": "integer",
              "description": "成功导入数",
              "example": 95
            },
            "failed": {
              "type": "integer",
              "description": "失败记录数",
              "example": 5
            },
            "task_id": {
              "type": "string",
              "description": "导入任务ID",
              "example": "import_task_20240814_001"
            },
            "failed_records": {
              "type": "array",
              "description": "失败记录详情",
              "items": {
                "type": "object",
                "properties": {
                  "row": {
                    "type": "integer",
                    "description": "行号",
                    "example": 10
                  },
                  "username": {
                    "type": "string",
                    "description": "用户名",
                    "example": "duplicate_user"
                  },
                  "error": {
                    "type": "string",
                    "description": "错误信息",
                    "example": "用户名已存在"
                  }
                }
              }
            }
          }
        },
        "BatchUpdateStatusRequest": {
          "type": "object",
          "required": [
            "user_ids",
            "status"
          ],
          "properties": {
            "user_ids": {
              "type": "array",
              "description": "用户ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                1001,
                1002,
                1003
              ]
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "目标状态：1-正常，2-禁用，3-锁定",
              "example": 2
            },
            "reason": {
              "type": "string",
              "description": "批量操作原因",
              "example": "批量禁用违规用户"
            }
          }
        },
        "BatchUpdateResult": {
          "type": "object",
          "properties": {
            "total": {
              "type": "integer",
              "description": "总数",
              "example": 3
            },
            "success": {
              "type": "integer",
              "description": "成功数",
              "example": 2
            },
            "failed": {
              "type": "integer",
              "description": "失败数",
              "example": 1
            },
            "failed_items": {
              "type": "array",
              "description": "失败项详情",
              "items": {
                "type": "object",
                "properties": {
                  "user_id": {
                    "type": "integer",
                    "format": "int64",
                    "example": 1003
                  },
                  "error": {
                    "type": "string",
                    "example": "用户不存在"
                  }
                }
              }
            }
          }
        },
        "UserRolesResponse": {
          "type": "object",
          "properties": {
            "user_info": {
              "$ref": "#/components/schemas/UserInfo"
            },
            "direct_roles": {
              "type": "array",
              "description": "直接分配的角色",
              "items": {
                "$ref": "#/components/schemas/RoleInfo"
              }
            },
            "inherited_roles": {
              "type": "array",
              "description": "继承的角色",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/RoleInfo"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "inherited_from": {
                        "type": "string",
                        "description": "继承来源",
                        "example": "部门默认角色"
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "AssignRolesRequest": {
          "type": "object",
          "required": [
            "role_ids"
          ],
          "properties": {
            "role_ids": {
              "type": "array",
              "description": "角色ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                10,
                11,
                12
              ]
            },
            "valid_from": {
              "type": "string",
              "format": "date-time",
              "description": "生效时间",
              "example": "2024-08-14T15:00:00Z"
            },
            "valid_to": {
              "type": "string",
              "format": "date-time",
              "description": "失效时间",
              "example": "2025-08-14T15:00:00Z"
            }
          }
        },
        "RoleAssignResult": {
          "type": "object",
          "properties": {
            "assigned_roles": {
              "type": "integer",
              "description": "已分配角色数",
              "example": 3
            },
            "total_roles": {
              "type": "integer",
              "description": "用户总角色数",
              "example": 5
            }
          }
        },
        "UserPermissionsResponse": {
          "type": "object",
          "properties": {
            "user_info": {
              "$ref": "#/components/schemas/UserInfo"
            },
            "role_permissions": {
              "type": "array",
              "description": "角色权限",
              "items": {
                "type": "object",
                "properties": {
                  "role_name": {
                    "type": "string",
                    "example": "系统管理员"
                  },
                  "permissions": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/PermissionInfo"
                    }
                  }
                }
              }
            },
            "direct_permissions": {
              "type": "array",
              "description": "直接权限",
              "items": {
                "$ref": "#/components/schemas/PermissionInfo"
              }
            },
            "effective_permissions": {
              "type": "array",
              "description": "有效权限列表",
              "items": {
                "type": "string"
              },
              "example": [
                "user:read",
                "user:write",
                "role:read",
                "system:config"
              ]
            }
          }
        },
        "RoleInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "format": "int64",
                  "description": "租户ID",
                  "example": 1
                },
                "role_code": {
                  "type": "string",
                  "description": "角色编码",
                  "example": "senior_engineer"
                },
                "role_name": {
                  "type": "string",
                  "description": "角色名称",
                  "example": "高级工程师"
                },
                "role_type": {
                  "type": "integer",
                  "enum": [
                    1,
                    2,
                    3
                  ],
                  "description": "角色类型：1-系统角色，2-业务角色，3-临时角色",
                  "example": 2
                },
                "parent_id": {
                  "type": "integer",
                  "format": "int64",
                  "nullable": true,
                  "description": "父角色ID",
                  "example": null
                },
                "description": {
                  "type": "string",
                  "description": "角色描述",
                  "example": "具有高级运维权限的工程师角色"
                },
                "is_default": {
                  "type": "boolean",
                  "description": "是否默认角色",
                  "example": false
                },
                "is_system": {
                  "type": "boolean",
                  "description": "是否系统内置角色",
                  "example": false
                },
                "data_scope": {
                  "type": "integer",
                  "enum": [
                    1,
                    2,
                    3
                  ],
                  "description": "数据范围：1-全部，2-部门，3-个人",
                  "example": 2
                },
                "status": {
                  "type": "integer",
                  "enum": [
                    1,
                    2
                  ],
                  "description": "状态：1-启用，2-禁用",
                  "example": 1
                },
                "user_count": {
                  "type": "integer",
                  "description": "用户数量",
                  "example": 15
                }
              }
            }
          ]
        },
        "RoleDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/RoleInfo"
            },
            {
              "type": "object",
              "properties": {
                "permissions": {
                  "type": "array",
                  "description": "角色权限列表",
                  "items": {
                    "$ref": "#/components/schemas/PermissionInfo"
                  }
                },
                "parent_role": {
                  "$ref": "#/components/schemas/RoleInfo",
                  "nullable": true,
                  "description": "父角色信息"
                },
                "child_roles": {
                  "type": "array",
                  "description": "子角色列表",
                  "items": {
                    "$ref": "#/components/schemas/RoleInfo"
                  }
                }
              }
            }
          ]
        },
        "CreateRoleRequest": {
          "type": "object",
          "required": [
            "role_code",
            "role_name"
          ],
          "properties": {
            "role_code": {
              "type": "string",
              "description": "角色编码",
              "example": "project_manager"
            },
            "role_name": {
              "type": "string",
              "description": "角色名称",
              "example": "项目经理"
            },
            "role_type": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "角色类型：1-系统角色，2-业务角色，3-临时角色",
              "example": 2
            },
            "parent_id": {
              "type": "integer",
              "format": "int64",
              "nullable": true,
              "description": "父角色ID",
              "example": null
            },
            "description": {
              "type": "string",
              "description": "角色描述",
              "example": "负责项目管理和团队协调"
            },
            "data_scope": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "数据范围：1-全部，2-部门，3-个人",
              "example": 2
            },
            "permission_ids": {
              "type": "array",
              "description": "初始权限ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                1,
                2,
                5,
                8
              ]
            },
            "valid_from": {
              "type": "string",
              "format": "date-time",
              "description": "生效时间",
              "example": "2024-08-14T15:00:00Z"
            },
            "valid_to": {
              "type": "string",
              "format": "date-time",
              "description": "失效时间",
              "example": "2025-08-14T15:00:00Z"
            }
          }
        },
        "UpdateRoleRequest": {
          "type": "object",
          "properties": {
            "role_name": {
              "type": "string",
              "description": "角色名称",
              "example": "高级项目经理"
            },
            "description": {
              "type": "string",
              "description": "角色描述",
              "example": "负责多个项目的管理和协调"
            },
            "data_scope": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "数据范围",
              "example": 1
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2
              ],
              "description": "角色状态",
              "example": 1
            }
          }
        },
        "RolePermissionsResponse": {
          "type": "object",
          "properties": {
            "role_info": {
              "$ref": "#/components/schemas/RoleInfo"
            },
            "direct_permissions": {
              "type": "array",
              "description": "直接分配的权限",
              "items": {
                "$ref": "#/components/schemas/PermissionInfo"
              }
            },
            "inherited_permissions": {
              "type": "array",
              "description": "继承的权限",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/PermissionInfo"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "inherited_from": {
                        "type": "string",
                        "description": "继承来源角色",
                        "example": "基础用户角色"
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "AssignPermissionsRequest": {
          "type": "object",
          "required": [
            "permission_ids",
            "action"
          ],
          "properties": {
            "permission_ids": {
              "type": "array",
              "description": "权限ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                10,
                11,
                12
              ]
            },
            "action": {
              "type": "string",
              "enum": [
                "grant",
                "revoke"
              ],
              "description": "操作类型：grant-授权，revoke-撤销",
              "example": "grant"
            }
          }
        },
        "PermissionAssignResult": {
          "type": "object",
          "properties": {
            "granted_permissions": {
              "type": "integer",
              "description": "已授权权限数",
              "example": 3
            },
            "revoked_permissions": {
              "type": "integer",
              "description": "已撤销权限数",
              "example": 0
            },
            "total_permissions": {
              "type": "integer",
              "description": "角色总权限数",
              "example": 15
            }
          }
        },
        "PermissionInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "权限ID",
              "example": 1
            },
            "permission_code": {
              "type": "string",
              "description": "权限编码",
              "example": "user:read"
            },
            "permission_name": {
              "type": "string",
              "description": "权限名称",
              "example": "查看用户"
            },
            "resource_type": {
              "type": "string",
              "enum": [
                "api",
                "menu",
                "button",
                "data"
              ],
              "description": "资源类型",
              "example": "api"
            },
            "resource_path": {
              "type": "string",
              "description": "资源路径",
              "example": "/api/v1/users"
            },
            "action": {
              "type": "string",
              "enum": [
                "read",
                "write",
                "delete",
                "execute"
              ],
              "description": "操作动作",
              "example": "read"
            },
            "description": {
              "type": "string",
              "description": "权限描述",
              "example": "允许查看用户列表和详情"
            },
            "is_system": {
              "type": "boolean",
              "description": "是否系统权限",
              "example": true
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-01T09:00:00Z"
            }
          }
        },
        "CreatePermissionRequest": {
          "type": "object",
          "required": [
            "permission_code",
            "permission_name",
            "resource_type",
            "action"
          ],
          "properties": {
            "permission_code": {
              "type": "string",
              "description": "权限编码",
              "example": "ticket:assign"
            },
            "permission_name": {
              "type": "string",
              "description": "权限名称",
              "example": "分配工单"
            },
            "resource_type": {
              "type": "string",
              "enum": [
                "api",
                "menu",
                "button",
                "data"
              ],
              "description": "资源类型",
              "example": "api"
            },
            "resource_path": {
              "type": "string",
              "description": "资源路径",
              "example": "/api/v1/tickets/assign"
            },
            "action": {
              "type": "string",
              "enum": [
                "read",
                "write",
                "delete",
                "execute"
              ],
              "description": "操作动作",
              "example": "write"
            },
            "description": {
              "type": "string",
              "description": "权限描述",
              "example": "允许分配工单给工程师"
            }
          }
        },
        "DepartmentInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "format": "int64",
                  "description": "租户ID",
                  "example": 1
                },
                "dept_code": {
                  "type": "string",
                  "description": "部门编码",
                  "example": "IT-OPS"
                },
                "dept_name": {
                  "type": "string",
                  "description": "部门名称",
                  "example": "运维部"
                },
                "parent_id": {
                  "type": "integer",
                  "format": "int64",
                  "nullable": true,
                  "description": "父部门ID",
                  "example": 1000
                },
                "dept_level": {
                  "type": "integer",
                  "description": "部门层级",
                  "example": 2
                },
                "dept_path": {
                  "type": "string",
                  "description": "部门路径",
                  "example": "/公司/技术部/运维部"
                },
                "manager_id": {
                  "type": "integer",
                  "format": "int64",
                  "nullable": true,
                  "description": "部门经理ID",
                  "example": 1001
                },
                "manager_name": {
                  "type": "string",
                  "description": "部门经理姓名",
                  "example": "张三"
                },
                "description": {
                  "type": "string",
                  "description": "部门描述",
                  "example": "负责系统运维和技术支持"
                },
                "sort_order": {
                  "type": "integer",
                  "description": "排序",
                  "example": 1
                },
                "status": {
                  "type": "integer",
                  "enum": [
                    1,
                    2
                  ],
                  "description": "状态：1-正常，2-禁用",
                  "example": 1
                },
                "user_count": {
                  "type": "integer",
                  "description": "用户数量",
                  "example": 25
                },
                "children": {
                  "type": "array",
                  "description": "子部门列表（树形结构时返回）",
                  "items": {
                    "$ref": "#/components/schemas/DepartmentInfo"
                  }
                }
              }
            }
          ]
        },
        "DepartmentDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/DepartmentInfo"
            },
            {
              "type": "object",
              "properties": {
                "parent_department": {
                  "$ref": "#/components/schemas/DepartmentInfo",
                  "nullable": true,
                  "description": "父部门信息"
                },
                "users": {
                  "type": "array",
                  "description": "部门用户列表",
                  "items": {
                    "$ref": "#/components/schemas/UserInfo"
                  }
                }
              }
            }
          ]
        },
        "CreateDepartmentRequest": {
          "type": "object",
          "required": [
            "dept_code",
            "dept_name"
          ],
          "properties": {
            "dept_code": {
              "type": "string",
              "description": "部门编码",
              "example": "IT-DEV"
            },
            "dept_name": {
              "type": "string",
              "description": "部门名称",
              "example": "开发部"
            },
            "parent_id": {
              "type": "integer",
              "format": "int64",
              "nullable": true,
              "description": "父部门ID",
              "example": 1000
            },
            "manager_id": {
              "type": "integer",
              "format": "int64",
              "nullable": true,
              "description": "部门经理ID",
              "example": 1002
            },
            "description": {
              "type": "string",
              "description": "部门描述",
              "example": "负责软件开发和维护"
            },
            "sort_order": {
              "type": "integer",
              "description": "排序",
              "example": 2
            }
          }
        },
        "UpdateDepartmentRequest": {
          "type": "object",
          "properties": {
            "dept_name": {
              "type": "string",
              "description": "部门名称",
              "example": "软件开发部"
            },
            "manager_id": {
              "type": "integer",
              "format": "int64",
              "nullable": true,
              "description": "部门经理ID",
              "example": 1003
            },
            "description": {
              "type": "string",
              "description": "部门描述",
              "example": "负责软件产品的开发和技术创新"
            },
            "sort_order": {
              "type": "integer",
              "description": "排序",
              "example": 1
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2
              ],
              "description": "部门状态",
              "example": 1
            }
          }
        },
        "SessionInfo": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string",
              "description": "会话ID",
              "example": "sess_1234567890abcdef"
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 1001
            },
            "username": {
              "type": "string",
              "description": "用户名",
              "example": "zhangsan"
            },
            "real_name": {
              "type": "string",
              "description": "真实姓名",
              "example": "张三"
            },
            "device_type": {
              "type": "string",
              "enum": [
                "web",
                "mobile",
                "api"
              ],
              "description": "设备类型",
              "example": "web"
            },
            "device_info": {
              "type": "string",
              "description": "设备信息",
              "example": "Chrome 120.0 on Windows 11"
            },
            "ip_address": {
              "type": "string",
              "description": "IP地址",
              "example": "192.168.1.100"
            },
            "location": {
              "type": "string",
              "description": "登录地点",
              "example": "北京市"
            },
            "user_agent": {
              "type": "string",
              "description": "用户代理",
              "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
            },
            "login_time": {
              "type": "string",
              "format": "date-time",
              "description": "登录时间",
              "example": "2024-08-14T10:00:00Z"
            },
            "last_activity": {
              "type": "string",
              "format": "date-time",
              "description": "最后活动时间",
              "example": "2024-08-14T14:30:00Z"
            },
            "expires_at": {
              "type": "string",
              "format": "date-time",
              "description": "过期时间",
              "example": "2024-08-14T18:00:00Z"
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "状态：1-活跃，2-过期，3-强制下线",
              "example": 1
            }
          }
        },
        "BatchLogoutRequest": {
          "type": "object",
          "required": [
            "session_ids"
          ],
          "properties": {
            "session_ids": {
              "type": "array",
              "description": "会话ID列表",
              "items": {
                "type": "string"
              },
              "example": [
                "sess_1234567890abcdef",
                "sess_fedcba0987654321"
              ]
            },
            "reason": {
              "type": "string",
              "description": "下线原因",
              "example": "管理员批量下线"
            }
          }
        },
        "BatchLogoutResult": {
          "type": "object",
          "properties": {
            "total": {
              "type": "integer",
              "description": "总数",
              "example": 2
            },
            "success": {
              "type": "integer",
              "description": "成功数",
              "example": 2
            },
            "failed": {
              "type": "integer",
              "description": "失败数",
              "example": 0
            },
            "failed_items": {
              "type": "array",
              "description": "失败项详情",
              "items": {
                "type": "object",
                "properties": {
                  "session_id": {
                    "type": "string",
                    "example": "sess_invalid"
                  },
                  "error": {
                    "type": "string",
                    "example": "会话不存在"
                  }
                }
              }
            }
          }
        },
        "AuditLogInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "日志ID",
              "example": 12345
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "user_id": {
              "type": "integer",
              "format": "int64",
              "nullable": true,
              "description": "操作用户ID",
              "example": 1001
            },
            "username": {
              "type": "string",
              "description": "用户名",
              "example": "zhangsan"
            },
            "real_name": {
              "type": "string",
              "description": "真实姓名",
              "example": "张三"
            },
            "session_id": {
              "type": "string",
              "nullable": true,
              "description": "会话ID",
              "example": "sess_1234567890abcdef"
            },
            "action_type": {
              "type": "string",
              "description": "操作类型",
              "example": "user_create"
            },
            "resource_type": {
              "type": "string",
              "description": "资源类型",
              "example": "user"
            },
            "resource_id": {
              "type": "string",
              "description": "资源ID",
              "example": "1002"
            },
            "action_detail": {
              "type": "string",
              "description": "操作详情",
              "example": "创建用户：李四"
            },
            "ip_address": {
              "type": "string",
              "description": "IP地址",
              "example": "192.168.1.100"
            },
            "user_agent": {
              "type": "string",
              "description": "用户代理",
              "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)"
            },
            "request_data": {
              "type": "object",
              "description": "请求数据",
              "example": {
                "username": "lisi",
                "real_name": "李四"
              }
            },
            "response_data": {
              "type": "object",
              "description": "响应数据",
              "example": {
                "user_id": 1002,
                "status": "success"
              }
            },
            "result": {
              "type": "integer",
              "enum": [
                1,
                2
              ],
              "description": "结果：1-成功，2-失败",
              "example": 1
            },
            "error_message": {
              "type": "string",
              "nullable": true,
              "description": "错误信息",
              "example": null
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-14T15:00:00Z"
            }
          }
        },
        "ExportAuditLogRequest": {
          "type": "object",
          "properties": {
            "start_time": {
              "type": "string",
              "format": "date-time",
              "description": "开始时间",
              "example": "2024-08-01T00:00:00Z"
            },
            "end_time": {
              "type": "string",
              "format": "date-time",
              "description": "结束时间",
              "example": "2024-08-31T23:59:59Z"
            },
            "action_type": {
              "type": "string",
              "description": "操作类型筛选",
              "example": "user_create"
            },
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID筛选",
              "example": 1001
            },
            "resource_type": {
              "type": "string",
              "description": "资源类型筛选",
              "example": "user"
            },
            "result": {
              "type": "integer",
              "enum": [
                1,
                2
              ],
              "description": "操作结果筛选",
              "example": 1
            },
            "format": {
              "type": "string",
              "enum": [
                "excel",
                "csv"
              ],
              "description": "导出格式",
              "example": "excel"
            }
          }
        },
        "ExportResult": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string",
              "description": "导出任务ID",
              "example": "export_task_20240814_001"
            },
            "file_url": {
              "type": "string",
              "format": "uri",
              "description": "文件下载URL",
              "example": "https://cdn.example.com/exports/audit_logs_20240814.xlsx"
            },
            "file_size": {
              "type": "integer",
              "description": "文件大小（字节）",
              "example": 1048576
            },
            "record_count": {
              "type": "integer",
              "description": "记录数量",
              "example": 5000
            },
            "expires_at": {
              "type": "string",
              "format": "date-time",
              "description": "文件过期时间",
              "example": "2024-08-21T15:00:00Z"
            }
          }
        },
        "PermissionCheckRequest": {
          "type": "object",
          "required": [
            "resource_type",
            "resource_path",
            "action"
          ],
          "properties": {
            "resource_type": {
              "type": "string",
              "enum": [
                "api",
                "menu",
                "button",
                "data"
              ],
              "description": "资源类型",
              "example": "api"
            },
            "resource_path": {
              "type": "string",
              "description": "资源路径",
              "example": "/api/v1/users"
            },
            "action": {
              "type": "string",
              "enum": [
                "read",
                "write",
                "delete",
                "execute"
              ],
              "description": "操作动作",
              "example": "read"
            },
            "context": {
              "type": "object",
              "description": "上下文信息",
              "properties": {
                "department_id": {
                  "type": "integer",
                  "format": "int64",
                  "example": 1001
                },
                "data_scope": {
                  "type": "string",
                  "example": "department"
                }
              }
            }
          }
        },
        "PermissionCheckResponse": {
          "type": "object",
          "properties": {
            "granted": {
              "type": "boolean",
              "description": "是否授权",
              "example": true
            },
            "permission_code": {
              "type": "string",
              "description": "权限编码",
              "example": "user:read"
            },
            "granted_by_roles": {
              "type": "array",
              "description": "授权角色列表",
              "items": {
                "type": "string"
              },
              "example": [
                "admin",
                "user_manager"
              ]
            },
            "data_scope": {
              "type": "string",
              "description": "数据范围",
              "example": "department"
            },
            "conditions": {
              "type": "object",
              "description": "权限条件",
              "properties": {
                "department_id": {
                  "type": "array",
                  "items": {
                    "type": "integer",
                    "format": "int64"
                  },
                  "example": [
                    1001,
                    1002
                  ]
                }
              }
            }
          }
        },
        "BatchPermissionCheckRequest": {
          "type": "object",
          "required": [
            "checks"
          ],
          "properties": {
            "checks": {
              "type": "array",
              "description": "权限检查列表",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/PermissionCheckRequest"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "check_id": {
                        "type": "string",
                        "description": "检查ID",
                        "example": "check_1"
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "BatchPermissionCheckResponse": {
          "type": "object",
          "properties": {
            "results": {
              "type": "array",
              "description": "检查结果列表",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/PermissionCheckResponse"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "check_id": {
                        "type": "string",
                        "description": "检查ID",
                        "example": "check_1"
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "MfaVerifyRequest": {
          "type": "object",
          "required": [
            "mfa_type",
            "mfa_code"
          ],
          "properties": {
            "mfa_type": {
              "type": "string",
              "enum": [
                "totp",
                "sms",
                "email"
              ],
              "description": "MFA类型",
              "example": "totp"
            },
            "mfa_code": {
              "type": "string",
              "description": "MFA验证码",
              "example": "123456"
            }
          }
        },
        "MfaVerifyResponse": {
          "type": "object",
          "properties": {
            "verified": {
              "type": "boolean",
              "description": "是否验证成功",
              "example": true
            },
            "remaining_attempts": {
              "type": "integer",
              "description": "剩余尝试次数",
              "example": 2
            }
          }
        },
        "ExternalIdentitySourceInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "format": "int64",
                  "description": "租户ID",
                  "example": 1
                },
                "source_name": {
                  "type": "string",
                  "description": "身份源名称",
                  "example": "公司LDAP"
                },
                "source_type": {
                  "type": "string",
                  "enum": [
                    "ldap",
                    "ad",
                    "oauth2",
                    "oidc",
                    "saml"
                  ],
                  "description": "身份源类型",
                  "example": "ldap"
                },
                "config": {
                  "type": "object",
                  "description": "配置信息",
                  "properties": {
                    "server_url": {
                      "type": "string",
                      "example": "ldap://ldap.company.com:389"
                    },
                    "base_dn": {
                      "type": "string",
                      "example": "dc=company,dc=com"
                    },
                    "bind_dn": {
                      "type": "string",
                      "example": "cn=admin,dc=company,dc=com"
                    }
                  }
                },
                "mapping_rules": {
                  "type": "object",
                  "description": "字段映射规则",
                  "properties": {
                    "username": {
                      "type": "string",
                      "example": "uid"
                    },
                    "email": {
                      "type": "string",
                      "example": "mail"
                    },
                    "real_name": {
                      "type": "string",
                      "example": "cn"
                    }
                  }
                },
                "is_enabled": {
                  "type": "boolean",
                  "description": "是否启用",
                  "example": true
                },
                "priority": {
                  "type": "integer",
                  "description": "优先级",
                  "example": 1
                },
                "user_count": {
                  "type": "integer",
                  "description": "关联用户数",
                  "example": 150
                }
              }
            }
          ]
        },
        "CreateExternalIdentitySourceRequest": {
          "type": "object",
          "required": [
            "source_name",
            "source_type",
            "config"
          ],
          "properties": {
            "source_name": {
              "type": "string",
              "description": "身份源名称",
              "example": "企业AD"
            },
            "source_type": {
              "type": "string",
              "enum": [
                "ldap",
                "ad",
                "oauth2",
                "oidc",
                "saml"
              ],
              "description": "身份源类型",
              "example": "ad"
            },
            "config": {
              "type": "object",
              "description": "配置信息",
              "properties": {
                "server_url": {
                  "type": "string",
                  "example": "ldap://ad.company.com:389"
                },
                "base_dn": {
                  "type": "string",
                  "example": "dc=company,dc=local"
                },
                "bind_dn": {
                  "type": "string",
                  "example": "cn=service,cn=users,dc=company,dc=local"
                },
                "bind_password": {
                  "type": "string",
                  "example": "service_password"
                }
              }
            },
            "mapping_rules": {
              "type": "object",
              "description": "字段映射规则",
              "properties": {
                "username": {
                  "type": "string",
                  "example": "sAMAccountName"
                },
                "email": {
                  "type": "string",
                  "example": "userPrincipalName"
                },
                "real_name": {
                  "type": "string",
                  "example": "displayName"
                }
              }
            },
            "priority": {
              "type": "integer",
              "description": "优先级",
              "example": 2
            }
          }
        },
        "PermissionTemplateInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "format": "int64",
                  "description": "租户ID",
                  "example": 1
                },
                "template_name": {
                  "type": "string",
                  "description": "模板名称",
                  "example": "运维工程师权限模板"
                },
                "template_code": {
                  "type": "string",
                  "description": "模板编码",
                  "example": "ops_engineer_template"
                },
                "description": {
                  "type": "string",
                  "description": "模板描述",
                  "example": "包含运维工程师常用权限的模板"
                },
                "permission_ids": {
                  "type": "array",
                  "description": "权限ID列表",
                  "items": {
                    "type": "integer",
                    "format": "int64"
                  },
                  "example": [
                    1,
                    2,
                    5,
                    8,
                    10
                  ]
                },
                "permissions": {
                  "type": "array",
                  "description": "权限详情列表",
                  "items": {
                    "$ref": "#/components/schemas/PermissionInfo"
                  }
                },
                "is_system": {
                  "type": "boolean",
                  "description": "是否系统模板",
                  "example": false
                },
                "usage_count": {
                  "type": "integer",
                  "description": "使用次数",
                  "example": 15
                },
                "created_by": {
                  "type": "integer",
                  "format": "int64",
                  "description": "创建人ID",
                  "example": 1001
                },
                "created_by_name": {
                  "type": "string",
                  "description": "创建人姓名",
                  "example": "张三"
                }
              }
            }
          ]
        },
        "CreatePermissionTemplateRequest": {
          "type": "object",
          "required": [
            "template_name",
            "template_code",
            "permission_ids"
          ],
          "properties": {
            "template_name": {
              "type": "string",
              "description": "模板名称",
              "example": "项目经理权限模板"
            },
            "template_code": {
              "type": "string",
              "description": "模板编码",
              "example": "project_manager_template"
            },
            "description": {
              "type": "string",
              "description": "模板描述",
              "example": "包含项目管理相关权限的模板"
            },
            "permission_ids": {
              "type": "array",
              "description": "权限ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                1,
                3,
                5,
                7,
                9,
                11
              ]
            }
          }
        },
        "ApplyPermissionTemplateRequest": {
          "type": "object",
          "required": [
            "role_ids"
          ],
          "properties": {
            "role_ids": {
              "type": "array",
              "description": "目标角色ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                10,
                11
              ]
            },
            "replace_existing": {
              "type": "boolean",
              "description": "是否替换现有权限",
              "example": false
            }
          }
        },
        "ApplyTemplateResult": {
          "type": "object",
          "properties": {
            "applied_roles": {
              "type": "integer",
              "description": "已应用角色数",
              "example": 2
            },
            "added_permissions": {
              "type": "integer",
              "description": "新增权限数",
              "example": 6
            },
            "total_permissions": {
              "type": "integer",
              "description": "总权限数",
              "example": 15
            },
            "details": {
              "type": "array",
              "description": "应用详情",
              "items": {
                "type": "object",
                "properties": {
                  "role_id": {
                    "type": "integer",
                    "format": "int64",
                    "example": 10
                  },
                  "role_name": {
                    "type": "string",
                    "example": "项目经理"
                  },
                  "added_permissions": {
                    "type": "integer",
                    "example": 3
                  }
                }
              }
            }
          }
        },
        "ApiResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "响应状态码",
              "example": 200
            },
            "message": {
              "type": "string",
              "description": "响应消息",
              "example": "操作成功"
            },
            "data": {
              "type": "object",
              "description": "响应数据"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "响应时间",
              "example": "2024-08-14T15:30:00Z"
            },
            "trace_id": {
              "type": "string",
              "description": "请求追踪ID",
              "example": "req_123456789"
            }
          }
        },
        "PagedResponse": {
          "allOf": [
            {
              "$ref": "#/components/schemas/ApiResponse"
            },
            {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "type": "integer",
                      "description": "总记录数",
                      "example": 100
                    },
                    "page": {
                      "type": "integer",
                      "description": "当前页码",
                      "example": 1
                    },
                    "size": {
                      "type": "integer",
                      "description": "每页大小",
                      "example": 20
                    },
                    "pages": {
                      "type": "integer",
                      "description": "总页数",
                      "example": 5
                    },
                    "items": {
                      "type": "array",
                      "description": "数据列表",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "ErrorResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "错误状态码",
              "example": 400
            },
            "message": {
              "type": "string",
              "description": "错误消息",
              "example": "请求参数错误"
            },
            "error": {
              "type": "string",
              "description": "错误详情",
              "example": "用户名不能为空"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "错误时间",
              "example": "2024-08-14T15:30:00Z"
            },
            "trace_id": {
              "type": "string",
              "description": "请求追踪ID",
              "example": "req_123456789"
            }
          }
        }
      },
      "issues": []
    },
    "REQ-023-数据分析与商业智能模块": {
      "file_path": "docs/api/4.5.1/modules/REQ-023-数据分析与商业智能模块/openapi.yaml",
      "components": {
        "TaskType": {
          "type": "string",
          "enum": [
            "operational_analysis",
            "predictive_analysis",
            "real_time_monitoring",
            "custom_report"
          ],
          "description": "任务类型",
          "example": "operational_analysis"
        },
        "TaskStatus": {
          "type": "string",
          "enum": [
            "pending",
            "running",
            "completed",
            "failed",
            "paused"
          ],
          "description": "任务状态",
          "example": "completed"
        },
        "ResultType": {
          "type": "string",
          "enum": [
            "chart",
            "table",
            "metric",
            "prediction",
            "dashboard",
            "report"
          ],
          "description": "结果类型",
          "example": "dashboard"
        },
        "ModelType": {
          "type": "string",
          "enum": [
            "regression",
            "classification",
            "clustering",
            "time_series",
            "anomaly_detection"
          ],
          "description": "模型类型",
          "example": "regression"
        },
        "ModelStatus": {
          "type": "string",
          "enum": [
            "training",
            "deployed",
            "offline",
            "failed"
          ],
          "description": "模型状态",
          "example": "deployed"
        },
        "DatasetType": {
          "type": "string",
          "enum": [
            "structured",
            "unstructured",
            "streaming"
          ],
          "description": "数据集类型",
          "example": "structured"
        },
        "AlertType": {
          "type": "string",
          "enum": [
            "threshold",
            "anomaly",
            "trend",
            "pattern"
          ],
          "description": "预警类型",
          "example": "threshold"
        },
        "InsightType": {
          "type": "string",
          "enum": [
            "trend",
            "anomaly",
            "correlation",
            "recommendation"
          ],
          "description": "洞察类型",
          "example": "trend"
        },
        "CreateAnalysisTaskRequest": {
          "type": "object",
          "required": [
            "task_name",
            "task_type",
            "analysis_config"
          ],
          "properties": {
            "task_name": {
              "type": "string",
              "description": "任务名称",
              "maxLength": 100,
              "example": "月度运营效率分析"
            },
            "task_type": {
              "$ref": "#/components/schemas/TaskType"
            },
            "analysis_config": {
              "type": "object",
              "description": "分析配置",
              "properties": {
                "metrics": {
                  "type": "array",
                  "description": "分析指标",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "ticket_volume",
                    "resolution_time",
                    "satisfaction_score"
                  ]
                },
                "dimensions": {
                  "type": "array",
                  "description": "分析维度",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "department",
                    "priority",
                    "category"
                  ]
                },
                "time_range": {
                  "type": "object",
                  "description": "时间范围",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": [
                        "absolute",
                        "relative"
                      ],
                      "example": "relative"
                    },
                    "value": {
                      "type": "string",
                      "example": "last_month"
                    }
                  }
                },
                "aggregation": {
                  "type": "object",
                  "description": "聚合配置",
                  "properties": {
                    "time_granularity": {
                      "type": "string",
                      "enum": [
                        "hour",
                        "day",
                        "week",
                        "month"
                      ],
                      "example": "day"
                    },
                    "statistical_methods": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "enum": [
                          "avg",
                          "sum",
                          "count",
                          "max",
                          "min"
                        ]
                      },
                      "example": [
                        "avg",
                        "sum",
                        "count"
                      ]
                    }
                  }
                }
              }
            },
            "data_source_config": {
              "type": "object",
              "description": "数据源配置",
              "properties": {
                "dataset_id": {
                  "type": "integer",
                  "description": "数据集ID",
                  "example": 123
                },
                "filters": {
                  "type": "object",
                  "description": "数据过滤条件",
                  "example": {
                    "status": [
                      "completed",
                      "closed"
                    ]
                  }
                }
              }
            },
            "schedule_config": {
              "type": "object",
              "description": "调度配置",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "description": "是否启用调度",
                  "example": true
                },
                "frequency": {
                  "type": "string",
                  "enum": [
                    "once",
                    "daily",
                    "weekly",
                    "monthly"
                  ],
                  "example": "monthly"
                },
                "cron_expression": {
                  "type": "string",
                  "description": "Cron表达式",
                  "example": "0 9 1 * *"
                }
              }
            },
            "model_id": {
              "type": "integer",
              "description": "关联模型ID",
              "example": 789
            },
            "priority": {
              "type": "integer",
              "description": "优先级(1-高，2-中，3-低)",
              "minimum": 1,
              "maximum": 3,
              "default": 2,
              "example": 1
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            }
          }
        },
        "UpdateAnalysisTaskRequest": {
          "type": "object",
          "properties": {
            "task_name": {
              "type": "string",
              "description": "任务名称",
              "maxLength": 100,
              "example": "月度运营效率分析(更新版)"
            },
            "analysis_config": {
              "type": "object",
              "description": "分析配置"
            },
            "data_source_config": {
              "type": "object",
              "description": "数据源配置"
            },
            "schedule_config": {
              "type": "object",
              "description": "调度配置"
            },
            "priority": {
              "type": "integer",
              "description": "优先级",
              "minimum": 1,
              "maximum": 3,
              "example": 2
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            }
          }
        },
        "AnalysisTaskInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "description": "租户ID",
                  "example": 1001
                },
                "task_name": {
                  "type": "string",
                  "description": "任务名称",
                  "example": "月度运营效率分析"
                },
                "task_type": {
                  "$ref": "#/components/schemas/TaskType"
                },
                "status": {
                  "$ref": "#/components/schemas/TaskStatus"
                },
                "priority": {
                  "type": "integer",
                  "description": "优先级",
                  "example": 1
                },
                "model_id": {
                  "type": "integer",
                  "description": "关联模型ID",
                  "example": 789
                },
                "created_by": {
                  "type": "integer",
                  "description": "创建人ID",
                  "example": 2001
                },
                "last_run_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "最后执行时间",
                  "example": "2024-08-01T09:00:00Z"
                },
                "next_run_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "下次执行时间",
                  "example": "2024-09-01T09:00:00Z"
                },
                "execution_count": {
                  "type": "integer",
                  "description": "执行次数",
                  "example": 5
                },
                "avg_execution_time": {
                  "type": "integer",
                  "description": "平均执行时间(秒)",
                  "example": 285
                }
              }
            }
          ]
        },
        "AnalysisTaskDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/AnalysisTaskInfo"
            },
            {
              "type": "object",
              "properties": {
                "analysis_config": {
                  "type": "object",
                  "description": "分析配置详情",
                  "example": {
                    "metrics": [
                      "ticket_volume",
                      "resolution_time"
                    ],
                    "dimensions": [
                      "department",
                      "priority"
                    ],
                    "time_range": {
                      "type": "relative",
                      "value": "last_month"
                    }
                  }
                },
                "data_source_config": {
                  "type": "object",
                  "description": "数据源配置详情",
                  "example": {
                    "dataset_id": 123,
                    "filters": {
                      "status": [
                        "completed",
                        "closed"
                      ]
                    }
                  }
                },
                "schedule_config": {
                  "type": "object",
                  "description": "调度配置详情",
                  "example": {
                    "enabled": true,
                    "frequency": "monthly",
                    "cron_expression": "0 9 1 * *"
                  }
                },
                "execution_history": {
                  "type": "array",
                  "description": "执行历史",
                  "items": {
                    "type": "object",
                    "properties": {
                      "execution_id": {
                        "type": "string",
                        "example": "exec_20240801_090000_001"
                      },
                      "start_time": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-08-01T09:00:00Z"
                      },
                      "end_time": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-08-01T09:04:45Z"
                      },
                      "status": {
                        "$ref": "#/components/schemas/TaskStatus"
                      },
                      "execution_time": {
                        "type": "integer",
                        "description": "执行时间(秒)",
                        "example": 285
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "TaskExecutionStatus": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "integer",
              "description": "任务ID",
              "example": 12345
            },
            "execution_id": {
              "type": "string",
              "description": "执行ID",
              "example": "exec_20240814_143000_001"
            },
            "status": {
              "$ref": "#/components/schemas/TaskStatus"
            },
            "progress": {
              "type": "number",
              "description": "执行进度(0-100)",
              "minimum": 0,
              "maximum": 100,
              "example": 75.5
            },
            "current_step": {
              "type": "string",
              "description": "当前执行步骤",
              "example": "数据聚合计算"
            },
            "start_time": {
              "type": "string",
              "format": "date-time",
              "description": "开始时间",
              "example": "2024-08-14T14:30:00Z"
            },
            "estimated_end_time": {
              "type": "string",
              "format": "date-time",
              "description": "预计结束时间",
              "example": "2024-08-14T14:35:00Z"
            },
            "data_processed": {
              "type": "integer",
              "description": "已处理数据量(行数)",
              "example": 125000
            },
            "total_data": {
              "type": "integer",
              "description": "总数据量(行数)",
              "example": 165000
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            }
          }
        },
        "TaskExecutionLog": {
          "type": "object",
          "properties": {
            "log_id": {
              "type": "string",
              "description": "日志ID",
              "example": "log_20240814_143001_001"
            },
            "task_id": {
              "type": "integer",
              "description": "任务ID",
              "example": 12345
            },
            "execution_id": {
              "type": "string",
              "description": "执行ID",
              "example": "exec_20240814_143000_001"
            },
            "level": {
              "type": "string",
              "enum": [
                "DEBUG",
                "INFO",
                "WARN",
                "ERROR"
              ],
              "description": "日志级别",
              "example": "INFO"
            },
            "message": {
              "type": "string",
              "description": "日志消息",
              "example": "开始执行数据查询，预计处理165000条记录"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "日志时间",
              "example": "2024-08-14T14:30:01Z"
            },
            "details": {
              "type": "object",
              "description": "详细信息",
              "example": {
                "query_time": 2.5,
                "record_count": 165000
              }
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            }
          }
        },
        "AnalysisResultInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "description": "结果ID",
              "example": 67890
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            },
            "task_id": {
              "type": "integer",
              "description": "任务ID",
              "example": 12345
            },
            "result_name": {
              "type": "string",
              "description": "结果名称",
              "example": "7月运营效率分析报告"
            },
            "result_type": {
              "$ref": "#/components/schemas/ResultType"
            },
            "confidence_score": {
              "type": "number",
              "description": "置信度评分(0-100)",
              "minimum": 0,
              "maximum": 100,
              "example": 95.6
            },
            "execution_time": {
              "type": "integer",
              "description": "执行时间(秒)",
              "example": 285
            },
            "data_period_start": {
              "type": "string",
              "format": "date-time",
              "description": "数据周期开始",
              "example": "2024-07-01T00:00:00Z"
            },
            "data_period_end": {
              "type": "string",
              "format": "date-time",
              "description": "数据周期结束",
              "example": "2024-07-31T23:59:59Z"
            },
            "data_volume": {
              "type": "integer",
              "description": "数据量(行数)",
              "example": 125000
            },
            "is_cached": {
              "type": "boolean",
              "description": "是否已缓存",
              "example": true
            },
            "cache_ttl": {
              "type": "integer",
              "description": "缓存过期时间(秒)",
              "example": 3600
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-01T09:04:45Z"
            }
          }
        },
        "AnalysisResultDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/AnalysisResultInfo"
            },
            {
              "type": "object",
              "properties": {
                "result_data": {
                  "type": "object",
                  "description": "结果数据详情",
                  "properties": {
                    "summary": {
                      "type": "object",
                      "description": "汇总信息",
                      "example": {
                        "total_tickets": 1250,
                        "avg_resolution_time": 4.2,
                        "satisfaction_score": 4.6,
                        "efficiency_trend": "improving"
                      }
                    },
                    "metrics": {
                      "type": "object",
                      "description": "指标数据",
                      "example": {
                        "ticket_volume": {
                          "current": 1250,
                          "previous": 1180,
                          "change_rate": 5.9
                        },
                        "resolution_time": {
                          "current": 4.2,
                          "previous": 4.5,
                          "change_rate": -6.7
                        }
                      }
                    },
                    "charts": {
                      "type": "array",
                      "description": "图表数据",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "ticket_trend"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "line",
                              "bar",
                              "pie",
                              "scatter",
                              "heatmap"
                            ],
                            "example": "line"
                          },
                          "title": {
                            "type": "string",
                            "example": "工单量趋势"
                          },
                          "data": {
                            "type": "object",
                            "description": "图表数据",
                            "example": {
                              "labels": [
                                "7月1日",
                                "7月8日",
                                "7月15日"
                              ],
                              "datasets": [
                                {
                                  "label": "工单数量",
                                  "data": [
                                    280,
                                    320,
                                    295
                                  ]
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "insights": {
                  "type": "array",
                  "description": "智能洞察",
                  "items": {
                    "$ref": "#/components/schemas/AnalysisInsightInfo"
                  }
                }
              }
            }
          ]
        },
        "CreateAnalysisModelRequest": {
          "type": "object",
          "required": [
            "model_name",
            "model_type",
            "model_algorithm",
            "model_config"
          ],
          "properties": {
            "model_name": {
              "type": "string",
              "description": "模型名称",
              "maxLength": 100,
              "example": "工单处理时间预测模型"
            },
            "model_type": {
              "$ref": "#/components/schemas/ModelType"
            },
            "model_algorithm": {
              "type": "string",
              "description": "算法类型",
              "enum": [
                "linear_regression",
                "random_forest",
                "lstm",
                "arima",
                "svm",
                "xgboost"
              ],
              "example": "random_forest"
            },
            "model_config": {
              "type": "object",
              "description": "模型配置",
              "properties": {
                "features": {
                  "type": "array",
                  "description": "特征字段",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "priority",
                    "category",
                    "customer_type",
                    "engineer_level"
                  ]
                },
                "target": {
                  "type": "string",
                  "description": "目标字段",
                  "example": "resolution_time"
                },
                "parameters": {
                  "type": "object",
                  "description": "算法参数",
                  "example": {
                    "n_estimators": 100,
                    "max_depth": 10,
                    "random_state": 42
                  }
                }
              }
            },
            "training_data_config": {
              "type": "object",
              "description": "训练数据配置",
              "properties": {
                "dataset_id": {
                  "type": "integer",
                  "description": "数据集ID",
                  "example": 2001
                },
                "train_ratio": {
                  "type": "number",
                  "description": "训练集比例",
                  "minimum": 0.1,
                  "maximum": 0.9,
                  "example": 0.8
                },
                "validation_ratio": {
                  "type": "number",
                  "description": "验证集比例",
                  "minimum": 0.1,
                  "maximum": 0.5,
                  "example": 0.2
                },
                "time_range": {
                  "type": "object",
                  "description": "训练数据时间范围",
                  "properties": {
                    "start": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-01T00:00:00Z"
                    },
                    "end": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-07-31T23:59:59Z"
                    }
                  }
                }
              }
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            }
          }
        },
        "AnalysisModelInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "description": "租户ID",
                  "example": 1001
                },
                "model_name": {
                  "type": "string",
                  "description": "模型名称",
                  "example": "工单处理时间预测模型"
                },
                "model_type": {
                  "$ref": "#/components/schemas/ModelType"
                },
                "model_algorithm": {
                  "type": "string",
                  "description": "算法类型",
                  "example": "random_forest"
                },
                "version": {
                  "type": "string",
                  "description": "版本号",
                  "example": "v1.2.0"
                },
                "status": {
                  "$ref": "#/components/schemas/ModelStatus"
                },
                "accuracy_score": {
                  "type": "number",
                  "description": "准确率评分(0-100)",
                  "minimum": 0,
                  "maximum": 100,
                  "example": 92.5
                },
                "training_time": {
                  "type": "integer",
                  "description": "训练时间(秒)",
                  "example": 1800
                },
                "model_size": {
                  "type": "integer",
                  "description": "模型文件大小(字节)",
                  "example": 52428800
                },
                "created_by": {
                  "type": "integer",
                  "description": "创建人ID",
                  "example": 2001
                },
                "deployed_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "部署时间",
                  "example": "2024-08-01T10:30:00Z"
                }
              }
            }
          ]
        },
        "AnalysisInsightInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "description": "洞察ID",
              "example": 1
            },
            "insight_type": {
              "$ref": "#/components/schemas/InsightType"
            },
            "insight_title": {
              "type": "string",
              "description": "洞察标题",
              "example": "工单量持续增长"
            },
            "insight_content": {
              "type": "string",
              "description": "洞察内容",
              "example": "7月工单量较6月增长5.9%，主要集中在网络故障类别，建议加强网络设备预防性维护"
            },
            "confidence_score": {
              "type": "number",
              "description": "置信度评分(0-100)",
              "minimum": 0,
              "maximum": 100,
              "example": 92.5
            },
            "business_impact": {
              "type": "string",
              "enum": [
                "high",
                "medium",
                "low"
              ],
              "description": "业务影响程度",
              "example": "medium"
            },
            "action_recommendation": {
              "type": "string",
              "description": "行动建议",
              "example": "制定网络设备预防性维护计划，减少故障发生率"
            },
            "status": {
              "type": "integer",
              "description": "状态(1-新生成，2-已确认，3-已应用，4-已忽略)",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 1
            },
            "feedback_score": {
              "type": "integer",
              "description": "用户反馈评分(1-5)",
              "minimum": 1,
              "maximum": 5,
              "example": 4
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-01T09:04:45Z"
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            }
          }
        },
        "CreateAnalysisDatasetRequest": {
          "type": "object",
          "required": [
            "dataset_name",
            "dataset_type",
            "data_source_type",
            "connection_config"
          ],
          "properties": {
            "dataset_name": {
              "type": "string",
              "description": "数据集名称",
              "maxLength": 100,
              "example": "工单处理历史数据"
            },
            "dataset_type": {
              "$ref": "#/components/schemas/DatasetType"
            },
            "data_source_type": {
              "type": "string",
              "enum": [
                "database",
                "file",
                "api",
                "stream"
              ],
              "description": "数据源类型",
              "example": "database"
            },
            "connection_config": {
              "type": "object",
              "description": "连接配置",
              "properties": {
                "host": {
                  "type": "string",
                  "description": "主机地址",
                  "example": "db.example.com"
                },
                "port": {
                  "type": "integer",
                  "description": "端口号",
                  "example": 5432
                },
                "database": {
                  "type": "string",
                  "description": "数据库名",
                  "example": "ops_portal"
                },
                "username": {
                  "type": "string",
                  "description": "用户名",
                  "example": "analytics_user"
                },
                "password": {
                  "type": "string",
                  "description": "密码",
                  "example": "********"
                },
                "ssl_enabled": {
                  "type": "boolean",
                  "description": "是否启用SSL",
                  "example": true
                }
              }
            },
            "schema_config": {
              "type": "object",
              "description": "数据模式配置",
              "properties": {
                "table_name": {
                  "type": "string",
                  "description": "表名",
                  "example": "tickets"
                },
                "fields": {
                  "type": "array",
                  "description": "字段定义",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string",
                        "example": "ticket_id"
                      },
                      "type": {
                        "type": "string",
                        "enum": [
                          "string",
                          "integer",
                          "number",
                          "boolean",
                          "date",
                          "datetime"
                        ],
                        "example": "integer"
                      },
                      "description": {
                        "type": "string",
                        "example": "工单ID"
                      }
                    }
                  }
                }
              }
            },
            "sync_config": {
              "type": "object",
              "description": "同步配置",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "description": "是否启用自动同步",
                  "example": true
                },
                "frequency": {
                  "type": "string",
                  "enum": [
                    "realtime",
                    "hourly",
                    "daily",
                    "weekly"
                  ],
                  "description": "同步频率",
                  "example": "hourly"
                },
                "incremental": {
                  "type": "boolean",
                  "description": "是否增量同步",
                  "example": true
                }
              }
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            }
          }
        },
        "AnalysisDatasetInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "description": "租户ID",
                  "example": 1001
                },
                "dataset_name": {
                  "type": "string",
                  "description": "数据集名称",
                  "example": "工单处理历史数据"
                },
                "dataset_type": {
                  "$ref": "#/components/schemas/DatasetType"
                },
                "data_source_type": {
                  "type": "string",
                  "description": "数据源类型",
                  "example": "database"
                },
                "status": {
                  "type": "integer",
                  "description": "状态(1-正常，2-同步中，3-异常，4-已停用)",
                  "enum": [
                    1,
                    2,
                    3,
                    4
                  ],
                  "example": 1
                },
                "last_sync_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "最后同步时间",
                  "example": "2024-08-14T14:00:00Z"
                },
                "next_sync_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "下次同步时间",
                  "example": "2024-08-14T15:00:00Z"
                },
                "record_count": {
                  "type": "integer",
                  "description": "记录数量",
                  "example": 125000
                },
                "data_size": {
                  "type": "integer",
                  "description": "数据大小(字节)",
                  "example": 52428800
                },
                "quality_score": {
                  "type": "number",
                  "description": "数据质量评分(0-100)",
                  "minimum": 0,
                  "maximum": 100,
                  "example": 98.5
                },
                "created_by": {
                  "type": "integer",
                  "description": "创建人ID",
                  "example": 2001
                }
              }
            }
          ]
        }
      },
      "issues": []
    },
    "REQ-011-通知与消息系统": {
      "file_path": "docs/api/4.5.1/modules/REQ-011-通知与消息系统/openapi.yaml",
      "components": {
        "SendNotificationRequest": {
          "type": "object",
          "required": [
            "recipients",
            "event_type",
            "notification_type",
            "title",
            "content"
          ],
          "properties": {
            "recipients": {
              "type": "array",
              "description": "接收者列表",
              "items": {
                "$ref": "#/components/schemas/NotificationRecipient"
              },
              "example": [
                {
                  "user_id": 1001,
                  "channels": [
                    "in_app",
                    "email"
                  ]
                }
              ]
            },
            "event_type": {
              "type": "string",
              "description": "事件类型",
              "example": "ticket_status_change"
            },
            "notification_type": {
              "type": "string",
              "description": "通知类型",
              "example": "ticket_notification"
            },
            "title": {
              "type": "string",
              "description": "消息标题",
              "maxLength": 255,
              "example": "工单状态变更通知"
            },
            "content": {
              "type": "string",
              "description": "消息内容",
              "example": "您的工单 #TCK-20250814-0001 状态已变更为已完成"
            },
            "content_format": {
              "type": "string",
              "description": "内容格式",
              "enum": [
                "text",
                "html",
                "markdown"
              ],
              "default": "text",
              "example": "text"
            },
            "priority": {
              "type": "string",
              "description": "优先级",
              "enum": [
                "urgent",
                "high",
                "normal",
                "low"
              ],
              "default": "normal",
              "example": "normal"
            },
            "template_id": {
              "type": "integer",
              "description": "使用的模板ID",
              "example": 456
            },
            "template_variables": {
              "type": "object",
              "description": "模板变量值",
              "example": {
                "ticket_id": "TCK-20250814-0001",
                "status": "已完成",
                "customer_name": "张三"
              }
            },
            "scheduled_time": {
              "type": "string",
              "format": "date-time",
              "description": "计划发送时间（为空则立即发送）",
              "example": "2025-08-15T14:30:00Z"
            },
            "expire_time": {
              "type": "string",
              "format": "date-time",
              "description": "过期时间",
              "example": "2025-08-16T14:30:00Z"
            },
            "metadata": {
              "type": "object",
              "description": "扩展元数据",
              "example": {
                "source_module": "ticket",
                "source_id": "12345"
              }
            }
          }
        },
        "NotificationRecipient": {
          "type": "object",
          "required": [
            "user_id"
          ],
          "properties": {
            "user_id": {
              "type": "integer",
              "description": "接收用户ID",
              "example": 1001
            },
            "channels": {
              "type": "array",
              "description": "指定发送渠道（为空则使用用户偏好设置）",
              "items": {
                "type": "string",
                "enum": [
                  "in_app",
                  "email",
                  "sms",
                  "wechat",
                  "dingtalk",
                  "webhook",
                  "push"
                ]
              },
              "example": [
                "in_app",
                "email"
              ]
            }
          }
        },
        "SendNotificationResponse": {
          "type": "object",
          "properties": {
            "notification_id": {
              "type": "integer",
              "description": "消息ID",
              "example": 789
            },
            "status": {
              "type": "string",
              "description": "消息状态",
              "enum": [
                "pending",
                "processing",
                "sent",
                "failed",
                "cancelled"
              ],
              "example": "pending"
            },
            "estimated_send_time": {
              "type": "string",
              "format": "date-time",
              "description": "预计发送时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "recipients": {
              "type": "array",
              "description": "接收者处理结果",
              "items": {
                "type": "object",
                "properties": {
                  "user_id": {
                    "type": "integer",
                    "example": 1001
                  },
                  "channels": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": [
                      "in_app",
                      "email"
                    ]
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "pending",
                      "processing",
                      "sent",
                      "failed"
                    ],
                    "example": "pending"
                  }
                }
              }
            }
          }
        },
        "BatchSendNotificationRequest": {
          "type": "object",
          "required": [
            "notifications"
          ],
          "properties": {
            "notifications": {
              "type": "array",
              "description": "批量消息列表",
              "maxItems": 1000,
              "items": {
                "$ref": "#/components/schemas/SendNotificationRequest"
              }
            },
            "batch_id": {
              "type": "string",
              "description": "批次ID（可选，系统自动生成）",
              "example": "batch_20250815_001"
            }
          }
        },
        "BatchSendNotificationResponse": {
          "type": "object",
          "properties": {
            "batch_id": {
              "type": "string",
              "description": "批次ID",
              "example": "batch_20250815_001"
            },
            "total_count": {
              "type": "integer",
              "description": "总消息数",
              "example": 100
            },
            "accepted_count": {
              "type": "integer",
              "description": "接受处理的消息数",
              "example": 95
            },
            "rejected_count": {
              "type": "integer",
              "description": "拒绝处理的消息数",
              "example": 5
            },
            "status": {
              "type": "string",
              "description": "批次状态",
              "enum": [
                "pending",
                "processing",
                "completed",
                "failed"
              ],
              "example": "pending"
            },
            "estimated_completion_time": {
              "type": "string",
              "format": "date-time",
              "description": "预计完成时间",
              "example": "2025-08-15T15:00:00Z"
            }
          }
        },
        "NotificationSummary": {
          "type": "object",
          "properties": {
            "notification_id": {
              "type": "integer",
              "description": "消息ID",
              "example": 789
            },
            "title": {
              "type": "string",
              "description": "消息标题",
              "example": "工单状态变更通知"
            },
            "content": {
              "type": "string",
              "description": "消息内容（截取前100字符）",
              "example": "您的工单 #TCK-20250814-0001 状态已变更为已完成"
            },
            "priority": {
              "type": "string",
              "description": "优先级",
              "enum": [
                "urgent",
                "high",
                "normal",
                "low"
              ],
              "example": "normal"
            },
            "status": {
              "type": "string",
              "description": "消息状态",
              "enum": [
                "pending",
                "processing",
                "sent",
                "failed",
                "cancelled"
              ],
              "example": "sent"
            },
            "channels": {
              "type": "array",
              "description": "发送渠道",
              "items": {
                "type": "string"
              },
              "example": [
                "in_app",
                "email"
              ]
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:30:00Z"
            },
            "sent_time": {
              "type": "string",
              "format": "date-time",
              "description": "发送时间",
              "example": "2025-08-15T10:31:00Z"
            },
            "read_time": {
              "type": "string",
              "format": "date-time",
              "description": "阅读时间",
              "example": "2025-08-15T11:00:00Z"
            }
          }
        },
        "NotificationDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/NotificationSummary"
            },
            {
              "type": "object",
              "properties": {
                "user_id": {
                  "type": "integer",
                  "description": "接收用户ID",
                  "example": 1001
                },
                "event_type": {
                  "type": "string",
                  "description": "事件类型",
                  "example": "ticket_status_change"
                },
                "notification_type": {
                  "type": "string",
                  "description": "通知类型",
                  "example": "ticket_notification"
                },
                "content_format": {
                  "type": "string",
                  "description": "内容格式",
                  "enum": [
                    "text",
                    "html",
                    "markdown"
                  ],
                  "example": "text"
                },
                "template_id": {
                  "type": "integer",
                  "description": "使用的模板ID",
                  "example": 456
                },
                "template_variables": {
                  "type": "object",
                  "description": "模板变量值",
                  "example": {
                    "ticket_id": "TCK-20250814-0001",
                    "status": "已完成",
                    "customer_name": "张三"
                  }
                },
                "scheduled_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "计划发送时间",
                  "example": "2025-08-15T14:30:00Z"
                },
                "expire_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "过期时间",
                  "example": "2025-08-16T14:30:00Z"
                },
                "retry_count": {
                  "type": "integer",
                  "description": "重试次数",
                  "example": 0
                },
                "max_retry_count": {
                  "type": "integer",
                  "description": "最大重试次数",
                  "example": 3
                },
                "error_message": {
                  "type": "string",
                  "description": "错误信息",
                  "example": null
                },
                "metadata": {
                  "type": "object",
                  "description": "扩展元数据",
                  "example": {
                    "source_module": "ticket",
                    "source_id": "12345"
                  }
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "更新时间",
                  "example": "2025-08-15T10:31:00Z"
                }
              }
            }
          ]
        },
        "MessageTemplateSummary": {
          "type": "object",
          "properties": {
            "template_id": {
              "type": "integer",
              "description": "模板ID",
              "example": 456
            },
            "template_code": {
              "type": "string",
              "description": "模板代码",
              "example": "ticket_status_change"
            },
            "template_name": {
              "type": "string",
              "description": "模板名称",
              "example": "工单状态变更通知模板"
            },
            "template_type": {
              "type": "string",
              "description": "模板类型",
              "example": "ticket_notification"
            },
            "category": {
              "type": "string",
              "description": "模板分类",
              "example": "ticket"
            },
            "channels": {
              "type": "array",
              "description": "适用渠道列表",
              "items": {
                "type": "string"
              },
              "example": [
                "in_app",
                "email",
                "sms"
              ]
            },
            "content_format": {
              "type": "string",
              "description": "内容格式",
              "enum": [
                "text",
                "html",
                "markdown"
              ],
              "example": "text"
            },
            "status": {
              "type": "string",
              "description": "模板状态",
              "enum": [
                "active",
                "inactive",
                "draft"
              ],
              "example": "active"
            },
            "version": {
              "type": "string",
              "description": "模板版本",
              "example": "1.0"
            },
            "usage_count": {
              "type": "integer",
              "description": "使用次数统计",
              "example": 156
            },
            "last_used_at": {
              "type": "string",
              "format": "date-time",
              "description": "最后使用时间",
              "example": "2025-08-15T10:30:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-01T09:00:00Z"
            }
          }
        },
        "MessageTemplateDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/MessageTemplateSummary"
            },
            {
              "type": "object",
              "properties": {
                "subject_template": {
                  "type": "string",
                  "description": "主题模板",
                  "example": "工单 #{ticket_id} 状态变更通知"
                },
                "content_template": {
                  "type": "string",
                  "description": "内容模板",
                  "example": "尊敬的 {customer_name}，您的工单 #{ticket_id} 状态已变更为 {status}。"
                },
                "variables": {
                  "type": "object",
                  "description": "变量定义",
                  "example": {
                    "ticket_id": {
                      "type": "string",
                      "required": true,
                      "description": "工单ID"
                    },
                    "customer_name": {
                      "type": "string",
                      "required": true,
                      "description": "客户姓名"
                    },
                    "status": {
                      "type": "string",
                      "required": true,
                      "description": "工单状态"
                    }
                  }
                },
                "variable_schema": {
                  "type": "object",
                  "description": "变量JSON Schema验证规则",
                  "example": {
                    "type": "object",
                    "properties": {
                      "ticket_id": {
                        "type": "string",
                        "pattern": "^[0-9]+$"
                      },
                      "customer_name": {
                        "type": "string",
                        "minLength": 1
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "待处理",
                          "处理中",
                          "已完成",
                          "已关闭"
                        ]
                      }
                    },
                    "required": [
                      "ticket_id",
                      "customer_name",
                      "status"
                    ]
                  }
                },
                "tags": {
                  "type": "array",
                  "description": "标签列表",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "工单",
                    "状态变更"
                  ]
                },
                "created_by": {
                  "type": "integer",
                  "description": "创建人ID",
                  "example": 1001
                },
                "updated_by": {
                  "type": "integer",
                  "description": "更新人ID",
                  "example": 1001
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "更新时间",
                  "example": "2025-08-15T10:30:00Z"
                }
              }
            }
          ]
        },
        "CreateMessageTemplateRequest": {
          "type": "object",
          "required": [
            "template_code",
            "template_name",
            "template_type",
            "category",
            "channels",
            "subject_template",
            "content_template"
          ],
          "properties": {
            "template_code": {
              "type": "string",
              "description": "模板代码（租户内唯一）",
              "pattern": "^[a-z0-9_]+$",
              "maxLength": 50,
              "example": "ticket_status_change"
            },
            "template_name": {
              "type": "string",
              "description": "模板名称",
              "maxLength": 100,
              "example": "工单状态变更通知模板"
            },
            "template_type": {
              "type": "string",
              "description": "模板类型",
              "example": "ticket_notification"
            },
            "category": {
              "type": "string",
              "description": "模板分类",
              "example": "ticket"
            },
            "channels": {
              "type": "array",
              "description": "适用渠道列表",
              "items": {
                "type": "string",
                "enum": [
                  "in_app",
                  "email",
                  "sms",
                  "wechat",
                  "dingtalk",
                  "webhook",
                  "push"
                ]
              },
              "example": [
                "in_app",
                "email",
                "sms"
              ]
            },
            "subject_template": {
              "type": "string",
              "description": "主题模板",
              "maxLength": 255,
              "example": "工单 #{ticket_id} 状态变更通知"
            },
            "content_template": {
              "type": "string",
              "description": "内容模板",
              "example": "尊敬的 {customer_name}，您的工单 #{ticket_id} 状态已变更为 {status}。"
            },
            "content_format": {
              "type": "string",
              "description": "内容格式",
              "enum": [
                "text",
                "html",
                "markdown"
              ],
              "default": "text",
              "example": "text"
            },
            "variables": {
              "type": "object",
              "description": "变量定义",
              "example": {
                "ticket_id": {
                  "type": "string",
                  "required": true,
                  "description": "工单ID"
                },
                "customer_name": {
                  "type": "string",
                  "required": true,
                  "description": "客户姓名"
                },
                "status": {
                  "type": "string",
                  "required": true,
                  "description": "工单状态"
                }
              }
            },
            "variable_schema": {
              "type": "object",
              "description": "变量JSON Schema验证规则",
              "example": {
                "type": "object",
                "properties": {
                  "ticket_id": {
                    "type": "string",
                    "pattern": "^[0-9]+$"
                  },
                  "customer_name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "待处理",
                      "处理中",
                      "已完成",
                      "已关闭"
                    ]
                  }
                },
                "required": [
                  "ticket_id",
                  "customer_name",
                  "status"
                ]
              }
            },
            "tags": {
              "type": "array",
              "description": "标签列表",
              "items": {
                "type": "string"
              },
              "example": [
                "工单",
                "状态变更"
              ]
            }
          }
        },
        "UpdateMessageTemplateRequest": {
          "type": "object",
          "properties": {
            "template_name": {
              "type": "string",
              "description": "模板名称",
              "maxLength": 100,
              "example": "工单状态变更通知模板"
            },
            "channels": {
              "type": "array",
              "description": "适用渠道列表",
              "items": {
                "type": "string",
                "enum": [
                  "in_app",
                  "email",
                  "sms",
                  "wechat",
                  "dingtalk",
                  "webhook",
                  "push"
                ]
              },
              "example": [
                "in_app",
                "email",
                "sms"
              ]
            },
            "subject_template": {
              "type": "string",
              "description": "主题模板",
              "maxLength": 255,
              "example": "工单 #{ticket_id} 状态变更通知"
            },
            "content_template": {
              "type": "string",
              "description": "内容模板",
              "example": "尊敬的 {customer_name}，您的工单 #{ticket_id} 状态已变更为 {status}。"
            },
            "content_format": {
              "type": "string",
              "description": "内容格式",
              "enum": [
                "text",
                "html",
                "markdown"
              ],
              "example": "text"
            },
            "variables": {
              "type": "object",
              "description": "变量定义"
            },
            "variable_schema": {
              "type": "object",
              "description": "变量JSON Schema验证规则"
            },
            "status": {
              "type": "string",
              "description": "模板状态",
              "enum": [
                "active",
                "inactive",
                "draft"
              ],
              "example": "active"
            },
            "tags": {
              "type": "array",
              "description": "标签列表",
              "items": {
                "type": "string"
              },
              "example": [
                "工单",
                "状态变更"
              ]
            }
          }
        },
        "UserNotificationSetting": {
          "type": "object",
          "properties": {
            "setting_id": {
              "type": "integer",
              "description": "设置ID",
              "example": 123
            },
            "user_id": {
              "type": "integer",
              "description": "用户ID",
              "example": 1001
            },
            "notification_type": {
              "type": "string",
              "description": "通知类型",
              "example": "ticket_notification"
            },
            "event_type": {
              "type": "string",
              "description": "事件类型",
              "example": "ticket_status_change"
            },
            "channel_preferences": {
              "type": "object",
              "description": "渠道偏好配置",
              "example": {
                "in_app": {
                  "enabled": true,
                  "priority": 1
                },
                "email": {
                  "enabled": true,
                  "priority": 2,
                  "address": "user@example.com"
                },
                "sms": {
                  "enabled": false,
                  "priority": 3,
                  "phone": "+86138****8888"
                }
              }
            },
            "priority_threshold": {
              "type": "string",
              "description": "优先级阈值（低于此级别的消息不发送）",
              "enum": [
                "urgent",
                "high",
                "normal",
                "low"
              ],
              "example": "normal"
            },
            "frequency_limit": {
              "type": "integer",
              "description": "频率限制（每小时最大消息数）",
              "minimum": 0,
              "maximum": 100,
              "example": 10
            },
            "do_not_disturb_start": {
              "type": "string",
              "format": "time",
              "description": "免打扰开始时间",
              "example": "22:00"
            },
            "do_not_disturb_end": {
              "type": "string",
              "format": "time",
              "description": "免打扰结束时间",
              "example": "08:00"
            },
            "timezone": {
              "type": "string",
              "description": "时区设置",
              "example": "Asia/Shanghai"
            },
            "language": {
              "type": "string",
              "description": "语言偏好",
              "example": "zh-CN"
            },
            "is_enabled": {
              "type": "boolean",
              "description": "是否启用此设置",
              "example": true
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-01T09:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T10:30:00Z"
            }
          }
        },
        "UpdateUserNotificationSettingRequest": {
          "type": "object",
          "required": [
            "notification_type",
            "event_type"
          ],
          "properties": {
            "notification_type": {
              "type": "string",
              "description": "通知类型",
              "example": "ticket_notification"
            },
            "event_type": {
              "type": "string",
              "description": "事件类型",
              "example": "ticket_status_change"
            },
            "channel_preferences": {
              "type": "object",
              "description": "渠道偏好配置",
              "example": {
                "in_app": {
                  "enabled": true,
                  "priority": 1
                },
                "email": {
                  "enabled": true,
                  "priority": 2,
                  "address": "user@example.com"
                }
              }
            },
            "priority_threshold": {
              "type": "string",
              "description": "优先级阈值",
              "enum": [
                "urgent",
                "high",
                "normal",
                "low"
              ],
              "example": "normal"
            },
            "frequency_limit": {
              "type": "integer",
              "description": "频率限制（每小时最大消息数）",
              "minimum": 0,
              "maximum": 100,
              "example": 10
            },
            "do_not_disturb_start": {
              "type": "string",
              "format": "time",
              "description": "免打扰开始时间",
              "example": "22:00"
            },
            "do_not_disturb_end": {
              "type": "string",
              "format": "time",
              "description": "免打扰结束时间",
              "example": "08:00"
            },
            "timezone": {
              "type": "string",
              "description": "时区设置",
              "example": "Asia/Shanghai"
            },
            "language": {
              "type": "string",
              "description": "语言偏好",
              "example": "zh-CN"
            },
            "is_enabled": {
              "type": "boolean",
              "description": "是否启用此设置",
              "example": true
            }
          }
        },
        "NotificationStatistics": {
          "type": "object",
          "properties": {
            "summary": {
              "type": "object",
              "description": "统计摘要",
              "properties": {
                "total_sent": {
                  "type": "integer",
                  "description": "总发送数",
                  "example": 1250
                },
                "total_delivered": {
                  "type": "integer",
                  "description": "总投递数",
                  "example": 1180
                },
                "total_read": {
                  "type": "integer",
                  "description": "总阅读数",
                  "example": 890
                },
                "delivery_rate": {
                  "type": "number",
                  "format": "float",
                  "description": "投递率",
                  "example": 0.944
                },
                "read_rate": {
                  "type": "number",
                  "format": "float",
                  "description": "阅读率",
                  "example": 0.754
                }
              }
            },
            "time_series": {
              "type": "array",
              "description": "时间序列数据",
              "items": {
                "type": "object",
                "properties": {
                  "time": {
                    "type": "string",
                    "format": "date-time",
                    "description": "时间点",
                    "example": "2025-08-15T10:00:00Z"
                  },
                  "sent_count": {
                    "type": "integer",
                    "description": "发送数量",
                    "example": 125
                  },
                  "delivered_count": {
                    "type": "integer",
                    "description": "投递数量",
                    "example": 118
                  },
                  "read_count": {
                    "type": "integer",
                    "description": "阅读数量",
                    "example": 89
                  }
                }
              }
            },
            "channel_breakdown": {
              "type": "array",
              "description": "渠道分解数据",
              "items": {
                "type": "object",
                "properties": {
                  "channel_type": {
                    "type": "string",
                    "description": "渠道类型",
                    "example": "email"
                  },
                  "sent_count": {
                    "type": "integer",
                    "description": "发送数量",
                    "example": 500
                  },
                  "delivered_count": {
                    "type": "integer",
                    "description": "投递数量",
                    "example": 475
                  },
                  "delivery_rate": {
                    "type": "number",
                    "format": "float",
                    "description": "投递率",
                    "example": 0.95
                  },
                  "avg_delivery_time": {
                    "type": "integer",
                    "description": "平均投递时间（秒）",
                    "example": 15
                  }
                }
              }
            }
          }
        },
        "NotificationEventRequest": {
          "type": "object",
          "required": [
            "event_id",
            "event_type",
            "event_time",
            "source",
            "tenant_id",
            "event_data"
          ],
          "properties": {
            "event_id": {
              "type": "string",
              "description": "事件唯一标识",
              "example": "evt_20250815_001"
            },
            "event_type": {
              "type": "string",
              "description": "事件类型",
              "example": "ticket.status.changed"
            },
            "event_time": {
              "type": "string",
              "format": "date-time",
              "description": "事件发生时间",
              "example": "2025-08-15T10:30:00Z"
            },
            "source": {
              "type": "string",
              "description": "事件来源系统",
              "example": "ticket-service"
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            },
            "event_data": {
              "type": "object",
              "description": "事件数据",
              "example": {
                "ticket_id": "TCK-20250814-0001",
                "old_status": "处理中",
                "new_status": "已完成",
                "operator_id": 2001,
                "customer_id": 1001
              }
            },
            "notification_config": {
              "type": "object",
              "description": "通知配置（可选）",
              "properties": {
                "template_code": {
                  "type": "string",
                  "description": "指定模板代码",
                  "example": "ticket_status_change"
                },
                "priority": {
                  "type": "string",
                  "description": "通知优先级",
                  "enum": [
                    "urgent",
                    "high",
                    "normal",
                    "low"
                  ],
                  "example": "normal"
                },
                "channels": {
                  "type": "array",
                  "description": "指定发送渠道",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "in_app",
                    "email"
                  ]
                },
                "recipients": {
                  "type": "array",
                  "description": "指定接收者（覆盖默认规则）",
                  "items": {
                    "type": "integer"
                  },
                  "example": [
                    1001,
                    2001
                  ]
                }
              }
            }
          }
        }
      },
      "issues": []
    },
    "REQ-006-工程师管理系统": {
      "file_path": "docs/api/4.5.1/modules/REQ-006-工程师管理系统/openapi.yaml",
      "components": {
        "EngineerCreateRequest": {
          "type": "object",
          "required": [
            "employee_no",
            "real_name",
            "department_id",
            "position",
            "level",
            "hire_date"
          ],
          "properties": {
            "employee_no": {
              "type": "string",
              "description": "工号",
              "maxLength": 50,
              "example": "ENG001"
            },
            "real_name": {
              "type": "string",
              "description": "真实姓名",
              "maxLength": 50,
              "example": "张三"
            },
            "gender": {
              "type": "integer",
              "description": "性别：1-男，2-女",
              "enum": [
                1,
                2
              ],
              "example": 1
            },
            "birth_date": {
              "type": "string",
              "format": "date",
              "description": "出生日期",
              "example": "1990-05-15"
            },
            "phone": {
              "type": "string",
              "description": "手机号",
              "maxLength": 20,
              "example": "13800138000"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "maxLength": 100,
              "example": "zhangsan@company.com"
            },
            "address": {
              "type": "string",
              "description": "联系地址",
              "maxLength": 500,
              "example": "北京市朝阳区示例大厦"
            },
            "emergency_contact": {
              "type": "string",
              "description": "紧急联系人",
              "maxLength": 50,
              "example": "李四"
            },
            "emergency_phone": {
              "type": "string",
              "description": "紧急联系电话",
              "maxLength": 20,
              "example": "13900139000"
            },
            "department_id": {
              "type": "integer",
              "description": "部门ID",
              "example": 101
            },
            "position": {
              "type": "string",
              "description": "职位",
              "maxLength": 100,
              "example": "运维工程师"
            },
            "level": {
              "type": "integer",
              "description": "级别：1-初级，2-中级，3-高级，4-专家，5-架构师",
              "enum": [
                1,
                2,
                3,
                4,
                5
              ],
              "example": 2
            },
            "hire_date": {
              "type": "string",
              "format": "date",
              "description": "入职日期",
              "example": "2024-08-01"
            },
            "work_location": {
              "type": "string",
              "description": "工作地点",
              "maxLength": 200,
              "example": "北京总部"
            },
            "skills": {
              "type": "array",
              "description": "技能列表",
              "items": {
                "$ref": "#/components/schemas/EngineerSkillInput"
              }
            }
          }
        },
        "EngineerUpdateRequest": {
          "type": "object",
          "properties": {
            "real_name": {
              "type": "string",
              "description": "真实姓名",
              "maxLength": 50,
              "example": "张三"
            },
            "phone": {
              "type": "string",
              "description": "手机号",
              "maxLength": 20,
              "example": "13800138000"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "maxLength": 100,
              "example": "zhangsan@company.com"
            },
            "address": {
              "type": "string",
              "description": "联系地址",
              "maxLength": 500,
              "example": "北京市朝阳区示例大厦"
            },
            "emergency_contact": {
              "type": "string",
              "description": "紧急联系人",
              "maxLength": 50,
              "example": "李四"
            },
            "emergency_phone": {
              "type": "string",
              "description": "紧急联系电话",
              "maxLength": 20,
              "example": "13900139000"
            },
            "department_id": {
              "type": "integer",
              "description": "部门ID",
              "example": 101
            },
            "position": {
              "type": "string",
              "description": "职位",
              "maxLength": 100,
              "example": "高级运维工程师"
            },
            "level": {
              "type": "integer",
              "description": "级别：1-初级，2-中级，3-高级，4-专家，5-架构师",
              "enum": [
                1,
                2,
                3,
                4,
                5
              ],
              "example": 3
            },
            "work_location": {
              "type": "string",
              "description": "工作地点",
              "maxLength": 200,
              "example": "北京总部"
            }
          }
        },
        "EngineerStatusUpdateRequest": {
          "type": "object",
          "properties": {
            "online_status": {
              "type": "string",
              "description": "在线状态",
              "enum": [
                "online",
                "offline",
                "busy",
                "away"
              ],
              "example": "online"
            },
            "location": {
              "type": "object",
              "description": "位置信息",
              "properties": {
                "latitude": {
                  "type": "number",
                  "format": "double",
                  "description": "纬度",
                  "minimum": -90,
                  "maximum": 90,
                  "example": 39.9042
                },
                "longitude": {
                  "type": "number",
                  "format": "double",
                  "description": "经度",
                  "minimum": -180,
                  "maximum": 180,
                  "example": 116.4074
                },
                "address": {
                  "type": "string",
                  "description": "地址描述",
                  "maxLength": 200,
                  "example": "北京市朝阳区"
                }
              }
            },
            "work_status": {
              "type": "string",
              "description": "工作状态",
              "enum": [
                "available",
                "busy",
                "break",
                "offline"
              ],
              "example": "available"
            }
          }
        },
        "EngineerSkillInput": {
          "type": "object",
          "required": [
            "skill_code",
            "skill_level"
          ],
          "properties": {
            "skill_code": {
              "type": "string",
              "description": "技能代码",
              "maxLength": 50,
              "example": "linux"
            },
            "skill_level": {
              "type": "integer",
              "description": "技能等级：1-初级，2-中级，3-高级，4-专家，5-大师",
              "enum": [
                1,
                2,
                3,
                4,
                5
              ],
              "example": 3
            },
            "experience_years": {
              "type": "number",
              "format": "float",
              "description": "经验年限",
              "minimum": 0,
              "maximum": 50,
              "example": 3.5
            },
            "certification_status": {
              "type": "integer",
              "description": "认证状态：0-无认证，1-认证中，2-已认证，3-已过期",
              "enum": [
                0,
                1,
                2,
                3
              ],
              "example": 2
            },
            "certification_date": {
              "type": "string",
              "format": "date",
              "description": "认证日期",
              "example": "2024-06-15"
            },
            "certification_expiry": {
              "type": "string",
              "format": "date",
              "description": "认证过期日期",
              "example": "2026-06-15"
            },
            "certification_authority": {
              "type": "string",
              "description": "认证机构",
              "maxLength": 100,
              "example": "Red Hat"
            },
            "proficiency_score": {
              "type": "number",
              "format": "float",
              "description": "熟练度评分（0-100）",
              "minimum": 0,
              "maximum": 100,
              "example": 85.5
            }
          }
        },
        "EngineerSkillsUpdateRequest": {
          "type": "object",
          "required": [
            "skills"
          ],
          "properties": {
            "skills": {
              "type": "array",
              "description": "技能列表",
              "items": {
                "$ref": "#/components/schemas/EngineerSkillInput"
              }
            }
          }
        },
        "ScheduleGenerateRequest": {
          "type": "object",
          "required": [
            "period"
          ],
          "properties": {
            "period": {
              "type": "object",
              "description": "排班周期",
              "required": [
                "start_date",
                "end_date"
              ],
              "properties": {
                "start_date": {
                  "type": "string",
                  "format": "date",
                  "description": "开始日期",
                  "example": "2025-09-01"
                },
                "end_date": {
                  "type": "string",
                  "format": "date",
                  "description": "结束日期",
                  "example": "2025-09-30"
                }
              }
            },
            "rules": {
              "type": "object",
              "description": "排班规则",
              "properties": {
                "sla_priority": {
                  "type": "boolean",
                  "description": "SLA优先级",
                  "default": true,
                  "example": true
                },
                "skill_matching": {
                  "type": "boolean",
                  "description": "技能匹配",
                  "default": true,
                  "example": true
                },
                "workload_balance": {
                  "type": "boolean",
                  "description": "工作负载均衡",
                  "default": true,
                  "example": true
                },
                "location_preference": {
                  "type": "boolean",
                  "description": "地理位置偏好",
                  "default": true,
                  "example": true
                },
                "personal_preference": {
                  "type": "boolean",
                  "description": "个人偏好",
                  "default": false,
                  "example": false
                }
              }
            },
            "constraints": {
              "type": "object",
              "description": "约束条件",
              "properties": {
                "max_consecutive_days": {
                  "type": "integer",
                  "description": "最大连续工作天数",
                  "minimum": 1,
                  "maximum": 14,
                  "default": 5,
                  "example": 5
                },
                "min_rest_hours": {
                  "type": "integer",
                  "description": "最小休息时间（小时）",
                  "minimum": 8,
                  "maximum": 24,
                  "default": 12,
                  "example": 12
                },
                "max_weekly_hours": {
                  "type": "integer",
                  "description": "最大周工作时间",
                  "minimum": 20,
                  "maximum": 60,
                  "default": 40,
                  "example": 40
                }
              }
            },
            "department_ids": {
              "type": "array",
              "description": "部门ID列表",
              "items": {
                "type": "integer"
              },
              "example": [
                101,
                102
              ]
            }
          }
        },
        "EngineerExportRequest": {
          "type": "object",
          "required": [
            "format"
          ],
          "properties": {
            "format": {
              "type": "string",
              "description": "导出格式",
              "enum": [
                "excel",
                "csv",
                "pdf"
              ],
              "example": "excel"
            },
            "filters": {
              "type": "object",
              "description": "过滤条件",
              "properties": {
                "department_ids": {
                  "type": "array",
                  "description": "部门ID列表",
                  "items": {
                    "type": "integer"
                  },
                  "example": [
                    101,
                    102
                  ]
                },
                "status": {
                  "type": "array",
                  "description": "工程师状态列表",
                  "items": {
                    "type": "integer",
                    "enum": [
                      1,
                      2,
                      3,
                      4
                    ]
                  },
                  "example": [
                    1,
                    4
                  ]
                },
                "level": {
                  "type": "array",
                  "description": "级别列表",
                  "items": {
                    "type": "integer",
                    "enum": [
                      1,
                      2,
                      3,
                      4,
                      5
                    ]
                  },
                  "example": [
                    2,
                    3,
                    4
                  ]
                },
                "skill_codes": {
                  "type": "array",
                  "description": "技能代码列表",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "linux",
                    "docker"
                  ]
                }
              }
            },
            "fields": {
              "type": "array",
              "description": "导出字段列表",
              "items": {
                "type": "string",
                "enum": [
                  "employee_no",
                  "real_name",
                  "department_name",
                  "position",
                  "level",
                  "phone",
                  "email",
                  "skills",
                  "performance"
                ]
              },
              "example": [
                "employee_no",
                "real_name",
                "department_name",
                "position",
                "level",
                "skills"
              ]
            },
            "include_skills": {
              "type": "boolean",
              "description": "是否包含技能信息",
              "default": false,
              "example": true
            },
            "include_performance": {
              "type": "boolean",
              "description": "是否包含绩效信息",
              "default": false,
              "example": false
            }
          }
        },
        "ApiResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "响应状态码",
              "example": 200
            },
            "message": {
              "type": "string",
              "description": "响应消息",
              "example": "操作成功"
            },
            "data": {
              "type": "object",
              "description": "响应数据"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "响应时间戳",
              "example": "2025-08-14T14:30:00Z"
            },
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "req_123456789"
            }
          }
        },
        "PagedResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "响应状态码",
              "example": 200
            },
            "message": {
              "type": "string",
              "description": "响应消息",
              "example": "查询成功"
            },
            "data": {
              "type": "object",
              "properties": {
                "total": {
                  "type": "integer",
                  "description": "总记录数",
                  "example": 100
                },
                "page": {
                  "type": "integer",
                  "description": "当前页码",
                  "example": 1
                },
                "size": {
                  "type": "integer",
                  "description": "每页大小",
                  "example": 20
                },
                "pages": {
                  "type": "integer",
                  "description": "总页数",
                  "example": 5
                },
                "items": {
                  "type": "array",
                  "description": "数据列表",
                  "items": {
                    "type": "object"
                  }
                }
              }
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "响应时间戳",
              "example": "2025-08-14T14:30:00Z"
            },
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "req_123456789"
            }
          }
        },
        "ErrorResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "错误状态码",
              "example": 400
            },
            "message": {
              "type": "string",
              "description": "错误消息",
              "example": "参数验证失败"
            },
            "data": {
              "type": "object",
              "nullable": true,
              "description": "错误详情"
            },
            "error_details": {
              "type": "object",
              "description": "详细错误信息",
              "properties": {
                "error_code": {
                  "type": "string",
                  "description": "业务错误码",
                  "example": "ENGINEER_NOT_FOUND"
                },
                "field": {
                  "type": "string",
                  "description": "错误字段",
                  "example": "engineer_id"
                },
                "value": {
                  "type": "string",
                  "description": "错误值",
                  "example": "999999"
                },
                "suggestion": {
                  "type": "string",
                  "description": "修复建议",
                  "example": "请检查工程师ID是否正确"
                }
              }
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "响应时间戳",
              "example": "2025-08-14T14:30:00Z"
            },
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "req_123456789"
            }
          }
        }
      },
      "issues": []
    },
    "REQ-012-系统集成模块": {
      "file_path": "docs/api/4.5.1/modules/REQ-012-系统集成模块/openapi.yaml",
      "components": {
        "IntegrationType": {
          "type": "string",
          "enum": [
            "api",
            "database",
            "message_queue",
            "file_transfer"
          ],
          "description": "集成类型",
          "example": "api"
        },
        "ConfigStatus": {
          "type": "string",
          "enum": [
            "draft",
            "active",
            "inactive",
            "archived"
          ],
          "description": "配置状态",
          "example": "active"
        },
        "SyncTaskStatus": {
          "type": "string",
          "enum": [
            "pending",
            "running",
            "success",
            "failed",
            "cancelled",
            "timeout"
          ],
          "description": "同步任务状态",
          "example": "success"
        },
        "MetricType": {
          "type": "string",
          "enum": [
            "performance",
            "availability",
            "error_rate",
            "throughput"
          ],
          "description": "指标类型",
          "example": "performance"
        },
        "OperationType": {
          "type": "string",
          "enum": [
            "sync",
            "test",
            "config_change",
            "error_retry"
          ],
          "description": "操作类型",
          "example": "sync"
        },
        "IntegrationConfig": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "format": "int64",
                  "description": "租户ID",
                  "example": 1
                },
                "config_name": {
                  "type": "string",
                  "description": "配置名称",
                  "example": "Prometheus监控集成"
                },
                "config_code": {
                  "type": "string",
                  "description": "配置编码",
                  "example": "prometheus_integration"
                },
                "integration_type": {
                  "$ref": "#/components/schemas/IntegrationType"
                },
                "source_system": {
                  "type": "string",
                  "description": "源系统",
                  "example": "prometheus"
                },
                "target_system": {
                  "type": "string",
                  "description": "目标系统",
                  "example": "ops_portal"
                },
                "connection_config": {
                  "$ref": "#/components/schemas/ConnectionConfig"
                },
                "mapping_rules": {
                  "$ref": "#/components/schemas/MappingRule"
                },
                "sync_config": {
                  "$ref": "#/components/schemas/SyncConfig"
                },
                "retry_config": {
                  "$ref": "#/components/schemas/RetryConfig"
                },
                "template_id": {
                  "type": "integer",
                  "format": "int64",
                  "description": "配置模板ID",
                  "example": 2001
                },
                "version": {
                  "type": "integer",
                  "description": "配置版本",
                  "example": 1
                },
                "status": {
                  "$ref": "#/components/schemas/ConfigStatus"
                },
                "enabled": {
                  "type": "boolean",
                  "description": "是否启用",
                  "example": true
                },
                "effective_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "生效时间",
                  "example": "2025-08-15T00:00:00Z"
                },
                "expire_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "失效时间",
                  "example": "2025-12-31T23:59:59Z"
                },
                "created_by": {
                  "type": "integer",
                  "format": "int64",
                  "description": "创建人ID",
                  "example": 1001
                },
                "updated_by": {
                  "type": "integer",
                  "format": "int64",
                  "description": "更新人ID",
                  "example": 1001
                },
                "deleted_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "删除时间",
                  "example": null
                }
              }
            }
          ]
        },
        "ConnectionConfig": {
          "type": "object",
          "description": "连接配置",
          "properties": {
            "endpoint": {
              "type": "string",
              "description": "连接端点",
              "example": "http://prometheus:9090/api/v1"
            },
            "auth_type": {
              "type": "string",
              "enum": [
                "none",
                "basic",
                "bearer",
                "api_key"
              ],
              "description": "认证类型",
              "example": "basic"
            },
            "username": {
              "type": "string",
              "description": "用户名",
              "example": "admin"
            },
            "password": {
              "type": "string",
              "description": "密码（加密存储）",
              "example": "encrypted_password"
            },
            "api_key": {
              "type": "string",
              "description": "API密钥",
              "example": "api_key_value"
            },
            "timeout": {
              "type": "integer",
              "description": "超时时间（毫秒）",
              "example": 30000
            },
            "retry_times": {
              "type": "integer",
              "description": "重试次数",
              "example": 3
            },
            "ssl_verify": {
              "type": "boolean",
              "description": "是否验证SSL证书",
              "example": true
            },
            "headers": {
              "type": "object",
              "description": "自定义请求头",
              "additionalProperties": {
                "type": "string"
              },
              "example": {
                "Content-Type": "application/json",
                "User-Agent": "OpsPortal/1.0"
              }
            }
          }
        },
        "MappingRule": {
          "type": "object",
          "description": "映射规则",
          "properties": {
            "field_mappings": {
              "type": "array",
              "description": "字段映射列表",
              "items": {
                "type": "object",
                "properties": {
                  "source_field": {
                    "type": "string",
                    "description": "源字段",
                    "example": "metric_name"
                  },
                  "target_field": {
                    "type": "string",
                    "description": "目标字段",
                    "example": "alert_name"
                  },
                  "transform_rule": {
                    "type": "string",
                    "description": "转换规则",
                    "example": "uppercase"
                  },
                  "default_value": {
                    "type": "string",
                    "description": "默认值",
                    "example": "unknown"
                  },
                  "required": {
                    "type": "boolean",
                    "description": "是否必填",
                    "example": true
                  }
                }
              }
            },
            "filter_rules": {
              "type": "array",
              "description": "过滤规则列表",
              "items": {
                "type": "object",
                "properties": {
                  "field": {
                    "type": "string",
                    "description": "过滤字段",
                    "example": "severity"
                  },
                  "operator": {
                    "type": "string",
                    "enum": [
                      "eq",
                      "ne",
                      "gt",
                      "lt",
                      "in",
                      "not_in",
                      "contains"
                    ],
                    "description": "操作符",
                    "example": "eq"
                  },
                  "value": {
                    "type": "string",
                    "description": "过滤值",
                    "example": "critical"
                  }
                }
              }
            }
          }
        },
        "SyncConfig": {
          "type": "object",
          "description": "同步配置",
          "properties": {
            "sync_type": {
              "type": "string",
              "enum": [
                "realtime",
                "scheduled",
                "manual"
              ],
              "description": "同步类型",
              "example": "realtime"
            },
            "sync_interval": {
              "type": "integer",
              "description": "同步间隔（秒）",
              "example": 60
            },
            "batch_size": {
              "type": "integer",
              "description": "批量大小",
              "example": 100
            },
            "enable_incremental": {
              "type": "boolean",
              "description": "是否启用增量同步",
              "example": true
            },
            "sync_direction": {
              "type": "string",
              "enum": [
                "source_to_target",
                "target_to_source",
                "bidirectional"
              ],
              "description": "同步方向",
              "example": "source_to_target"
            },
            "conflict_resolution": {
              "type": "string",
              "enum": [
                "source_wins",
                "target_wins",
                "manual"
              ],
              "description": "冲突解决策略",
              "example": "source_wins"
            }
          }
        },
        "RetryConfig": {
          "type": "object",
          "description": "重试配置",
          "properties": {
            "max_retry_times": {
              "type": "integer",
              "description": "最大重试次数",
              "example": 3
            },
            "retry_interval": {
              "type": "integer",
              "description": "重试间隔（秒）",
              "example": 5
            },
            "backoff_strategy": {
              "type": "string",
              "enum": [
                "fixed",
                "exponential",
                "linear"
              ],
              "description": "退避策略",
              "example": "exponential"
            },
            "max_backoff_time": {
              "type": "integer",
              "description": "最大退避时间（秒）",
              "example": 300
            }
          }
        },
        "IntegrationLog": {
          "type": "object",
          "description": "集成日志实体",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "日志ID",
              "example": 10001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "integration_id": {
              "type": "integer",
              "format": "int64",
              "description": "集成配置ID",
              "example": 1001
            },
            "trace_id": {
              "type": "string",
              "description": "链路追踪ID",
              "example": "trace_abc123def456"
            },
            "operation_type": {
              "$ref": "#/components/schemas/OperationType"
            },
            "operation_data": {
              "type": "object",
              "description": "操作数据",
              "example": {
                "sync_mode": "incremental",
                "data_source": "prometheus_metrics"
              }
            },
            "request_data": {
              "type": "object",
              "description": "请求数据",
              "example": {
                "query": "up{job='prometheus'}",
                "time_range": "1h"
              }
            },
            "response_data": {
              "type": "object",
              "description": "响应数据",
              "example": {
                "status": "success",
                "data_count": 150
              }
            },
            "execution_time": {
              "type": "string",
              "format": "date-time",
              "description": "执行时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "duration_ms": {
              "type": "integer",
              "description": "执行时长（毫秒）",
              "example": 1500
            },
            "status": {
              "$ref": "#/components/schemas/SyncTaskStatus"
            },
            "error_code": {
              "type": "string",
              "description": "错误码",
              "example": "CONN_TIMEOUT"
            },
            "error_message": {
              "type": "string",
              "description": "错误信息",
              "example": "连接超时"
            },
            "retry_count": {
              "type": "integer",
              "description": "重试次数",
              "example": 1
            },
            "data_count": {
              "type": "integer",
              "description": "处理数据量",
              "example": 150
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "IntegrationMetrics": {
          "type": "object",
          "description": "集成监控指标实体",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "指标ID",
              "example": 20001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "integration_id": {
              "type": "integer",
              "format": "int64",
              "description": "集成配置ID",
              "example": 1001
            },
            "metric_time": {
              "type": "string",
              "format": "date-time",
              "description": "指标时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "metric_type": {
              "$ref": "#/components/schemas/MetricType"
            },
            "metric_name": {
              "type": "string",
              "description": "指标名称",
              "example": "response_time"
            },
            "metric_value": {
              "type": "number",
              "format": "double",
              "description": "指标值",
              "example": 125.5
            },
            "metric_unit": {
              "type": "string",
              "description": "指标单位",
              "example": "ms"
            },
            "tags": {
              "type": "object",
              "description": "标签信息",
              "additionalProperties": {
                "type": "string"
              },
              "example": {
                "environment": "production",
                "region": "beijing"
              }
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "CreateIntegrationConfigRequest": {
          "type": "object",
          "required": [
            "config_name",
            "config_code",
            "integration_type",
            "source_system",
            "target_system",
            "connection_config"
          ],
          "description": "创建集成配置请求",
          "properties": {
            "config_name": {
              "type": "string",
              "description": "配置名称",
              "example": "Prometheus监控集成"
            },
            "config_code": {
              "type": "string",
              "description": "配置编码",
              "example": "prometheus_integration"
            },
            "integration_type": {
              "$ref": "#/components/schemas/IntegrationType"
            },
            "source_system": {
              "type": "string",
              "description": "源系统",
              "example": "prometheus"
            },
            "target_system": {
              "type": "string",
              "description": "目标系统",
              "example": "ops_portal"
            },
            "connection_config": {
              "$ref": "#/components/schemas/ConnectionConfig"
            },
            "mapping_rules": {
              "$ref": "#/components/schemas/MappingRule"
            },
            "sync_config": {
              "$ref": "#/components/schemas/SyncConfig"
            },
            "retry_config": {
              "$ref": "#/components/schemas/RetryConfig"
            },
            "template_id": {
              "type": "integer",
              "format": "int64",
              "description": "配置模板ID",
              "example": 2001
            },
            "effective_time": {
              "type": "string",
              "format": "date-time",
              "description": "生效时间",
              "example": "2025-08-15T00:00:00Z"
            },
            "expire_time": {
              "type": "string",
              "format": "date-time",
              "description": "失效时间",
              "example": "2025-12-31T23:59:59Z"
            }
          }
        },
        "UpdateIntegrationConfigRequest": {
          "type": "object",
          "description": "更新集成配置请求",
          "properties": {
            "config_name": {
              "type": "string",
              "description": "配置名称",
              "example": "Prometheus监控集成（更新）"
            },
            "connection_config": {
              "$ref": "#/components/schemas/ConnectionConfig"
            },
            "mapping_rules": {
              "$ref": "#/components/schemas/MappingRule"
            },
            "sync_config": {
              "$ref": "#/components/schemas/SyncConfig"
            },
            "retry_config": {
              "$ref": "#/components/schemas/RetryConfig"
            },
            "effective_time": {
              "type": "string",
              "format": "date-time",
              "description": "生效时间",
              "example": "2025-08-15T00:00:00Z"
            },
            "expire_time": {
              "type": "string",
              "format": "date-time",
              "description": "失效时间",
              "example": "2025-12-31T23:59:59Z"
            }
          }
        },
        "SyncRequest": {
          "type": "object",
          "description": "同步请求",
          "properties": {
            "sync_type": {
              "type": "string",
              "enum": [
                "full",
                "incremental"
              ],
              "description": "同步类型",
              "example": "incremental"
            },
            "force_sync": {
              "type": "boolean",
              "description": "是否强制同步",
              "example": false
            },
            "data_filter": {
              "type": "object",
              "description": "数据过滤条件",
              "additionalProperties": {
                "type": "string"
              },
              "example": {
                "severity": "critical",
                "time_range": "1h"
              }
            }
          }
        },
        "BatchOperationRequest": {
          "type": "object",
          "required": [
            "operation",
            "items"
          ],
          "description": "批量操作请求",
          "properties": {
            "operation": {
              "type": "string",
              "enum": [
                "create",
                "update",
                "delete",
                "activate",
                "deactivate"
              ],
              "description": "操作类型",
              "example": "activate"
            },
            "items": {
              "type": "array",
              "description": "操作项目列表",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer",
                    "format": "int64",
                    "description": "配置ID",
                    "example": 1001
                  },
                  "data": {
                    "type": "object",
                    "description": "操作数据（create/update时需要）"
                  }
                }
              },
              "example": [
                {
                  "id": 1001
                },
                {
                  "id": 1002
                }
              ]
            }
          }
        },
        "AlertWebhookRequest": {
          "type": "object",
          "required": [
            "alert_name",
            "severity",
            "message"
          ],
          "description": "告警webhook请求",
          "properties": {
            "alert_name": {
              "type": "string",
              "description": "告警名称",
              "example": "服务器CPU使用率过高"
            },
            "severity": {
              "type": "string",
              "enum": [
                "critical",
                "warning",
                "info"
              ],
              "description": "告警级别",
              "example": "critical"
            },
            "message": {
              "type": "string",
              "description": "告警消息",
              "example": "服务器CPU使用率达到95%，超过阈值"
            },
            "source_system": {
              "type": "string",
              "description": "告警来源系统",
              "example": "prometheus"
            },
            "alert_time": {
              "type": "string",
              "format": "date-time",
              "description": "告警时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "labels": {
              "type": "object",
              "description": "告警标签",
              "additionalProperties": {
                "type": "string"
              },
              "example": {
                "instance": "server-01",
                "job": "node-exporter"
              }
            },
            "annotations": {
              "type": "object",
              "description": "告警注释",
              "additionalProperties": {
                "type": "string"
              },
              "example": {
                "description": "CPU使用率过高",
                "runbook_url": "https://wiki.example.com/runbook/cpu-high"
              }
            }
          }
        },
        "ConnectionTestResult": {
          "type": "object",
          "description": "连接测试结果",
          "properties": {
            "success": {
              "type": "boolean",
              "description": "测试是否成功",
              "example": true
            },
            "response_time": {
              "type": "integer",
              "description": "响应时间（毫秒）",
              "example": 150
            },
            "error_message": {
              "type": "string",
              "description": "错误信息",
              "example": null
            },
            "test_data": {
              "type": "object",
              "description": "测试数据样例",
              "example": {
                "sample_count": 10,
                "data_format": "json"
              }
            }
          }
        },
        "SyncTask": {
          "type": "object",
          "description": "同步任务",
          "properties": {
            "task_id": {
              "type": "string",
              "description": "任务ID",
              "example": "sync_task_abc123"
            },
            "integration_id": {
              "type": "integer",
              "format": "int64",
              "description": "集成配置ID",
              "example": 1001
            },
            "status": {
              "$ref": "#/components/schemas/SyncTaskStatus"
            },
            "start_time": {
              "type": "string",
              "format": "date-time",
              "description": "开始时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "estimated_duration": {
              "type": "integer",
              "description": "预估时长（秒）",
              "example": 300
            },
            "progress": {
              "type": "integer",
              "description": "进度百分比",
              "example": 25
            }
          }
        },
        "SyncStatus": {
          "type": "object",
          "description": "同步状态",
          "properties": {
            "integration_id": {
              "type": "integer",
              "format": "int64",
              "description": "集成配置ID",
              "example": 1001
            },
            "current_task": {
              "$ref": "#/components/schemas/SyncTask"
            },
            "last_sync_time": {
              "type": "string",
              "format": "date-time",
              "description": "最后同步时间",
              "example": "2025-08-15T14:00:00Z"
            },
            "next_sync_time": {
              "type": "string",
              "format": "date-time",
              "description": "下次同步时间",
              "example": "2025-08-15T15:00:00Z"
            },
            "sync_count_today": {
              "type": "integer",
              "description": "今日同步次数",
              "example": 24
            },
            "success_rate": {
              "type": "number",
              "format": "double",
              "description": "成功率",
              "example": 98.5
            }
          }
        },
        "IntegrationStatus": {
          "type": "object",
          "description": "集成状态",
          "properties": {
            "integration_id": {
              "type": "integer",
              "format": "int64",
              "description": "集成配置ID",
              "example": 1001
            },
            "config_status": {
              "$ref": "#/components/schemas/ConfigStatus"
            },
            "connection_status": {
              "type": "string",
              "enum": [
                "connected",
                "disconnected",
                "error"
              ],
              "description": "连接状态",
              "example": "connected"
            },
            "last_check_time": {
              "type": "string",
              "format": "date-time",
              "description": "最后检查时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "sync_status": {
              "$ref": "#/components/schemas/SyncStatus"
            },
            "error_count_24h": {
              "type": "integer",
              "description": "24小时内错误次数",
              "example": 2
            },
            "avg_response_time": {
              "type": "number",
              "format": "double",
              "description": "平均响应时间（毫秒）",
              "example": 125.5
            }
          }
        },
        "BatchOperationResult": {
          "type": "object",
          "description": "批量操作结果",
          "properties": {
            "total_count": {
              "type": "integer",
              "description": "总数量",
              "example": 10
            },
            "success_count": {
              "type": "integer",
              "description": "成功数量",
              "example": 8
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 2
            },
            "failed_items": {
              "type": "array",
              "description": "失败项目列表",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer",
                    "format": "int64",
                    "description": "项目ID",
                    "example": 1003
                  },
                  "error_message": {
                    "type": "string",
                    "description": "错误信息",
                    "example": "配置编码已存在"
                  }
                }
              }
            }
          }
        },
        "AlertProcessResult": {
          "type": "object",
          "description": "告警处理结果",
          "properties": {
            "alert_id": {
              "type": "string",
              "description": "告警ID",
              "example": "alert_abc123"
            },
            "processed": {
              "type": "boolean",
              "description": "是否已处理",
              "example": true
            },
            "ticket_id": {
              "type": "string",
              "description": "创建的工单ID",
              "example": "TCK-20250815-0001"
            },
            "process_time": {
              "type": "string",
              "format": "date-time",
              "description": "处理时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "ConfigTemplate": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "format": "int64",
                  "description": "租户ID",
                  "example": 1
                },
                "template_name": {
                  "type": "string",
                  "description": "模板名称",
                  "example": "Prometheus监控模板"
                },
                "template_code": {
                  "type": "string",
                  "description": "模板编码",
                  "example": "prometheus_template"
                },
                "integration_type": {
                  "$ref": "#/components/schemas/IntegrationType"
                },
                "system_type": {
                  "type": "string",
                  "description": "系统类型",
                  "example": "prometheus"
                },
                "template_config": {
                  "type": "object",
                  "description": "模板配置",
                  "example": {
                    "default_endpoint": "http://prometheus:9090/api/v1",
                    "default_auth_type": "basic"
                  }
                },
                "description": {
                  "type": "string",
                  "description": "模板描述",
                  "example": "用于Prometheus监控系统集成的标准模板"
                },
                "is_public": {
                  "type": "boolean",
                  "description": "是否公共模板",
                  "example": false
                },
                "usage_count": {
                  "type": "integer",
                  "description": "使用次数",
                  "example": 15
                },
                "created_by": {
                  "type": "integer",
                  "format": "int64",
                  "description": "创建人ID",
                  "example": 1001
                }
              }
            }
          ]
        },
        "CreateConfigTemplateRequest": {
          "type": "object",
          "required": [
            "template_name",
            "template_code",
            "integration_type",
            "system_type",
            "template_config"
          ],
          "description": "创建配置模板请求",
          "properties": {
            "template_name": {
              "type": "string",
              "description": "模板名称",
              "example": "Prometheus监控模板"
            },
            "template_code": {
              "type": "string",
              "description": "模板编码",
              "example": "prometheus_template"
            },
            "integration_type": {
              "$ref": "#/components/schemas/IntegrationType"
            },
            "system_type": {
              "type": "string",
              "description": "系统类型",
              "example": "prometheus"
            },
            "template_config": {
              "type": "object",
              "description": "模板配置",
              "example": {
                "default_endpoint": "http://prometheus:9090/api/v1",
                "default_auth_type": "basic"
              }
            },
            "description": {
              "type": "string",
              "description": "模板描述",
              "example": "用于Prometheus监控系统集成的标准模板"
            },
            "is_public": {
              "type": "boolean",
              "description": "是否公共模板",
              "example": false
            }
          }
        },
        "HealthCheckResult": {
          "type": "object",
          "description": "健康检查结果",
          "properties": {
            "status": {
              "type": "string",
              "enum": [
                "healthy",
                "degraded",
                "unhealthy"
              ],
              "description": "健康状态",
              "example": "healthy"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "检查时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "components": {
              "type": "object",
              "description": "组件状态",
              "properties": {
                "database": {
                  "type": "string",
                  "example": "healthy"
                },
                "redis": {
                  "type": "string",
                  "example": "healthy"
                },
                "message_queue": {
                  "type": "string",
                  "example": "healthy"
                }
              }
            },
            "active_integrations": {
              "type": "integer",
              "description": "活跃集成数量",
              "example": 25
            },
            "total_integrations": {
              "type": "integer",
              "description": "总集成数量",
              "example": 30
            }
          }
        }
      },
      "issues": []
    },
    "REQ-019-客户自助服务模块": {
      "file_path": "docs/api/4.5.1/modules/REQ-019-客户自助服务模块/openapi.yaml",
      "components": {
        "CustomerPortalConfig": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "description": "租户ID",
                  "example": 100
                },
                "customer_id": {
                  "type": "integer",
                  "description": "客户ID",
                  "example": 5001
                },
                "portal_domain": {
                  "type": "string",
                  "description": "门户域名",
                  "example": "abc-tech.portal.example.com"
                },
                "portal_title": {
                  "type": "string",
                  "description": "门户标题",
                  "example": "ABC科技客户服务门户"
                },
                "logo_url": {
                  "type": "string",
                  "description": "LOGO地址",
                  "example": "https://cdn.example.com/logos/abc-tech.png"
                },
                "theme_color": {
                  "type": "string",
                  "description": "主题色",
                  "example": "#409EFF"
                },
                "welcome_message": {
                  "type": "string",
                  "description": "欢迎信息",
                  "example": "欢迎使用ABC科技客户服务门户，我们为您提供7x24小时自助服务"
                },
                "enabled_features": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "启用功能列表",
                  "example": [
                    "ai_chat",
                    "ticket_create",
                    "knowledge_search",
                    "feedback"
                  ]
                },
                "status": {
                  "type": "integer",
                  "enum": [
                    1,
                    2
                  ],
                  "description": "状态：1-启用，2-禁用",
                  "example": 1
                }
              }
            }
          ]
        },
        "CustomerPortalConfigUpdateRequest": {
          "type": "object",
          "properties": {
            "portal_title": {
              "type": "string",
              "description": "门户标题",
              "example": "ABC科技客户服务门户"
            },
            "logo_url": {
              "type": "string",
              "description": "LOGO地址",
              "example": "https://cdn.example.com/logos/abc-tech.png"
            },
            "theme_color": {
              "type": "string",
              "description": "主题色",
              "example": "#409EFF"
            },
            "welcome_message": {
              "type": "string",
              "description": "欢迎信息",
              "example": "欢迎使用ABC科技客户服务门户，我们为您提供7x24小时自助服务"
            },
            "enabled_features": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "启用功能列表",
              "example": [
                "ai_chat",
                "ticket_create",
                "knowledge_search",
                "feedback"
              ]
            }
          }
        },
        "SearchResult": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string",
                  "description": "标题",
                  "example": "服务器连接故障排查指南"
                },
                "content": {
                  "type": "string",
                  "description": "内容摘要",
                  "example": "当服务器出现连接问题时，可以按照以下步骤进行排查..."
                },
                "type": {
                  "type": "string",
                  "enum": [
                    "faq",
                    "knowledge_article",
                    "document"
                  ],
                  "description": "结果类型",
                  "example": "knowledge_article"
                },
                "category": {
                  "type": "string",
                  "description": "分类",
                  "example": "网络故障"
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "标签",
                  "example": [
                    "服务器",
                    "网络",
                    "故障排查"
                  ]
                },
                "relevance_score": {
                  "type": "number",
                  "description": "相关性评分",
                  "example": 0.95
                },
                "url": {
                  "type": "string",
                  "description": "详情链接",
                  "example": "/knowledge/articles/1001"
                }
              }
            }
          ]
        },
        "AIChatRequest": {
          "type": "object",
          "required": [
            "question"
          ],
          "properties": {
            "question": {
              "type": "string",
              "description": "用户问题",
              "example": "服务器连接不上怎么办？"
            },
            "session_id": {
              "type": "string",
              "description": "会话ID",
              "example": "SESS-20250814-0001"
            },
            "context": {
              "type": "object",
              "description": "上下文信息",
              "properties": {
                "previous_questions": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "之前的问题",
                  "example": [
                    "网络问题",
                    "服务器状态"
                  ]
                },
                "user_role": {
                  "type": "string",
                  "description": "用户角色",
                  "example": "IT管理员"
                },
                "customer_context": {
                  "type": "object",
                  "description": "客户上下文",
                  "properties": {
                    "industry": {
                      "type": "string",
                      "description": "行业",
                      "example": "金融"
                    },
                    "system_type": {
                      "type": "string",
                      "description": "系统类型",
                      "example": "核心业务系统"
                    }
                  }
                }
              }
            },
            "options": {
              "type": "object",
              "description": "选项配置",
              "properties": {
                "include_recommendations": {
                  "type": "boolean",
                  "description": "是否包含推荐",
                  "example": true
                },
                "max_results": {
                  "type": "integer",
                  "description": "最大结果数",
                  "example": 5
                },
                "confidence_threshold": {
                  "type": "number",
                  "description": "置信度阈值",
                  "example": 0.7
                }
              }
            }
          }
        },
        "AIChatResponse": {
          "type": "object",
          "properties": {
            "answer": {
              "type": "string",
              "description": "AI回答",
              "example": "服务器连接问题可能由以下原因导致：1. 网络连接异常 2. 服务器服务停止 3. 防火墙阻拦。建议您先检查网络连接，然后查看服务器状态。"
            },
            "confidence": {
              "type": "number",
              "description": "置信度",
              "example": 0.92
            },
            "session_id": {
              "type": "string",
              "description": "会话ID",
              "example": "SESS-20250814-0001"
            },
            "interaction_id": {
              "type": "string",
              "description": "交互ID",
              "example": "INT-20250814-0001"
            },
            "response_time": {
              "type": "integer",
              "description": "响应时间（毫秒）",
              "example": 2850
            },
            "related_articles": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer",
                    "description": "文章ID",
                    "example": 1001
                  },
                  "title": {
                    "type": "string",
                    "description": "文章标题",
                    "example": "服务器连接故障排查指南"
                  },
                  "url": {
                    "type": "string",
                    "description": "文章链接",
                    "example": "/knowledge/articles/1001"
                  },
                  "relevance": {
                    "type": "number",
                    "description": "相关性",
                    "example": 0.95
                  },
                  "category": {
                    "type": "string",
                    "description": "分类",
                    "example": "网络故障"
                  }
                }
              },
              "description": "相关文章"
            },
            "suggested_actions": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "action": {
                    "type": "string",
                    "description": "建议操作",
                    "example": "检查网络连接"
                  },
                  "priority": {
                    "type": "integer",
                    "description": "优先级",
                    "example": 1
                  },
                  "description": {
                    "type": "string",
                    "description": "操作描述",
                    "example": "使用ping命令测试网络连通性"
                  }
                }
              },
              "description": "建议操作"
            },
            "follow_up_questions": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "后续问题建议",
              "example": [
                "网络连接正常但仍无法访问怎么办？",
                "如何检查服务器服务状态？"
              ]
            }
          }
        },
        "SelfServiceSession": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "session_id": {
                  "type": "string",
                  "description": "会话标识",
                  "example": "SESS-20250814-0001"
                },
                "tenant_id": {
                  "type": "integer",
                  "description": "租户ID",
                  "example": 100
                },
                "customer_id": {
                  "type": "integer",
                  "description": "客户ID",
                  "example": 5001
                },
                "user_id": {
                  "type": "integer",
                  "description": "用户ID",
                  "example": 10001
                },
                "session_type": {
                  "type": "string",
                  "enum": [
                    "search",
                    "ai_chat",
                    "ticket"
                  ],
                  "description": "会话类型",
                  "example": "ai_chat"
                },
                "initial_question": {
                  "type": "string",
                  "description": "初始问题",
                  "example": "服务器连接不上怎么办？"
                },
                "resolution_status": {
                  "type": "string",
                  "enum": [
                    "pending",
                    "resolved",
                    "escalated"
                  ],
                  "description": "解决状态",
                  "example": "resolved"
                },
                "satisfaction_score": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 5,
                  "description": "满意度评分",
                  "example": 5
                },
                "session_duration": {
                  "type": "integer",
                  "description": "会话时长（秒）",
                  "example": 300
                },
                "interaction_count": {
                  "type": "integer",
                  "description": "交互次数",
                  "example": 5
                },
                "ended_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "结束时间",
                  "example": "2025-08-14T14:30:00Z"
                }
              }
            }
          ]
        },
        "PortalTicketCreateRequest": {
          "type": "object",
          "required": [
            "title",
            "description",
            "priority",
            "category"
          ],
          "properties": {
            "title": {
              "type": "string",
              "description": "工单标题",
              "example": "服务器CPU使用率过高"
            },
            "description": {
              "type": "string",
              "description": "问题描述",
              "example": "生产服务器CPU使用率持续超过90%，影响业务正常运行"
            },
            "priority": {
              "type": "integer",
              "minimum": 1,
              "maximum": 4,
              "description": "优先级：1-紧急，2-高，3-中，4-低",
              "example": 2
            },
            "category": {
              "type": "string",
              "description": "问题分类",
              "example": "性能问题"
            },
            "contact_phone": {
              "type": "string",
              "description": "联系电话",
              "example": "13800138000"
            },
            "contact_email": {
              "type": "string",
              "description": "联系邮箱",
              "example": "user@abc-tech.com"
            },
            "expected_resolution_time": {
              "type": "string",
              "format": "date-time",
              "description": "期望解决时间",
              "example": "2025-08-14T18:00:00Z"
            },
            "attachments": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "file_name": {
                    "type": "string",
                    "description": "文件名",
                    "example": "error_log.txt"
                  },
                  "file_content": {
                    "type": "string",
                    "format": "byte",
                    "description": "文件内容（Base64编码）"
                  }
                }
              },
              "description": "附件列表"
            }
          }
        },
        "PortalTicketCreateResponse": {
          "type": "object",
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "ticket_no": {
              "type": "string",
              "description": "工单编号",
              "example": "TCK-20250814-0001"
            },
            "status": {
              "type": "string",
              "description": "工单状态",
              "example": "NEW"
            },
            "estimated_resolution_time": {
              "type": "string",
              "format": "date-time",
              "description": "预计解决时间",
              "example": "2025-08-14T18:00:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-14T10:00:00Z"
            }
          }
        },
        "PortalTicketListItem": {
          "type": "object",
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "ticket_no": {
              "type": "string",
              "description": "工单编号",
              "example": "TCK-20250814-0001"
            },
            "title": {
              "type": "string",
              "description": "工单标题",
              "example": "服务器CPU使用率过高"
            },
            "status": {
              "type": "string",
              "description": "工单状态",
              "example": "IN_PROGRESS"
            },
            "priority": {
              "type": "integer",
              "description": "优先级",
              "example": 2
            },
            "priority_name": {
              "type": "string",
              "description": "优先级名称",
              "example": "高"
            },
            "category": {
              "type": "string",
              "description": "问题分类",
              "example": "性能问题"
            },
            "assigned_engineer_name": {
              "type": "string",
              "description": "分配工程师",
              "example": "张三"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-14T10:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-14T14:30:00Z"
            },
            "due_date": {
              "type": "string",
              "format": "date-time",
              "description": "截止时间",
              "example": "2025-08-14T18:00:00Z"
            }
          }
        },
        "PortalTicketDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/PortalTicketListItem"
            },
            {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "description": "问题描述",
                  "example": "生产服务器CPU使用率持续超过90%，影响业务正常运行"
                },
                "contact_phone": {
                  "type": "string",
                  "description": "联系电话",
                  "example": "13800138000"
                },
                "contact_email": {
                  "type": "string",
                  "description": "联系邮箱",
                  "example": "user@abc-tech.com"
                },
                "resolution_description": {
                  "type": "string",
                  "description": "解决方案描述",
                  "example": "已优化服务器配置，CPU使用率恢复正常"
                },
                "attachments": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "description": "附件ID",
                        "example": 67890
                      },
                      "file_name": {
                        "type": "string",
                        "description": "文件名",
                        "example": "error_log.txt"
                      },
                      "file_size": {
                        "type": "integer",
                        "description": "文件大小（字节）",
                        "example": 1024
                      },
                      "download_url": {
                        "type": "string",
                        "description": "下载链接",
                        "example": "/api/v1/customer-portal/tickets/12345/attachments/67890/download"
                      }
                    }
                  },
                  "description": "附件列表"
                },
                "processing_logs": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "action_type": {
                        "type": "string",
                        "description": "操作类型",
                        "example": "ASSIGN"
                      },
                      "action_description": {
                        "type": "string",
                        "description": "操作描述",
                        "example": "工单已分配给张工程师"
                      },
                      "operator_name": {
                        "type": "string",
                        "description": "操作人",
                        "example": "系统管理员"
                      },
                      "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "description": "操作时间",
                        "example": "2025-08-14T10:35:00Z"
                      }
                    }
                  },
                  "description": "处理记录"
                }
              }
            }
          ]
        },
        "PortalTicketStatus": {
          "type": "object",
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "ticket_no": {
              "type": "string",
              "description": "工单编号",
              "example": "TCK-20250814-0001"
            },
            "current_status": {
              "type": "string",
              "description": "当前状态",
              "example": "IN_PROGRESS"
            },
            "progress_percentage": {
              "type": "integer",
              "description": "进度百分比",
              "example": 60
            },
            "estimated_completion_time": {
              "type": "string",
              "format": "date-time",
              "description": "预计完成时间",
              "example": "2025-08-14T18:00:00Z"
            },
            "assigned_engineer": {
              "type": "object",
              "properties": {
                "engineer_id": {
                  "type": "integer",
                  "description": "工程师ID",
                  "example": 1001
                },
                "engineer_name": {
                  "type": "string",
                  "description": "工程师姓名",
                  "example": "张三"
                },
                "contact_phone": {
                  "type": "string",
                  "description": "联系电话",
                  "example": "13900139000"
                }
              },
              "description": "分配工程师信息"
            },
            "last_update": {
              "type": "object",
              "properties": {
                "update_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "更新时间",
                  "example": "2025-08-14T14:30:00Z"
                },
                "update_description": {
                  "type": "string",
                  "description": "更新描述",
                  "example": "正在分析服务器性能数据"
                }
              },
              "description": "最新更新"
            }
          }
        },
        "CustomerFeedbackRequest": {
          "type": "object",
          "required": [
            "feedback_type",
            "feedback_content"
          ],
          "properties": {
            "feedback_type": {
              "type": "string",
              "enum": [
                "service",
                "feature",
                "bug",
                "suggestion"
              ],
              "description": "反馈类型",
              "example": "service"
            },
            "related_id": {
              "type": "string",
              "description": "关联ID（工单、知识、会话等）",
              "example": "TCK-20250814-0001"
            },
            "related_type": {
              "type": "string",
              "enum": [
                "ticket",
                "knowledge",
                "session"
              ],
              "description": "关联类型",
              "example": "ticket"
            },
            "rating": {
              "type": "integer",
              "minimum": 1,
              "maximum": 5,
              "description": "评分",
              "example": 5
            },
            "feedback_content": {
              "type": "string",
              "description": "反馈内容",
              "example": "工程师响应及时，问题解决得很好"
            },
            "suggestions": {
              "type": "string",
              "description": "改进建议",
              "example": "希望能提供更详细的解决方案文档"
            },
            "contact_required": {
              "type": "boolean",
              "description": "是否需要回访",
              "example": false
            }
          }
        },
        "CustomerFeedbackResponse": {
          "type": "object",
          "properties": {
            "feedback_id": {
              "type": "integer",
              "description": "反馈ID",
              "example": 3001
            },
            "feedback_no": {
              "type": "string",
              "description": "反馈编号",
              "example": "FB-20250814-0001"
            },
            "status": {
              "type": "string",
              "enum": [
                "pending",
                "processing",
                "processed",
                "closed"
              ],
              "description": "处理状态",
              "example": "pending"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-14T14:30:00Z"
            }
          }
        },
        "CustomerFeedback": {
          "allOf": [
            {
              "$ref": "#/components/schemas/CustomerFeedbackResponse"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "description": "租户ID",
                  "example": 100
                },
                "customer_id": {
                  "type": "integer",
                  "description": "客户ID",
                  "example": 5001
                },
                "user_id": {
                  "type": "integer",
                  "description": "用户ID",
                  "example": 10001
                },
                "feedback_type": {
                  "type": "string",
                  "enum": [
                    "service",
                    "feature",
                    "bug",
                    "suggestion"
                  ],
                  "description": "反馈类型",
                  "example": "service"
                },
                "related_id": {
                  "type": "string",
                  "description": "关联ID",
                  "example": "TCK-20250814-0001"
                },
                "related_type": {
                  "type": "string",
                  "enum": [
                    "ticket",
                    "knowledge",
                    "session"
                  ],
                  "description": "关联类型",
                  "example": "ticket"
                },
                "rating": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 5,
                  "description": "评分",
                  "example": 5
                },
                "feedback_content": {
                  "type": "string",
                  "description": "反馈内容",
                  "example": "工程师响应及时，问题解决得很好"
                },
                "suggestions": {
                  "type": "string",
                  "description": "改进建议",
                  "example": "希望能提供更详细的解决方案文档"
                },
                "priority_level": {
                  "type": "integer",
                  "enum": [
                    1,
                    2,
                    3
                  ],
                  "description": "优先级：1-高，2-中，3-低",
                  "example": 2
                },
                "sentiment_score": {
                  "type": "number",
                  "description": "情感分析得分",
                  "example": 0.85
                },
                "processed_by": {
                  "type": "integer",
                  "description": "处理人ID",
                  "example": 2001
                },
                "processed_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "处理时间",
                  "example": "2025-08-15T09:00:00Z"
                },
                "response_content": {
                  "type": "string",
                  "description": "回复内容",
                  "example": "感谢您的反馈，我们会继续改进服务质量"
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "更新时间",
                  "example": "2025-08-15T09:00:00Z"
                }
              }
            }
          ]
        },
        "ServiceStatusOverview": {
          "type": "object",
          "properties": {
            "overall_status": {
              "type": "string",
              "enum": [
                "normal",
                "warning",
                "critical",
                "maintenance"
              ],
              "description": "整体状态",
              "example": "normal"
            },
            "system_health": {
              "type": "object",
              "properties": {
                "cpu_usage": {
                  "type": "number",
                  "description": "CPU使用率",
                  "example": 65.5
                },
                "memory_usage": {
                  "type": "number",
                  "description": "内存使用率",
                  "example": 72.3
                },
                "disk_usage": {
                  "type": "number",
                  "description": "磁盘使用率",
                  "example": 45.8
                },
                "network_status": {
                  "type": "string",
                  "enum": [
                    "normal",
                    "slow",
                    "disconnected"
                  ],
                  "description": "网络状态",
                  "example": "normal"
                }
              },
              "description": "系统健康状况"
            },
            "service_availability": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "service_name": {
                    "type": "string",
                    "description": "服务名称",
                    "example": "工单系统"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "online",
                      "offline",
                      "maintenance"
                    ],
                    "description": "服务状态",
                    "example": "online"
                  },
                  "uptime_percentage": {
                    "type": "number",
                    "description": "可用性百分比",
                    "example": 99.9
                  }
                }
              },
              "description": "服务可用性"
            },
            "maintenance_schedule": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "maintenance_id": {
                    "type": "integer",
                    "description": "维护ID",
                    "example": 5001
                  },
                  "title": {
                    "type": "string",
                    "description": "维护标题",
                    "example": "系统升级维护"
                  },
                  "description": {
                    "type": "string",
                    "description": "维护描述",
                    "example": "进行系统版本升级，预计影响时间2小时"
                  },
                  "start_time": {
                    "type": "string",
                    "format": "date-time",
                    "description": "开始时间",
                    "example": "2025-08-15T02:00:00Z"
                  },
                  "end_time": {
                    "type": "string",
                    "format": "date-time",
                    "description": "结束时间",
                    "example": "2025-08-15T04:00:00Z"
                  },
                  "impact_level": {
                    "type": "string",
                    "enum": [
                      "low",
                      "medium",
                      "high"
                    ],
                    "description": "影响级别",
                    "example": "medium"
                  }
                }
              },
              "description": "维护计划"
            },
            "last_updated": {
              "type": "string",
              "format": "date-time",
              "description": "最后更新时间",
              "example": "2025-08-14T14:30:00Z"
            }
          }
        },
        "DocumentInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string",
                  "description": "文档标题",
                  "example": "系统操作手册"
                },
                "description": {
                  "type": "string",
                  "description": "文档描述",
                  "example": "详细介绍系统各功能模块的操作方法"
                },
                "category": {
                  "type": "string",
                  "enum": [
                    "manual",
                    "guide",
                    "policy",
                    "report"
                  ],
                  "description": "文档分类",
                  "example": "manual"
                },
                "file_name": {
                  "type": "string",
                  "description": "文件名",
                  "example": "system_manual_v2.1.pdf"
                },
                "file_size": {
                  "type": "integer",
                  "description": "文件大小（字节）",
                  "example": 2048576
                },
                "file_type": {
                  "type": "string",
                  "description": "文件类型",
                  "example": "application/pdf"
                },
                "version": {
                  "type": "string",
                  "description": "版本号",
                  "example": "v2.1"
                },
                "download_count": {
                  "type": "integer",
                  "description": "下载次数",
                  "example": 156
                }
              }
            }
          ]
        },
        "UserBehaviorTrackRequest": {
          "type": "object",
          "required": [
            "page_path",
            "action_type"
          ],
          "properties": {
            "session_id": {
              "type": "string",
              "description": "会话ID",
              "example": "SESS-20250814-0001"
            },
            "page_path": {
              "type": "string",
              "description": "页面路径",
              "example": "/customer-portal/search"
            },
            "action_type": {
              "type": "string",
              "enum": [
                "view",
                "search",
                "click",
                "download",
                "submit"
              ],
              "description": "行为类型",
              "example": "search"
            },
            "action_target": {
              "type": "string",
              "description": "行为目标",
              "example": "搜索按钮"
            },
            "search_keywords": {
              "type": "string",
              "description": "搜索关键词",
              "example": "服务器连接问题"
            },
            "stay_duration": {
              "type": "integer",
              "description": "停留时长（秒）",
              "example": 120
            },
            "device_type": {
              "type": "string",
              "enum": [
                "desktop",
                "mobile",
                "tablet"
              ],
              "description": "设备类型",
              "example": "desktop"
            },
            "browser_info": {
              "type": "string",
              "description": "浏览器信息",
              "example": "Chrome/91.0.4472.124"
            },
            "referrer_url": {
              "type": "string",
              "description": "来源URL",
              "example": "https://www.google.com"
            }
          }
        },
        "FAQItem": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "question": {
                  "type": "string",
                  "description": "问题",
                  "example": "如何重置密码？"
                },
                "answer": {
                  "type": "string",
                  "description": "答案",
                  "example": "您可以在登录页面点击'忘记密码'链接，按照提示进行密码重置"
                },
                "category": {
                  "type": "string",
                  "description": "分类",
                  "example": "账户管理"
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "标签",
                  "example": [
                    "密码",
                    "重置",
                    "账户"
                  ]
                },
                "view_count": {
                  "type": "integer",
                  "description": "查看次数",
                  "example": 245
                },
                "helpful_count": {
                  "type": "integer",
                  "description": "有用评价次数",
                  "example": 198
                }
              }
            }
          ]
        },
        "FAQDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/FAQItem"
            },
            {
              "type": "object",
              "properties": {
                "detailed_answer": {
                  "type": "string",
                  "description": "详细答案",
                  "example": "密码重置的详细步骤：1. 访问登录页面 2. 点击'忘记密码' 3. 输入注册邮箱 4. 查收重置邮件 5. 按照邮件指引设置新密码"
                },
                "related_articles": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "description": "文章ID",
                        "example": 2001
                      },
                      "title": {
                        "type": "string",
                        "description": "文章标题",
                        "example": "账户安全设置指南"
                      },
                      "url": {
                        "type": "string",
                        "description": "文章链接",
                        "example": "/knowledge/articles/2001"
                      }
                    }
                  },
                  "description": "相关文章"
                },
                "attachments": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "file_name": {
                        "type": "string",
                        "description": "文件名",
                        "example": "password_reset_guide.pdf"
                      },
                      "download_url": {
                        "type": "string",
                        "description": "下载链接",
                        "example": "/api/v1/customer-portal/faq/1001/attachments/password_reset_guide.pdf"
                      }
                    }
                  },
                  "description": "附件列表"
                }
              }
            }
          ]
        }
      },
      "issues": []
    },
    "REQ-004-智能派单系统": {
      "file_path": "docs/api/4.5.1/modules/REQ-004-智能派单系统/openapi.yaml",
      "components": {
        "AutoDispatchRequest": {
          "type": "object",
          "required": [
            "ticket_id"
          ],
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "dispatch_mode": {
              "type": "string",
              "enum": [
                "auto",
                "smart",
                "rule_based"
              ],
              "default": "auto",
              "description": "派单模式",
              "example": "auto"
            },
            "constraints": {
              "type": "object",
              "description": "派单约束条件",
              "properties": {
                "required_skills": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "必需技能",
                  "example": [
                    "Java",
                    "Spring Boot"
                  ]
                },
                "preferred_skills": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "优选技能",
                  "example": [
                    "微服务",
                    "Docker"
                  ]
                },
                "max_distance": {
                  "type": "number",
                  "description": "最大距离（公里）",
                  "example": 50.0
                },
                "exclude_engineers": {
                  "type": "array",
                  "items": {
                    "type": "integer"
                  },
                  "description": "排除的工程师ID",
                  "example": [
                    101,
                    102
                  ]
                },
                "customer_preference": {
                  "type": "object",
                  "description": "客户偏好",
                  "properties": {
                    "preferred_engineers": {
                      "type": "array",
                      "items": {
                        "type": "integer"
                      },
                      "description": "偏好工程师ID",
                      "example": [
                        201,
                        202
                      ]
                    },
                    "language": {
                      "type": "string",
                      "description": "语言偏好",
                      "example": "zh-CN"
                    }
                  }
                }
              }
            },
            "algorithm_config": {
              "type": "object",
              "description": "算法配置",
              "properties": {
                "use_ml_model": {
                  "type": "boolean",
                  "default": true,
                  "description": "是否使用机器学习模型",
                  "example": true
                },
                "model_version": {
                  "type": "string",
                  "description": "模型版本",
                  "example": "v2.1.0"
                },
                "weights": {
                  "$ref": "#/components/schemas/AlgorithmWeights"
                }
              }
            },
            "options": {
              "type": "object",
              "description": "选项配置",
              "properties": {
                "return_candidates": {
                  "type": "boolean",
                  "default": false,
                  "description": "是否返回候选人列表",
                  "example": true
                },
                "candidate_count": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 20,
                  "default": 5,
                  "description": "候选人数量",
                  "example": 5
                },
                "explain_decision": {
                  "type": "boolean",
                  "default": false,
                  "description": "是否解释决策过程",
                  "example": true
                },
                "async_mode": {
                  "type": "boolean",
                  "default": false,
                  "description": "是否异步模式",
                  "example": false
                }
              }
            }
          }
        },
        "ManualDispatchRequest": {
          "type": "object",
          "required": [
            "ticket_id",
            "engineer_id"
          ],
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "engineer_id": {
              "type": "integer",
              "description": "指定工程师ID",
              "example": 67890
            },
            "reason": {
              "type": "string",
              "description": "手动派单原因",
              "example": "客户指定工程师"
            },
            "priority_override": {
              "type": "boolean",
              "default": false,
              "description": "是否覆盖优先级检查",
              "example": false
            },
            "force_assign": {
              "type": "boolean",
              "default": false,
              "description": "是否强制分配（忽略负载限制）",
              "example": false
            }
          }
        },
        "BatchDispatchRequest": {
          "type": "object",
          "required": [
            "tickets"
          ],
          "properties": {
            "tickets": {
              "type": "array",
              "maxItems": 1000,
              "items": {
                "type": "object",
                "properties": {
                  "ticket_id": {
                    "type": "integer",
                    "description": "工单ID",
                    "example": 12345
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "low",
                      "medium",
                      "high",
                      "urgent"
                    ],
                    "description": "优先级",
                    "example": "high"
                  },
                  "constraints": {
                    "type": "object",
                    "description": "约束条件",
                    "properties": {
                      "required_skills": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "example": [
                          "Java"
                        ]
                      },
                      "max_distance": {
                        "type": "number",
                        "example": 30.0
                      }
                    }
                  }
                }
              },
              "description": "工单列表"
            },
            "batch_config": {
              "type": "object",
              "description": "批量配置",
              "properties": {
                "parallel_processing": {
                  "type": "boolean",
                  "default": true,
                  "description": "是否并行处理",
                  "example": true
                },
                "max_parallel_count": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 50,
                  "default": 10,
                  "description": "最大并行数",
                  "example": 10
                },
                "timeout_seconds": {
                  "type": "integer",
                  "minimum": 60,
                  "maximum": 3600,
                  "default": 300,
                  "description": "超时时间（秒）",
                  "example": 300
                },
                "fail_fast": {
                  "type": "boolean",
                  "default": false,
                  "description": "是否快速失败",
                  "example": false
                }
              }
            },
            "global_constraints": {
              "type": "object",
              "description": "全局约束",
              "properties": {
                "max_workload_per_engineer": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 20,
                  "default": 5,
                  "description": "每个工程师最大工作负载",
                  "example": 5
                },
                "balance_workload": {
                  "type": "boolean",
                  "default": true,
                  "description": "是否均衡负载",
                  "example": true
                }
              }
            }
          }
        },
        "ReassignRequest": {
          "type": "object",
          "properties": {
            "reason": {
              "type": "string",
              "description": "重新派单原因",
              "example": "原工程师不可用"
            },
            "new_engineer_id": {
              "type": "integer",
              "description": "新工程师ID（可选）",
              "example": 78901
            },
            "exclude_previous": {
              "type": "boolean",
              "default": true,
              "description": "是否排除之前的工程师",
              "example": true
            },
            "use_smart_algorithm": {
              "type": "boolean",
              "default": true,
              "description": "是否使用智能算法",
              "example": true
            }
          }
        },
        "CancelDispatchRequest": {
          "type": "object",
          "required": [
            "reason"
          ],
          "properties": {
            "reason": {
              "type": "string",
              "description": "撤销原因",
              "example": "工单已取消"
            },
            "notify_engineer": {
              "type": "boolean",
              "default": true,
              "description": "是否通知工程师",
              "example": true
            }
          }
        },
        "CandidatesRequest": {
          "type": "object",
          "required": [
            "ticket_id"
          ],
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "limit": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50,
              "default": 10,
              "description": "返回候选人数量",
              "example": 10
            },
            "include_scores": {
              "type": "boolean",
              "default": true,
              "description": "是否包含评分详情",
              "example": true
            },
            "include_explanation": {
              "type": "boolean",
              "default": false,
              "description": "是否包含评分解释",
              "example": false
            }
          }
        },
        "DispatchResult": {
          "type": "object",
          "properties": {
            "dispatch_id": {
              "type": "string",
              "description": "派单ID",
              "example": "dp_20240814_001"
            },
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "selected_engineer": {
              "type": "object",
              "description": "选中的工程师",
              "properties": {
                "engineer_id": {
                  "type": "integer",
                  "description": "工程师ID",
                  "example": 201
                },
                "engineer_name": {
                  "type": "string",
                  "description": "工程师姓名",
                  "example": "张工程师"
                },
                "match_score": {
                  "type": "number",
                  "description": "匹配评分",
                  "example": 92.5
                },
                "estimated_completion_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "预计完成时间",
                  "example": "2024-08-14T18:00:00Z"
                }
              }
            },
            "decision_explanation": {
              "type": "object",
              "description": "决策解释",
              "properties": {
                "total_score": {
                  "type": "number",
                  "description": "总评分",
                  "example": 92.5
                },
                "score_breakdown": {
                  "type": "object",
                  "description": "评分明细",
                  "properties": {
                    "skill_match": {
                      "type": "number",
                      "description": "技能匹配评分",
                      "example": 95.0
                    },
                    "workload": {
                      "type": "number",
                      "description": "负载评分",
                      "example": 88.0
                    },
                    "location": {
                      "type": "number",
                      "description": "位置评分",
                      "example": 90.0
                    },
                    "performance": {
                      "type": "number",
                      "description": "绩效评分",
                      "example": 94.0
                    },
                    "sla_priority": {
                      "type": "number",
                      "description": "SLA优先级评分",
                      "example": 85.0
                    }
                  }
                },
                "decision_factors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "决策因素",
                  "example": [
                    "技能匹配度极高（Java专家级别）",
                    "当前负载适中（2个工单）",
                    "地理位置优势（距离15公里）",
                    "历史绩效优秀（满意度4.8分）"
                  ]
                }
              }
            },
            "candidates": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "engineer_id": {
                    "type": "integer",
                    "description": "工程师ID",
                    "example": 202
                  },
                  "engineer_name": {
                    "type": "string",
                    "description": "工程师姓名",
                    "example": "李工程师"
                  },
                  "match_score": {
                    "type": "number",
                    "description": "匹配评分",
                    "example": 89.2
                  },
                  "rank": {
                    "type": "integer",
                    "description": "排名",
                    "example": 2
                  }
                }
              },
              "description": "候选工程师列表"
            },
            "algorithm_info": {
              "type": "object",
              "description": "算法信息",
              "properties": {
                "algorithm_version": {
                  "type": "string",
                  "description": "算法版本",
                  "example": "v2.1.0"
                },
                "execution_time": {
                  "type": "integer",
                  "description": "执行时间（毫秒）",
                  "example": 1250
                },
                "candidate_pool_size": {
                  "type": "integer",
                  "description": "候选池大小",
                  "example": 15
                },
                "model_confidence": {
                  "type": "number",
                  "description": "模型置信度",
                  "example": 0.92
                }
              }
            }
          }
        },
        "AlgorithmWeights": {
          "type": "object",
          "properties": {
            "skill_weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "技能权重",
              "example": 0.35
            },
            "workload_weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "负载权重",
              "example": 0.25
            },
            "location_weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "位置权重",
              "example": 0.15
            },
            "performance_weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "绩效权重",
              "example": 0.15
            },
            "sla_weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "SLA权重",
              "example": 0.1
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-14T10:30:00Z"
            },
            "updated_by": {
              "type": "string",
              "description": "更新人",
              "example": "admin"
            }
          }
        },
        "AlgorithmWeightsUpdateRequest": {
          "type": "object",
          "required": [
            "skill_weight",
            "workload_weight",
            "location_weight",
            "performance_weight",
            "sla_weight"
          ],
          "properties": {
            "skill_weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "技能权重",
              "example": 0.4
            },
            "workload_weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "负载权重",
              "example": 0.25
            },
            "location_weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "位置权重",
              "example": 0.15
            },
            "performance_weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "绩效权重",
              "example": 0.15
            },
            "sla_weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "SLA权重",
              "example": 0.05
            },
            "reason": {
              "type": "string",
              "description": "更新原因",
              "example": "优化技能匹配权重"
            }
          }
        },
        "DispatchRule": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "rule_name": {
                  "type": "string",
                  "description": "规则名称",
                  "example": "VIP客户优先派单"
                },
                "rule_type": {
                  "type": "string",
                  "enum": [
                    "FILTER",
                    "WEIGHT",
                    "PRIORITY",
                    "CONSTRAINT"
                  ],
                  "description": "规则类型",
                  "example": "PRIORITY"
                },
                "rule_category": {
                  "type": "string",
                  "description": "规则分类",
                  "example": "customer_priority"
                },
                "conditions": {
                  "type": "object",
                  "description": "触发条件",
                  "example": {
                    "customer_level": "VIP",
                    "priority": [
                      "high",
                      "urgent"
                    ]
                  }
                },
                "actions": {
                  "type": "object",
                  "description": "执行动作",
                  "example": {
                    "weight_multiplier": 1.5,
                    "max_response_time": 300
                  }
                },
                "priority": {
                  "type": "integer",
                  "description": "规则优先级",
                  "example": 10
                },
                "weight": {
                  "type": "number",
                  "description": "规则权重",
                  "example": 1.0
                },
                "is_enabled": {
                  "type": "boolean",
                  "description": "是否启用",
                  "example": true
                },
                "execution_count": {
                  "type": "integer",
                  "description": "执行次数",
                  "example": 156
                },
                "success_count": {
                  "type": "integer",
                  "description": "成功次数",
                  "example": 152
                },
                "last_execution_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "最后执行时间",
                  "example": "2024-08-14T10:30:00Z"
                },
                "effective_start_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "生效开始时间",
                  "example": "2024-08-01T00:00:00Z"
                },
                "effective_end_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "生效结束时间",
                  "example": "2024-12-31T23:59:59Z"
                }
              }
            }
          ]
        },
        "DispatchRuleCreateRequest": {
          "type": "object",
          "required": [
            "rule_name",
            "rule_type",
            "conditions",
            "actions"
          ],
          "properties": {
            "rule_name": {
              "type": "string",
              "maxLength": 100,
              "description": "规则名称",
              "example": "紧急工单快速派单"
            },
            "rule_type": {
              "type": "string",
              "enum": [
                "FILTER",
                "WEIGHT",
                "PRIORITY",
                "CONSTRAINT"
              ],
              "description": "规则类型",
              "example": "PRIORITY"
            },
            "rule_category": {
              "type": "string",
              "maxLength": 50,
              "description": "规则分类",
              "example": "urgency_handling"
            },
            "conditions": {
              "type": "object",
              "description": "触发条件",
              "example": {
                "priority": [
                  "urgent"
                ],
                "sla_level": [
                  "gold",
                  "platinum"
                ]
              }
            },
            "actions": {
              "type": "object",
              "description": "执行动作",
              "example": {
                "max_response_time": 180,
                "preferred_skill_level": 3
              }
            },
            "priority": {
              "type": "integer",
              "minimum": 0,
              "default": 100,
              "description": "规则优先级",
              "example": 5
            },
            "weight": {
              "type": "number",
              "minimum": 0,
              "default": 1.0,
              "description": "规则权重",
              "example": 1.2
            },
            "effective_start_time": {
              "type": "string",
              "format": "date-time",
              "description": "生效开始时间",
              "example": "2024-08-15T00:00:00Z"
            },
            "effective_end_time": {
              "type": "string",
              "format": "date-time",
              "description": "生效结束时间",
              "example": "2024-12-31T23:59:59Z"
            }
          }
        },
        "DispatchRuleUpdateRequest": {
          "type": "object",
          "properties": {
            "rule_name": {
              "type": "string",
              "maxLength": 100,
              "description": "规则名称",
              "example": "紧急工单快速派单（已优化）"
            },
            "conditions": {
              "type": "object",
              "description": "触发条件",
              "example": {
                "priority": [
                  "urgent"
                ],
                "sla_level": [
                  "gold",
                  "platinum"
                ],
                "business_hours": true
              }
            },
            "actions": {
              "type": "object",
              "description": "执行动作",
              "example": {
                "max_response_time": 120,
                "preferred_skill_level": 3,
                "notify_manager": true
              }
            },
            "priority": {
              "type": "integer",
              "minimum": 0,
              "description": "规则优先级",
              "example": 3
            },
            "weight": {
              "type": "number",
              "minimum": 0,
              "description": "规则权重",
              "example": 1.5
            },
            "is_enabled": {
              "type": "boolean",
              "description": "是否启用",
              "example": true
            },
            "effective_start_time": {
              "type": "string",
              "format": "date-time",
              "description": "生效开始时间",
              "example": "2024-08-15T00:00:00Z"
            },
            "effective_end_time": {
              "type": "string",
              "format": "date-time",
              "description": "生效结束时间",
              "example": "2024-12-31T23:59:59Z"
            }
          }
        },
        "DispatchStrategy": {
          "type": "object",
          "properties": {
            "strategy_name": {
              "type": "string",
              "description": "策略名称",
              "example": "智能均衡策略"
            },
            "algorithm_type": {
              "type": "string",
              "enum": [
                "ML_BASED",
                "RULE_BASED",
                "HYBRID"
              ],
              "description": "算法类型",
              "example": "HYBRID"
            },
            "decision_mode": {
              "type": "string",
              "enum": [
                "OPTIMAL",
                "BALANCED",
                "FAST"
              ],
              "description": "决策模式",
              "example": "BALANCED"
            },
            "fallback_strategy": {
              "type": "string",
              "enum": [
                "RULE_ENGINE",
                "ROUND_ROBIN",
                "MANUAL"
              ],
              "description": "降级策略",
              "example": "RULE_ENGINE"
            },
            "timeout_seconds": {
              "type": "integer",
              "description": "超时时间（秒）",
              "example": 180
            },
            "max_candidates": {
              "type": "integer",
              "description": "最大候选人数",
              "example": 20
            },
            "enable_ab_testing": {
              "type": "boolean",
              "description": "是否启用A/B测试",
              "example": true
            },
            "ab_testing_ratio": {
              "type": "number",
              "description": "A/B测试比例",
              "example": 0.2
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-14T10:30:00Z"
            }
          }
        },
        "DispatchStrategyUpdateRequest": {
          "type": "object",
          "properties": {
            "strategy_name": {
              "type": "string",
              "description": "策略名称",
              "example": "智能均衡策略v2"
            },
            "algorithm_type": {
              "type": "string",
              "enum": [
                "ML_BASED",
                "RULE_BASED",
                "HYBRID"
              ],
              "description": "算法类型",
              "example": "HYBRID"
            },
            "decision_mode": {
              "type": "string",
              "enum": [
                "OPTIMAL",
                "BALANCED",
                "FAST"
              ],
              "description": "决策模式",
              "example": "OPTIMAL"
            },
            "fallback_strategy": {
              "type": "string",
              "enum": [
                "RULE_ENGINE",
                "ROUND_ROBIN",
                "MANUAL"
              ],
              "description": "降级策略",
              "example": "RULE_ENGINE"
            },
            "timeout_seconds": {
              "type": "integer",
              "minimum": 30,
              "maximum": 600,
              "description": "超时时间（秒）",
              "example": 120
            },
            "max_candidates": {
              "type": "integer",
              "minimum": 5,
              "maximum": 50,
              "description": "最大候选人数",
              "example": 15
            },
            "enable_ab_testing": {
              "type": "boolean",
              "description": "是否启用A/B测试",
              "example": false
            },
            "ab_testing_ratio": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "A/B测试比例",
              "example": 0.1
            }
          }
        },
        "MLModel": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "model_name": {
                  "type": "string",
                  "description": "模型名称",
                  "example": "dispatch_xgboost_v2"
                },
                "model_type": {
                  "type": "string",
                  "enum": [
                    "XGBOOST",
                    "DNN",
                    "ENSEMBLE"
                  ],
                  "description": "模型类型",
                  "example": "XGBOOST"
                },
                "version": {
                  "type": "string",
                  "description": "模型版本",
                  "example": "v2.1.0"
                },
                "model_config": {
                  "type": "object",
                  "description": "模型配置",
                  "example": {
                    "max_depth": 6,
                    "learning_rate": 0.1,
                    "n_estimators": 100
                  }
                },
                "feature_config": {
                  "type": "object",
                  "description": "特征配置",
                  "example": {
                    "feature_count": 128,
                    "categorical_features": [
                      "skill_category",
                      "customer_level"
                    ],
                    "numerical_features": [
                      "experience_years",
                      "success_rate"
                    ]
                  }
                },
                "training_config": {
                  "type": "object",
                  "description": "训练配置",
                  "example": {
                    "train_ratio": 0.7,
                    "validation_ratio": 0.15,
                    "test_ratio": 0.15
                  }
                },
                "model_path": {
                  "type": "string",
                  "description": "模型文件路径",
                  "example": "/models/dispatch_xgboost_v2.1.0.pkl"
                },
                "model_size": {
                  "type": "integer",
                  "description": "模型文件大小（字节）",
                  "example": 2048576
                },
                "training_data_size": {
                  "type": "integer",
                  "description": "训练数据量",
                  "example": 100000
                },
                "training_start_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "训练开始时间",
                  "example": "2024-08-14T08:00:00Z"
                },
                "training_end_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "训练结束时间",
                  "example": "2024-08-14T09:30:00Z"
                },
                "training_duration": {
                  "type": "integer",
                  "description": "训练耗时（秒）",
                  "example": 5400
                },
                "accuracy": {
                  "type": "number",
                  "description": "准确率",
                  "example": 0.8856
                },
                "precision_score": {
                  "type": "number",
                  "description": "精确率",
                  "example": 0.8923
                },
                "recall_score": {
                  "type": "number",
                  "description": "召回率",
                  "example": 0.8789
                },
                "f1_score": {
                  "type": "number",
                  "description": "F1分数",
                  "example": 0.8855
                },
                "auc_score": {
                  "type": "number",
                  "description": "AUC分数",
                  "example": 0.9234
                },
                "is_active": {
                  "type": "boolean",
                  "description": "是否激活",
                  "example": true
                },
                "deployment_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "部署时间",
                  "example": "2024-08-14T10:00:00Z"
                },
                "prediction_count": {
                  "type": "integer",
                  "description": "预测次数",
                  "example": 15678
                },
                "avg_prediction_time": {
                  "type": "number",
                  "description": "平均预测时间（毫秒）",
                  "example": 12.5
                },
                "error_count": {
                  "type": "integer",
                  "description": "错误次数",
                  "example": 23
                }
              }
            }
          ]
        },
        "BatchDispatchResult": {
          "type": "object",
          "properties": {
            "batch_id": {
              "type": "string",
              "description": "批次ID",
              "example": "batch_20240814_001"
            },
            "total": {
              "type": "integer",
              "description": "总数量",
              "example": 100
            },
            "success_count": {
              "type": "integer",
              "description": "成功数量",
              "example": 95
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 5
            },
            "processing_time": {
              "type": "integer",
              "description": "处理时间（毫秒）",
              "example": 45000
            },
            "results": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "ticket_id": {
                    "type": "integer",
                    "description": "工单ID",
                    "example": 12345
                  },
                  "success": {
                    "type": "boolean",
                    "description": "是否成功",
                    "example": true
                  },
                  "dispatch_id": {
                    "type": "string",
                    "description": "派单ID（成功时）",
                    "example": "dp_20240814_001"
                  },
                  "engineer_id": {
                    "type": "integer",
                    "description": "工程师ID（成功时）",
                    "example": 67890
                  },
                  "error": {
                    "type": "string",
                    "description": "错误信息（失败时）",
                    "example": "无可用工程师"
                  }
                }
              },
              "description": "详细结果"
            }
          }
        },
        "NoEngineerAvailableResponse": {
          "type": "object",
          "properties": {
            "reason": {
              "type": "string",
              "enum": [
                "NO_QUALIFIED_ENGINEERS",
                "ALL_ENGINEERS_BUSY",
                "CONSTRAINT_TOO_STRICT",
                "SYSTEM_ERROR"
              ],
              "description": "无可用工程师的原因",
              "example": "NO_QUALIFIED_ENGINEERS"
            },
            "constraints_checked": {
              "type": "object",
              "description": "已检查的约束条件",
              "properties": {
                "skill_requirements": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "技能要求",
                  "example": [
                    "Java",
                    "Spring Boot"
                  ]
                },
                "max_distance": {
                  "type": "number",
                  "description": "最大距离",
                  "example": 50.0
                },
                "max_workload": {
                  "type": "integer",
                  "description": "最大工作负载",
                  "example": 5
                }
              }
            },
            "suggestions": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "建议",
              "example": [
                "放宽技能要求到相关技能",
                "增加最大距离限制到100公里",
                "考虑增加工程师工作负载上限"
              ]
            },
            "fallback_options": {
              "type": "object",
              "description": "备选方案",
              "properties": {
                "manual_assignment": {
                  "type": "boolean",
                  "description": "手动分配",
                  "example": true
                },
                "queue_for_later": {
                  "type": "boolean",
                  "description": "排队等待",
                  "example": true
                },
                "escalate_to_manager": {
                  "type": "boolean",
                  "description": "升级到管理员",
                  "example": true
                }
              }
            }
          }
        },
        "CandidatesResult": {
          "type": "object",
          "properties": {
            "ticket_id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "total_candidates": {
              "type": "integer",
              "description": "候选人总数",
              "example": 15
            },
            "returned_count": {
              "type": "integer",
              "description": "返回数量",
              "example": 10
            },
            "candidates": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "engineer_id": {
                    "type": "integer",
                    "description": "工程师ID",
                    "example": 201
                  },
                  "engineer_name": {
                    "type": "string",
                    "description": "工程师姓名",
                    "example": "张工程师"
                  },
                  "total_score": {
                    "type": "number",
                    "description": "总评分",
                    "example": 92.5
                  },
                  "rank": {
                    "type": "integer",
                    "description": "排名",
                    "example": 1
                  },
                  "availability": {
                    "type": "string",
                    "enum": [
                      "AVAILABLE",
                      "BUSY",
                      "OFFLINE"
                    ],
                    "description": "可用状态",
                    "example": "AVAILABLE"
                  },
                  "current_workload": {
                    "type": "integer",
                    "description": "当前工作负载",
                    "example": 2
                  },
                  "estimated_response_time": {
                    "type": "integer",
                    "description": "预计响应时间（分钟）",
                    "example": 15
                  },
                  "score_details": {
                    "type": "object",
                    "description": "评分详情",
                    "properties": {
                      "skill_match": {
                        "type": "number",
                        "example": 95.0
                      },
                      "workload": {
                        "type": "number",
                        "example": 88.0
                      },
                      "location": {
                        "type": "number",
                        "example": 90.0
                      },
                      "performance": {
                        "type": "number",
                        "example": 94.0
                      },
                      "sla_priority": {
                        "type": "number",
                        "example": 85.0
                      }
                    }
                  }
                }
              },
              "description": "候选工程师列表"
            }
          }
        },
        "DispatchStatistics": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "description": "统计类型",
              "example": "success_rate"
            },
            "period": {
              "type": "object",
              "description": "统计周期",
              "properties": {
                "start_date": {
                  "type": "string",
                  "format": "date",
                  "description": "开始日期",
                  "example": "2024-08-01"
                },
                "end_date": {
                  "type": "string",
                  "format": "date",
                  "description": "结束日期",
                  "example": "2024-08-31"
                }
              }
            },
            "summary": {
              "type": "object",
              "description": "汇总数据",
              "properties": {
                "total_dispatches": {
                  "type": "integer",
                  "description": "总派单数",
                  "example": 1567
                },
                "success_rate": {
                  "type": "number",
                  "description": "成功率",
                  "example": 0.956
                },
                "avg_response_time": {
                  "type": "number",
                  "description": "平均响应时间（秒）",
                  "example": 125.5
                },
                "avg_accuracy": {
                  "type": "number",
                  "description": "平均准确率",
                  "example": 0.892
                }
              }
            },
            "trend_data": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "date": {
                    "type": "string",
                    "format": "date",
                    "description": "日期",
                    "example": "2024-08-14"
                  },
                  "value": {
                    "type": "number",
                    "description": "数值",
                    "example": 0.95
                  },
                  "count": {
                    "type": "integer",
                    "description": "数量",
                    "example": 45
                  }
                }
              },
              "description": "趋势数据"
            }
          }
        },
        "PerformanceReport": {
          "type": "object",
          "properties": {
            "metric": {
              "type": "string",
              "description": "性能指标",
              "example": "response_time"
            },
            "period": {
              "type": "string",
              "description": "时间周期",
              "example": "24h"
            },
            "current_value": {
              "type": "number",
              "description": "当前值",
              "example": 125.5
            },
            "target_value": {
              "type": "number",
              "description": "目标值",
              "example": 180.0
            },
            "trend": {
              "type": "string",
              "enum": [
                "IMPROVING",
                "STABLE",
                "DEGRADING"
              ],
              "description": "趋势",
              "example": "IMPROVING"
            },
            "percentiles": {
              "type": "object",
              "description": "百分位数",
              "properties": {
                "p50": {
                  "type": "number",
                  "example": 98.5
                },
                "p90": {
                  "type": "number",
                  "example": 156.2
                },
                "p95": {
                  "type": "number",
                  "example": 189.7
                },
                "p99": {
                  "type": "number",
                  "example": 245.8
                }
              }
            },
            "time_series": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "时间戳",
                    "example": "2024-08-14T10:00:00Z"
                  },
                  "value": {
                    "type": "number",
                    "description": "值",
                    "example": 123.5
                  }
                }
              },
              "description": "时间序列数据"
            }
          }
        },
        "PredictionAnalysis": {
          "type": "object",
          "properties": {
            "prediction_type": {
              "type": "string",
              "description": "预测类型",
              "example": "workload"
            },
            "forecast_days": {
              "type": "integer",
              "description": "预测天数",
              "example": 7
            },
            "confidence_level": {
              "type": "number",
              "description": "置信度",
              "example": 0.85
            },
            "predictions": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "date": {
                    "type": "string",
                    "format": "date",
                    "description": "日期",
                    "example": "2024-08-15"
                  },
                  "predicted_value": {
                    "type": "number",
                    "description": "预测值",
                    "example": 156.8
                  },
                  "confidence_interval": {
                    "type": "object",
                    "description": "置信区间",
                    "properties": {
                      "lower": {
                        "type": "number",
                        "example": 142.3
                      },
                      "upper": {
                        "type": "number",
                        "example": 171.3
                      }
                    }
                  }
                }
              },
              "description": "预测数据"
            },
            "recommendations": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "建议",
              "example": [
                "预计明天工作负载较高，建议提前调配资源",
                "周末工作负载较低，可安排系统维护"
              ]
            }
          }
        },
        "HealthStatus": {
          "type": "object",
          "properties": {
            "overall_status": {
              "type": "string",
              "enum": [
                "HEALTHY",
                "WARNING",
                "CRITICAL"
              ],
              "description": "整体状态",
              "example": "HEALTHY"
            },
            "components": {
              "type": "object",
              "description": "组件状态",
              "properties": {
                "dispatch_engine": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "UP",
                        "DOWN",
                        "DEGRADED"
                      ],
                      "example": "UP"
                    },
                    "response_time": {
                      "type": "number",
                      "description": "响应时间（毫秒）",
                      "example": 125.5
                    },
                    "error_rate": {
                      "type": "number",
                      "description": "错误率",
                      "example": 0.002
                    }
                  }
                },
                "ml_service": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "UP",
                        "DOWN",
                        "DEGRADED"
                      ],
                      "example": "UP"
                    },
                    "model_accuracy": {
                      "type": "number",
                      "description": "模型准确率",
                      "example": 0.885
                    },
                    "prediction_time": {
                      "type": "number",
                      "description": "预测时间（毫秒）",
                      "example": 12.5
                    }
                  }
                },
                "rule_engine": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "UP",
                        "DOWN",
                        "DEGRADED"
                      ],
                      "example": "UP"
                    },
                    "rules_loaded": {
                      "type": "integer",
                      "description": "已加载规则数",
                      "example": 25
                    },
                    "execution_time": {
                      "type": "number",
                      "description": "执行时间（毫秒）",
                      "example": 8.2
                    }
                  }
                }
              }
            },
            "last_check_time": {
              "type": "string",
              "format": "date-time",
              "description": "最后检查时间",
              "example": "2024-08-14T10:30:00Z"
            }
          }
        },
        "MLModelCreateRequest": {
          "type": "object",
          "required": [
            "model_name",
            "model_type"
          ],
          "properties": {
            "model_name": {
              "type": "string",
              "description": "模型名称",
              "example": "dispatch_xgboost_v3"
            },
            "model_type": {
              "type": "string",
              "enum": [
                "XGBOOST",
                "DNN",
                "ENSEMBLE"
              ],
              "description": "模型类型",
              "example": "XGBOOST"
            },
            "model_config": {
              "type": "object",
              "description": "模型配置",
              "example": {
                "max_depth": 8,
                "learning_rate": 0.05,
                "n_estimators": 200
              }
            }
          }
        },
        "MLModelDeployRequest": {
          "type": "object",
          "properties": {
            "deployment_mode": {
              "type": "string",
              "enum": [
                "FULL",
                "AB_TEST",
                "CANARY"
              ],
              "default": "FULL",
              "description": "部署模式",
              "example": "AB_TEST"
            },
            "ab_test_ratio": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "A/B测试比例",
              "example": 0.2
            }
          }
        },
        "MLModelDeployResult": {
          "type": "object",
          "properties": {
            "deployment_id": {
              "type": "string",
              "description": "部署ID",
              "example": "deploy_20240814_001"
            },
            "status": {
              "type": "string",
              "enum": [
                "SUCCESS",
                "FAILED",
                "IN_PROGRESS"
              ],
              "description": "部署状态",
              "example": "SUCCESS"
            },
            "deployment_time": {
              "type": "string",
              "format": "date-time",
              "description": "部署时间",
              "example": "2024-08-14T10:30:00Z"
            }
          }
        },
        "MLModelRollbackRequest": {
          "type": "object",
          "required": [
            "target_version"
          ],
          "properties": {
            "target_version": {
              "type": "string",
              "description": "目标版本",
              "example": "v2.0.0"
            },
            "reason": {
              "type": "string",
              "description": "回滚原因",
              "example": "新版本准确率下降"
            }
          }
        },
        "MLModelRollbackResult": {
          "type": "object",
          "properties": {
            "rollback_id": {
              "type": "string",
              "description": "回滚ID",
              "example": "rollback_20240814_001"
            },
            "status": {
              "type": "string",
              "enum": [
                "SUCCESS",
                "FAILED",
                "IN_PROGRESS"
              ],
              "description": "回滚状态",
              "example": "SUCCESS"
            },
            "rollback_time": {
              "type": "string",
              "format": "date-time",
              "description": "回滚时间",
              "example": "2024-08-14T11:00:00Z"
            }
          }
        },
        "MLTrainingStartRequest": {
          "type": "object",
          "required": [
            "model_name",
            "training_config"
          ],
          "properties": {
            "model_name": {
              "type": "string",
              "description": "模型名称",
              "example": "dispatch_xgboost_v3"
            },
            "training_config": {
              "type": "object",
              "description": "训练配置",
              "example": {
                "data_start_date": "2024-06-01",
                "data_end_date": "2024-08-01",
                "train_ratio": 0.7,
                "validation_ratio": 0.15
              }
            }
          }
        },
        "MLTrainingStartResult": {
          "type": "object",
          "properties": {
            "training_job_id": {
              "type": "string",
              "description": "训练任务ID",
              "example": "train_20240814_001"
            },
            "status": {
              "type": "string",
              "enum": [
                "STARTED",
                "FAILED"
              ],
              "description": "启动状态",
              "example": "STARTED"
            },
            "estimated_duration": {
              "type": "integer",
              "description": "预计耗时（分钟）",
              "example": 90
            }
          }
        },
        "CancelDispatchResult": {
          "type": "object",
          "properties": {
            "dispatch_id": {
              "type": "string",
              "description": "派单ID",
              "example": "dp_20240814_001"
            },
            "status": {
              "type": "string",
              "enum": [
                "CANCELLED",
                "FAILED"
              ],
              "description": "撤销状态",
              "example": "CANCELLED"
            },
            "cancelled_at": {
              "type": "string",
              "format": "date-time",
              "description": "撤销时间",
              "example": "2024-08-14T11:00:00Z"
            }
          }
        }
      },
      "issues": []
    },
    "REQ-013-智能分析与AI功能": {
      "file_path": "docs/api/4.5.1/modules/REQ-013-智能分析与AI功能/openapi.yaml",
      "components": {
        "DiagnosisRequest": {
          "type": "object",
          "required": [
            "request_id",
            "problem_description",
            "system_info"
          ],
          "properties": {
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "diag_20250815_001"
            },
            "problem_description": {
              "type": "string",
              "description": "问题描述",
              "example": "服务器CPU使用率持续100%，系统响应缓慢"
            },
            "system_info": {
              "type": "object",
              "description": "系统信息",
              "required": [
                "server_id",
                "os_type",
                "application",
                "environment"
              ],
              "properties": {
                "server_id": {
                  "type": "string",
                  "description": "服务器ID",
                  "example": "srv-001"
                },
                "os_type": {
                  "type": "string",
                  "description": "操作系统类型",
                  "enum": [
                    "linux",
                    "windows",
                    "unix",
                    "macos"
                  ],
                  "example": "linux"
                },
                "application": {
                  "type": "string",
                  "description": "应用类型",
                  "example": "web_server"
                },
                "environment": {
                  "type": "string",
                  "description": "环境类型",
                  "enum": [
                    "production",
                    "staging",
                    "development",
                    "test"
                  ],
                  "example": "production"
                }
              }
            },
            "monitoring_data": {
              "type": "object",
              "description": "监控数据",
              "properties": {
                "time_range": {
                  "type": "object",
                  "properties": {
                    "start_time": {
                      "type": "string",
                      "format": "date-time",
                      "description": "开始时间",
                      "example": "2025-08-15T10:00:00Z"
                    },
                    "end_time": {
                      "type": "string",
                      "format": "date-time",
                      "description": "结束时间",
                      "example": "2025-08-15T10:30:00Z"
                    }
                  }
                },
                "metrics": {
                  "type": "object",
                  "description": "性能指标",
                  "properties": {
                    "cpu_usage": {
                      "type": "array",
                      "description": "CPU使用率",
                      "items": {
                        "type": "number"
                      },
                      "example": [
                        95,
                        98,
                        100,
                        100,
                        99
                      ]
                    },
                    "memory_usage": {
                      "type": "array",
                      "description": "内存使用率",
                      "items": {
                        "type": "number"
                      },
                      "example": [
                        78,
                        82,
                        85,
                        88,
                        90
                      ]
                    },
                    "disk_io": {
                      "type": "array",
                      "description": "磁盘I/O",
                      "items": {
                        "type": "number"
                      },
                      "example": [
                        45,
                        52,
                        48,
                        55,
                        60
                      ]
                    },
                    "network_io": {
                      "type": "array",
                      "description": "网络I/O",
                      "items": {
                        "type": "number"
                      },
                      "example": [
                        120,
                        135,
                        140,
                        145,
                        150
                      ]
                    }
                  }
                }
              }
            },
            "log_data": {
              "type": "object",
              "description": "日志数据",
              "properties": {
                "error_logs": {
                  "type": "array",
                  "description": "错误日志",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "ERROR: Database connection timeout at 10:15:23",
                    "WARN: High memory usage detected at 10:20:15"
                  ]
                },
                "system_logs": {
                  "type": "array",
                  "description": "系统日志",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "INFO: Service restart initiated at 10:25:00"
                  ]
                }
              }
            },
            "context_info": {
              "type": "object",
              "description": "上下文信息",
              "properties": {
                "recent_changes": {
                  "type": "array",
                  "description": "最近变更",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "deployed new version v2.1.0"
                  ]
                },
                "related_tickets": {
                  "type": "array",
                  "description": "相关工单",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "TICKET-12345"
                  ]
                },
                "similar_issues": {
                  "type": "array",
                  "description": "类似问题",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "ISSUE-67890"
                  ]
                }
              }
            }
          }
        },
        "DiagnosisResult": {
          "type": "object",
          "properties": {
            "diagnosis_id": {
              "type": "string",
              "description": "诊断ID",
              "example": "DIAG_20250815_001"
            },
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "diag_20250815_001"
            },
            "analysis_result": {
              "type": "object",
              "description": "分析结果",
              "properties": {
                "root_cause": {
                  "type": "object",
                  "description": "根因分析",
                  "properties": {
                    "primary": {
                      "type": "object",
                      "description": "主要原因",
                      "properties": {
                        "cause": {
                          "type": "string",
                          "description": "原因描述",
                          "example": "数据库连接池耗尽"
                        },
                        "confidence": {
                          "type": "number",
                          "description": "置信度",
                          "example": 92.5
                        },
                        "evidence": {
                          "type": "array",
                          "description": "证据列表",
                          "items": {
                            "type": "string"
                          },
                          "example": [
                            "数据库连接超时错误频繁出现",
                            "CPU使用率与数据库查询量正相关",
                            "内存使用率持续上升"
                          ]
                        }
                      }
                    },
                    "secondary": {
                      "type": "array",
                      "description": "次要原因",
                      "items": {
                        "type": "object",
                        "properties": {
                          "cause": {
                            "type": "string",
                            "example": "内存泄漏"
                          },
                          "confidence": {
                            "type": "number",
                            "example": 78.3
                          },
                          "evidence": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            },
                            "example": [
                              "内存使用率持续上升且未释放"
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                "impact_assessment": {
                  "type": "object",
                  "description": "影响评估",
                  "properties": {
                    "severity": {
                      "type": "string",
                      "description": "严重程度",
                      "enum": [
                        "low",
                        "medium",
                        "high",
                        "critical"
                      ],
                      "example": "high"
                    },
                    "affected_services": {
                      "type": "array",
                      "description": "受影响服务",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "web_service",
                        "api_service"
                      ]
                    },
                    "estimated_downtime": {
                      "type": "string",
                      "description": "预计停机时间",
                      "example": "持续中"
                    },
                    "business_impact": {
                      "type": "string",
                      "description": "业务影响",
                      "example": "用户访问缓慢，可能导致订单丢失"
                    }
                  }
                },
                "recommended_solutions": {
                  "type": "array",
                  "description": "推荐解决方案",
                  "items": {
                    "type": "object",
                    "properties": {
                      "priority": {
                        "type": "integer",
                        "description": "优先级",
                        "example": 1
                      },
                      "action": {
                        "type": "string",
                        "description": "操作描述",
                        "example": "重启数据库连接池"
                      },
                      "description": {
                        "type": "string",
                        "description": "详细描述",
                        "example": "清理现有连接，重新建立连接池"
                      },
                      "estimated_time": {
                        "type": "string",
                        "description": "预计时间",
                        "example": "5分钟"
                      },
                      "risk_level": {
                        "type": "string",
                        "description": "风险级别",
                        "enum": [
                          "low",
                          "medium",
                          "high"
                        ],
                        "example": "low"
                      },
                      "steps": {
                        "type": "array",
                        "description": "执行步骤",
                        "items": {
                          "type": "string"
                        },
                        "example": [
                          "1. 备份当前连接池配置",
                          "2. 执行连接池重启命令",
                          "3. 验证连接池状态",
                          "4. 监控系统性能恢复"
                        ]
                      }
                    }
                  }
                },
                "preventive_measures": {
                  "type": "array",
                  "description": "预防措施",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "配置数据库连接池监控告警",
                    "定期进行内存泄漏检测",
                    "建立系统性能基线监控"
                  ]
                }
              }
            },
            "model_info": {
              "type": "object",
              "description": "模型信息",
              "properties": {
                "model_id": {
                  "type": "string",
                  "description": "模型ID",
                  "example": "model_diagnosis_001"
                },
                "model_version": {
                  "type": "string",
                  "description": "模型版本",
                  "example": "v2.1.0"
                },
                "confidence": {
                  "type": "number",
                  "description": "整体置信度",
                  "example": 92.5
                },
                "processing_time": {
                  "type": "number",
                  "description": "处理时间（秒）",
                  "example": 3.2
                }
              }
            },
            "related_knowledge": {
              "type": "array",
              "description": "相关知识",
              "items": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "description": "知识标题",
                    "example": "数据库连接池优化指南"
                  },
                  "url": {
                    "type": "string",
                    "description": "知识链接",
                    "example": "/knowledge/db-connection-pool"
                  },
                  "relevance": {
                    "type": "number",
                    "description": "相关度",
                    "example": 95.8
                  }
                }
              }
            }
          }
        },
        "PredictionRequest": {
          "type": "object",
          "required": [
            "request_id",
            "prediction_type",
            "target_system",
            "historical_data",
            "prediction_horizon"
          ],
          "properties": {
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "pred_20250815_001"
            },
            "prediction_type": {
              "type": "string",
              "description": "预测类型",
              "enum": [
                "equipment_failure",
                "performance_trend",
                "capacity_planning"
              ],
              "example": "equipment_failure"
            },
            "target_system": {
              "type": "object",
              "description": "目标系统",
              "required": [
                "system_id",
                "system_type",
                "system_name"
              ],
              "properties": {
                "system_id": {
                  "type": "string",
                  "description": "系统ID",
                  "example": "sys_db_001"
                },
                "system_type": {
                  "type": "string",
                  "description": "系统类型",
                  "enum": [
                    "database",
                    "web_server",
                    "application_server",
                    "network_device"
                  ],
                  "example": "database"
                },
                "system_name": {
                  "type": "string",
                  "description": "系统名称",
                  "example": "主数据库服务器"
                }
              }
            },
            "historical_data": {
              "type": "object",
              "description": "历史数据",
              "required": [
                "time_range",
                "metrics"
              ],
              "properties": {
                "time_range": {
                  "type": "object",
                  "properties": {
                    "start_time": {
                      "type": "string",
                      "format": "date-time",
                      "description": "开始时间",
                      "example": "2025-07-15T00:00:00Z"
                    },
                    "end_time": {
                      "type": "string",
                      "format": "date-time",
                      "description": "结束时间",
                      "example": "2025-08-15T00:00:00Z"
                    }
                  }
                },
                "metrics": {
                  "type": "object",
                  "description": "指标数据",
                  "properties": {
                    "cpu_usage": {
                      "type": "string",
                      "description": "CPU使用率时序数据",
                      "example": "time_series_data"
                    },
                    "memory_usage": {
                      "type": "string",
                      "description": "内存使用率时序数据",
                      "example": "time_series_data"
                    },
                    "disk_usage": {
                      "type": "string",
                      "description": "磁盘使用率时序数据",
                      "example": "time_series_data"
                    },
                    "network_traffic": {
                      "type": "string",
                      "description": "网络流量时序数据",
                      "example": "time_series_data"
                    },
                    "error_rate": {
                      "type": "string",
                      "description": "错误率时序数据",
                      "example": "time_series_data"
                    }
                  }
                }
              }
            },
            "prediction_horizon": {
              "type": "object",
              "description": "预测时间窗口",
              "required": [
                "unit",
                "value"
              ],
              "properties": {
                "unit": {
                  "type": "string",
                  "description": "时间单位",
                  "enum": [
                    "hours",
                    "days",
                    "weeks",
                    "months"
                  ],
                  "example": "days"
                },
                "value": {
                  "type": "integer",
                  "description": "时间值",
                  "minimum": 1,
                  "example": 30
                }
              }
            },
            "alert_thresholds": {
              "type": "object",
              "description": "告警阈值",
              "properties": {
                "failure_probability": {
                  "type": "number",
                  "description": "故障概率阈值",
                  "minimum": 0,
                  "maximum": 1,
                  "example": 0.7
                },
                "performance_degradation": {
                  "type": "number",
                  "description": "性能下降阈值",
                  "minimum": 0,
                  "maximum": 1,
                  "example": 0.5
                }
              }
            }
          }
        },
        "PredictionResult": {
          "type": "object",
          "properties": {
            "prediction_id": {
              "type": "string",
              "description": "预测ID",
              "example": "PRED_20250815_001"
            },
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "pred_20250815_001"
            },
            "prediction_type": {
              "type": "string",
              "description": "预测类型",
              "example": "equipment_failure"
            },
            "target_system": {
              "type": "object",
              "description": "目标系统信息",
              "properties": {
                "system_id": {
                  "type": "string",
                  "example": "sys_db_001"
                },
                "system_name": {
                  "type": "string",
                  "example": "主数据库服务器"
                }
              }
            },
            "predictions": {
              "type": "array",
              "description": "预测结果",
              "items": {
                "type": "object",
                "properties": {
                  "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "预测时间点",
                    "example": "2025-08-16T10:30:00Z"
                  },
                  "failure_probability": {
                    "type": "number",
                    "description": "故障概率",
                    "example": 0.15
                  },
                  "performance_score": {
                    "type": "number",
                    "description": "性能评分",
                    "example": 85.5
                  },
                  "risk_level": {
                    "type": "string",
                    "description": "风险级别",
                    "enum": [
                      "low",
                      "medium",
                      "high",
                      "critical"
                    ],
                    "example": "low"
                  },
                  "confidence": {
                    "type": "number",
                    "description": "置信度",
                    "example": 0.92
                  }
                }
              }
            },
            "recommendations": {
              "type": "array",
              "description": "预测建议",
              "items": {
                "type": "object",
                "properties": {
                  "action": {
                    "type": "string",
                    "description": "建议操作",
                    "example": "增加数据库连接池大小"
                  },
                  "priority": {
                    "type": "string",
                    "description": "优先级",
                    "enum": [
                      "low",
                      "medium",
                      "high",
                      "urgent"
                    ],
                    "example": "medium"
                  },
                  "estimated_impact": {
                    "type": "string",
                    "description": "预计影响",
                    "example": "可降低故障概率20%"
                  }
                }
              }
            },
            "model_info": {
              "type": "object",
              "description": "模型信息",
              "properties": {
                "model_id": {
                  "type": "string",
                  "example": "model_prediction_001"
                },
                "model_version": {
                  "type": "string",
                  "example": "v1.5.0"
                },
                "algorithm": {
                  "type": "string",
                  "example": "LSTM"
                },
                "accuracy": {
                  "type": "number",
                  "example": 94.2
                }
              }
            }
          }
        },
        "CapacityPlanningResult": {
          "type": "object",
          "properties": {
            "planning_id": {
              "type": "string",
              "description": "规划ID",
              "example": "CAP_20250815_001"
            },
            "system_id": {
              "type": "string",
              "description": "系统ID",
              "example": "sys_web_001"
            },
            "resource_type": {
              "type": "string",
              "description": "资源类型",
              "example": "cpu"
            },
            "current_usage": {
              "type": "object",
              "description": "当前使用情况",
              "properties": {
                "average_usage": {
                  "type": "number",
                  "description": "平均使用率",
                  "example": 65.5
                },
                "peak_usage": {
                  "type": "number",
                  "description": "峰值使用率",
                  "example": 89.2
                },
                "trend": {
                  "type": "string",
                  "description": "趋势",
                  "enum": [
                    "increasing",
                    "stable",
                    "decreasing"
                  ],
                  "example": "increasing"
                }
              }
            },
            "capacity_forecast": {
              "type": "array",
              "description": "容量预测",
              "items": {
                "type": "object",
                "properties": {
                  "time_period": {
                    "type": "string",
                    "description": "时间段",
                    "example": "2025-09"
                  },
                  "predicted_usage": {
                    "type": "number",
                    "description": "预测使用率",
                    "example": 78.5
                  },
                  "capacity_threshold": {
                    "type": "number",
                    "description": "容量阈值",
                    "example": 80.0
                  },
                  "risk_level": {
                    "type": "string",
                    "enum": [
                      "low",
                      "medium",
                      "high"
                    ],
                    "example": "medium"
                  }
                }
              }
            },
            "scaling_recommendations": {
              "type": "array",
              "description": "扩容建议",
              "items": {
                "type": "object",
                "properties": {
                  "timeline": {
                    "type": "string",
                    "description": "时间线",
                    "example": "2025年10月前"
                  },
                  "action": {
                    "type": "string",
                    "description": "建议操作",
                    "example": "增加2个CPU核心"
                  },
                  "estimated_cost": {
                    "type": "number",
                    "description": "预计成本",
                    "example": 5000.0
                  },
                  "business_justification": {
                    "type": "string",
                    "description": "业务理由",
                    "example": "避免性能瓶颈，保障业务连续性"
                  }
                }
              }
            }
          }
        },
        "ChatRequest": {
          "type": "object",
          "required": [
            "request_id",
            "session_id",
            "question"
          ],
          "properties": {
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "chat_20250815_001"
            },
            "session_id": {
              "type": "string",
              "description": "会话ID",
              "example": "session_user123_001"
            },
            "question": {
              "type": "string",
              "description": "用户问题",
              "example": "如何配置Nginx负载均衡？"
            },
            "context": {
              "type": "object",
              "description": "上下文信息",
              "properties": {
                "user_role": {
                  "type": "string",
                  "description": "用户角色",
                  "example": "运维工程师"
                },
                "system_environment": {
                  "type": "string",
                  "description": "系统环境",
                  "example": "linux"
                },
                "previous_questions": {
                  "type": "array",
                  "description": "历史问题",
                  "items": {
                    "type": "object",
                    "properties": {
                      "question": {
                        "type": "string",
                        "example": "Nginx有哪些负载均衡算法？"
                      },
                      "timestamp": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-08-15T10:25:00Z"
                      }
                    }
                  }
                },
                "current_task": {
                  "type": "object",
                  "description": "当前任务",
                  "properties": {
                    "task_type": {
                      "type": "string",
                      "example": "system_configuration"
                    },
                    "related_systems": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "nginx",
                        "web_server"
                      ]
                    }
                  }
                }
              }
            },
            "preferences": {
              "type": "object",
              "description": "用户偏好",
              "properties": {
                "response_format": {
                  "type": "string",
                  "description": "响应格式",
                  "enum": [
                    "text",
                    "structured",
                    "code",
                    "step_by_step"
                  ],
                  "example": "structured"
                },
                "include_examples": {
                  "type": "boolean",
                  "description": "是否包含示例",
                  "example": true
                },
                "include_references": {
                  "type": "boolean",
                  "description": "是否包含参考资料",
                  "example": true
                },
                "max_response_length": {
                  "type": "integer",
                  "description": "最大响应长度",
                  "example": 1000
                }
              }
            }
          }
        },
        "ChatResponse": {
          "type": "object",
          "properties": {
            "chat_id": {
              "type": "string",
              "description": "对话ID",
              "example": "CHAT_20250815_001"
            },
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "chat_20250815_001"
            },
            "session_id": {
              "type": "string",
              "description": "会话ID",
              "example": "session_user123_001"
            },
            "question": {
              "type": "string",
              "description": "用户问题",
              "example": "如何配置Nginx负载均衡？"
            },
            "answer": {
              "type": "string",
              "description": "AI回答",
              "example": "Nginx负载均衡配置主要通过upstream模块实现..."
            },
            "confidence": {
              "type": "number",
              "description": "回答置信度",
              "example": 0.95
            },
            "sources": {
              "type": "array",
              "description": "知识来源",
              "items": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "description": "来源标题",
                    "example": "Nginx官方文档"
                  },
                  "url": {
                    "type": "string",
                    "description": "来源链接",
                    "example": "https://nginx.org/docs/load_balancing.html"
                  },
                  "relevance": {
                    "type": "number",
                    "description": "相关度",
                    "example": 0.98
                  }
                }
              }
            },
            "follow_up_questions": {
              "type": "array",
              "description": "后续问题建议",
              "items": {
                "type": "string"
              },
              "example": [
                "如何配置健康检查？",
                "负载均衡算法有哪些？",
                "如何监控负载均衡状态？"
              ]
            },
            "processing_time": {
              "type": "number",
              "description": "处理时间（秒）",
              "example": 2.5
            }
          }
        },
        "AnomalyDetectionRequest": {
          "type": "object",
          "required": [
            "request_id",
            "detection_type",
            "data_source",
            "metrics"
          ],
          "properties": {
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "anomaly_20250815_001"
            },
            "detection_type": {
              "type": "string",
              "description": "检测类型",
              "enum": [
                "real_time",
                "batch",
                "streaming"
              ],
              "example": "real_time"
            },
            "data_source": {
              "type": "object",
              "description": "数据源",
              "required": [
                "source_type",
                "source_id",
                "time_window"
              ],
              "properties": {
                "source_type": {
                  "type": "string",
                  "description": "数据源类型",
                  "enum": [
                    "metrics",
                    "logs",
                    "events",
                    "traces"
                  ],
                  "example": "metrics"
                },
                "source_id": {
                  "type": "string",
                  "description": "数据源ID",
                  "example": "metrics_server_001"
                },
                "time_window": {
                  "type": "object",
                  "description": "时间窗口",
                  "properties": {
                    "duration": {
                      "type": "string",
                      "description": "持续时间",
                      "example": "5m"
                    },
                    "end_time": {
                      "type": "string",
                      "format": "date-time",
                      "description": "结束时间",
                      "example": "2025-08-15T10:30:00Z"
                    }
                  }
                }
              }
            },
            "metrics": {
              "type": "array",
              "description": "指标数据",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "指标名称",
                    "example": "cpu_usage"
                  },
                  "values": {
                    "type": "array",
                    "description": "指标值",
                    "items": {
                      "type": "number"
                    },
                    "example": [
                      45.2,
                      47.1,
                      89.5,
                      91.2,
                      93.8
                    ]
                  },
                  "timestamps": {
                    "type": "array",
                    "description": "时间戳",
                    "items": {
                      "type": "string"
                    },
                    "example": [
                      "10:25:00",
                      "10:26:00",
                      "10:27:00",
                      "10:28:00",
                      "10:29:00"
                    ]
                  }
                }
              }
            },
            "detection_config": {
              "type": "object",
              "description": "检测配置",
              "properties": {
                "sensitivity": {
                  "type": "string",
                  "description": "敏感度",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ],
                  "example": "medium"
                },
                "algorithms": {
                  "type": "array",
                  "description": "检测算法",
                  "items": {
                    "type": "string",
                    "enum": [
                      "isolation_forest",
                      "statistical",
                      "one_class_svm",
                      "lstm"
                    ]
                  },
                  "example": [
                    "isolation_forest",
                    "statistical"
                  ]
                },
                "confidence_threshold": {
                  "type": "number",
                  "description": "置信度阈值",
                  "minimum": 0,
                  "maximum": 1,
                  "example": 0.8
                }
              }
            }
          }
        },
        "AnomalyDetectionResult": {
          "type": "object",
          "properties": {
            "detection_id": {
              "type": "string",
              "description": "检测ID",
              "example": "ANOM_20250815_001"
            },
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "anomaly_20250815_001"
            },
            "detection_summary": {
              "type": "object",
              "description": "检测摘要",
              "properties": {
                "total_points": {
                  "type": "integer",
                  "description": "总数据点数",
                  "example": 100
                },
                "anomaly_count": {
                  "type": "integer",
                  "description": "异常点数量",
                  "example": 5
                },
                "anomaly_rate": {
                  "type": "number",
                  "description": "异常率",
                  "example": 0.05
                },
                "overall_score": {
                  "type": "number",
                  "description": "整体异常评分",
                  "example": 0.85
                }
              }
            },
            "anomalies": {
              "type": "array",
              "description": "异常详情",
              "items": {
                "type": "object",
                "properties": {
                  "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "异常时间",
                    "example": "2025-08-15T10:27:00Z"
                  },
                  "metric_name": {
                    "type": "string",
                    "description": "异常指标",
                    "example": "cpu_usage"
                  },
                  "actual_value": {
                    "type": "number",
                    "description": "实际值",
                    "example": 89.5
                  },
                  "expected_range": {
                    "type": "object",
                    "description": "期望范围",
                    "properties": {
                      "min": {
                        "type": "number",
                        "example": 40.0
                      },
                      "max": {
                        "type": "number",
                        "example": 60.0
                      }
                    }
                  },
                  "anomaly_score": {
                    "type": "number",
                    "description": "异常评分",
                    "example": 0.92
                  },
                  "severity": {
                    "type": "string",
                    "description": "严重程度",
                    "enum": [
                      "low",
                      "medium",
                      "high",
                      "critical"
                    ],
                    "example": "high"
                  },
                  "description": {
                    "type": "string",
                    "description": "异常描述",
                    "example": "CPU使用率异常飙升，超出正常范围"
                  }
                }
              }
            },
            "recommendations": {
              "type": "array",
              "description": "处理建议",
              "items": {
                "type": "object",
                "properties": {
                  "action": {
                    "type": "string",
                    "description": "建议操作",
                    "example": "检查CPU密集型进程"
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "low",
                      "medium",
                      "high",
                      "urgent"
                    ],
                    "example": "high"
                  },
                  "estimated_time": {
                    "type": "string",
                    "description": "预计处理时间",
                    "example": "10分钟"
                  }
                }
              }
            }
          }
        },
        "AIModelInfo": {
          "type": "object",
          "properties": {
            "model_id": {
              "type": "integer",
              "description": "模型ID",
              "example": 1001
            },
            "model_name": {
              "type": "string",
              "description": "模型名称",
              "example": "故障诊断模型v2.0"
            },
            "model_type": {
              "type": "string",
              "description": "模型类型",
              "enum": [
                "diagnosis",
                "prediction",
                "qa",
                "anomaly",
                "classification"
              ],
              "example": "diagnosis"
            },
            "model_category": {
              "type": "string",
              "description": "模型分类",
              "enum": [
                "local",
                "cloud",
                "hybrid"
              ],
              "example": "local"
            },
            "algorithm_type": {
              "type": "string",
              "description": "算法类型",
              "enum": [
                "neural_network",
                "tree",
                "svm",
                "ensemble"
              ],
              "example": "neural_network"
            },
            "business_domain": {
              "type": "string",
              "description": "业务领域",
              "enum": [
                "server",
                "network",
                "database",
                "application"
              ],
              "example": "server"
            },
            "model_description": {
              "type": "string",
              "description": "模型描述",
              "example": "基于深度学习的服务器故障诊断模型"
            },
            "status": {
              "type": "string",
              "description": "模型状态",
              "enum": [
                "draft",
                "training",
                "testing",
                "active",
                "deprecated"
              ],
              "example": "active"
            },
            "current_version": {
              "type": "string",
              "description": "当前版本",
              "example": "v2.0.1"
            },
            "accuracy": {
              "type": "number",
              "description": "准确率",
              "example": 92.5
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-01-15T09:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "AIModelCreateRequest": {
          "type": "object",
          "required": [
            "model_name",
            "model_type",
            "model_category",
            "algorithm_type",
            "business_domain"
          ],
          "properties": {
            "model_name": {
              "type": "string",
              "description": "模型名称",
              "example": "故障诊断模型v3.0"
            },
            "model_type": {
              "type": "string",
              "description": "模型类型",
              "enum": [
                "diagnosis",
                "prediction",
                "qa",
                "anomaly",
                "classification"
              ],
              "example": "diagnosis"
            },
            "model_category": {
              "type": "string",
              "description": "模型分类",
              "enum": [
                "local",
                "cloud",
                "hybrid"
              ],
              "example": "local"
            },
            "algorithm_type": {
              "type": "string",
              "description": "算法类型",
              "enum": [
                "neural_network",
                "tree",
                "svm",
                "ensemble"
              ],
              "example": "neural_network"
            },
            "business_domain": {
              "type": "string",
              "description": "业务领域",
              "enum": [
                "server",
                "network",
                "database",
                "application"
              ],
              "example": "server"
            },
            "model_description": {
              "type": "string",
              "description": "模型描述",
              "example": "基于Transformer架构的故障诊断模型"
            },
            "input_schema": {
              "type": "object",
              "description": "输入数据Schema",
              "additionalProperties": true
            },
            "output_schema": {
              "type": "object",
              "description": "输出数据Schema",
              "additionalProperties": true
            },
            "resource_requirements": {
              "type": "object",
              "description": "资源需求",
              "properties": {
                "cpu_cores": {
                  "type": "integer",
                  "description": "CPU核心数",
                  "example": 4
                },
                "memory_gb": {
                  "type": "integer",
                  "description": "内存GB",
                  "example": 8
                },
                "gpu_count": {
                  "type": "integer",
                  "description": "GPU数量",
                  "example": 1
                }
              }
            }
          }
        },
        "TrainingJobInfo": {
          "type": "object",
          "properties": {
            "job_id": {
              "type": "integer",
              "description": "任务ID",
              "example": 2001
            },
            "model_id": {
              "type": "integer",
              "description": "模型ID",
              "example": 1001
            },
            "job_name": {
              "type": "string",
              "description": "任务名称",
              "example": "故障诊断模型训练-v3.0"
            },
            "job_type": {
              "type": "string",
              "description": "任务类型",
              "enum": [
                "initial",
                "retrain",
                "finetune",
                "transfer"
              ],
              "example": "initial"
            },
            "status": {
              "type": "string",
              "description": "任务状态",
              "enum": [
                "pending",
                "running",
                "completed",
                "failed",
                "cancelled"
              ],
              "example": "running"
            },
            "progress_percentage": {
              "type": "integer",
              "description": "训练进度百分比",
              "example": 65
            },
            "current_epoch": {
              "type": "integer",
              "description": "当前训练轮次",
              "example": 13
            },
            "total_epochs": {
              "type": "integer",
              "description": "总训练轮次",
              "example": 20
            },
            "training_loss": {
              "type": "number",
              "description": "训练损失",
              "example": 0.0245
            },
            "validation_loss": {
              "type": "number",
              "description": "验证损失",
              "example": 0.0312
            },
            "start_time": {
              "type": "string",
              "format": "date-time",
              "description": "开始时间",
              "example": "2025-08-15T09:00:00Z"
            },
            "estimated_end_time": {
              "type": "string",
              "format": "date-time",
              "description": "预计结束时间",
              "example": "2025-08-15T15:30:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T08:45:00Z"
            }
          }
        },
        "AnalysisRecordInfo": {
          "type": "object",
          "properties": {
            "record_id": {
              "type": "integer",
              "description": "记录ID",
              "example": 3001
            },
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "diag_20250815_001"
            },
            "analysis_type": {
              "type": "string",
              "description": "分析类型",
              "enum": [
                "diagnosis",
                "prediction",
                "qa",
                "anomaly",
                "classification"
              ],
              "example": "diagnosis"
            },
            "model_version_id": {
              "type": "integer",
              "description": "模型版本ID",
              "example": 1001
            },
            "user_id": {
              "type": "integer",
              "description": "用户ID",
              "example": 1001
            },
            "source_module": {
              "type": "string",
              "description": "来源模块",
              "example": "ticket_system"
            },
            "confidence_score": {
              "type": "number",
              "description": "置信度评分",
              "example": 92.5
            },
            "processing_time_ms": {
              "type": "integer",
              "description": "处理时间（毫秒）",
              "example": 3200
            },
            "cache_hit": {
              "type": "boolean",
              "description": "是否命中缓存",
              "example": false
            },
            "status": {
              "type": "string",
              "description": "状态",
              "enum": [
                "processing",
                "completed",
                "failed",
                "timeout"
              ],
              "example": "completed"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:30:00Z"
            }
          }
        },
        "SystemHealthStatus": {
          "type": "object",
          "properties": {
            "overall_status": {
              "type": "string",
              "description": "整体状态",
              "enum": [
                "healthy",
                "warning",
                "critical",
                "unknown"
              ],
              "example": "healthy"
            },
            "ai_services": {
              "type": "object",
              "description": "AI服务状态",
              "properties": {
                "diagnosis_service": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "online",
                        "offline",
                        "degraded"
                      ],
                      "example": "online"
                    },
                    "response_time": {
                      "type": "number",
                      "description": "响应时间（秒）",
                      "example": 2.5
                    },
                    "success_rate": {
                      "type": "number",
                      "description": "成功率",
                      "example": 0.98
                    }
                  }
                },
                "prediction_service": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "online",
                        "offline",
                        "degraded"
                      ],
                      "example": "online"
                    },
                    "response_time": {
                      "type": "number",
                      "example": 8.2
                    },
                    "success_rate": {
                      "type": "number",
                      "example": 0.95
                    }
                  }
                }
              }
            },
            "resource_usage": {
              "type": "object",
              "description": "资源使用情况",
              "properties": {
                "cpu_usage": {
                  "type": "number",
                  "description": "CPU使用率",
                  "example": 65.5
                },
                "memory_usage": {
                  "type": "number",
                  "description": "内存使用率",
                  "example": 72.3
                },
                "gpu_usage": {
                  "type": "number",
                  "description": "GPU使用率",
                  "example": 45.8
                }
              }
            },
            "active_models": {
              "type": "integer",
              "description": "活跃模型数量",
              "example": 12
            },
            "running_jobs": {
              "type": "integer",
              "description": "运行中的训练任务数量",
              "example": 3
            },
            "last_updated": {
              "type": "string",
              "format": "date-time",
              "description": "最后更新时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "UsageStatistics": {
          "type": "object",
          "properties": {
            "time_range": {
              "type": "object",
              "description": "统计时间范围",
              "properties": {
                "start_date": {
                  "type": "string",
                  "format": "date",
                  "description": "开始日期",
                  "example": "2025-07-16"
                },
                "end_date": {
                  "type": "string",
                  "format": "date",
                  "description": "结束日期",
                  "example": "2025-08-15"
                }
              }
            },
            "total_requests": {
              "type": "integer",
              "description": "总请求数",
              "example": 15420
            },
            "successful_requests": {
              "type": "integer",
              "description": "成功请求数",
              "example": 14891
            },
            "failed_requests": {
              "type": "integer",
              "description": "失败请求数",
              "example": 529
            },
            "success_rate": {
              "type": "number",
              "description": "成功率",
              "example": 0.966
            },
            "average_response_time": {
              "type": "number",
              "description": "平均响应时间（秒）",
              "example": 4.2
            },
            "by_analysis_type": {
              "type": "object",
              "description": "按分析类型统计",
              "properties": {
                "diagnosis": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "integer",
                      "example": 8520
                    },
                    "success_rate": {
                      "type": "number",
                      "example": 0.97
                    },
                    "avg_response_time": {
                      "type": "number",
                      "example": 3.8
                    }
                  }
                },
                "prediction": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "integer",
                      "example": 3240
                    },
                    "success_rate": {
                      "type": "number",
                      "example": 0.95
                    },
                    "avg_response_time": {
                      "type": "number",
                      "example": 12.5
                    }
                  }
                },
                "qa": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "integer",
                      "example": 2890
                    },
                    "success_rate": {
                      "type": "number",
                      "example": 0.98
                    },
                    "avg_response_time": {
                      "type": "number",
                      "example": 2.1
                    }
                  }
                },
                "anomaly": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "integer",
                      "example": 770
                    },
                    "success_rate": {
                      "type": "number",
                      "example": 0.96
                    },
                    "avg_response_time": {
                      "type": "number",
                      "example": 1.8
                    }
                  }
                }
              }
            },
            "top_users": {
              "type": "array",
              "description": "使用量最高的用户",
              "items": {
                "type": "object",
                "properties": {
                  "user_id": {
                    "type": "integer",
                    "example": 1001
                  },
                  "user_name": {
                    "type": "string",
                    "example": "张三"
                  },
                  "request_count": {
                    "type": "integer",
                    "example": 1250
                  },
                  "success_rate": {
                    "type": "number",
                    "example": 0.98
                  }
                }
              }
            }
          }
        },
        "ChatSessionInfo": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string",
              "description": "会话ID",
              "example": "session_user123_001"
            },
            "user_id": {
              "type": "integer",
              "description": "用户ID",
              "example": 1001
            },
            "session_title": {
              "type": "string",
              "description": "会话标题",
              "example": "Nginx配置相关咨询"
            },
            "message_count": {
              "type": "integer",
              "description": "消息数量",
              "example": 8
            },
            "last_message_time": {
              "type": "string",
              "format": "date-time",
              "description": "最后消息时间",
              "example": "2025-08-15T14:25:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:15:00Z"
            }
          }
        },
        "ChatSessionDetail": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string",
              "description": "会话ID",
              "example": "session_user123_001"
            },
            "user_id": {
              "type": "integer",
              "description": "用户ID",
              "example": 1001
            },
            "session_title": {
              "type": "string",
              "description": "会话标题",
              "example": "Nginx配置相关咨询"
            },
            "messages": {
              "type": "array",
              "description": "消息列表",
              "items": {
                "type": "object",
                "properties": {
                  "message_id": {
                    "type": "string",
                    "description": "消息ID",
                    "example": "msg_001"
                  },
                  "role": {
                    "type": "string",
                    "description": "角色",
                    "enum": [
                      "user",
                      "assistant"
                    ],
                    "example": "user"
                  },
                  "content": {
                    "type": "string",
                    "description": "消息内容",
                    "example": "如何配置Nginx负载均衡？"
                  },
                  "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "时间戳",
                    "example": "2025-08-15T10:15:00Z"
                  },
                  "confidence": {
                    "type": "number",
                    "description": "置信度（仅AI回复）",
                    "example": 0.95
                  }
                }
              }
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:15:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T14:25:00Z"
            }
          }
        },
        "AIModelDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/AIModelInfo"
            },
            {
              "type": "object",
              "properties": {
                "input_schema": {
                  "type": "object",
                  "description": "输入数据Schema",
                  "additionalProperties": true
                },
                "output_schema": {
                  "type": "object",
                  "description": "输出数据Schema",
                  "additionalProperties": true
                },
                "performance_metrics": {
                  "type": "object",
                  "description": "性能指标",
                  "properties": {
                    "accuracy": {
                      "type": "number",
                      "example": 92.5
                    },
                    "precision": {
                      "type": "number",
                      "example": 91.8
                    },
                    "recall": {
                      "type": "number",
                      "example": 93.2
                    },
                    "f1_score": {
                      "type": "number",
                      "example": 92.5
                    }
                  }
                },
                "resource_requirements": {
                  "type": "object",
                  "description": "资源需求",
                  "properties": {
                    "cpu_cores": {
                      "type": "integer",
                      "example": 4
                    },
                    "memory_gb": {
                      "type": "integer",
                      "example": 8
                    },
                    "gpu_count": {
                      "type": "integer",
                      "example": 1
                    }
                  }
                },
                "versions": {
                  "type": "array",
                  "description": "版本列表",
                  "items": {
                    "type": "object",
                    "properties": {
                      "version_id": {
                        "type": "integer",
                        "example": 1001
                      },
                      "version_number": {
                        "type": "string",
                        "example": "v2.0.1"
                      },
                      "is_active": {
                        "type": "boolean",
                        "example": true
                      },
                      "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-08-01T09:00:00Z"
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "AIModelUpdateRequest": {
          "type": "object",
          "properties": {
            "model_name": {
              "type": "string",
              "description": "模型名称",
              "example": "故障诊断模型v2.1"
            },
            "model_description": {
              "type": "string",
              "description": "模型描述",
              "example": "优化后的故障诊断模型，提升了准确率"
            },
            "resource_requirements": {
              "type": "object",
              "description": "资源需求",
              "properties": {
                "cpu_cores": {
                  "type": "integer",
                  "example": 6
                },
                "memory_gb": {
                  "type": "integer",
                  "example": 12
                },
                "gpu_count": {
                  "type": "integer",
                  "example": 2
                }
              }
            }
          }
        },
        "TrainingJobCreateRequest": {
          "type": "object",
          "required": [
            "model_id",
            "dataset_id",
            "job_name",
            "job_type"
          ],
          "properties": {
            "model_id": {
              "type": "integer",
              "description": "模型ID",
              "example": 1001
            },
            "dataset_id": {
              "type": "integer",
              "description": "数据集ID",
              "example": 2001
            },
            "job_name": {
              "type": "string",
              "description": "任务名称",
              "example": "故障诊断模型重训练-v2.1"
            },
            "job_type": {
              "type": "string",
              "description": "任务类型",
              "enum": [
                "initial",
                "retrain",
                "finetune",
                "transfer"
              ],
              "example": "retrain"
            },
            "training_config": {
              "type": "object",
              "description": "训练配置",
              "properties": {
                "epochs": {
                  "type": "integer",
                  "description": "训练轮次",
                  "example": 50
                },
                "batch_size": {
                  "type": "integer",
                  "description": "批次大小",
                  "example": 32
                },
                "learning_rate": {
                  "type": "number",
                  "description": "学习率",
                  "example": 0.001
                }
              }
            },
            "hyperparameters": {
              "type": "object",
              "description": "超参数",
              "additionalProperties": true
            },
            "resource_config": {
              "type": "object",
              "description": "资源配置",
              "properties": {
                "cpu_cores": {
                  "type": "integer",
                  "example": 8
                },
                "memory_gb": {
                  "type": "integer",
                  "example": 16
                },
                "gpu_count": {
                  "type": "integer",
                  "example": 2
                }
              }
            }
          }
        },
        "TrainingJobDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/TrainingJobInfo"
            },
            {
              "type": "object",
              "properties": {
                "model_name": {
                  "type": "string",
                  "description": "模型名称",
                  "example": "故障诊断模型v2.0"
                },
                "dataset_name": {
                  "type": "string",
                  "description": "数据集名称",
                  "example": "故障诊断训练数据集v1.0"
                },
                "training_config": {
                  "type": "object",
                  "description": "训练配置",
                  "additionalProperties": true
                },
                "hyperparameters": {
                  "type": "object",
                  "description": "超参数",
                  "additionalProperties": true
                },
                "training_metrics": {
                  "type": "object",
                  "description": "训练指标",
                  "properties": {
                    "loss_history": {
                      "type": "array",
                      "description": "损失历史",
                      "items": {
                        "type": "number"
                      },
                      "example": [
                        0.8,
                        0.6,
                        0.4,
                        0.3,
                        0.25
                      ]
                    },
                    "accuracy_history": {
                      "type": "array",
                      "description": "准确率历史",
                      "items": {
                        "type": "number"
                      },
                      "example": [
                        0.7,
                        0.8,
                        0.85,
                        0.9,
                        0.92
                      ]
                    }
                  }
                },
                "error_message": {
                  "type": "string",
                  "description": "错误信息（如果失败）",
                  "example": "训练数据格式错误"
                }
              }
            }
          ]
        }
      },
      "issues": []
    },
    "REQ-010-系统管理模块": {
      "file_path": "docs/api/4.5.1/modules/REQ-010-系统管理模块/openapi.yaml",
      "components": {
        "UserCreateRequest": {
          "type": "object",
          "required": [
            "username",
            "email",
            "real_name",
            "department_id"
          ],
          "properties": {
            "username": {
              "type": "string",
              "description": "用户名",
              "maxLength": 50,
              "pattern": "^[a-zA-Z0-9_]{3,50}$",
              "example": "zhangsan"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "maxLength": 100,
              "example": "zhangsan@company.com"
            },
            "phone": {
              "type": "string",
              "description": "手机号",
              "maxLength": 20,
              "pattern": "^1[3-9]\\d{9}$",
              "example": "13800138000"
            },
            "real_name": {
              "type": "string",
              "description": "真实姓名",
              "maxLength": 50,
              "example": "张三"
            },
            "department_id": {
              "type": "integer",
              "description": "部门ID",
              "example": 1001
            },
            "role_ids": {
              "type": "array",
              "description": "角色ID列表",
              "items": {
                "type": "integer"
              },
              "example": [
                1,
                2
              ]
            },
            "status": {
              "type": "string",
              "description": "用户状态",
              "enum": [
                "active",
                "inactive"
              ],
              "default": "active",
              "example": "active"
            },
            "password": {
              "type": "string",
              "description": "初始密码",
              "minLength": 8,
              "maxLength": 50,
              "example": "TempPass123!"
            },
            "avatar_url": {
              "type": "string",
              "description": "头像URL",
              "maxLength": 255,
              "example": "/avatars/zhangsan.jpg"
            }
          }
        },
        "UserUpdateRequest": {
          "type": "object",
          "properties": {
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "maxLength": 100,
              "example": "zhangsan.new@company.com"
            },
            "phone": {
              "type": "string",
              "description": "手机号",
              "maxLength": 20,
              "pattern": "^1[3-9]\\d{9}$",
              "example": "13900139000"
            },
            "real_name": {
              "type": "string",
              "description": "真实姓名",
              "maxLength": 50,
              "example": "张三丰"
            },
            "department_id": {
              "type": "integer",
              "description": "部门ID",
              "example": 1002
            },
            "status": {
              "type": "string",
              "description": "用户状态",
              "enum": [
                "active",
                "inactive",
                "locked"
              ],
              "example": "active"
            },
            "avatar_url": {
              "type": "string",
              "description": "头像URL",
              "maxLength": 255,
              "example": "/avatars/zhangsan_new.jpg"
            }
          }
        },
        "UserRoleAssignRequest": {
          "type": "object",
          "required": [
            "role_ids"
          ],
          "properties": {
            "role_ids": {
              "type": "array",
              "description": "角色ID列表",
              "items": {
                "type": "integer"
              },
              "example": [
                1,
                2,
                3
              ]
            },
            "reason": {
              "type": "string",
              "description": "分配原因",
              "maxLength": 500,
              "example": "业务需要，增加数据分析权限"
            }
          }
        },
        "RoleCreateRequest": {
          "type": "object",
          "required": [
            "role_name",
            "role_code",
            "role_type"
          ],
          "properties": {
            "role_name": {
              "type": "string",
              "description": "角色名称",
              "maxLength": 50,
              "example": "业务管理员"
            },
            "role_code": {
              "type": "string",
              "description": "角色编码",
              "maxLength": 50,
              "pattern": "^[a-zA-Z0-9_]{3,50}$",
              "example": "business_admin"
            },
            "description": {
              "type": "string",
              "description": "角色描述",
              "maxLength": 255,
              "example": "负责业务模块管理"
            },
            "role_type": {
              "type": "string",
              "description": "角色类型",
              "enum": [
                "system",
                "business",
                "custom"
              ],
              "example": "business"
            },
            "permission_ids": {
              "type": "array",
              "description": "权限ID列表",
              "items": {
                "type": "integer"
              },
              "example": [
                1,
                2,
                3,
                5,
                8
              ]
            },
            "sort_order": {
              "type": "integer",
              "description": "排序序号",
              "minimum": 0,
              "default": 0,
              "example": 10
            }
          }
        },
        "RoleUpdateRequest": {
          "type": "object",
          "properties": {
            "role_name": {
              "type": "string",
              "description": "角色名称",
              "maxLength": 50,
              "example": "高级业务管理员"
            },
            "description": {
              "type": "string",
              "description": "角色描述",
              "maxLength": 255,
              "example": "负责高级业务模块管理"
            },
            "status": {
              "type": "string",
              "description": "角色状态",
              "enum": [
                "active",
                "inactive"
              ],
              "example": "active"
            },
            "sort_order": {
              "type": "integer",
              "description": "排序序号",
              "minimum": 0,
              "example": 5
            }
          }
        },
        "RolePermissionAssignRequest": {
          "type": "object",
          "required": [
            "permission_ids"
          ],
          "properties": {
            "permission_ids": {
              "type": "array",
              "description": "权限ID列表",
              "items": {
                "type": "integer"
              },
              "example": [
                1,
                2,
                3,
                5,
                8,
                10
              ]
            },
            "reason": {
              "type": "string",
              "description": "分配原因",
              "maxLength": 500,
              "example": "业务需要，增加数据导出权限"
            }
          }
        },
        "ConfigCreateRequest": {
          "type": "object",
          "required": [
            "config_key",
            "config_value",
            "config_type"
          ],
          "properties": {
            "config_key": {
              "type": "string",
              "description": "配置键",
              "maxLength": 255,
              "pattern": "^[a-zA-Z0-9._-]+$",
              "example": "session.timeout"
            },
            "config_value": {
              "type": "string",
              "description": "配置值",
              "maxLength": 2000,
              "example": "7200"
            },
            "config_type": {
              "type": "string",
              "description": "配置类型",
              "enum": [
                "security",
                "system",
                "business",
                "notification",
                "integration"
              ],
              "example": "security"
            },
            "description": {
              "type": "string",
              "description": "配置描述",
              "maxLength": 500,
              "example": "会话超时时间（秒）"
            },
            "is_encrypted": {
              "type": "boolean",
              "description": "是否加密存储",
              "default": false,
              "example": false
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID（null表示全局配置）",
              "nullable": true,
              "example": null
            }
          }
        },
        "ConfigUpdateRequest": {
          "type": "object",
          "required": [
            "config_value"
          ],
          "properties": {
            "config_value": {
              "type": "string",
              "description": "配置值",
              "maxLength": 2000,
              "example": "12"
            },
            "description": {
              "type": "string",
              "description": "配置描述",
              "maxLength": 500,
              "example": "密码最小长度调整为12位"
            },
            "reason": {
              "type": "string",
              "description": "修改原因",
              "maxLength": 500,
              "example": "安全策略升级"
            }
          }
        },
        "ModuleToggleRequest": {
          "type": "object",
          "required": [
            "status"
          ],
          "properties": {
            "status": {
              "type": "string",
              "description": "模块状态",
              "enum": [
                "enabled",
                "disabled",
                "maintenance"
              ],
              "example": "enabled"
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID（null表示全局设置）",
              "nullable": true,
              "example": 1001
            },
            "reason": {
              "type": "string",
              "description": "操作原因",
              "maxLength": 500,
              "example": "业务需要启用该模块"
            },
            "effective_time": {
              "type": "string",
              "format": "date-time",
              "description": "生效时间（null表示立即生效）",
              "nullable": true,
              "example": "2025-08-14T15:00:00Z"
            }
          }
        },
        "UserExportRequest": {
          "type": "object",
          "required": [
            "format"
          ],
          "properties": {
            "format": {
              "type": "string",
              "description": "导出格式",
              "enum": [
                "excel",
                "csv"
              ],
              "example": "excel"
            },
            "filters": {
              "type": "object",
              "description": "过滤条件",
              "properties": {
                "department_ids": {
                  "type": "array",
                  "description": "部门ID列表",
                  "items": {
                    "type": "integer"
                  },
                  "example": [
                    1001,
                    1002
                  ]
                },
                "status": {
                  "type": "array",
                  "description": "用户状态列表",
                  "items": {
                    "type": "string",
                    "enum": [
                      "active",
                      "inactive",
                      "locked",
                      "deleted"
                    ]
                  },
                  "example": [
                    "active",
                    "inactive"
                  ]
                },
                "role_ids": {
                  "type": "array",
                  "description": "角色ID列表",
                  "items": {
                    "type": "integer"
                  },
                  "example": [
                    1,
                    2
                  ]
                },
                "created_start": {
                  "type": "string",
                  "format": "date",
                  "description": "创建时间开始",
                  "example": "2025-01-01"
                },
                "created_end": {
                  "type": "string",
                  "format": "date",
                  "description": "创建时间结束",
                  "example": "2025-12-31"
                }
              }
            },
            "fields": {
              "type": "array",
              "description": "导出字段列表",
              "items": {
                "type": "string",
                "enum": [
                  "username",
                  "real_name",
                  "email",
                  "phone",
                  "department_name",
                  "roles",
                  "status",
                  "last_login_time",
                  "created_at"
                ]
              },
              "example": [
                "username",
                "real_name",
                "email",
                "department_name",
                "roles"
              ]
            },
            "include_sensitive": {
              "type": "boolean",
              "description": "是否包含敏感信息",
              "default": false,
              "example": false
            }
          }
        },
        "ApiResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "响应状态码",
              "example": 200
            },
            "message": {
              "type": "string",
              "description": "响应消息",
              "example": "操作成功"
            },
            "data": {
              "type": "object",
              "description": "响应数据"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "响应时间戳",
              "example": "2025-08-14T14:30:00Z"
            },
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "req_123456789"
            }
          }
        },
        "PagedResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "响应状态码",
              "example": 200
            },
            "message": {
              "type": "string",
              "description": "响应消息",
              "example": "查询成功"
            },
            "data": {
              "type": "object",
              "properties": {
                "total": {
                  "type": "integer",
                  "description": "总记录数",
                  "example": 100
                },
                "page": {
                  "type": "integer",
                  "description": "当前页码",
                  "example": 1
                },
                "size": {
                  "type": "integer",
                  "description": "每页大小",
                  "example": 20
                },
                "pages": {
                  "type": "integer",
                  "description": "总页数",
                  "example": 5
                },
                "items": {
                  "type": "array",
                  "description": "数据列表",
                  "items": {
                    "type": "object"
                  }
                }
              }
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "响应时间戳",
              "example": "2025-08-14T14:30:00Z"
            },
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "req_123456789"
            }
          }
        },
        "ErrorResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "错误状态码",
              "example": 400
            },
            "message": {
              "type": "string",
              "description": "错误消息",
              "example": "参数验证失败"
            },
            "data": {
              "type": "object",
              "nullable": true,
              "description": "错误详情"
            },
            "error_details": {
              "type": "object",
              "description": "详细错误信息",
              "properties": {
                "error_code": {
                  "type": "string",
                  "description": "业务错误码",
                  "example": "USER_NOT_FOUND"
                },
                "field": {
                  "type": "string",
                  "description": "错误字段",
                  "example": "user_id"
                },
                "value": {
                  "type": "string",
                  "description": "错误值",
                  "example": "999999"
                },
                "suggestion": {
                  "type": "string",
                  "description": "修复建议",
                  "example": "请检查用户ID是否正确"
                }
              }
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "响应时间戳",
              "example": "2025-08-14T14:30:00Z"
            },
            "request_id": {
              "type": "string",
              "description": "请求ID",
              "example": "req_123456789"
            }
          }
        }
      },
      "issues": []
    },
    "REQ-015-用户体验增强系统": {
      "file_path": "docs/api/4.5.1/modules/REQ-015-用户体验增强系统/openapi.yaml",
      "components": {
        "PersonalizationSettings": {
          "type": "object",
          "properties": {
            "user_id": {
              "type": "integer",
              "description": "用户ID",
              "example": 1001
            },
            "theme": {
              "type": "string",
              "description": "主题设置",
              "enum": [
                "light",
                "dark",
                "auto"
              ],
              "example": "light"
            },
            "language": {
              "type": "string",
              "description": "语言设置",
              "example": "zh-CN"
            },
            "dashboard_layout": {
              "type": "object",
              "description": "仪表板布局",
              "properties": {
                "widgets": {
                  "type": "array",
                  "description": "组件列表",
                  "items": {
                    "type": "object",
                    "properties": {
                      "widget_id": {
                        "type": "string",
                        "description": "组件ID",
                        "example": "ticket-summary"
                      },
                      "position": {
                        "type": "object",
                        "description": "位置信息",
                        "properties": {
                          "x": {
                            "type": "integer",
                            "example": 0
                          },
                          "y": {
                            "type": "integer",
                            "example": 0
                          },
                          "width": {
                            "type": "integer",
                            "example": 6
                          },
                          "height": {
                            "type": "integer",
                            "example": 4
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "notification_preferences": {
              "type": "object",
              "description": "通知偏好",
              "properties": {
                "email_enabled": {
                  "type": "boolean",
                  "description": "邮件通知",
                  "example": true
                },
                "sms_enabled": {
                  "type": "boolean",
                  "description": "短信通知",
                  "example": false
                },
                "push_enabled": {
                  "type": "boolean",
                  "description": "推送通知",
                  "example": true
                },
                "frequency": {
                  "type": "string",
                  "description": "通知频率",
                  "enum": [
                    "immediate",
                    "hourly",
                    "daily"
                  ],
                  "example": "immediate"
                }
              }
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-15T10:30:00Z"
            }
          }
        },
        "PersonalizationUpdateRequest": {
          "type": "object",
          "properties": {
            "theme": {
              "type": "string",
              "description": "主题设置",
              "enum": [
                "light",
                "dark",
                "auto"
              ],
              "example": "dark"
            },
            "language": {
              "type": "string",
              "description": "语言设置",
              "example": "en-US"
            },
            "dashboard_layout": {
              "type": "object",
              "description": "仪表板布局",
              "additionalProperties": true
            },
            "notification_preferences": {
              "type": "object",
              "description": "通知偏好",
              "additionalProperties": true
            }
          }
        },
        "AccessibilitySettings": {
          "type": "object",
          "properties": {
            "user_id": {
              "type": "integer",
              "description": "用户ID",
              "example": 1001
            },
            "high_contrast": {
              "type": "boolean",
              "description": "高对比度模式",
              "example": false
            },
            "large_text": {
              "type": "boolean",
              "description": "大字体模式",
              "example": false
            },
            "screen_reader": {
              "type": "boolean",
              "description": "屏幕阅读器支持",
              "example": false
            },
            "keyboard_navigation": {
              "type": "boolean",
              "description": "键盘导航",
              "example": true
            },
            "reduced_motion": {
              "type": "boolean",
              "description": "减少动画",
              "example": false
            },
            "focus_indicators": {
              "type": "boolean",
              "description": "焦点指示器",
              "example": true
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-15T10:30:00Z"
            }
          }
        }
      },
      "issues": []
    },
    "REQ-009-运维管理": {
      "file_path": "docs/api/4.5.1/modules/REQ-009-运维管理/openapi.yaml",
      "components": {
        "AssetInfo": {
          "type": "object",
          "properties": {
            "asset_id": {
              "type": "integer",
              "format": "int64",
              "description": "资产ID",
              "example": 1001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 123
            },
            "asset_type": {
              "type": "string",
              "description": "资产类型",
              "enum": [
                "server",
                "network",
                "storage",
                "application"
              ],
              "example": "server"
            },
            "asset_name": {
              "type": "string",
              "description": "资产名称",
              "example": "web-server-01"
            },
            "asset_code": {
              "type": "string",
              "description": "资产编码",
              "example": "SRV-20250115-001"
            },
            "ip_address": {
              "type": "string",
              "description": "IP地址",
              "example": "192.168.1.100"
            },
            "hostname": {
              "type": "string",
              "description": "主机名",
              "example": "web01.example.com"
            },
            "status": {
              "type": "string",
              "description": "状态",
              "enum": [
                "active",
                "inactive",
                "maintenance",
                "decommissioned"
              ],
              "example": "active"
            },
            "environment": {
              "type": "string",
              "description": "环境",
              "enum": [
                "production",
                "staging",
                "development",
                "test"
              ],
              "example": "production"
            },
            "location": {
              "type": "string",
              "description": "物理位置",
              "example": "beijing-dc1"
            },
            "netbox_id": {
              "type": "string",
              "description": "Netbox中的ID",
              "example": "netbox-1001"
            },
            "last_sync_at": {
              "type": "string",
              "format": "date-time",
              "description": "最后同步时间",
              "example": "2025-01-15T10:30:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-01-15T09:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-01-15T10:30:00Z"
            }
          }
        },
        "AssetDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/AssetInfo"
            },
            {
              "type": "object",
              "properties": {
                "metadata": {
                  "type": "object",
                  "description": "扩展元数据",
                  "example": {
                    "cpu_cores": 8,
                    "memory_gb": 32,
                    "disk_gb": 500,
                    "os_version": "Ubuntu 20.04"
                  }
                },
                "monitor_configs": {
                  "type": "array",
                  "description": "监控配置列表",
                  "items": {
                    "$ref": "#/components/schemas/AssetMonitorConfig"
                  }
                },
                "recent_alerts": {
                  "type": "array",
                  "description": "最近告警列表",
                  "items": {
                    "$ref": "#/components/schemas/AlertEventInfo"
                  }
                }
              }
            }
          ]
        },
        "AssetCreateRequest": {
          "type": "object",
          "required": [
            "asset_type",
            "asset_name"
          ],
          "properties": {
            "asset_type": {
              "type": "string",
              "enum": [
                "server",
                "network",
                "storage",
                "application"
              ],
              "example": "server"
            },
            "asset_name": {
              "type": "string",
              "example": "web-server-02"
            },
            "asset_code": {
              "type": "string",
              "example": "SRV-20250115-002"
            },
            "ip_address": {
              "type": "string",
              "example": "192.168.1.101"
            },
            "hostname": {
              "type": "string",
              "example": "web02.example.com"
            },
            "environment": {
              "type": "string",
              "enum": [
                "production",
                "staging",
                "development",
                "test"
              ],
              "example": "production"
            },
            "location": {
              "type": "string",
              "example": "beijing-dc1"
            },
            "metadata": {
              "type": "object",
              "description": "扩展元数据",
              "example": {
                "cpu_cores": 8,
                "memory_gb": 32
              }
            }
          }
        },
        "AssetUpdateRequest": {
          "type": "object",
          "properties": {
            "asset_name": {
              "type": "string",
              "example": "web-server-01-updated"
            },
            "status": {
              "type": "string",
              "enum": [
                "active",
                "inactive",
                "maintenance",
                "decommissioned"
              ],
              "example": "maintenance"
            },
            "environment": {
              "type": "string",
              "enum": [
                "production",
                "staging",
                "development",
                "test"
              ],
              "example": "production"
            },
            "location": {
              "type": "string",
              "example": "beijing-dc2"
            },
            "metadata": {
              "type": "object",
              "description": "扩展元数据",
              "example": {
                "cpu_cores": 16,
                "memory_gb": 64
              }
            }
          }
        },
        "AssetSyncRequest": {
          "type": "object",
          "required": [
            "sync_type",
            "source_system"
          ],
          "properties": {
            "sync_type": {
              "type": "string",
              "description": "同步类型",
              "enum": [
                "full",
                "incremental"
              ],
              "example": "incremental"
            },
            "source_system": {
              "type": "string",
              "description": "来源系统",
              "enum": [
                "netbox",
                "cmdb",
                "manual"
              ],
              "example": "netbox"
            },
            "asset_types": {
              "type": "array",
              "description": "要同步的资产类型",
              "items": {
                "type": "string",
                "enum": [
                  "server",
                  "network",
                  "storage",
                  "application"
                ]
              },
              "example": [
                "server",
                "network"
              ]
            },
            "force_update": {
              "type": "boolean",
              "description": "是否强制更新",
              "default": false,
              "example": false
            }
          }
        },
        "AssetSyncResponse": {
          "type": "object",
          "properties": {
            "sync_task_id": {
              "type": "string",
              "description": "同步任务ID",
              "example": "sync-20250115-001"
            },
            "estimated_duration": {
              "type": "integer",
              "description": "预估时长（秒）",
              "example": 300
            },
            "status": {
              "type": "string",
              "description": "任务状态",
              "enum": [
                "running",
                "completed",
                "failed"
              ],
              "example": "running"
            }
          }
        },
        "AssetBatchRequest": {
          "type": "object",
          "required": [
            "action",
            "asset_ids"
          ],
          "properties": {
            "action": {
              "type": "string",
              "description": "批量操作类型",
              "enum": [
                "update_status",
                "update_location",
                "update_environment",
                "delete"
              ],
              "example": "update_status"
            },
            "asset_ids": {
              "type": "array",
              "description": "资产ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                1001,
                1002,
                1003
              ]
            },
            "parameters": {
              "type": "object",
              "description": "操作参数",
              "example": {
                "status": "maintenance",
                "reason": "计划维护"
              }
            }
          }
        },
        "AssetBatchResponse": {
          "type": "object",
          "properties": {
            "total_count": {
              "type": "integer",
              "description": "总数量",
              "example": 3
            },
            "success_count": {
              "type": "integer",
              "description": "成功数量",
              "example": 2
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 1
            },
            "results": {
              "type": "array",
              "description": "详细结果",
              "items": {
                "type": "object",
                "properties": {
                  "asset_id": {
                    "type": "integer",
                    "format": "int64",
                    "example": 1001
                  },
                  "success": {
                    "type": "boolean",
                    "example": true
                  },
                  "error_message": {
                    "type": "string",
                    "example": "权限不足"
                  }
                }
              }
            }
          }
        },
        "AssetMonitorConfig": {
          "type": "object",
          "properties": {
            "config_id": {
              "type": "integer",
              "format": "int64",
              "description": "配置ID",
              "example": 6001
            },
            "asset_id": {
              "type": "integer",
              "format": "int64",
              "description": "资产ID",
              "example": 1001
            },
            "monitor_type": {
              "type": "string",
              "description": "监控类型",
              "enum": [
                "system",
                "application",
                "network",
                "custom"
              ],
              "example": "system"
            },
            "config_name": {
              "type": "string",
              "description": "配置名称",
              "example": "基础系统监控"
            },
            "monitor_items": {
              "type": "object",
              "description": "监控项配置",
              "example": {
                "cpu": {
                  "threshold": 80,
                  "interval": 60
                },
                "memory": {
                  "threshold": 85,
                  "interval": 60
                }
              }
            },
            "collection_interval": {
              "type": "integer",
              "description": "采集间隔（秒）",
              "example": 60
            },
            "alert_rules": {
              "type": "array",
              "description": "告警规则配置",
              "items": {
                "type": "object",
                "properties": {
                  "metric": {
                    "type": "string",
                    "example": "cpu_usage"
                  },
                  "operator": {
                    "type": "string",
                    "enum": [
                      ">",
                      ">=",
                      "<",
                      "<=",
                      "==",
                      "!="
                    ],
                    "example": ">"
                  },
                  "threshold": {
                    "type": "number",
                    "example": 80
                  },
                  "duration": {
                    "type": "integer",
                    "description": "持续时间（秒）",
                    "example": 300
                  },
                  "severity": {
                    "type": "string",
                    "enum": [
                      "critical",
                      "high",
                      "medium",
                      "low"
                    ],
                    "example": "high"
                  }
                }
              }
            },
            "status": {
              "type": "string",
              "description": "状态",
              "enum": [
                "active",
                "inactive",
                "error"
              ],
              "example": "active"
            },
            "last_check_at": {
              "type": "string",
              "format": "date-time",
              "description": "最后检查时间",
              "example": "2025-01-15T10:30:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-01-15T09:00:00Z"
            }
          }
        },
        "AssetMonitorConfigRequest": {
          "type": "object",
          "required": [
            "monitor_type",
            "config_name",
            "monitor_items"
          ],
          "properties": {
            "monitor_type": {
              "type": "string",
              "enum": [
                "system",
                "application",
                "network",
                "custom"
              ],
              "example": "system"
            },
            "config_name": {
              "type": "string",
              "example": "基础系统监控"
            },
            "monitor_items": {
              "type": "object",
              "description": "监控项配置",
              "example": {
                "cpu": {
                  "threshold": 80,
                  "interval": 60
                },
                "memory": {
                  "threshold": 85,
                  "interval": 60
                }
              }
            },
            "collection_interval": {
              "type": "integer",
              "description": "采集间隔（秒）",
              "default": 60,
              "example": 60
            },
            "alert_rules": {
              "type": "array",
              "description": "告警规则配置",
              "items": {
                "type": "object",
                "properties": {
                  "metric": {
                    "type": "string",
                    "example": "cpu_usage"
                  },
                  "operator": {
                    "type": "string",
                    "enum": [
                      ">",
                      ">=",
                      "<",
                      "<=",
                      "==",
                      "!="
                    ],
                    "example": ">"
                  },
                  "threshold": {
                    "type": "number",
                    "example": 80
                  },
                  "duration": {
                    "type": "integer",
                    "example": 300
                  },
                  "severity": {
                    "type": "string",
                    "enum": [
                      "critical",
                      "high",
                      "medium",
                      "low"
                    ],
                    "example": "high"
                  }
                }
              }
            }
          }
        },
        "AlertEventInfo": {
          "type": "object",
          "properties": {
            "event_id": {
              "type": "integer",
              "format": "int64",
              "description": "事件ID",
              "example": 2001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 123
            },
            "alert_id": {
              "type": "string",
              "description": "外部告警ID",
              "example": "alert-20250115-001"
            },
            "rule_id": {
              "type": "integer",
              "format": "int64",
              "description": "触发规则ID",
              "example": 7001
            },
            "asset_id": {
              "type": "integer",
              "format": "int64",
              "description": "关联资产ID",
              "example": 1001
            },
            "asset_name": {
              "type": "string",
              "description": "资产名称",
              "example": "web-server-01"
            },
            "event_type": {
              "type": "string",
              "description": "事件类型",
              "enum": [
                "alert",
                "recovery",
                "timeout"
              ],
              "example": "alert"
            },
            "severity": {
              "type": "string",
              "description": "严重级别",
              "enum": [
                "critical",
                "high",
                "medium",
                "low"
              ],
              "example": "high"
            },
            "title": {
              "type": "string",
              "description": "告警标题",
              "example": "服务器CPU使用率过高"
            },
            "description": {
              "type": "string",
              "description": "告警描述",
              "example": "web-server-01 CPU使用率达到85%，持续时间超过5分钟"
            },
            "source_system": {
              "type": "string",
              "description": "来源系统",
              "enum": [
                "nightingale",
                "prometheus",
                "custom"
              ],
              "example": "nightingale"
            },
            "status": {
              "type": "string",
              "description": "状态",
              "enum": [
                "new",
                "processing",
                "resolved",
                "closed",
                "suppressed"
              ],
              "example": "new"
            },
            "auto_processed": {
              "type": "boolean",
              "description": "是否自动处理",
              "example": false
            },
            "task_id": {
              "type": "integer",
              "format": "int64",
              "description": "关联任务ID",
              "example": 5001
            },
            "ticket_id": {
              "type": "integer",
              "format": "int64",
              "description": "关联工单ID",
              "example": 8001
            },
            "duplicate_count": {
              "type": "integer",
              "description": "重复次数",
              "example": 1
            },
            "first_occurrence": {
              "type": "string",
              "format": "date-time",
              "description": "首次发生时间",
              "example": "2025-01-15T10:30:00Z"
            },
            "last_occurrence": {
              "type": "string",
              "format": "date-time",
              "description": "最后发生时间",
              "example": "2025-01-15T10:35:00Z"
            },
            "resolved_at": {
              "type": "string",
              "format": "date-time",
              "description": "解决时间",
              "example": "2025-01-15T10:45:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-01-15T10:30:00Z"
            },
            "assigned_to": {
              "type": "integer",
              "format": "int64",
              "description": "分派给",
              "example": 1001
            }
          }
        },
        "AlertEventDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/AlertEventInfo"
            },
            {
              "type": "object",
              "properties": {
                "raw_data": {
                  "type": "object",
                  "description": "原始告警数据",
                  "example": {
                    "metric": "cpu_usage",
                    "value": 85.2,
                    "timestamp": "2025-01-15T10:30:00Z",
                    "labels": {
                      "instance": "web-server-01",
                      "job": "node-exporter"
                    }
                  }
                },
                "processing_history": {
                  "type": "array",
                  "description": "处理历史",
                  "items": {
                    "type": "object",
                    "properties": {
                      "action": {
                        "type": "string",
                        "example": "auto_resolve_attempt"
                      },
                      "result": {
                        "type": "string",
                        "example": "failed"
                      },
                      "message": {
                        "type": "string",
                        "example": "剧本执行失败"
                      },
                      "timestamp": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-01-15T10:32:00Z"
                      },
                      "operator_id": {
                        "type": "integer",
                        "format": "int64",
                        "example": 1001
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "AlertEventRequest": {
          "type": "object",
          "required": [
            "alert_id",
            "source_system",
            "severity",
            "title"
          ],
          "properties": {
            "alert_id": {
              "type": "string",
              "description": "外部告警ID",
              "example": "alert-20250115-001"
            },
            "source_system": {
              "type": "string",
              "enum": [
                "nightingale",
                "prometheus",
                "custom"
              ],
              "example": "nightingale"
            },
            "severity": {
              "type": "string",
              "enum": [
                "critical",
                "high",
                "medium",
                "low"
              ],
              "example": "high"
            },
            "title": {
              "type": "string",
              "description": "告警标题",
              "example": "服务器CPU使用率过高"
            },
            "description": {
              "type": "string",
              "description": "告警描述",
              "example": "web-server-01 CPU使用率达到85%"
            },
            "asset_id": {
              "type": "integer",
              "format": "int64",
              "description": "关联资产ID",
              "example": 1001
            },
            "raw_data": {
              "type": "object",
              "description": "原始告警数据",
              "example": {
                "metric": "cpu_usage",
                "value": 85.2,
                "timestamp": "2025-01-15T10:30:00Z"
              }
            },
            "tags": {
              "type": "object",
              "description": "标签信息",
              "example": {
                "environment": "production",
                "service": "web"
              }
            }
          }
        },
        "AlertEventResponse": {
          "type": "object",
          "properties": {
            "event_id": {
              "type": "integer",
              "format": "int64",
              "description": "生成的事件ID",
              "example": 2001
            },
            "processing_action": {
              "type": "string",
              "description": "处理动作",
              "enum": [
                "auto_resolve",
                "create_ticket",
                "notify_only",
                "suppressed"
              ],
              "example": "auto_resolve"
            },
            "task_id": {
              "type": "integer",
              "format": "int64",
              "description": "生成的任务ID",
              "example": 5001
            },
            "estimated_resolution_time": {
              "type": "integer",
              "description": "预估解决时间（分钟）",
              "example": 15
            }
          }
        },
        "AlertProcessRequest": {
          "type": "object",
          "required": [
            "action"
          ],
          "properties": {
            "action": {
              "type": "string",
              "description": "处理动作",
              "enum": [
                "auto_resolve",
                "manual_resolve",
                "create_ticket",
                "suppress",
                "escalate"
              ],
              "example": "auto_resolve"
            },
            "playbook_id": {
              "type": "integer",
              "format": "int64",
              "description": "执行剧本ID",
              "example": 3001
            },
            "assigned_to": {
              "type": "integer",
              "format": "int64",
              "description": "分派给",
              "example": 1001
            },
            "comment": {
              "type": "string",
              "description": "处理备注",
              "example": "自动执行修复脚本"
            },
            "suppress_duration": {
              "type": "integer",
              "description": "抑制时长（分钟）",
              "example": 60
            }
          }
        },
        "AlertProcessResponse": {
          "type": "object",
          "properties": {
            "processing_result": {
              "type": "string",
              "description": "处理结果",
              "enum": [
                "success",
                "failed",
                "pending"
              ],
              "example": "success"
            },
            "task_id": {
              "type": "integer",
              "format": "int64",
              "description": "生成的任务ID",
              "example": 5001
            },
            "ticket_id": {
              "type": "integer",
              "format": "int64",
              "description": "生成的工单ID",
              "example": 8001
            },
            "execution_id": {
              "type": "integer",
              "format": "int64",
              "description": "剧本执行ID",
              "example": 4001
            },
            "message": {
              "type": "string",
              "description": "处理消息",
              "example": "剧本执行已启动"
            }
          }
        },
        "AlertBatchProcessRequest": {
          "type": "object",
          "required": [
            "event_ids",
            "action"
          ],
          "properties": {
            "event_ids": {
              "type": "array",
              "description": "告警事件ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                2001,
                2002,
                2003
              ]
            },
            "action": {
              "type": "string",
              "description": "批量处理动作",
              "enum": [
                "suppress",
                "resolve",
                "escalate",
                "assign"
              ],
              "example": "suppress"
            },
            "duration": {
              "type": "integer",
              "description": "抑制时长（分钟）",
              "example": 60
            },
            "reason": {
              "type": "string",
              "description": "处理原因",
              "example": "计划维护期间抑制告警"
            },
            "assigned_to": {
              "type": "integer",
              "format": "int64",
              "description": "分派给",
              "example": 1001
            }
          }
        },
        "AlertBatchProcessResponse": {
          "type": "object",
          "properties": {
            "total_count": {
              "type": "integer",
              "description": "总数量",
              "example": 3
            },
            "success_count": {
              "type": "integer",
              "description": "成功数量",
              "example": 2
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 1
            },
            "results": {
              "type": "array",
              "description": "详细结果",
              "items": {
                "type": "object",
                "properties": {
                  "event_id": {
                    "type": "integer",
                    "format": "int64",
                    "example": 2001
                  },
                  "success": {
                    "type": "boolean",
                    "example": true
                  },
                  "error_message": {
                    "type": "string",
                    "example": "告警已解决"
                  }
                }
              }
            }
          }
        },
        "PlaybookInfo": {
          "type": "object",
          "properties": {
            "playbook_id": {
              "type": "integer",
              "format": "int64",
              "description": "剧本ID",
              "example": 3001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 123
            },
            "playbook_name": {
              "type": "string",
              "description": "剧本名称",
              "example": "Nginx服务重启"
            },
            "playbook_code": {
              "type": "string",
              "description": "剧本编码",
              "example": "PB-NGINX-RESTART-001"
            },
            "playbook_type": {
              "type": "string",
              "description": "剧本类型",
              "enum": [
                "diagnostic",
                "repair",
                "deployment",
                "maintenance"
              ],
              "example": "repair"
            },
            "category": {
              "type": "string",
              "description": "分类",
              "enum": [
                "system",
                "application",
                "network",
                "database"
              ],
              "example": "application"
            },
            "description": {
              "type": "string",
              "description": "剧本描述",
              "example": "重启Nginx服务并验证状态"
            },
            "script_language": {
              "type": "string",
              "description": "脚本语言",
              "enum": [
                "bash",
                "python",
                "ansible",
                "powershell"
              ],
              "example": "bash"
            },
            "execution_timeout": {
              "type": "integer",
              "description": "执行超时时间（秒）",
              "example": 300
            },
            "risk_level": {
              "type": "string",
              "description": "风险等级",
              "enum": [
                "low",
                "medium",
                "high",
                "critical"
              ],
              "example": "medium"
            },
            "approval_required": {
              "type": "boolean",
              "description": "是否需要审批",
              "example": false
            },
            "version": {
              "type": "string",
              "description": "版本号",
              "example": "1.0.0"
            },
            "status": {
              "type": "string",
              "description": "状态",
              "enum": [
                "active",
                "inactive",
                "testing",
                "deprecated"
              ],
              "example": "active"
            },
            "success_rate": {
              "type": "number",
              "description": "成功率",
              "example": 95.5
            },
            "avg_execution_time": {
              "type": "integer",
              "description": "平均执行时间（秒）",
              "example": 180
            },
            "last_executed_at": {
              "type": "string",
              "format": "date-time",
              "description": "最后执行时间",
              "example": "2025-01-15T10:30:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-01-15T09:00:00Z"
            }
          }
        },
        "PlaybookDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/PlaybookInfo"
            },
            {
              "type": "object",
              "properties": {
                "script_content": {
                  "type": "string",
                  "description": "脚本内容",
                  "example": "#!/bin/bash\nsudo systemctl restart nginx\nsudo systemctl status nginx\n"
                },
                "parameters_schema": {
                  "type": "object",
                  "description": "参数模式定义",
                  "example": {
                    "type": "object",
                    "properties": {
                      "service_name": {
                        "type": "string",
                        "default": "nginx"
                      },
                      "timeout": {
                        "type": "integer",
                        "default": 300
                      }
                    }
                  }
                },
                "execution_history": {
                  "type": "array",
                  "description": "执行历史",
                  "items": {
                    "type": "object",
                    "properties": {
                      "execution_id": {
                        "type": "integer",
                        "format": "int64",
                        "example": 4001
                      },
                      "execution_status": {
                        "type": "string",
                        "enum": [
                          "pending",
                          "running",
                          "success",
                          "failed",
                          "timeout",
                          "cancelled"
                        ],
                        "example": "success"
                      },
                      "start_time": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-01-15T10:30:00Z"
                      },
                      "duration": {
                        "type": "integer",
                        "description": "执行时长（秒）",
                        "example": 180
                      },
                      "executor_name": {
                        "type": "string",
                        "example": "张三"
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "PlaybookCreateRequest": {
          "type": "object",
          "required": [
            "playbook_name",
            "playbook_type",
            "script_content",
            "script_language"
          ],
          "properties": {
            "playbook_name": {
              "type": "string",
              "example": "Nginx服务重启"
            },
            "playbook_code": {
              "type": "string",
              "example": "PB-NGINX-RESTART-001"
            },
            "playbook_type": {
              "type": "string",
              "enum": [
                "diagnostic",
                "repair",
                "deployment",
                "maintenance"
              ],
              "example": "repair"
            },
            "category": {
              "type": "string",
              "enum": [
                "system",
                "application",
                "network",
                "database"
              ],
              "example": "application"
            },
            "description": {
              "type": "string",
              "example": "重启Nginx服务并验证状态"
            },
            "script_content": {
              "type": "string",
              "example": "#!/bin/bash\nsudo systemctl restart nginx\nsudo systemctl status nginx\n"
            },
            "script_language": {
              "type": "string",
              "enum": [
                "bash",
                "python",
                "ansible",
                "powershell"
              ],
              "example": "bash"
            },
            "parameters_schema": {
              "type": "object",
              "description": "参数模式定义",
              "example": {
                "type": "object",
                "properties": {
                  "service_name": {
                    "type": "string",
                    "default": "nginx"
                  }
                }
              }
            },
            "execution_timeout": {
              "type": "integer",
              "description": "执行超时时间（秒）",
              "default": 3600,
              "example": 300
            },
            "risk_level": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "critical"
              ],
              "example": "medium"
            },
            "approval_required": {
              "type": "boolean",
              "default": false,
              "example": false
            }
          }
        },
        "PlaybookExecuteRequest": {
          "type": "object",
          "required": [
            "target_assets"
          ],
          "properties": {
            "target_assets": {
              "type": "array",
              "description": "目标资产ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                1001,
                1002
              ]
            },
            "parameters": {
              "type": "object",
              "description": "执行参数",
              "example": {
                "service_name": "nginx",
                "action": "restart",
                "timeout": 300
              }
            },
            "execution_mode": {
              "type": "string",
              "description": "执行模式",
              "enum": [
                "manual",
                "auto",
                "scheduled"
              ],
              "default": "manual",
              "example": "manual"
            },
            "approval_required": {
              "type": "boolean",
              "description": "是否需要审批",
              "default": false,
              "example": false
            },
            "scheduled_time": {
              "type": "string",
              "format": "date-time",
              "description": "计划执行时间",
              "example": "2025-01-15T11:00:00Z"
            }
          }
        },
        "PlaybookExecuteResponse": {
          "type": "object",
          "properties": {
            "execution_id": {
              "type": "integer",
              "format": "int64",
              "description": "执行ID",
              "example": 4001
            },
            "task_id": {
              "type": "integer",
              "format": "int64",
              "description": "任务ID",
              "example": 5001
            },
            "estimated_duration": {
              "type": "integer",
              "description": "预估执行时长（秒）",
              "example": 180
            },
            "status": {
              "type": "string",
              "description": "执行状态",
              "enum": [
                "pending",
                "running",
                "success",
                "failed",
                "timeout",
                "cancelled"
              ],
              "example": "running"
            },
            "approval_id": {
              "type": "integer",
              "format": "int64",
              "description": "审批ID（如需审批）",
              "example": 9001
            }
          }
        },
        "PlaybookExecutionInfo": {
          "type": "object",
          "properties": {
            "execution_id": {
              "type": "integer",
              "format": "int64",
              "description": "执行ID",
              "example": 4001
            },
            "playbook_id": {
              "type": "integer",
              "format": "int64",
              "description": "剧本ID",
              "example": 3001
            },
            "playbook_name": {
              "type": "string",
              "description": "剧本名称",
              "example": "Nginx服务重启"
            },
            "execution_status": {
              "type": "string",
              "description": "执行状态",
              "enum": [
                "pending",
                "running",
                "success",
                "failed",
                "timeout",
                "cancelled"
              ],
              "example": "success"
            },
            "execution_mode": {
              "type": "string",
              "description": "执行模式",
              "enum": [
                "manual",
                "auto",
                "scheduled"
              ],
              "example": "manual"
            },
            "start_time": {
              "type": "string",
              "format": "date-time",
              "description": "开始时间",
              "example": "2025-01-15T10:30:00Z"
            },
            "end_time": {
              "type": "string",
              "format": "date-time",
              "description": "结束时间",
              "example": "2025-01-15T10:33:00Z"
            },
            "duration": {
              "type": "integer",
              "description": "执行时长（秒）",
              "example": 180
            },
            "target_assets": {
              "type": "array",
              "description": "目标资产执行结果",
              "items": {
                "type": "object",
                "properties": {
                  "asset_id": {
                    "type": "integer",
                    "format": "int64",
                    "example": 1001
                  },
                  "asset_name": {
                    "type": "string",
                    "example": "web-server-01"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "success",
                      "failed",
                      "timeout"
                    ],
                    "example": "success"
                  },
                  "output": {
                    "type": "string",
                    "example": "nginx服务重启成功"
                  },
                  "error_message": {
                    "type": "string",
                    "example": ""
                  }
                }
              }
            },
            "output_result": {
              "type": "string",
              "description": "执行输出",
              "example": "所有目标服务器nginx服务重启成功"
            },
            "error_message": {
              "type": "string",
              "description": "错误信息",
              "example": ""
            },
            "exit_code": {
              "type": "integer",
              "description": "退出码",
              "example": 0
            },
            "executor_name": {
              "type": "string",
              "description": "执行人姓名",
              "example": "张三"
            }
          }
        },
        "TaskInfo": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "integer",
              "format": "int64",
              "description": "任务ID",
              "example": 5001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 123
            },
            "task_type": {
              "type": "string",
              "description": "任务类型",
              "enum": [
                "alert_handling",
                "scheduled_maintenance",
                "manual_operation"
              ],
              "example": "alert_handling"
            },
            "task_name": {
              "type": "string",
              "description": "任务名称",
              "example": "处理CPU使用率告警"
            },
            "task_description": {
              "type": "string",
              "description": "任务描述",
              "example": "自动执行nginx重启脚本解决CPU使用率过高问题"
            },
            "priority": {
              "type": "string",
              "description": "优先级",
              "enum": [
                "critical",
                "high",
                "medium",
                "low"
              ],
              "example": "high"
            },
            "task_status": {
              "type": "string",
              "description": "任务状态",
              "enum": [
                "pending",
                "running",
                "success",
                "failed",
                "cancelled"
              ],
              "example": "running"
            },
            "progress_percentage": {
              "type": "integer",
              "description": "进度百分比",
              "minimum": 0,
              "maximum": 100,
              "example": 75
            },
            "playbook_id": {
              "type": "integer",
              "format": "int64",
              "description": "关联剧本ID",
              "example": 3001
            },
            "execution_id": {
              "type": "integer",
              "format": "int64",
              "description": "执行记录ID",
              "example": 4001
            },
            "asset_count": {
              "type": "integer",
              "description": "目标资产数量",
              "example": 2
            },
            "start_time": {
              "type": "string",
              "format": "date-time",
              "description": "开始时间",
              "example": "2025-01-15T10:30:00Z"
            },
            "end_time": {
              "type": "string",
              "format": "date-time",
              "description": "结束时间",
              "example": "2025-01-15T10:33:00Z"
            },
            "estimated_duration": {
              "type": "integer",
              "description": "预估时长（秒）",
              "example": 300
            },
            "actual_duration": {
              "type": "integer",
              "description": "实际时长（秒）",
              "example": 180
            },
            "executor_id": {
              "type": "integer",
              "format": "int64",
              "description": "执行人ID",
              "example": 1001
            },
            "executor_name": {
              "type": "string",
              "description": "执行人姓名",
              "example": "张三"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-01-15T10:30:00Z"
            }
          }
        },
        "TaskDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/TaskInfo"
            },
            {
              "type": "object",
              "properties": {
                "asset_ids": {
                  "type": "array",
                  "description": "目标资产ID列表",
                  "items": {
                    "type": "integer",
                    "format": "int64"
                  },
                  "example": [
                    1001,
                    1002
                  ]
                },
                "result_summary": {
                  "type": "string",
                  "description": "结果摘要",
                  "example": "2台服务器nginx服务重启成功"
                },
                "result_detail": {
                  "type": "object",
                  "description": "详细结果",
                  "example": {
                    "success_count": 2,
                    "failed_count": 0,
                    "assets": [
                      {
                        "asset_id": 1001,
                        "status": "success",
                        "message": "nginx重启成功"
                      },
                      {
                        "asset_id": 1002,
                        "status": "success",
                        "message": "nginx重启成功"
                      }
                    ]
                  }
                },
                "error_message": {
                  "type": "string",
                  "description": "错误信息",
                  "example": ""
                },
                "logs": {
                  "type": "array",
                  "description": "执行日志",
                  "items": {
                    "type": "object",
                    "properties": {
                      "timestamp": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-01-15T10:30:30Z"
                      },
                      "level": {
                        "type": "string",
                        "enum": [
                          "info",
                          "warn",
                          "error"
                        ],
                        "example": "info"
                      },
                      "message": {
                        "type": "string",
                        "example": "开始执行nginx重启脚本"
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "TaskControlRequest": {
          "type": "object",
          "required": [
            "action"
          ],
          "properties": {
            "action": {
              "type": "string",
              "description": "控制动作",
              "enum": [
                "cancel",
                "pause",
                "resume",
                "retry"
              ],
              "example": "cancel"
            },
            "reason": {
              "type": "string",
              "description": "操作原因",
              "example": "用户取消操作"
            },
            "force_stop": {
              "type": "boolean",
              "description": "是否强制停止",
              "default": false,
              "example": false
            }
          }
        },
        "TaskControlResponse": {
          "type": "object",
          "properties": {
            "control_result": {
              "type": "string",
              "description": "控制结果",
              "enum": [
                "success",
                "failed",
                "not_applicable"
              ],
              "example": "success"
            },
            "new_status": {
              "type": "string",
              "description": "新状态",
              "enum": [
                "pending",
                "running",
                "success",
                "failed",
                "cancelled"
              ],
              "example": "cancelled"
            },
            "message": {
              "type": "string",
              "description": "控制消息",
              "example": "任务已成功取消"
            }
          }
        },
        "MonitorConfigInfo": {
          "type": "object",
          "properties": {
            "config_id": {
              "type": "integer",
              "format": "int64",
              "description": "配置ID",
              "example": 6001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 123
            },
            "asset_id": {
              "type": "integer",
              "format": "int64",
              "description": "资产ID",
              "example": 1001
            },
            "asset_name": {
              "type": "string",
              "description": "资产名称",
              "example": "web-server-01"
            },
            "monitor_type": {
              "type": "string",
              "description": "监控类型",
              "enum": [
                "system",
                "application",
                "network",
                "custom"
              ],
              "example": "system"
            },
            "config_name": {
              "type": "string",
              "description": "配置名称",
              "example": "基础系统监控"
            },
            "collection_interval": {
              "type": "integer",
              "description": "采集间隔（秒）",
              "example": 60
            },
            "status": {
              "type": "string",
              "description": "状态",
              "enum": [
                "active",
                "inactive",
                "error"
              ],
              "example": "active"
            },
            "last_check_at": {
              "type": "string",
              "format": "date-time",
              "description": "最后检查时间",
              "example": "2025-01-15T10:30:00Z"
            },
            "error_message": {
              "type": "string",
              "description": "错误信息",
              "example": ""
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-01-15T09:00:00Z"
            }
          }
        },
        "MonitorConfigDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/MonitorConfigInfo"
            },
            {
              "type": "object",
              "properties": {
                "monitor_items": {
                  "type": "object",
                  "description": "监控项配置",
                  "example": {
                    "cpu": {
                      "threshold": 80,
                      "interval": 60
                    },
                    "memory": {
                      "threshold": 85,
                      "interval": 60
                    },
                    "disk": {
                      "threshold": 90,
                      "interval": 300
                    }
                  }
                },
                "alert_rules": {
                  "type": "array",
                  "description": "告警规则配置",
                  "items": {
                    "type": "object",
                    "properties": {
                      "metric": {
                        "type": "string",
                        "example": "cpu_usage"
                      },
                      "operator": {
                        "type": "string",
                        "enum": [
                          ">",
                          ">=",
                          "<",
                          "<=",
                          "==",
                          "!="
                        ],
                        "example": ">"
                      },
                      "threshold": {
                        "type": "number",
                        "example": 80
                      },
                      "duration": {
                        "type": "integer",
                        "example": 300
                      },
                      "severity": {
                        "type": "string",
                        "enum": [
                          "critical",
                          "high",
                          "medium",
                          "low"
                        ],
                        "example": "high"
                      }
                    }
                  }
                },
                "recent_metrics": {
                  "type": "array",
                  "description": "最近指标数据",
                  "items": {
                    "type": "object",
                    "properties": {
                      "metric_name": {
                        "type": "string",
                        "example": "cpu_usage"
                      },
                      "value": {
                        "type": "number",
                        "example": 65.5
                      },
                      "unit": {
                        "type": "string",
                        "example": "percent"
                      },
                      "timestamp": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-01-15T10:30:00Z"
                      }
                    }
                  }
                }
              }
            }
          ]
        }
      },
      "issues": []
    },
    "REQ-007-甲方管理与报表系统": {
      "file_path": "docs/api/4.5.1/modules/REQ-007-甲方管理与报表系统/openapi.yaml",
      "components": {
        "ApiResponse": {
          "$ref": "../domains/common.yaml#/components/schemas/ApiResponse"
        },
        "PagedResponse": {
          "$ref": "../domains/common.yaml#/components/schemas/ApiResponse"
        },
        "ErrorResponse": {
          "$ref": "../domains/common.yaml#/components/schemas/ErrorResponse"
        },
        "ClientTheme": {
          "type": "object",
          "description": "甲方主题配置",
          "properties": {
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 12345
            },
            "company_name": {
              "type": "string",
              "description": "公司名称",
              "example": "ABC科技有限公司"
            },
            "logo_url": {
              "type": "string",
              "format": "uri",
              "description": "公司Logo URL",
              "example": "https://cdn.example.com/logos/abc-tech.png"
            },
            "primary_color": {
              "type": "string",
              "description": "主题色",
              "example": "#1890ff"
            },
            "secondary_color": {
              "type": "string",
              "description": "辅助色",
              "example": "#52c41a"
            },
            "background_color": {
              "type": "string",
              "description": "背景色",
              "example": "#f0f2f5"
            },
            "custom_css": {
              "type": "string",
              "description": "自定义CSS样式",
              "example": ".custom-header { background: linear-gradient(90deg, #1890ff, #52c41a); }"
            },
            "favicon_url": {
              "type": "string",
              "format": "uri",
              "description": "网站图标URL",
              "example": "https://cdn.example.com/favicons/abc-tech.ico"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-01-01T09:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-14T14:30:00Z"
            }
          }
        },
        "ClientLoginRequest": {
          "type": "object",
          "description": "甲方用户登录请求",
          "required": [
            "username",
            "password",
            "tenant_id"
          ],
          "properties": {
            "username": {
              "type": "string",
              "description": "用户名或邮箱",
              "example": "admin@abc-tech.com"
            },
            "password": {
              "type": "string",
              "description": "密码（加密传输）",
              "example": "encrypted_password_hash"
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 12345
            },
            "remember_me": {
              "type": "boolean",
              "description": "是否记住登录状态",
              "default": false,
              "example": true
            },
            "captcha_code": {
              "type": "string",
              "description": "验证码（如需要）",
              "example": "ABCD"
            }
          }
        },
        "ClientLoginResponse": {
          "type": "object",
          "description": "甲方用户登录响应",
          "properties": {
            "access_token": {
              "type": "string",
              "description": "访问令牌",
              "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            },
            "refresh_token": {
              "type": "string",
              "description": "刷新令牌",
              "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            },
            "expires_in": {
              "type": "integer",
              "description": "令牌有效期（秒）",
              "example": 7200
            },
            "user_info": {
              "$ref": "#/components/schemas/ClientUser"
            }
          }
        },
        "ClientUser": {
          "type": "object",
          "description": "甲方用户信息",
          "properties": {
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 1001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 12345
            },
            "username": {
              "type": "string",
              "description": "用户名",
              "example": "admin@abc-tech.com"
            },
            "full_name": {
              "type": "string",
              "description": "真实姓名",
              "example": "张三"
            },
            "department": {
              "type": "string",
              "description": "部门",
              "example": "IT部"
            },
            "role_type": {
              "type": "string",
              "enum": [
                "admin",
                "manager",
                "user"
              ],
              "description": "角色类型",
              "example": "admin"
            },
            "permissions": {
              "type": "array",
              "description": "权限列表",
              "items": {
                "type": "string"
              },
              "example": [
                "report:read",
                "dashboard:write",
                "export:all"
              ]
            },
            "last_login_at": {
              "type": "string",
              "format": "date-time",
              "description": "最后登录时间",
              "example": "2025-08-14T14:30:00Z"
            }
          }
        },
        "ClientPermission": {
          "type": "object",
          "description": "甲方权限信息",
          "properties": {
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 1001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 12345
            },
            "permissions": {
              "type": "object",
              "description": "权限详情",
              "properties": {
                "report": {
                  "type": "object",
                  "properties": {
                    "read": {
                      "type": "boolean",
                      "example": true
                    },
                    "write": {
                      "type": "boolean",
                      "example": false
                    },
                    "export": {
                      "type": "boolean",
                      "example": true
                    }
                  }
                },
                "dashboard": {
                  "type": "object",
                  "properties": {
                    "read": {
                      "type": "boolean",
                      "example": true
                    },
                    "write": {
                      "type": "boolean",
                      "example": true
                    },
                    "export": {
                      "type": "boolean",
                      "example": false
                    }
                  }
                },
                "sla": {
                  "type": "object",
                  "properties": {
                    "read": {
                      "type": "boolean",
                      "example": true
                    },
                    "write": {
                      "type": "boolean",
                      "example": false
                    },
                    "export": {
                      "type": "boolean",
                      "example": true
                    }
                  }
                }
              }
            },
            "data_scope": {
              "type": "object",
              "description": "数据访问范围",
              "properties": {
                "departments": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "IT部",
                    "运维部"
                  ]
                },
                "projects": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "项目A",
                    "项目B"
                  ]
                }
              }
            }
          }
        },
        "WorkspaceConfig": {
          "type": "object",
          "description": "工作空间配置",
          "properties": {
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 12345
            },
            "workspace_name": {
              "type": "string",
              "description": "工作空间名称",
              "example": "ABC科技运维工作台"
            },
            "layout_config": {
              "type": "object",
              "description": "布局配置",
              "properties": {
                "sidebar_collapsed": {
                  "type": "boolean",
                  "example": false
                },
                "theme_mode": {
                  "type": "string",
                  "enum": [
                    "light",
                    "dark",
                    "auto"
                  ],
                  "example": "light"
                },
                "language": {
                  "type": "string",
                  "enum": [
                    "zh-CN",
                    "en-US"
                  ],
                  "example": "zh-CN"
                }
              }
            },
            "default_dashboard_id": {
              "type": "integer",
              "format": "int64",
              "description": "默认仪表板ID",
              "example": 1001
            },
            "quick_actions": {
              "type": "array",
              "description": "快捷操作配置",
              "items": {
                "type": "object",
                "properties": {
                  "action_id": {
                    "type": "string",
                    "example": "create_ticket"
                  },
                  "action_name": {
                    "type": "string",
                    "example": "创建工单"
                  },
                  "icon": {
                    "type": "string",
                    "example": "plus"
                  },
                  "url": {
                    "type": "string",
                    "example": "/tickets/create"
                  }
                }
              }
            }
          }
        },
        "DashboardOverview": {
          "type": "object",
          "description": "服务概览数据",
          "properties": {
            "summary": {
              "type": "object",
              "description": "汇总数据",
              "properties": {
                "total_tickets": {
                  "type": "integer",
                  "description": "总工单数",
                  "example": 156
                },
                "pending_tickets": {
                  "type": "integer",
                  "description": "待处理工单数",
                  "example": 12
                },
                "resolved_tickets": {
                  "type": "integer",
                  "description": "已解决工单数",
                  "example": 144
                },
                "sla_compliance": {
                  "type": "number",
                  "format": "float",
                  "description": "SLA达成率（%）",
                  "example": 95.6
                },
                "avg_response_time": {
                  "type": "string",
                  "description": "平均响应时间",
                  "example": "25分钟"
                },
                "avg_resolution_time": {
                  "type": "string",
                  "description": "平均解决时间",
                  "example": "4.2小时"
                },
                "satisfaction_score": {
                  "type": "number",
                  "format": "float",
                  "description": "满意度评分",
                  "example": 4.3
                }
              }
            },
            "trends": {
              "type": "object",
              "description": "趋势数据",
              "properties": {
                "ticket_trend": {
                  "type": "array",
                  "description": "工单趋势",
                  "items": {
                    "type": "object",
                    "properties": {
                      "date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-08-01"
                      },
                      "count": {
                        "type": "integer",
                        "example": 15
                      }
                    }
                  }
                },
                "sla_trend": {
                  "type": "array",
                  "description": "SLA趋势",
                  "items": {
                    "type": "object",
                    "properties": {
                      "date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-08-01"
                      },
                      "compliance": {
                        "type": "number",
                        "format": "float",
                        "example": 96.2
                      }
                    }
                  }
                }
              }
            },
            "alerts": {
              "type": "array",
              "description": "告警信息",
              "items": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "sla_violation",
                      "quality_issue",
                      "system_alert"
                    ],
                    "example": "sla_violation"
                  },
                  "message": {
                    "type": "string",
                    "example": "工单TKT-001超出SLA时限"
                  },
                  "severity": {
                    "type": "string",
                    "enum": [
                      "low",
                      "medium",
                      "high",
                      "critical"
                    ],
                    "example": "high"
                  },
                  "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2025-08-14T10:30:00Z"
                  }
                }
              }
            },
            "last_updated": {
              "type": "string",
              "format": "date-time",
              "description": "最后更新时间",
              "example": "2025-08-14T10:35:00Z"
            }
          }
        },
        "DashboardConfig": {
          "type": "object",
          "description": "仪表板配置",
          "properties": {
            "config_id": {
              "type": "integer",
              "format": "int64",
              "description": "配置ID",
              "example": 1001
            },
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 1001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 12345
            },
            "dashboard_name": {
              "type": "string",
              "description": "仪表板名称",
              "example": "运维概览"
            },
            "layout_config": {
              "type": "object",
              "description": "布局配置",
              "properties": {
                "grid": {
                  "type": "object",
                  "properties": {
                    "cols": {
                      "type": "integer",
                      "example": 12
                    },
                    "rows": {
                      "type": "integer",
                      "example": 8
                    }
                  }
                },
                "widgets": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "widget_1"
                      },
                      "type": {
                        "type": "string",
                        "enum": [
                          "metric_card",
                          "chart",
                          "table",
                          "alert_list"
                        ],
                        "example": "metric_card"
                      },
                      "position": {
                        "type": "object",
                        "properties": {
                          "x": {
                            "type": "integer",
                            "example": 0
                          },
                          "y": {
                            "type": "integer",
                            "example": 0
                          },
                          "w": {
                            "type": "integer",
                            "example": 3
                          },
                          "h": {
                            "type": "integer",
                            "example": 2
                          }
                        }
                      },
                      "config": {
                        "type": "object",
                        "properties": {
                          "metric": {
                            "type": "string",
                            "example": "total_tickets"
                          },
                          "title": {
                            "type": "string",
                            "example": "总工单数"
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "is_default": {
              "type": "boolean",
              "description": "是否默认仪表板",
              "example": true
            },
            "is_shared": {
              "type": "boolean",
              "description": "是否共享",
              "example": false
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-01-01T00:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-14T14:30:00Z"
            }
          }
        },
        "DashboardConfigRequest": {
          "type": "object",
          "description": "仪表板配置请求",
          "required": [
            "dashboard_name",
            "layout_config"
          ],
          "properties": {
            "dashboard_name": {
              "type": "string",
              "description": "仪表板名称",
              "example": "运维概览"
            },
            "layout_config": {
              "type": "object",
              "description": "布局配置",
              "example": {
                "grid": {
                  "cols": 12,
                  "rows": 8
                },
                "widgets": []
              }
            },
            "is_default": {
              "type": "boolean",
              "description": "是否设为默认",
              "default": false,
              "example": true
            },
            "is_shared": {
              "type": "boolean",
              "description": "是否共享",
              "default": false,
              "example": false
            }
          }
        },
        "ClientTicket": {
          "type": "object",
          "description": "甲方工单信息",
          "properties": {
            "ticket_id": {
              "type": "string",
              "description": "工单ID",
              "example": "TCK-20250814-0001"
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 12345
            },
            "title": {
              "type": "string",
              "description": "工单标题",
              "example": "服务器CPU使用率过高"
            },
            "description": {
              "type": "string",
              "description": "问题描述",
              "example": "生产服务器CPU使用率持续超过90%，影响业务正常运行"
            },
            "priority": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "urgent"
              ],
              "description": "优先级",
              "example": "high"
            },
            "status": {
              "type": "string",
              "enum": [
                "pending",
                "processing",
                "completed",
                "closed"
              ],
              "description": "工单状态",
              "example": "processing"
            },
            "category": {
              "type": "string",
              "description": "工单分类",
              "example": "performance"
            },
            "customer_id": {
              "type": "integer",
              "format": "int64",
              "description": "客户ID",
              "example": 5001
            },
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "example": "ABC科技有限公司"
            },
            "assigned_engineer_id": {
              "type": "integer",
              "format": "int64",
              "description": "分配工程师ID",
              "example": 1001
            },
            "assigned_engineer_name": {
              "type": "string",
              "description": "分配工程师姓名",
              "example": "张三"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-14T10:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-14T14:30:00Z"
            },
            "due_date": {
              "type": "string",
              "format": "date-time",
              "description": "截止时间",
              "example": "2025-08-14T18:00:00Z"
            },
            "resolved_at": {
              "type": "string",
              "format": "date-time",
              "description": "解决时间",
              "example": "2025-08-14T16:30:00Z"
            },
            "satisfaction_score": {
              "type": "number",
              "format": "float",
              "description": "满意度评分",
              "example": 4.5
            }
          }
        },
        "TicketStatistics": {
          "type": "object",
          "description": "工单统计数据",
          "properties": {
            "total_count": {
              "type": "integer",
              "description": "总工单数",
              "example": 156
            },
            "period": {
              "type": "object",
              "description": "统计周期",
              "properties": {
                "start": {
                  "type": "string",
                  "format": "date",
                  "example": "2025-07-15"
                },
                "end": {
                  "type": "string",
                  "format": "date",
                  "example": "2025-08-14"
                }
              }
            },
            "by_status": {
              "type": "array",
              "description": "按状态统计",
              "items": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "example": "processing"
                  },
                  "count": {
                    "type": "integer",
                    "example": 12
                  },
                  "percentage": {
                    "type": "number",
                    "format": "float",
                    "example": 7.7
                  }
                }
              }
            },
            "by_priority": {
              "type": "array",
              "description": "按优先级统计",
              "items": {
                "type": "object",
                "properties": {
                  "priority": {
                    "type": "string",
                    "example": "high"
                  },
                  "count": {
                    "type": "integer",
                    "example": 25
                  },
                  "percentage": {
                    "type": "number",
                    "format": "float",
                    "example": 16.0
                  }
                }
              }
            },
            "trends": {
              "type": "array",
              "description": "趋势数据",
              "items": {
                "type": "object",
                "properties": {
                  "date": {
                    "type": "string",
                    "format": "date",
                    "example": "2025-08-01"
                  },
                  "count": {
                    "type": "integer",
                    "example": 15
                  }
                }
              }
            },
            "avg_resolution_time": {
              "type": "number",
              "format": "float",
              "description": "平均解决时间（小时）",
              "example": 4.2
            },
            "first_call_resolution_rate": {
              "type": "number",
              "format": "float",
              "description": "一次解决率（%）",
              "example": 85.0
            }
          }
        },
        "SLACompliance": {
          "type": "object",
          "description": "SLA达成情况",
          "properties": {
            "overall_compliance": {
              "type": "number",
              "format": "float",
              "description": "总体达成率（%）",
              "example": 95.6
            },
            "period": {
              "type": "object",
              "description": "统计周期",
              "properties": {
                "start": {
                  "type": "string",
                  "format": "date",
                  "example": "2024-12-15"
                },
                "end": {
                  "type": "string",
                  "format": "date",
                  "example": "2025-08-14"
                }
              }
            },
            "by_service_type": {
              "type": "array",
              "description": "按服务类型统计",
              "items": {
                "type": "object",
                "properties": {
                  "service_type": {
                    "type": "string",
                    "example": "incident"
                  },
                  "compliance_rate": {
                    "type": "number",
                    "format": "float",
                    "example": 94.2
                  },
                  "total_tickets": {
                    "type": "integer",
                    "example": 89
                  },
                  "violated_tickets": {
                    "type": "integer",
                    "example": 5
                  },
                  "avg_response_time": {
                    "type": "string",
                    "example": "22分钟"
                  },
                  "avg_resolution_time": {
                    "type": "string",
                    "example": "3.8小时"
                  }
                }
              }
            },
            "violations": {
              "type": "array",
              "description": "违约记录",
              "items": {
                "$ref": "#/components/schemas/SLAViolation"
              }
            }
          }
        },
        "SLAViolation": {
          "type": "object",
          "description": "SLA违约记录",
          "properties": {
            "violation_id": {
              "type": "integer",
              "format": "int64",
              "description": "违约记录ID",
              "example": 2001
            },
            "ticket_id": {
              "type": "string",
              "description": "工单ID",
              "example": "TCK-001"
            },
            "service_type": {
              "type": "string",
              "enum": [
                "incident",
                "request",
                "change"
              ],
              "description": "服务类型",
              "example": "incident"
            },
            "violation_type": {
              "type": "string",
              "enum": [
                "response_time",
                "resolution_time",
                "quality"
              ],
              "description": "违约类型",
              "example": "response_time"
            },
            "target_value": {
              "type": "integer",
              "description": "目标值（分钟）",
              "example": 30
            },
            "actual_value": {
              "type": "integer",
              "description": "实际值（分钟）",
              "example": 45
            },
            "violation_time": {
              "type": "integer",
              "description": "违约时长（分钟）",
              "example": 15
            },
            "severity": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "critical"
              ],
              "description": "严重程度",
              "example": "medium"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "违约时间",
              "example": "2025-08-13T14:30:00Z"
            }
          }
        },
        "ReportGenerateRequest": {
          "type": "object",
          "description": "报表生成请求",
          "required": [
            "template_id",
            "parameters",
            "output_format"
          ],
          "properties": {
            "template_id": {
              "type": "integer",
              "format": "int64",
              "description": "报表模板ID",
              "example": 1001
            },
            "parameters": {
              "type": "object",
              "description": "报表参数",
              "properties": {
                "period_start": {
                  "type": "string",
                  "format": "date",
                  "example": "2025-08-01"
                },
                "period_end": {
                  "type": "string",
                  "format": "date",
                  "example": "2025-08-31"
                },
                "report_type": {
                  "type": "string",
                  "enum": [
                    "daily",
                    "weekly",
                    "monthly",
                    "quarterly",
                    "yearly"
                  ],
                  "example": "monthly"
                },
                "include_sections": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "summary",
                    "sla_analysis",
                    "cost_analysis"
                  ]
                },
                "filters": {
                  "type": "object",
                  "properties": {
                    "service_types": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "incident",
                        "request"
                      ]
                    },
                    "priorities": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "high",
                        "medium"
                      ]
                    },
                    "departments": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "IT部"
                      ]
                    }
                  }
                }
              }
            },
            "output_format": {
              "type": "string",
              "enum": [
                "pdf",
                "excel",
                "csv",
                "json"
              ],
              "description": "输出格式",
              "example": "pdf"
            },
            "delivery_method": {
              "type": "string",
              "enum": [
                "download",
                "email",
                "system_notification"
              ],
              "description": "交付方式",
              "default": "download",
              "example": "download"
            },
            "email_recipients": {
              "type": "array",
              "description": "邮件收件人（当delivery_method为email时）",
              "items": {
                "type": "string",
                "format": "email"
              },
              "example": [
                "admin@abc-tech.com"
              ]
            }
          }
        },
        "ReportProgress": {
          "type": "object",
          "description": "报表生成进度",
          "properties": {
            "task_id": {
              "type": "string",
              "description": "任务ID",
              "example": "RPT-20250814-001"
            },
            "status": {
              "type": "string",
              "enum": [
                "processing",
                "completed",
                "failed"
              ],
              "description": "生成状态",
              "example": "processing"
            },
            "progress": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100,
              "description": "进度百分比",
              "example": 75
            },
            "estimated_time": {
              "type": "integer",
              "description": "预估剩余时间（秒）",
              "example": 120
            },
            "result": {
              "type": "object",
              "description": "生成结果（完成时）",
              "properties": {
                "file_url": {
                  "type": "string",
                  "format": "uri",
                  "example": "/api/v1/client/reports/download/RPT-20250814-001.pdf"
                },
                "file_size": {
                  "type": "integer",
                  "description": "文件大小（字节）",
                  "example": 2048576
                },
                "generation_time": {
                  "type": "integer",
                  "description": "生成耗时（秒）",
                  "example": 95
                },
                "record_count": {
                  "type": "integer",
                  "description": "记录数量",
                  "example": 1500
                }
              }
            },
            "error_message": {
              "type": "string",
              "description": "错误信息（失败时）",
              "example": "数据查询超时"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-14T10:40:00Z"
            },
            "completed_at": {
              "type": "string",
              "format": "date-time",
              "description": "完成时间",
              "example": "2025-08-14T10:42:35Z"
            }
          }
        },
        "ReportHistory": {
          "type": "object",
          "description": "报表历史记录",
          "properties": {
            "history_id": {
              "type": "integer",
              "format": "int64",
              "description": "历史记录ID",
              "example": 3001
            },
            "template_id": {
              "type": "integer",
              "format": "int64",
              "description": "模板ID",
              "example": 1001
            },
            "template_name": {
              "type": "string",
              "description": "模板名称",
              "example": "月度SLA报表"
            },
            "generated_by": {
              "type": "integer",
              "format": "int64",
              "description": "生成者ID",
              "example": 1001
            },
            "generated_by_name": {
              "type": "string",
              "description": "生成者姓名",
              "example": "张三"
            },
            "file_url": {
              "type": "string",
              "format": "uri",
              "description": "文件URL",
              "example": "/api/v1/client/files/download/FILE-20250814-001"
            },
            "file_format": {
              "type": "string",
              "enum": [
                "pdf",
                "excel",
                "csv",
                "json"
              ],
              "description": "文件格式",
              "example": "pdf"
            },
            "file_size": {
              "type": "integer",
              "description": "文件大小（字节）",
              "example": 2048576
            },
            "generation_time": {
              "type": "integer",
              "description": "生成耗时（秒）",
              "example": 95
            },
            "status": {
              "type": "string",
              "enum": [
                "completed",
                "failed",
                "expired"
              ],
              "description": "状态",
              "example": "completed"
            },
            "parameters": {
              "type": "object",
              "description": "生成参数",
              "example": {
                "period_start": "2025-08-01",
                "period_end": "2025-08-31"
              }
            },
            "generated_at": {
              "type": "string",
              "format": "date-time",
              "description": "生成时间",
              "example": "2025-08-14T10:42:35Z"
            },
            "expires_at": {
              "type": "string",
              "format": "date-time",
              "description": "过期时间",
              "example": "2025-08-21T10:42:35Z"
            }
          }
        },
        "ReportTemplate": {
          "type": "object",
          "description": "报表模板",
          "properties": {
            "template_id": {
              "type": "integer",
              "format": "int64",
              "description": "模板ID",
              "example": 1001
            },
            "name": {
              "type": "string",
              "description": "模板名称",
              "example": "月度SLA报表"
            },
            "description": {
              "type": "string",
              "description": "模板描述",
              "example": "包含SLA达成率、违约分析、改进建议的月度报表"
            },
            "category": {
              "type": "string",
              "enum": [
                "ticket",
                "sla",
                "cost",
                "satisfaction",
                "custom"
              ],
              "description": "模板分类",
              "example": "sla"
            },
            "config_json": {
              "type": "object",
              "description": "模板配置",
              "example": {
                "sections": [
                  "summary",
                  "details"
                ],
                "charts": [
                  "trend",
                  "pie"
                ]
              }
            },
            "is_public": {
              "type": "boolean",
              "description": "是否公共模板",
              "example": true
            },
            "created_by": {
              "type": "integer",
              "format": "int64",
              "description": "创建者ID",
              "example": 1001
            },
            "created_by_name": {
              "type": "string",
              "description": "创建者姓名",
              "example": "张三"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-01-01T09:00:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-14T14:30:00Z"
            }
          }
        },
        "ExportRequest": {
          "type": "object",
          "description": "数据导出请求",
          "required": [
            "export_type",
            "format",
            "parameters"
          ],
          "properties": {
            "export_type": {
              "type": "string",
              "enum": [
                "ticket_data",
                "sla_data",
                "cost_data",
                "satisfaction_data"
              ],
              "description": "导出数据类型",
              "example": "ticket_data"
            },
            "format": {
              "type": "string",
              "enum": [
                "excel",
                "csv",
                "json"
              ],
              "description": "导出格式",
              "example": "excel"
            },
            "parameters": {
              "type": "object",
              "description": "导出参数",
              "properties": {
                "date_range": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "format": "date"
                  },
                  "example": [
                    "2025-08-01",
                    "2025-08-31"
                  ]
                },
                "columns": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "ticket_id",
                    "title",
                    "status",
                    "priority",
                    "created_at",
                    "resolved_at"
                  ]
                },
                "filters": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "resolved",
                        "closed"
                      ]
                    },
                    "priority": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "high",
                        "medium"
                      ]
                    }
                  }
                }
              }
            },
            "options": {
              "type": "object",
              "description": "导出选项",
              "properties": {
                "include_headers": {
                  "type": "boolean",
                  "default": true,
                  "example": true
                },
                "max_records": {
                  "type": "integer",
                  "default": 50000,
                  "example": 50000
                },
                "compression": {
                  "type": "boolean",
                  "default": false,
                  "example": true
                }
              }
            }
          }
        },
        "ExportProgress": {
          "type": "object",
          "description": "导出进度",
          "properties": {
            "export_id": {
              "type": "string",
              "description": "导出任务ID",
              "example": "EXP-20250814-001"
            },
            "status": {
              "type": "string",
              "enum": [
                "processing",
                "completed",
                "failed"
              ],
              "description": "导出状态",
              "example": "processing"
            },
            "progress": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100,
              "description": "进度百分比",
              "example": 65
            },
            "estimated_size": {
              "type": "string",
              "description": "预估文件大小",
              "example": "15MB"
            },
            "estimated_time": {
              "type": "integer",
              "description": "预估剩余时间（秒）",
              "example": 180
            },
            "download_url": {
              "type": "string",
              "format": "uri",
              "description": "下载链接（完成时）",
              "example": "/api/v1/client/files/download/EXP-20250814-001"
            },
            "file_size": {
              "type": "integer",
              "description": "实际文件大小（字节）",
              "example": 15728640
            },
            "record_count": {
              "type": "integer",
              "description": "导出记录数",
              "example": 1500
            },
            "expires_at": {
              "type": "string",
              "format": "date-time",
              "description": "下载链接过期时间",
              "example": "2025-08-21T10:45:00Z"
            },
            "error_message": {
              "type": "string",
              "description": "错误信息（失败时）",
              "example": "数据量超出限制"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-14T10:45:00Z"
            }
          }
        },
        "PushSubscription": {
          "type": "object",
          "description": "推送订阅",
          "properties": {
            "subscription_id": {
              "type": "integer",
              "format": "int64",
              "description": "订阅ID",
              "example": 4001
            },
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 1001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 12345
            },
            "subscription_name": {
              "type": "string",
              "description": "订阅名称",
              "example": "每日SLA报表推送"
            },
            "subscription_type": {
              "type": "string",
              "enum": [
                "report",
                "alert",
                "notification"
              ],
              "description": "订阅类型",
              "example": "report"
            },
            "schedule": {
              "type": "object",
              "description": "推送计划",
              "properties": {
                "frequency": {
                  "type": "string",
                  "enum": [
                    "daily",
                    "weekly",
                    "monthly",
                    "quarterly"
                  ],
                  "example": "daily"
                },
                "time": {
                  "type": "string",
                  "format": "time",
                  "example": "09:00"
                },
                "timezone": {
                  "type": "string",
                  "example": "Asia/Shanghai"
                },
                "weekdays": {
                  "type": "array",
                  "items": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 7
                  },
                  "example": [
                    1,
                    2,
                    3,
                    4,
                    5
                  ]
                }
              }
            },
            "delivery_channels": {
              "type": "array",
              "description": "推送渠道",
              "items": {
                "type": "string",
                "enum": [
                  "email",
                  "sms",
                  "system_notification"
                ]
              },
              "example": [
                "email",
                "system_notification"
              ]
            },
            "recipients": {
              "type": "array",
              "description": "收件人列表",
              "items": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "email",
                      "phone"
                    ],
                    "example": "email"
                  },
                  "address": {
                    "type": "string",
                    "example": "admin@abc-tech.com"
                  }
                }
              }
            },
            "template_id": {
              "type": "integer",
              "format": "int64",
              "description": "关联模板ID（报表订阅时）",
              "example": 1001
            },
            "filters": {
              "type": "object",
              "description": "推送过滤条件",
              "example": {
                "priority": [
                  "high",
                  "urgent"
                ],
                "status": [
                  "processing"
                ]
              }
            },
            "is_active": {
              "type": "boolean",
              "description": "是否激活",
              "example": true
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-14T14:30:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-14T14:30:00Z"
            }
          }
        },
        "PushSubscriptionRequest": {
          "type": "object",
          "description": "推送订阅请求",
          "required": [
            "subscription_name",
            "subscription_type",
            "schedule",
            "delivery_channels"
          ],
          "properties": {
            "subscription_name": {
              "type": "string",
              "description": "订阅名称",
              "example": "每日SLA报表推送"
            },
            "subscription_type": {
              "type": "string",
              "enum": [
                "report",
                "alert",
                "notification"
              ],
              "description": "订阅类型",
              "example": "report"
            },
            "schedule": {
              "type": "object",
              "description": "推送计划",
              "example": {
                "frequency": "daily",
                "time": "09:00",
                "timezone": "Asia/Shanghai"
              }
            },
            "delivery_channels": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "email",
                  "sms",
                  "system_notification"
                ]
              },
              "example": [
                "email"
              ]
            },
            "recipients": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "email",
                      "phone"
                    ]
                  },
                  "address": {
                    "type": "string"
                  }
                }
              },
              "example": [
                {
                  "type": "email",
                  "address": "admin@abc-tech.com"
                }
              ]
            },
            "template_id": {
              "type": "integer",
              "format": "int64",
              "description": "关联模板ID",
              "example": 1001
            },
            "filters": {
              "type": "object",
              "description": "过滤条件",
              "example": {
                "priority": [
                  "high"
                ]
              }
            }
          }
        }
      },
      "issues": []
    },
    "REQ-020-移动端应用模块": {
      "file_path": "docs/api/4.5.1/modules/REQ-020-移动端应用模块/openapi.yaml",
      "components": {
        "MobileLoginRequest": {
          "type": "object",
          "properties": {
            "username": {
              "type": "string",
              "description": "用户名",
              "example": "engineer001"
            },
            "password": {
              "type": "string",
              "description": "密码",
              "example": "password123"
            },
            "device_info": {
              "$ref": "#/components/schemas/DeviceInfo"
            }
          },
          "required": [
            "username",
            "password",
            "device_info"
          ]
        },
        "DeviceInfo": {
          "type": "object",
          "properties": {
            "device_id": {
              "type": "string",
              "description": "设备唯一标识",
              "example": "iPhone_12345"
            },
            "device_type": {
              "type": "string",
              "enum": [
                "ios",
                "android"
              ],
              "description": "设备类型",
              "example": "ios"
            },
            "device_model": {
              "type": "string",
              "description": "设备型号",
              "example": "iPhone 13"
            },
            "os_version": {
              "type": "string",
              "description": "系统版本",
              "example": "iOS 15.0"
            },
            "app_version": {
              "type": "string",
              "description": "应用版本",
              "example": "1.0.0"
            },
            "push_token": {
              "type": "string",
              "description": "推送令牌",
              "example": "abc123def456"
            },
            "biometric_enabled": {
              "type": "boolean",
              "description": "是否启用生物识别",
              "example": true
            }
          },
          "required": [
            "device_id",
            "device_type",
            "device_model",
            "os_version",
            "app_version"
          ]
        },
        "MobileLoginResponse": {
          "type": "object",
          "properties": {
            "access_token": {
              "type": "string",
              "description": "访问令牌",
              "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            },
            "refresh_token": {
              "type": "string",
              "description": "刷新令牌",
              "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            },
            "expires_in": {
              "type": "integer",
              "description": "令牌有效期（秒）",
              "example": 7200
            },
            "user_info": {
              "type": "object",
              "properties": {
                "user_id": {
                  "type": "integer",
                  "description": "用户ID",
                  "example": 1001
                },
                "username": {
                  "type": "string",
                  "description": "用户名",
                  "example": "engineer001"
                },
                "real_name": {
                  "type": "string",
                  "description": "真实姓名",
                  "example": "张工程师"
                },
                "role": {
                  "type": "string",
                  "description": "用户角色",
                  "example": "engineer"
                },
                "avatar_url": {
                  "type": "string",
                  "description": "头像URL",
                  "example": "https://cdn.example.com/avatar.jpg"
                }
              }
            },
            "app_config": {
              "$ref": "#/components/schemas/MobileAppConfig"
            }
          }
        },
        "MobileAppConfig": {
          "type": "object",
          "properties": {
            "push_enabled": {
              "type": "boolean",
              "description": "是否启用推送",
              "example": true
            },
            "location_enabled": {
              "type": "boolean",
              "description": "是否启用位置服务",
              "example": true
            },
            "offline_sync_interval": {
              "type": "integer",
              "description": "离线同步间隔（秒）",
              "example": 300
            },
            "max_offline_operations": {
              "type": "integer",
              "description": "最大离线操作数",
              "example": 1000
            },
            "image_compression_quality": {
              "type": "integer",
              "description": "图片压缩质量（1-100）",
              "example": 85
            },
            "auto_upload_attachments": {
              "type": "boolean",
              "description": "是否自动上传附件",
              "example": true
            },
            "biometric_login_enabled": {
              "type": "boolean",
              "description": "是否启用生物识别登录",
              "example": true
            }
          }
        },
        "DeviceRegistrationRequest": {
          "type": "object",
          "properties": {
            "device_info": {
              "$ref": "#/components/schemas/DeviceInfo"
            },
            "location_permission": {
              "type": "boolean",
              "description": "是否授权位置权限",
              "example": true
            },
            "notification_permission": {
              "type": "boolean",
              "description": "是否授权通知权限",
              "example": true
            },
            "camera_permission": {
              "type": "boolean",
              "description": "是否授权相机权限",
              "example": true
            }
          },
          "required": [
            "device_info"
          ]
        },
        "DeviceUpdateRequest": {
          "type": "object",
          "properties": {
            "push_token": {
              "type": "string",
              "description": "推送令牌",
              "example": "new_push_token_xyz789"
            },
            "location_enabled": {
              "type": "boolean",
              "description": "是否启用位置服务",
              "example": true
            },
            "notification_enabled": {
              "type": "boolean",
              "description": "是否启用通知",
              "example": true
            },
            "biometric_enabled": {
              "type": "boolean",
              "description": "是否启用生物识别",
              "example": true
            },
            "app_version": {
              "type": "string",
              "description": "应用版本",
              "example": "1.0.1"
            }
          }
        },
        "MobileDeviceInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "device_id": {
                  "type": "string",
                  "description": "设备唯一标识",
                  "example": "iPhone_12345"
                },
                "device_type": {
                  "type": "string",
                  "enum": [
                    "ios",
                    "android"
                  ],
                  "description": "设备类型",
                  "example": "ios"
                },
                "device_model": {
                  "type": "string",
                  "description": "设备型号",
                  "example": "iPhone 13"
                },
                "os_version": {
                  "type": "string",
                  "description": "系统版本",
                  "example": "iOS 15.0"
                },
                "app_version": {
                  "type": "string",
                  "description": "应用版本",
                  "example": "1.0.0"
                },
                "push_token": {
                  "type": "string",
                  "description": "推送令牌",
                  "example": "abc123def456"
                },
                "last_active_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "最后活跃时间",
                  "example": "2025-08-14T14:30:00Z"
                },
                "location_enabled": {
                  "type": "boolean",
                  "description": "是否启用位置服务",
                  "example": true
                },
                "notification_enabled": {
                  "type": "boolean",
                  "description": "是否启用通知",
                  "example": true
                },
                "biometric_enabled": {
                  "type": "boolean",
                  "description": "是否启用生物识别",
                  "example": true
                },
                "status": {
                  "type": "integer",
                  "description": "设备状态：1-正常，2-停用",
                  "example": 1
                }
              }
            }
          ]
        },
        "MobileTicketInfo": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "ticket_no": {
                  "type": "string",
                  "description": "工单编号",
                  "example": "TCK-20250814-0001"
                },
                "title": {
                  "type": "string",
                  "description": "工单标题",
                  "example": "服务器CPU使用率过高"
                },
                "description": {
                  "type": "string",
                  "description": "工单描述",
                  "example": "生产服务器CPU使用率持续超过90%，影响业务正常运行"
                },
                "priority": {
                  "type": "integer",
                  "description": "优先级：1-低，2-中，3-高，4-紧急",
                  "example": 3
                },
                "priority_name": {
                  "type": "string",
                  "description": "优先级名称",
                  "example": "高"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "NEW",
                    "PENDING",
                    "ASSIGNED",
                    "IN_PROGRESS",
                    "SUSPENDED",
                    "ESCALATED",
                    "PENDING_VERIFICATION",
                    "RESOLVED",
                    "CLOSED",
                    "CANCELLED"
                  ],
                  "description": "工单状态",
                  "example": "IN_PROGRESS"
                },
                "status_name": {
                  "type": "string",
                  "description": "状态名称",
                  "example": "处理中"
                },
                "customer_id": {
                  "type": "integer",
                  "description": "客户ID",
                  "example": 5001
                },
                "customer_name": {
                  "type": "string",
                  "description": "客户名称",
                  "example": "ABC科技有限公司"
                },
                "assigned_engineer_id": {
                  "type": "integer",
                  "description": "分配工程师ID",
                  "example": 1001
                },
                "assigned_engineer_name": {
                  "type": "string",
                  "description": "分配工程师姓名",
                  "example": "张三"
                },
                "due_date": {
                  "type": "string",
                  "format": "date-time",
                  "description": "截止时间",
                  "example": "2025-08-14T18:00:00Z"
                },
                "location": {
                  "$ref": "#/components/schemas/LocationInfo"
                },
                "attachment_count": {
                  "type": "integer",
                  "description": "附件数量",
                  "example": 2
                },
                "is_offline": {
                  "type": "boolean",
                  "description": "是否为离线数据",
                  "example": false
                },
                "last_sync_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "最后同步时间",
                  "example": "2025-08-14T14:30:00Z"
                }
              }
            }
          ]
        },
        "LocationInfo": {
          "type": "object",
          "properties": {
            "latitude": {
              "type": "number",
              "description": "纬度",
              "example": 39.9042
            },
            "longitude": {
              "type": "number",
              "description": "经度",
              "example": 116.4074
            },
            "address": {
              "type": "string",
              "description": "地址",
              "example": "北京市朝阳区"
            },
            "accuracy": {
              "type": "number",
              "description": "定位精度（米）",
              "example": 5.0
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "定位时间",
              "example": "2025-08-14T14:30:00Z"
            }
          }
        },
        "MobileTicketDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/MobileTicketInfo"
            },
            {
              "type": "object",
              "properties": {
                "attachments": {
                  "type": "array",
                  "description": "附件列表",
                  "items": {
                    "$ref": "#/components/schemas/AttachmentInfo"
                  }
                },
                "comments": {
                  "type": "array",
                  "description": "处理记录",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "description": "记录ID",
                        "example": 1001
                      },
                      "content": {
                        "type": "string",
                        "description": "记录内容",
                        "example": "已到达现场，开始排查问题"
                      },
                      "author_name": {
                        "type": "string",
                        "description": "记录人姓名",
                        "example": "张三"
                      },
                      "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "description": "记录时间",
                        "example": "2025-08-14T14:30:00Z"
                      }
                    }
                  }
                },
                "sla_info": {
                  "type": "object",
                  "description": "SLA信息",
                  "properties": {
                    "response_deadline": {
                      "type": "string",
                      "format": "date-time",
                      "description": "响应截止时间",
                      "example": "2025-08-14T16:00:00Z"
                    },
                    "resolution_deadline": {
                      "type": "string",
                      "format": "date-time",
                      "description": "解决截止时间",
                      "example": "2025-08-14T18:00:00Z"
                    },
                    "is_overdue": {
                      "type": "boolean",
                      "description": "是否超期",
                      "example": false
                    }
                  }
                }
              }
            }
          ]
        },
        "TicketStatusUpdateRequest": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "enum": [
                "NEW",
                "PENDING",
                "ASSIGNED",
                "IN_PROGRESS",
                "SUSPENDED",
                "ESCALATED",
                "PENDING_VERIFICATION",
                "RESOLVED",
                "CLOSED",
                "CANCELLED"
              ],
              "description": "新状态",
              "example": "IN_PROGRESS"
            },
            "notes": {
              "type": "string",
              "description": "状态更新说明",
              "example": "已到达现场，开始排查问题"
            },
            "location": {
              "$ref": "#/components/schemas/LocationInfo"
            },
            "estimated_completion_time": {
              "type": "string",
              "format": "date-time",
              "description": "预计完成时间",
              "example": "2025-08-14T17:00:00Z"
            }
          },
          "required": [
            "status"
          ]
        },
        "AttachmentInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "description": "附件ID",
              "example": 2001
            },
            "file_name": {
              "type": "string",
              "description": "文件名",
              "example": "fault_image.jpg"
            },
            "file_url": {
              "type": "string",
              "description": "文件URL",
              "example": "https://cdn.example.com/attachments/fault_image.jpg"
            },
            "file_size": {
              "type": "integer",
              "description": "文件大小（字节）",
              "example": 1024000
            },
            "file_type": {
              "type": "string",
              "enum": [
                "image",
                "video",
                "document",
                "audio"
              ],
              "description": "文件类型",
              "example": "image"
            },
            "mime_type": {
              "type": "string",
              "description": "MIME类型",
              "example": "image/jpeg"
            },
            "description": {
              "type": "string",
              "description": "附件描述",
              "example": "故障现象照片"
            },
            "location": {
              "$ref": "#/components/schemas/LocationInfo"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-14T14:30:00Z"
            },
            "uploaded_by": {
              "type": "string",
              "description": "上传人",
              "example": "张三"
            }
          }
        },
        "CheckinRequest": {
          "type": "object",
          "properties": {
            "location": {
              "$ref": "#/components/schemas/LocationInfo"
            },
            "notes": {
              "type": "string",
              "description": "签到备注",
              "example": "已到达客户现场"
            },
            "photo_url": {
              "type": "string",
              "description": "签到照片URL",
              "example": "https://cdn.example.com/checkin/photo.jpg"
            }
          },
          "required": [
            "location"
          ]
        },
        "SyncUploadRequest": {
          "type": "object",
          "properties": {
            "device_id": {
              "type": "string",
              "description": "设备ID",
              "example": "iPhone_12345"
            },
            "sync_data": {
              "type": "array",
              "description": "同步数据列表",
              "items": {
                "$ref": "#/components/schemas/OfflineSyncData"
              }
            }
          },
          "required": [
            "device_id",
            "sync_data"
          ]
        },
        "OfflineSyncData": {
          "type": "object",
          "properties": {
            "operation_id": {
              "type": "string",
              "description": "操作ID",
              "example": "local_op_001"
            },
            "operation_type": {
              "type": "string",
              "enum": [
                "CREATE",
                "UPDATE",
                "DELETE"
              ],
              "description": "操作类型",
              "example": "UPDATE"
            },
            "entity_type": {
              "type": "string",
              "enum": [
                "ticket",
                "attachment",
                "comment",
                "location"
              ],
              "description": "实体类型",
              "example": "ticket"
            },
            "entity_id": {
              "type": "integer",
              "description": "实体ID",
              "example": 12345
            },
            "operation_data": {
              "type": "object",
              "description": "操作数据",
              "example": {
                "status": "in_progress",
                "notes": "已到达现场，开始排查问题",
                "location": {
                  "latitude": 39.9042,
                  "longitude": 116.4074,
                  "address": "北京市朝阳区"
                }
              }
            },
            "local_timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "本地时间戳",
              "example": "2025-08-14T14:30:00Z"
            }
          },
          "required": [
            "operation_id",
            "operation_type",
            "entity_type",
            "operation_data",
            "local_timestamp"
          ]
        },
        "SyncUploadResponse": {
          "type": "object",
          "properties": {
            "synced_count": {
              "type": "integer",
              "description": "成功同步数量",
              "example": 5
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 0
            },
            "conflicts": {
              "type": "array",
              "description": "冲突列表",
              "items": {
                "$ref": "#/components/schemas/ConflictInfo"
              }
            },
            "server_timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "服务器时间戳",
              "example": "2025-08-14T14:30:15Z"
            },
            "next_sync_token": {
              "type": "string",
              "description": "下次同步令牌",
              "example": "sync_token_abc123"
            }
          }
        },
        "ConflictInfo": {
          "type": "object",
          "properties": {
            "operation_id": {
              "type": "string",
              "description": "操作ID",
              "example": "local_op_001"
            },
            "entity_type": {
              "type": "string",
              "description": "实体类型",
              "example": "ticket"
            },
            "entity_id": {
              "type": "integer",
              "description": "实体ID",
              "example": 12345
            },
            "conflict_type": {
              "type": "string",
              "enum": [
                "version_conflict",
                "data_conflict",
                "permission_conflict"
              ],
              "description": "冲突类型",
              "example": "version_conflict"
            },
            "local_data": {
              "type": "object",
              "description": "本地数据"
            },
            "server_data": {
              "type": "object",
              "description": "服务器数据"
            },
            "suggested_resolution": {
              "type": "string",
              "enum": [
                "use_local",
                "use_server",
                "merge",
                "manual"
              ],
              "description": "建议解决方案",
              "example": "use_server"
            }
          }
        },
        "SyncDownloadResponse": {
          "type": "object",
          "properties": {
            "updated_entities": {
              "type": "object",
              "description": "更新的实体数据",
              "properties": {
                "tickets": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MobileTicketInfo"
                  }
                },
                "attachments": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AttachmentInfo"
                  }
                },
                "configs": {
                  "type": "array",
                  "items": {
                    "type": "object"
                  }
                }
              }
            },
            "deleted_entities": {
              "type": "object",
              "description": "删除的实体ID列表",
              "properties": {
                "tickets": {
                  "type": "array",
                  "items": {
                    "type": "integer"
                  }
                },
                "attachments": {
                  "type": "array",
                  "items": {
                    "type": "integer"
                  }
                }
              }
            },
            "server_timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "服务器时间戳",
              "example": "2025-08-14T14:30:15Z"
            },
            "next_sync_token": {
              "type": "string",
              "description": "下次同步令牌",
              "example": "sync_token_def456"
            }
          }
        },
        "SyncStatus": {
          "type": "object",
          "properties": {
            "device_id": {
              "type": "string",
              "description": "设备ID",
              "example": "iPhone_12345"
            },
            "last_sync_time": {
              "type": "string",
              "format": "date-time",
              "description": "最后同步时间",
              "example": "2025-08-14T14:30:00Z"
            },
            "pending_operations": {
              "type": "integer",
              "description": "待同步操作数",
              "example": 3
            },
            "sync_status": {
              "type": "string",
              "enum": [
                "idle",
                "syncing",
                "error"
              ],
              "description": "同步状态",
              "example": "idle"
            },
            "last_error": {
              "type": "string",
              "description": "最后错误信息",
              "example": null
            },
            "sync_statistics": {
              "type": "object",
              "description": "同步统计",
              "properties": {
                "total_synced": {
                  "type": "integer",
                  "description": "总同步次数",
                  "example": 150
                },
                "success_rate": {
                  "type": "number",
                  "description": "成功率",
                  "example": 98.5
                },
                "avg_sync_time": {
                  "type": "number",
                  "description": "平均同步时间（秒）",
                  "example": 2.5
                }
              }
            }
          }
        },
        "PushRegistrationRequest": {
          "type": "object",
          "properties": {
            "device_id": {
              "type": "string",
              "description": "设备ID",
              "example": "iPhone_12345"
            },
            "push_token": {
              "type": "string",
              "description": "推送令牌",
              "example": "new_push_token_xyz789"
            },
            "platform": {
              "type": "string",
              "enum": [
                "ios",
                "android"
              ],
              "description": "平台类型",
              "example": "ios"
            },
            "notification_settings": {
              "$ref": "#/components/schemas/PushSettings"
            }
          },
          "required": [
            "device_id",
            "push_token",
            "platform"
          ]
        },
        "PushSettings": {
          "type": "object",
          "properties": {
            "urgent_tickets": {
              "type": "boolean",
              "description": "紧急工单通知",
              "example": true
            },
            "status_updates": {
              "type": "boolean",
              "description": "状态更新通知",
              "example": true
            },
            "system_notifications": {
              "type": "boolean",
              "description": "系统通知",
              "example": false
            },
            "quiet_hours": {
              "type": "object",
              "description": "免打扰时间",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "description": "是否启用",
                  "example": true
                },
                "start_time": {
                  "type": "string",
                  "description": "开始时间",
                  "example": "22:00"
                },
                "end_time": {
                  "type": "string",
                  "description": "结束时间",
                  "example": "08:00"
                }
              }
            },
            "sound_enabled": {
              "type": "boolean",
              "description": "是否启用声音",
              "example": true
            },
            "vibration_enabled": {
              "type": "boolean",
              "description": "是否启用震动",
              "example": true
            }
          }
        },
        "LocationUpdateRequest": {
          "type": "object",
          "properties": {
            "location": {
              "$ref": "#/components/schemas/LocationInfo"
            },
            "activity_type": {
              "type": "string",
              "enum": [
                "working",
                "traveling",
                "break",
                "offline"
              ],
              "description": "活动类型",
              "example": "working"
            },
            "notes": {
              "type": "string",
              "description": "位置备注",
              "example": "在客户现场处理工单"
            }
          },
          "required": [
            "location"
          ]
        },
        "NearbyTicket": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "description": "工单ID",
              "example": 12345
            },
            "ticket_no": {
              "type": "string",
              "description": "工单编号",
              "example": "TCK-20250814-0001"
            },
            "title": {
              "type": "string",
              "description": "工单标题",
              "example": "服务器CPU使用率过高"
            },
            "priority": {
              "type": "integer",
              "description": "优先级",
              "example": 3
            },
            "status": {
              "type": "string",
              "description": "工单状态",
              "example": "NEW"
            },
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "example": "ABC科技有限公司"
            },
            "location": {
              "$ref": "#/components/schemas/LocationInfo"
            },
            "distance": {
              "type": "number",
              "description": "距离（公里）",
              "example": 2.5
            },
            "estimated_travel_time": {
              "type": "integer",
              "description": "预计行程时间（分钟）",
              "example": 15
            },
            "due_date": {
              "type": "string",
              "format": "date-time",
              "description": "截止时间",
              "example": "2025-08-14T18:00:00Z"
            }
          }
        },
        "FileUploadResponse": {
          "type": "object",
          "properties": {
            "file_id": {
              "type": "string",
              "description": "文件ID",
              "example": "file_123456"
            },
            "file_url": {
              "type": "string",
              "description": "文件URL",
              "example": "https://cdn.example.com/files/image.jpg"
            },
            "file_name": {
              "type": "string",
              "description": "文件名",
              "example": "compressed_image.jpg"
            },
            "file_size": {
              "type": "integer",
              "description": "文件大小（字节）",
              "example": 512000
            },
            "mime_type": {
              "type": "string",
              "description": "MIME类型",
              "example": "image/jpeg"
            },
            "upload_status": {
              "type": "string",
              "enum": [
                "completed",
                "partial",
                "failed"
              ],
              "description": "上传状态",
              "example": "completed"
            },
            "compression_ratio": {
              "type": "number",
              "description": "压缩比例",
              "example": 0.5
            },
            "upload_time": {
              "type": "number",
              "description": "上传耗时（秒）",
              "example": 3.2
            }
          }
        }
      },
      "issues": []
    },
    "REQ-021-资源权限管理模块": {
      "file_path": "docs/api/4.5.1/modules/REQ-021-资源权限管理模块/openapi.yaml",
      "components": {
        "PermissionVerifyRequest": {
          "type": "object",
          "required": [
            "subject",
            "resource",
            "action"
          ],
          "properties": {
            "subject": {
              "type": "object",
              "description": "权限主体信息",
              "required": [
                "user_id"
              ],
              "properties": {
                "user_id": {
                  "type": "integer",
                  "description": "用户ID",
                  "example": 1001
                },
                "roles": {
                  "type": "array",
                  "description": "用户角色列表",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "engineer",
                    "senior_engineer"
                  ]
                },
                "department": {
                  "type": "string",
                  "description": "部门",
                  "example": "ops_team"
                },
                "attributes": {
                  "type": "object",
                  "description": "用户属性",
                  "example": {
                    "security_level": "L2",
                    "location": "beijing",
                    "work_time": "09:00-18:00"
                  }
                }
              }
            },
            "resource": {
              "type": "object",
              "description": "资源信息",
              "required": [
                "resource_code",
                "resource_type"
              ],
              "properties": {
                "resource_code": {
                  "type": "string",
                  "description": "资源编码",
                  "example": "ticket_management"
                },
                "resource_type": {
                  "type": "string",
                  "description": "资源类型",
                  "enum": [
                    "module",
                    "api",
                    "data",
                    "file"
                  ],
                  "example": "module"
                },
                "resource_id": {
                  "type": "string",
                  "description": "资源实例ID",
                  "example": "TK-20240814-0001"
                },
                "attributes": {
                  "type": "object",
                  "description": "资源属性",
                  "example": {
                    "data_classification": "internal",
                    "customer_id": 12345,
                    "priority": "high"
                  }
                }
              }
            },
            "action": {
              "type": "string",
              "description": "操作类型",
              "enum": [
                "read",
                "write",
                "delete",
                "execute",
                "approve"
              ],
              "example": "read"
            },
            "context": {
              "type": "object",
              "description": "上下文信息",
              "properties": {
                "request_ip": {
                  "type": "string",
                  "description": "请求IP地址",
                  "example": "192.168.1.100"
                },
                "request_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "请求时间",
                  "example": "2024-08-15T10:00:00Z"
                },
                "session_id": {
                  "type": "string",
                  "description": "会话ID",
                  "example": "sess_abc123"
                }
              }
            }
          }
        },
        "PermissionVerifyResponse": {
          "type": "object",
          "properties": {
            "allowed": {
              "type": "boolean",
              "description": "是否允许访问",
              "example": true
            },
            "decision": {
              "type": "string",
              "description": "决策结果",
              "enum": [
                "permit",
                "deny",
                "indeterminate"
              ],
              "example": "permit"
            },
            "matched_policies": {
              "type": "array",
              "description": "匹配的权限策略",
              "items": {
                "type": "object",
                "properties": {
                  "policy_id": {
                    "type": "integer",
                    "description": "策略ID",
                    "example": 1001
                  },
                  "policy_name": {
                    "type": "string",
                    "description": "策略名称",
                    "example": "工程师基础权限"
                  },
                  "policy_type": {
                    "type": "string",
                    "description": "策略类型",
                    "enum": [
                      "RBAC",
                      "ABAC",
                      "PBAC"
                    ],
                    "example": "RBAC"
                  },
                  "effect": {
                    "type": "string",
                    "description": "策略效果",
                    "enum": [
                      "allow",
                      "deny"
                    ],
                    "example": "allow"
                  },
                  "priority": {
                    "type": "integer",
                    "description": "策略优先级",
                    "example": 100
                  }
                }
              }
            },
            "conditions": {
              "type": "object",
              "description": "附加条件",
              "properties": {
                "time_limit": {
                  "type": "string",
                  "description": "时间限制",
                  "example": "09:00-18:00"
                },
                "ip_restriction": {
                  "type": "boolean",
                  "description": "IP限制",
                  "example": false
                },
                "additional_approval": {
                  "type": "boolean",
                  "description": "需要额外审批",
                  "example": false
                }
              }
            },
            "cache_ttl": {
              "type": "integer",
              "description": "缓存TTL（秒）",
              "example": 300
            },
            "trace_id": {
              "type": "string",
              "description": "链路追踪ID",
              "example": "trace_abc123def456"
            }
          }
        },
        "BatchPermissionVerifyRequest": {
          "type": "object",
          "required": [
            "subject",
            "requests"
          ],
          "properties": {
            "subject": {
              "type": "object",
              "description": "权限主体信息",
              "required": [
                "user_id"
              ],
              "properties": {
                "user_id": {
                  "type": "integer",
                  "description": "用户ID",
                  "example": 1001
                },
                "roles": {
                  "type": "array",
                  "description": "用户角色列表",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "engineer",
                    "senior_engineer"
                  ]
                },
                "department": {
                  "type": "string",
                  "description": "部门",
                  "example": "ops_team"
                }
              }
            },
            "requests": {
              "type": "array",
              "description": "批量权限验证请求列表",
              "items": {
                "type": "object",
                "required": [
                  "resource",
                  "action"
                ],
                "properties": {
                  "resource": {
                    "type": "object",
                    "description": "资源信息",
                    "required": [
                      "resource_code",
                      "resource_type"
                    ],
                    "properties": {
                      "resource_code": {
                        "type": "string",
                        "description": "资源编码",
                        "example": "ticket_management"
                      },
                      "resource_type": {
                        "type": "string",
                        "description": "资源类型",
                        "enum": [
                          "module",
                          "api",
                          "data",
                          "file"
                        ],
                        "example": "module"
                      },
                      "resource_id": {
                        "type": "string",
                        "description": "资源实例ID",
                        "example": "TK-20240814-0001"
                      }
                    }
                  },
                  "action": {
                    "type": "string",
                    "description": "操作类型",
                    "enum": [
                      "read",
                      "write",
                      "delete",
                      "execute",
                      "approve"
                    ],
                    "example": "read"
                  }
                }
              }
            }
          }
        },
        "BatchPermissionVerifyResponse": {
          "type": "object",
          "properties": {
            "results": {
              "type": "array",
              "description": "批量验证结果",
              "items": {
                "type": "object",
                "properties": {
                  "resource_code": {
                    "type": "string",
                    "description": "资源编码",
                    "example": "ticket_management"
                  },
                  "action": {
                    "type": "string",
                    "description": "操作类型",
                    "example": "read"
                  },
                  "allowed": {
                    "type": "boolean",
                    "description": "是否允许访问",
                    "example": true
                  },
                  "decision": {
                    "type": "string",
                    "description": "决策结果",
                    "enum": [
                      "permit",
                      "deny",
                      "indeterminate"
                    ],
                    "example": "permit"
                  },
                  "matched_policies": {
                    "type": "array",
                    "description": "匹配的权限策略",
                    "items": {
                      "type": "object",
                      "properties": {
                        "policy_id": {
                          "type": "integer",
                          "example": 1001
                        },
                        "policy_name": {
                          "type": "string",
                          "example": "工程师基础权限"
                        }
                      }
                    }
                  }
                }
              }
            },
            "trace_id": {
              "type": "string",
              "description": "链路追踪ID",
              "example": "trace_abc123def456"
            }
          }
        },
        "PermissionPolicy": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "description": "租户ID",
                  "example": 1
                },
                "policy_name": {
                  "type": "string",
                  "description": "策略名称",
                  "example": "工程师基础权限"
                },
                "policy_type": {
                  "type": "string",
                  "description": "策略类型",
                  "enum": [
                    "RBAC",
                    "ABAC",
                    "PBAC"
                  ],
                  "example": "RBAC"
                },
                "resource_pattern": {
                  "type": "string",
                  "description": "资源匹配模式",
                  "example": "ticket_management.*"
                },
                "subject_pattern": {
                  "type": "string",
                  "description": "主体匹配模式",
                  "example": "role:engineer"
                },
                "action_pattern": {
                  "type": "string",
                  "description": "操作匹配模式",
                  "example": "read,write"
                },
                "conditions": {
                  "type": "object",
                  "description": "条件表达式",
                  "example": {
                    "time_range": "09:00-18:00",
                    "location": "beijing",
                    "security_level": ">=L2"
                  }
                },
                "effect": {
                  "type": "integer",
                  "description": "效果：1-允许，2-拒绝",
                  "enum": [
                    1,
                    2
                  ],
                  "example": 1
                },
                "priority": {
                  "type": "integer",
                  "description": "优先级，数值越大优先级越高",
                  "example": 100
                },
                "enabled": {
                  "type": "boolean",
                  "description": "是否启用",
                  "example": true
                },
                "created_by": {
                  "type": "integer",
                  "description": "创建人ID",
                  "example": 1001
                },
                "updated_by": {
                  "type": "integer",
                  "description": "更新人ID",
                  "example": 1001
                }
              }
            }
          ]
        },
        "PermissionPolicyCreateRequest": {
          "type": "object",
          "required": [
            "policy_name",
            "policy_type",
            "resource_pattern",
            "subject_pattern",
            "action_pattern",
            "effect"
          ],
          "properties": {
            "policy_name": {
              "type": "string",
              "description": "策略名称",
              "maxLength": 100,
              "example": "工程师基础权限"
            },
            "policy_type": {
              "type": "string",
              "description": "策略类型",
              "enum": [
                "RBAC",
                "ABAC",
                "PBAC"
              ],
              "example": "RBAC"
            },
            "resource_pattern": {
              "type": "string",
              "description": "资源匹配模式",
              "maxLength": 500,
              "example": "ticket_management.*"
            },
            "subject_pattern": {
              "type": "string",
              "description": "主体匹配模式",
              "maxLength": 500,
              "example": "role:engineer"
            },
            "action_pattern": {
              "type": "string",
              "description": "操作匹配模式",
              "maxLength": 200,
              "example": "read,write"
            },
            "conditions": {
              "type": "object",
              "description": "条件表达式",
              "example": {
                "time_range": "09:00-18:00",
                "location": "beijing",
                "security_level": ">=L2"
              }
            },
            "effect": {
              "type": "integer",
              "description": "效果：1-允许，2-拒绝",
              "enum": [
                1,
                2
              ],
              "example": 1
            },
            "priority": {
              "type": "integer",
              "description": "优先级，数值越大优先级越高",
              "minimum": 0,
              "maximum": 1000,
              "default": 0,
              "example": 100
            },
            "enabled": {
              "type": "boolean",
              "description": "是否启用",
              "default": true,
              "example": true
            }
          }
        },
        "PermissionPolicyUpdateRequest": {
          "type": "object",
          "properties": {
            "policy_name": {
              "type": "string",
              "description": "策略名称",
              "maxLength": 100,
              "example": "工程师基础权限"
            },
            "policy_type": {
              "type": "string",
              "description": "策略类型",
              "enum": [
                "RBAC",
                "ABAC",
                "PBAC"
              ],
              "example": "RBAC"
            },
            "resource_pattern": {
              "type": "string",
              "description": "资源匹配模式",
              "maxLength": 500,
              "example": "ticket_management.*"
            },
            "subject_pattern": {
              "type": "string",
              "description": "主体匹配模式",
              "maxLength": 500,
              "example": "role:engineer"
            },
            "action_pattern": {
              "type": "string",
              "description": "操作匹配模式",
              "maxLength": 200,
              "example": "read,write"
            },
            "conditions": {
              "type": "object",
              "description": "条件表达式",
              "example": {
                "time_range": "09:00-18:00",
                "location": "beijing",
                "security_level": ">=L2"
              }
            },
            "effect": {
              "type": "integer",
              "description": "效果：1-允许，2-拒绝",
              "enum": [
                1,
                2
              ],
              "example": 1
            },
            "priority": {
              "type": "integer",
              "description": "优先级，数值越大优先级越高",
              "minimum": 0,
              "maximum": 1000,
              "example": 100
            },
            "enabled": {
              "type": "boolean",
              "description": "是否启用",
              "example": true
            }
          }
        },
        "PermissionAssignment": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "description": "租户ID",
                  "example": 1
                },
                "policy_id": {
                  "type": "integer",
                  "description": "权限策略ID",
                  "example": 1001
                },
                "policy_name": {
                  "type": "string",
                  "description": "权限策略名称",
                  "example": "工程师基础权限"
                },
                "subject_type": {
                  "type": "string",
                  "description": "主体类型",
                  "enum": [
                    "user",
                    "role",
                    "group"
                  ],
                  "example": "user"
                },
                "subject_id": {
                  "type": "integer",
                  "description": "主体ID",
                  "example": 1001
                },
                "subject_name": {
                  "type": "string",
                  "description": "主体名称",
                  "example": "张三"
                },
                "resource_id": {
                  "type": "integer",
                  "description": "资源ID",
                  "example": 3001
                },
                "resource_pattern": {
                  "type": "string",
                  "description": "资源匹配模式",
                  "example": "ticket_management.*"
                },
                "actions": {
                  "type": "array",
                  "description": "允许的操作列表",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "read",
                    "write"
                  ]
                },
                "conditions": {
                  "type": "object",
                  "description": "附加条件",
                  "example": {
                    "time_limit": "09:00-18:00",
                    "ip_restriction": false
                  }
                },
                "valid_from": {
                  "type": "string",
                  "format": "date-time",
                  "description": "生效时间",
                  "example": "2024-08-15T00:00:00Z"
                },
                "valid_to": {
                  "type": "string",
                  "format": "date-time",
                  "description": "失效时间",
                  "example": "2024-12-31T23:59:59Z"
                },
                "status": {
                  "type": "integer",
                  "description": "状态：1-生效，2-暂停，3-过期",
                  "enum": [
                    1,
                    2,
                    3
                  ],
                  "example": 1
                },
                "created_by": {
                  "type": "integer",
                  "description": "创建人ID",
                  "example": 1001
                },
                "updated_by": {
                  "type": "integer",
                  "description": "更新人ID",
                  "example": 1001
                }
              }
            }
          ]
        },
        "PermissionAssignmentCreateRequest": {
          "type": "object",
          "required": [
            "policy_id",
            "subject_type",
            "subject_id"
          ],
          "properties": {
            "policy_id": {
              "type": "integer",
              "description": "权限策略ID",
              "example": 1001
            },
            "subject_type": {
              "type": "string",
              "description": "主体类型",
              "enum": [
                "user",
                "role",
                "group"
              ],
              "example": "user"
            },
            "subject_id": {
              "type": "integer",
              "description": "主体ID",
              "example": 1001
            },
            "resource_id": {
              "type": "integer",
              "description": "资源ID",
              "example": 3001
            },
            "resource_pattern": {
              "type": "string",
              "description": "资源匹配模式",
              "maxLength": 500,
              "example": "ticket_management.*"
            },
            "actions": {
              "type": "array",
              "description": "允许的操作列表",
              "items": {
                "type": "string",
                "enum": [
                  "read",
                  "write",
                  "delete",
                  "execute",
                  "approve"
                ]
              },
              "example": [
                "read",
                "write"
              ]
            },
            "conditions": {
              "type": "object",
              "description": "附加条件",
              "example": {
                "time_limit": "09:00-18:00",
                "ip_restriction": false
              }
            },
            "valid_from": {
              "type": "string",
              "format": "date-time",
              "description": "生效时间",
              "example": "2024-08-15T00:00:00Z"
            },
            "valid_to": {
              "type": "string",
              "format": "date-time",
              "description": "失效时间",
              "example": "2024-12-31T23:59:59Z"
            }
          }
        },
        "BatchPermissionAssignRequest": {
          "type": "object",
          "required": [
            "assignments"
          ],
          "properties": {
            "assignments": {
              "type": "array",
              "description": "批量权限分配列表",
              "items": {
                "type": "object",
                "required": [
                  "policy_id",
                  "subject_type",
                  "subject_id"
                ],
                "properties": {
                  "policy_id": {
                    "type": "integer",
                    "description": "权限策略ID",
                    "example": 1001
                  },
                  "subject_type": {
                    "type": "string",
                    "description": "主体类型",
                    "enum": [
                      "user",
                      "role",
                      "group"
                    ],
                    "example": "user"
                  },
                  "subject_id": {
                    "type": "integer",
                    "description": "主体ID",
                    "example": 1001
                  },
                  "resource_id": {
                    "type": "integer",
                    "description": "资源ID",
                    "example": 3001
                  },
                  "actions": {
                    "type": "array",
                    "description": "允许的操作列表",
                    "items": {
                      "type": "string",
                      "enum": [
                        "read",
                        "write",
                        "delete",
                        "execute",
                        "approve"
                      ]
                    },
                    "example": [
                      "read",
                      "write"
                    ]
                  },
                  "valid_from": {
                    "type": "string",
                    "format": "date-time",
                    "description": "生效时间",
                    "example": "2024-08-15T00:00:00Z"
                  },
                  "valid_to": {
                    "type": "string",
                    "format": "date-time",
                    "description": "失效时间",
                    "example": "2024-12-31T23:59:59Z"
                  }
                }
              }
            }
          }
        },
        "BatchPermissionRevokeRequest": {
          "type": "object",
          "required": [
            "assignment_ids"
          ],
          "properties": {
            "assignment_ids": {
              "type": "array",
              "description": "权限分配ID列表",
              "items": {
                "type": "integer"
              },
              "example": [
                2001,
                2002,
                2003
              ]
            },
            "reason": {
              "type": "string",
              "description": "回收原因",
              "maxLength": 500,
              "example": "用户离职，回收所有权限"
            }
          }
        },
        "BatchOperationResult": {
          "type": "object",
          "properties": {
            "total": {
              "type": "integer",
              "description": "总数",
              "example": 10
            },
            "success": {
              "type": "integer",
              "description": "成功数",
              "example": 8
            },
            "failed": {
              "type": "integer",
              "description": "失败数",
              "example": 2
            },
            "success_items": {
              "type": "array",
              "description": "成功项列表",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer",
                    "description": "项目ID",
                    "example": 2001
                  },
                  "message": {
                    "type": "string",
                    "description": "处理消息",
                    "example": "权限分配成功"
                  }
                }
              }
            },
            "failed_items": {
              "type": "array",
              "description": "失败项列表",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer",
                    "description": "项目ID",
                    "example": 2002
                  },
                  "error_code": {
                    "type": "string",
                    "description": "错误码",
                    "example": "PERMISSION_CONFLICT"
                  },
                  "error_message": {
                    "type": "string",
                    "description": "错误消息",
                    "example": "权限策略冲突"
                  }
                }
              }
            }
          }
        },
        "PermissionAuditLog": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "description": "审计日志ID",
              "example": 10001
            },
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1
            },
            "trace_id": {
              "type": "string",
              "description": "链路追踪ID",
              "example": "trace_abc123def456"
            },
            "user_id": {
              "type": "integer",
              "description": "用户ID",
              "example": 1001
            },
            "user_name": {
              "type": "string",
              "description": "用户名",
              "example": "张三"
            },
            "resource_code": {
              "type": "string",
              "description": "资源编码",
              "example": "ticket_management"
            },
            "resource_type": {
              "type": "string",
              "description": "资源类型",
              "example": "module"
            },
            "action": {
              "type": "string",
              "description": "操作类型",
              "example": "read"
            },
            "permission_result": {
              "type": "integer",
              "description": "权限验证结果：1-允许，2-拒绝",
              "enum": [
                1,
                2
              ],
              "example": 1
            },
            "matched_policies": {
              "type": "array",
              "description": "匹配的权限策略",
              "items": {
                "type": "object",
                "properties": {
                  "policy_id": {
                    "type": "integer",
                    "example": 1001
                  },
                  "policy_name": {
                    "type": "string",
                    "example": "工程师基础权限"
                  },
                  "effect": {
                    "type": "string",
                    "example": "allow"
                  }
                }
              }
            },
            "request_ip": {
              "type": "string",
              "description": "请求IP地址",
              "example": "192.168.1.100"
            },
            "user_agent": {
              "type": "string",
              "description": "用户代理",
              "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
            },
            "request_time": {
              "type": "string",
              "format": "date-time",
              "description": "请求时间",
              "example": "2024-08-15T10:00:00Z"
            },
            "response_time": {
              "type": "integer",
              "description": "响应时间(ms)",
              "example": 45
            },
            "error_code": {
              "type": "string",
              "description": "错误码",
              "example": "PERMISSION_DENIED"
            },
            "error_message": {
              "type": "string",
              "description": "错误信息",
              "example": "用户无权访问该资源"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-15T10:00:00Z"
            }
          }
        },
        "PermissionAuditReport": {
          "type": "object",
          "properties": {
            "report_id": {
              "type": "string",
              "description": "报告ID",
              "example": "RPT-20240815-001"
            },
            "report_type": {
              "type": "string",
              "description": "报告类型",
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "custom"
              ],
              "example": "monthly"
            },
            "period": {
              "type": "object",
              "description": "报告周期",
              "properties": {
                "start_date": {
                  "type": "string",
                  "format": "date",
                  "example": "2024-08-01"
                },
                "end_date": {
                  "type": "string",
                  "format": "date",
                  "example": "2024-08-31"
                }
              }
            },
            "summary": {
              "type": "object",
              "description": "汇总信息",
              "properties": {
                "total_requests": {
                  "type": "integer",
                  "description": "总请求数",
                  "example": 125000
                },
                "allowed_requests": {
                  "type": "integer",
                  "description": "允许请求数",
                  "example": 120000
                },
                "denied_requests": {
                  "type": "integer",
                  "description": "拒绝请求数",
                  "example": 5000
                },
                "success_rate": {
                  "type": "number",
                  "description": "成功率",
                  "example": 96.0
                },
                "avg_response_time": {
                  "type": "number",
                  "description": "平均响应时间(ms)",
                  "example": 52.5
                }
              }
            },
            "top_users": {
              "type": "array",
              "description": "访问量最高的用户",
              "items": {
                "type": "object",
                "properties": {
                  "user_id": {
                    "type": "integer",
                    "example": 1001
                  },
                  "user_name": {
                    "type": "string",
                    "example": "张三"
                  },
                  "request_count": {
                    "type": "integer",
                    "example": 1500
                  }
                }
              }
            },
            "top_resources": {
              "type": "array",
              "description": "访问量最高的资源",
              "items": {
                "type": "object",
                "properties": {
                  "resource_code": {
                    "type": "string",
                    "example": "ticket_management"
                  },
                  "request_count": {
                    "type": "integer",
                    "example": 8500
                  }
                }
              }
            },
            "security_events": {
              "type": "array",
              "description": "安全事件",
              "items": {
                "type": "object",
                "properties": {
                  "event_type": {
                    "type": "string",
                    "example": "PERMISSION_DENIED"
                  },
                  "count": {
                    "type": "integer",
                    "example": 25
                  },
                  "description": {
                    "type": "string",
                    "example": "权限拒绝事件"
                  }
                }
              }
            },
            "generated_at": {
              "type": "string",
              "format": "date-time",
              "description": "报告生成时间",
              "example": "2024-08-15T14:30:00Z"
            },
            "download_url": {
              "type": "string",
              "description": "下载链接（非JSON格式时）",
              "example": "https://cdn.example.com/reports/RPT-20240815-001.pdf"
            }
          }
        },
        "PermissionUsageStatistics": {
          "type": "object",
          "properties": {
            "time_range": {
              "type": "string",
              "description": "时间范围",
              "example": "month"
            },
            "group_by": {
              "type": "string",
              "description": "分组维度",
              "example": "user"
            },
            "total_count": {
              "type": "integer",
              "description": "总计数",
              "example": 125000
            },
            "statistics": {
              "type": "array",
              "description": "统计数据",
              "items": {
                "type": "object",
                "properties": {
                  "group_key": {
                    "type": "string",
                    "description": "分组键",
                    "example": "张三"
                  },
                  "group_value": {
                    "type": "string",
                    "description": "分组值",
                    "example": "1001"
                  },
                  "request_count": {
                    "type": "integer",
                    "description": "请求次数",
                    "example": 1500
                  },
                  "allowed_count": {
                    "type": "integer",
                    "description": "允许次数",
                    "example": 1450
                  },
                  "denied_count": {
                    "type": "integer",
                    "description": "拒绝次数",
                    "example": 50
                  },
                  "success_rate": {
                    "type": "number",
                    "description": "成功率",
                    "example": 96.7
                  },
                  "avg_response_time": {
                    "type": "number",
                    "description": "平均响应时间(ms)",
                    "example": 48.5
                  }
                }
              }
            },
            "trends": {
              "type": "array",
              "description": "趋势数据",
              "items": {
                "type": "object",
                "properties": {
                  "date": {
                    "type": "string",
                    "format": "date",
                    "example": "2024-08-15"
                  },
                  "request_count": {
                    "type": "integer",
                    "example": 4200
                  },
                  "success_rate": {
                    "type": "number",
                    "example": 97.2
                  }
                }
              }
            }
          }
        }
      },
      "issues": []
    },
    "REQ-017-SLA管理模块": {
      "file_path": "docs/api/4.5.1/modules/REQ-017-SLA管理模块/openapi.yaml",
      "components": {
        "SlaDefinitionInfo": {
          "type": "object",
          "description": "SLA定义基本信息",
          "properties": {
            "sla_id": {
              "type": "integer",
              "description": "SLA定义ID",
              "example": 67890
            },
            "sla_name": {
              "type": "string",
              "description": "SLA名称",
              "example": "工单响应时间SLA"
            },
            "sla_code": {
              "type": "string",
              "description": "SLA编码",
              "example": "TICKET_RESPONSE_TIME"
            },
            "customer_id": {
              "type": "integer",
              "description": "客户ID",
              "example": 12345
            },
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "example": "ABC科技有限公司"
            },
            "service_type": {
              "type": "string",
              "description": "服务类型",
              "example": "工单处理"
            },
            "metric_type": {
              "type": "string",
              "enum": [
                "response_time",
                "resolution_time",
                "availability",
                "satisfaction",
                "first_call_resolution"
              ],
              "description": "指标类型",
              "example": "response_time"
            },
            "target_value": {
              "type": "number",
              "format": "decimal",
              "description": "目标值",
              "example": 30.0
            },
            "warning_threshold": {
              "type": "number",
              "format": "decimal",
              "description": "预警阈值",
              "example": 25.0
            },
            "critical_threshold": {
              "type": "number",
              "format": "decimal",
              "description": "严重告警阈值",
              "example": 35.0
            },
            "unit": {
              "type": "string",
              "enum": [
                "minutes",
                "hours",
                "percentage",
                "score"
              ],
              "description": "单位",
              "example": "minutes"
            },
            "calculation_period": {
              "type": "string",
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "description": "计算周期",
              "example": "monthly"
            },
            "status": {
              "type": "string",
              "enum": [
                "active",
                "inactive",
                "draft",
                "expired"
              ],
              "description": "状态",
              "example": "active"
            },
            "effective_date": {
              "type": "string",
              "format": "date",
              "description": "生效日期",
              "example": "2025-09-01"
            },
            "expiry_date": {
              "type": "string",
              "format": "date",
              "description": "失效日期",
              "example": "2026-08-31"
            },
            "version": {
              "type": "string",
              "description": "版本号",
              "example": "1.0"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "SlaDefinitionDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/SlaDefinitionInfo"
            },
            {
              "type": "object",
              "properties": {
                "calculation_formula": {
                  "type": "string",
                  "description": "计算公式",
                  "example": "AVG(response_time_minutes) WHERE priority IN (1,2)"
                },
                "business_hours_only": {
                  "type": "boolean",
                  "description": "是否仅工作时间",
                  "example": true
                },
                "business_hours_config": {
                  "type": "object",
                  "description": "工作时间配置",
                  "properties": {
                    "timezone": {
                      "type": "string",
                      "example": "Asia/Shanghai"
                    },
                    "work_days": {
                      "type": "array",
                      "items": {
                        "type": "integer"
                      },
                      "example": [
                        1,
                        2,
                        3,
                        4,
                        5
                      ]
                    },
                    "work_hours": {
                      "type": "object",
                      "properties": {
                        "start": {
                          "type": "string",
                          "example": "09:00"
                        },
                        "end": {
                          "type": "string",
                          "example": "18:00"
                        }
                      }
                    },
                    "holidays": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "format": "date"
                      },
                      "example": [
                        "2025-01-01",
                        "2025-02-10"
                      ]
                    }
                  }
                },
                "priority_filter": {
                  "type": "string",
                  "description": "优先级过滤条件",
                  "example": "1,2"
                },
                "category_filter": {
                  "type": "string",
                  "description": "分类过滤条件",
                  "example": "硬件故障,软件故障"
                },
                "exclude_conditions": {
                  "type": "object",
                  "description": "排除条件配置",
                  "properties": {
                    "exclude_maintenance": {
                      "type": "boolean",
                      "example": true
                    },
                    "exclude_customer_delay": {
                      "type": "boolean",
                      "example": true
                    }
                  }
                },
                "weight": {
                  "type": "number",
                  "format": "decimal",
                  "description": "权重",
                  "example": 1.0
                },
                "penalty_rules": {
                  "type": "object",
                  "description": "违约扣费/赔偿规则",
                  "properties": {
                    "violation_penalty": {
                      "type": "object",
                      "properties": {
                        "percentage": {
                          "type": "number",
                          "example": 5.0
                        },
                        "max_amount": {
                          "type": "number",
                          "example": 10000.0
                        },
                        "calculation_base": {
                          "type": "string",
                          "example": "monthly_fee"
                        }
                      }
                    },
                    "compensation_rules": {
                      "type": "object",
                      "properties": {
                        "minor_violation": {
                          "type": "number",
                          "example": 1000.0
                        },
                        "major_violation": {
                          "type": "number",
                          "example": 5000.0
                        }
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "SlaDefinitionCreateRequest": {
          "type": "object",
          "description": "创建SLA定义请求",
          "required": [
            "sla_name",
            "sla_code",
            "metric_type",
            "target_value",
            "unit",
            "calculation_period"
          ],
          "properties": {
            "sla_name": {
              "type": "string",
              "description": "SLA名称",
              "example": "工单响应时间SLA"
            },
            "sla_code": {
              "type": "string",
              "description": "SLA编码",
              "example": "TICKET_RESPONSE_TIME"
            },
            "customer_id": {
              "type": "integer",
              "description": "客户ID",
              "example": 12345
            },
            "service_type": {
              "type": "string",
              "description": "服务类型",
              "example": "工单处理"
            },
            "metric_type": {
              "type": "string",
              "enum": [
                "response_time",
                "resolution_time",
                "availability",
                "satisfaction",
                "first_call_resolution"
              ],
              "description": "指标类型",
              "example": "response_time"
            },
            "target_value": {
              "type": "number",
              "format": "decimal",
              "description": "目标值",
              "example": 30.0
            },
            "warning_threshold": {
              "type": "number",
              "format": "decimal",
              "description": "预警阈值",
              "example": 25.0
            },
            "critical_threshold": {
              "type": "number",
              "format": "decimal",
              "description": "严重告警阈值",
              "example": 35.0
            },
            "unit": {
              "type": "string",
              "enum": [
                "minutes",
                "hours",
                "percentage",
                "score"
              ],
              "description": "单位",
              "example": "minutes"
            },
            "calculation_period": {
              "type": "string",
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly"
              ],
              "description": "计算周期",
              "example": "monthly"
            },
            "calculation_formula": {
              "type": "string",
              "description": "计算公式",
              "example": "AVG(response_time_minutes) WHERE priority IN (1,2)"
            },
            "business_hours_only": {
              "type": "boolean",
              "description": "是否仅工作时间",
              "example": true
            },
            "business_hours_config": {
              "type": "object",
              "description": "工作时间配置"
            },
            "priority_filter": {
              "type": "string",
              "description": "优先级过滤条件",
              "example": "1,2"
            },
            "category_filter": {
              "type": "string",
              "description": "分类过滤条件",
              "example": "硬件故障,软件故障"
            },
            "exclude_conditions": {
              "type": "object",
              "description": "排除条件配置"
            },
            "weight": {
              "type": "number",
              "format": "decimal",
              "description": "权重",
              "example": 1.0
            },
            "penalty_rules": {
              "type": "object",
              "description": "违约扣费/赔偿规则"
            },
            "effective_date": {
              "type": "string",
              "format": "date",
              "description": "生效日期",
              "example": "2025-09-01"
            },
            "expiry_date": {
              "type": "string",
              "format": "date",
              "description": "失效日期",
              "example": "2026-08-31"
            }
          }
        },
        "SlaDefinitionUpdateRequest": {
          "type": "object",
          "description": "更新SLA定义请求",
          "properties": {
            "sla_name": {
              "type": "string",
              "description": "SLA名称",
              "example": "工单响应时间SLA"
            },
            "target_value": {
              "type": "number",
              "format": "decimal",
              "description": "目标值",
              "example": 25.0
            },
            "warning_threshold": {
              "type": "number",
              "format": "decimal",
              "description": "预警阈值",
              "example": 20.0
            },
            "critical_threshold": {
              "type": "number",
              "format": "decimal",
              "description": "严重告警阈值",
              "example": 30.0
            },
            "calculation_formula": {
              "type": "string",
              "description": "计算公式",
              "example": "AVG(response_time_minutes) WHERE priority IN (1,2)"
            },
            "business_hours_config": {
              "type": "object",
              "description": "工作时间配置"
            },
            "priority_filter": {
              "type": "string",
              "description": "优先级过滤条件",
              "example": "1,2"
            },
            "category_filter": {
              "type": "string",
              "description": "分类过滤条件",
              "example": "硬件故障,软件故障"
            },
            "exclude_conditions": {
              "type": "object",
              "description": "排除条件配置"
            },
            "weight": {
              "type": "number",
              "format": "decimal",
              "description": "权重",
              "example": 1.0
            },
            "penalty_rules": {
              "type": "object",
              "description": "违约扣费/赔偿规则"
            },
            "expiry_date": {
              "type": "string",
              "format": "date",
              "description": "失效日期",
              "example": "2026-08-31"
            },
            "version": {
              "type": "string",
              "description": "版本号",
              "example": "1.1"
            },
            "change_reason": {
              "type": "string",
              "description": "变更原因",
              "example": "客户要求提升服务水平"
            }
          }
        },
        "SlaMonitoringStatus": {
          "type": "object",
          "description": "SLA监控状态",
          "properties": {
            "sla_id": {
              "type": "integer",
              "description": "SLA定义ID",
              "example": 67890
            },
            "sla_name": {
              "type": "string",
              "description": "SLA名称",
              "example": "工单响应时间SLA"
            },
            "monitoring_period": {
              "type": "string",
              "description": "监控周期",
              "example": "2025-08"
            },
            "current_status": {
              "type": "object",
              "description": "当前状态",
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "achieved",
                    "warning",
                    "violated",
                    "calculating",
                    "data_insufficient"
                  ],
                  "example": "achieved"
                },
                "actual_value": {
                  "type": "number",
                  "format": "decimal",
                  "example": 28.5
                },
                "target_value": {
                  "type": "number",
                  "format": "decimal",
                  "example": 30.0
                },
                "achievement_rate": {
                  "type": "number",
                  "format": "decimal",
                  "example": 105.3
                },
                "trend_indicator": {
                  "type": "string",
                  "enum": [
                    "improving",
                    "stable",
                    "declining"
                  ],
                  "example": "improving"
                },
                "days_remaining": {
                  "type": "integer",
                  "example": 15
                }
              }
            },
            "period_summary": {
              "type": "object",
              "description": "周期汇总",
              "properties": {
                "total_incidents": {
                  "type": "integer",
                  "example": 156
                },
                "achieved_incidents": {
                  "type": "integer",
                  "example": 152
                },
                "violated_incidents": {
                  "type": "integer",
                  "example": 4
                },
                "sample_count": {
                  "type": "integer",
                  "example": 156
                },
                "quality_score": {
                  "type": "number",
                  "format": "decimal",
                  "example": 98.5
                }
              }
            },
            "trend_data": {
              "type": "array",
              "description": "趋势数据",
              "items": {
                "type": "object",
                "properties": {
                  "date": {
                    "type": "string",
                    "format": "date",
                    "example": "2025-08-01"
                  },
                  "value": {
                    "type": "number",
                    "format": "decimal",
                    "example": 32.1
                  },
                  "status": {
                    "type": "string",
                    "example": "warning"
                  }
                }
              }
            },
            "risk_assessment": {
              "type": "object",
              "description": "风险评估",
              "properties": {
                "risk_level": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high",
                    "critical"
                  ],
                  "example": "low"
                },
                "risk_factors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": []
                },
                "predicted_end_value": {
                  "type": "number",
                  "format": "decimal",
                  "example": 28.2
                },
                "confidence": {
                  "type": "number",
                  "format": "decimal",
                  "example": 0.85
                }
              }
            }
          }
        },
        "SlaMonitoringRecord": {
          "type": "object",
          "description": "SLA监控记录",
          "properties": {
            "record_id": {
              "type": "integer",
              "description": "记录ID",
              "example": 12345
            },
            "sla_id": {
              "type": "integer",
              "description": "SLA定义ID",
              "example": 67890
            },
            "sla_name": {
              "type": "string",
              "description": "SLA名称",
              "example": "工单响应时间SLA"
            },
            "monitoring_period": {
              "type": "string",
              "format": "date",
              "description": "监控周期",
              "example": "2025-08-01"
            },
            "period_type": {
              "type": "string",
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly"
              ],
              "description": "周期类型",
              "example": "monthly"
            },
            "actual_value": {
              "type": "number",
              "format": "decimal",
              "description": "实际值",
              "example": 28.5
            },
            "target_value": {
              "type": "number",
              "format": "decimal",
              "description": "目标值",
              "example": 30.0
            },
            "achievement_rate": {
              "type": "number",
              "format": "decimal",
              "description": "达成率（百分比）",
              "example": 105.3
            },
            "status": {
              "type": "string",
              "enum": [
                "achieved",
                "warning",
                "violated",
                "calculating",
                "data_insufficient"
              ],
              "description": "状态",
              "example": "achieved"
            },
            "sample_count": {
              "type": "integer",
              "description": "样本数量",
              "example": 156
            },
            "total_incidents": {
              "type": "integer",
              "description": "总事件数",
              "example": 156
            },
            "violation_count": {
              "type": "integer",
              "description": "违约次数",
              "example": 4
            },
            "excluded_count": {
              "type": "integer",
              "description": "排除事件数",
              "example": 2
            },
            "quality_score": {
              "type": "number",
              "format": "decimal",
              "description": "数据质量评分（0-100）",
              "example": 98.5
            },
            "trend_indicator": {
              "type": "string",
              "enum": [
                "improving",
                "stable",
                "declining"
              ],
              "description": "趋势指标",
              "example": "improving"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "SlaAlertInfo": {
          "type": "object",
          "description": "SLA告警信息",
          "properties": {
            "alert_id": {
              "type": "integer",
              "description": "告警ID",
              "example": 12345
            },
            "sla_id": {
              "type": "integer",
              "description": "SLA定义ID",
              "example": 67890
            },
            "sla_name": {
              "type": "string",
              "description": "SLA名称",
              "example": "工单响应时间SLA"
            },
            "alert_type": {
              "type": "string",
              "enum": [
                "warning",
                "critical",
                "violation",
                "recovery",
                "threshold"
              ],
              "description": "告警类型",
              "example": "violation"
            },
            "alert_level": {
              "type": "string",
              "enum": [
                "info",
                "warning",
                "error",
                "critical"
              ],
              "description": "告警级别",
              "example": "critical"
            },
            "alert_title": {
              "type": "string",
              "description": "告警标题",
              "example": "SLA违约告警"
            },
            "alert_message": {
              "type": "string",
              "description": "告警消息",
              "example": "工单响应时间SLA违约，当前值35.2分钟，超出目标值30分钟"
            },
            "current_value": {
              "type": "number",
              "format": "decimal",
              "description": "当前值",
              "example": 35.2
            },
            "threshold_value": {
              "type": "number",
              "format": "decimal",
              "description": "阈值",
              "example": 30.0
            },
            "escalation_level": {
              "type": "integer",
              "description": "升级级别",
              "example": 2
            },
            "status": {
              "type": "string",
              "enum": [
                "active",
                "acknowledged",
                "resolved",
                "closed",
                "suppressed"
              ],
              "description": "状态",
              "example": "active"
            },
            "notification_sent": {
              "type": "boolean",
              "description": "是否已发送通知",
              "example": true
            },
            "acknowledged_by": {
              "type": "integer",
              "description": "确认人ID",
              "example": 456
            },
            "acknowledged_at": {
              "type": "string",
              "format": "date-time",
              "description": "确认时间",
              "example": "2025-08-15T15:00:00Z"
            },
            "resolved_by": {
              "type": "integer",
              "description": "解决人ID",
              "example": 456
            },
            "resolved_at": {
              "type": "string",
              "format": "date-time",
              "description": "解决时间",
              "example": "2025-08-15T16:00:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "SlaAlertDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/SlaAlertInfo"
            },
            {
              "type": "object",
              "properties": {
                "trend_data": {
                  "type": "object",
                  "description": "趋势数据",
                  "properties": {
                    "last_24h": {
                      "type": "array",
                      "items": {
                        "type": "number"
                      },
                      "example": [
                        32.1,
                        33.5,
                        35.2
                      ]
                    },
                    "trend": {
                      "type": "string",
                      "example": "increasing"
                    }
                  }
                },
                "notification_channels": {
                  "type": "array",
                  "description": "通知渠道列表",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "email",
                    "sms",
                    "dingtalk"
                  ]
                },
                "escalation_rule_id": {
                  "type": "integer",
                  "description": "升级规则ID",
                  "example": 789
                },
                "resolution_notes": {
                  "type": "string",
                  "description": "解决备注",
                  "example": "已优化工单分配策略，响应时间恢复正常"
                }
              }
            }
          ]
        },
        "SlaAlertAcknowledgeRequest": {
          "type": "object",
          "description": "告警确认请求",
          "required": [
            "acknowledgment_notes"
          ],
          "properties": {
            "acknowledgment_notes": {
              "type": "string",
              "description": "确认备注",
              "example": "已确认告警，正在处理相关问题"
            },
            "estimated_resolution_time": {
              "type": "string",
              "format": "date-time",
              "description": "预估解决时间",
              "example": "2025-08-15T16:00:00Z"
            }
          }
        },
        "SlaAlertResolveRequest": {
          "type": "object",
          "description": "告警解决请求",
          "required": [
            "resolution_notes"
          ],
          "properties": {
            "resolution_notes": {
              "type": "string",
              "description": "解决备注",
              "example": "已优化工单分配策略，响应时间恢复正常"
            },
            "resolution_actions": {
              "type": "array",
              "description": "解决措施",
              "items": {
                "type": "string"
              },
              "example": [
                "调整工程师排班",
                "优化工单分配算法",
                "增加监控频率"
              ]
            }
          }
        },
        "SlaViolationRecord": {
          "type": "object",
          "description": "SLA违约记录",
          "properties": {
            "violation_id": {
              "type": "integer",
              "description": "违约记录ID",
              "example": 12345
            },
            "sla_id": {
              "type": "integer",
              "description": "SLA定义ID",
              "example": 67890
            },
            "sla_name": {
              "type": "string",
              "description": "SLA名称",
              "example": "工单响应时间SLA"
            },
            "violation_type": {
              "type": "string",
              "enum": [
                "threshold",
                "availability",
                "response_time",
                "resolution_time",
                "quality"
              ],
              "description": "违约类型",
              "example": "response_time"
            },
            "severity_level": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "critical"
              ],
              "description": "严重程度",
              "example": "high"
            },
            "violation_start_time": {
              "type": "string",
              "format": "date-time",
              "description": "违约开始时间",
              "example": "2025-08-15T14:30:00Z"
            },
            "violation_end_time": {
              "type": "string",
              "format": "date-time",
              "description": "违约结束时间",
              "example": "2025-08-15T16:30:00Z"
            },
            "duration_minutes": {
              "type": "integer",
              "description": "违约持续时间（分钟）",
              "example": 120
            },
            "actual_value": {
              "type": "number",
              "format": "decimal",
              "description": "实际值",
              "example": 35.2
            },
            "threshold_value": {
              "type": "number",
              "format": "decimal",
              "description": "阈值",
              "example": 30.0
            },
            "deviation_percentage": {
              "type": "number",
              "format": "decimal",
              "description": "偏差百分比",
              "example": 17.3
            },
            "business_impact": {
              "type": "string",
              "description": "业务影响描述",
              "example": "客户业务中断"
            },
            "financial_impact": {
              "type": "number",
              "format": "decimal",
              "description": "财务影响金额",
              "example": 5000.0
            },
            "penalty_amount": {
              "type": "number",
              "format": "decimal",
              "description": "违约金额",
              "example": 2500.0
            },
            "compensation_amount": {
              "type": "number",
              "format": "decimal",
              "description": "赔偿金额",
              "example": 1000.0
            },
            "status": {
              "type": "string",
              "enum": [
                "open",
                "investigating",
                "resolved",
                "closed",
                "cancelled"
              ],
              "description": "状态",
              "example": "open"
            },
            "assigned_to": {
              "type": "integer",
              "description": "负责人ID",
              "example": 456
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "SlaViolationDetailRecord": {
          "allOf": [
            {
              "$ref": "#/components/schemas/SlaViolationRecord"
            },
            {
              "type": "object",
              "properties": {
                "affected_incidents": {
                  "type": "array",
                  "description": "受影响的事件列表",
                  "items": {
                    "type": "object",
                    "properties": {
                      "incident_id": {
                        "type": "string",
                        "example": "INC-20250815-0001"
                      },
                      "incident_type": {
                        "type": "string",
                        "example": "工单处理"
                      },
                      "impact_level": {
                        "type": "string",
                        "example": "high"
                      }
                    }
                  }
                },
                "root_cause_analysis": {
                  "type": "string",
                  "description": "根因分析",
                  "example": "工程师资源不足，导致响应时间延长"
                },
                "resolution_actions": {
                  "type": "array",
                  "description": "解决措施",
                  "items": {
                    "type": "object",
                    "properties": {
                      "action": {
                        "type": "string",
                        "example": "增加工程师排班"
                      },
                      "responsible": {
                        "type": "string",
                        "example": "运维经理"
                      },
                      "deadline": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-08-20T18:00:00Z"
                      },
                      "status": {
                        "type": "string",
                        "example": "in_progress"
                      }
                    }
                  }
                },
                "prevention_measures": {
                  "type": "array",
                  "description": "预防措施",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "优化工单分配算法",
                    "增加监控频率",
                    "建立预警机制"
                  ]
                }
              }
            }
          ]
        },
        "SlaReportGenerateRequest": {
          "type": "object",
          "description": "SLA报告生成请求",
          "required": [
            "report_type",
            "period"
          ],
          "properties": {
            "report_type": {
              "type": "string",
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly",
                "custom"
              ],
              "description": "报告类型",
              "example": "monthly"
            },
            "period": {
              "type": "string",
              "description": "报告周期",
              "example": "2025-08"
            },
            "customer_id": {
              "type": "integer",
              "description": "客户ID",
              "example": 12345
            },
            "sla_ids": {
              "type": "array",
              "description": "SLA ID列表",
              "items": {
                "type": "integer"
              },
              "example": [
                67890,
                67891,
                67892
              ]
            },
            "include_sections": {
              "type": "array",
              "description": "包含的报告章节",
              "items": {
                "type": "string"
              },
              "example": [
                "executive_summary",
                "detailed_metrics",
                "trend_analysis",
                "violation_analysis",
                "improvement_recommendations"
              ]
            },
            "format": {
              "type": "string",
              "enum": [
                "pdf",
                "excel",
                "html"
              ],
              "description": "报告格式",
              "example": "pdf"
            },
            "language": {
              "type": "string",
              "enum": [
                "zh-CN",
                "en-US"
              ],
              "description": "报告语言",
              "example": "zh-CN"
            },
            "delivery_method": {
              "type": "string",
              "enum": [
                "download",
                "email",
                "api"
              ],
              "description": "交付方式",
              "example": "email"
            },
            "recipients": {
              "type": "array",
              "description": "收件人列表",
              "items": {
                "type": "string"
              },
              "example": [
                "customer@example.com",
                "manager@company.com"
              ]
            }
          }
        },
        "SlaReportInfo": {
          "type": "object",
          "description": "SLA报告信息",
          "properties": {
            "report_id": {
              "type": "string",
              "description": "报告ID",
              "example": "RPT-20250815-0001"
            },
            "report_name": {
              "type": "string",
              "description": "报告名称",
              "example": "ABC科技有限公司2025年8月SLA月度报告"
            },
            "report_type": {
              "type": "string",
              "enum": [
                "daily",
                "weekly",
                "monthly",
                "quarterly",
                "yearly",
                "custom"
              ],
              "description": "报告类型",
              "example": "monthly"
            },
            "customer_id": {
              "type": "integer",
              "description": "客户ID",
              "example": 12345
            },
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "example": "ABC科技有限公司"
            },
            "period": {
              "type": "string",
              "description": "报告周期",
              "example": "2025-08"
            },
            "format": {
              "type": "string",
              "enum": [
                "pdf",
                "excel",
                "html"
              ],
              "description": "报告格式",
              "example": "pdf"
            },
            "status": {
              "type": "string",
              "enum": [
                "generating",
                "completed",
                "failed",
                "cancelled"
              ],
              "description": "报告状态",
              "example": "completed"
            },
            "file_size": {
              "type": "integer",
              "description": "文件大小（字节）",
              "example": 2048576
            },
            "download_url": {
              "type": "string",
              "description": "下载链接",
              "example": "https://cdn.example.com/reports/RPT-20250815-0001.pdf"
            },
            "generated_at": {
              "type": "string",
              "format": "date-time",
              "description": "生成时间",
              "example": "2025-08-15T15:30:00Z"
            },
            "expires_at": {
              "type": "string",
              "format": "date-time",
              "description": "过期时间",
              "example": "2025-09-15T15:30:00Z"
            }
          }
        }
      },
      "issues": []
    },
    "REQ-001-基础架构模块": {
      "file_path": "docs/api/4.5.1/modules/REQ-001-基础架构模块/openapi.yaml",
      "components": {
        "ApiResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "响应状态码",
              "example": 200
            },
            "message": {
              "type": "string",
              "description": "响应消息",
              "example": "操作成功"
            },
            "data": {
              "type": "object",
              "description": "响应数据"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "响应时间",
              "example": "2024-08-14T15:30:00Z"
            }
          }
        },
        "PagedResponse": {
          "allOf": [
            {
              "$ref": "#/components/schemas/ApiResponse"
            },
            {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "type": "integer",
                      "description": "总记录数",
                      "example": 100
                    },
                    "page": {
                      "type": "integer",
                      "description": "当前页码",
                      "example": 1
                    },
                    "size": {
                      "type": "integer",
                      "description": "每页大小",
                      "example": 20
                    },
                    "items": {
                      "type": "array",
                      "description": "数据列表",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "ErrorResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "错误状态码",
              "example": 400
            },
            "message": {
              "type": "string",
              "description": "错误消息",
              "example": "请求参数错误"
            },
            "error": {
              "type": "string",
              "description": "错误详情",
              "example": "用户名不能为空"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "错误时间",
              "example": "2024-08-14T15:30:00Z"
            }
          }
        },
        "LoginRequest": {
          "type": "object",
          "required": [
            "tenant_code",
            "username",
            "password",
            "auth_type"
          ],
          "properties": {
            "tenant_code": {
              "type": "string",
              "description": "租户编码",
              "example": "DEMO-20250814-001"
            },
            "username": {
              "type": "string",
              "description": "用户名",
              "example": "admin"
            },
            "password": {
              "type": "string",
              "description": "密码",
              "example": "password123"
            },
            "auth_type": {
              "type": "string",
              "enum": [
                "password",
                "sms",
                "email",
                "sso"
              ],
              "description": "认证方式",
              "example": "password"
            },
            "remember_me": {
              "type": "boolean",
              "description": "是否记住登录状态",
              "example": true
            },
            "device_info": {
              "type": "object",
              "description": "设备信息",
              "properties": {
                "device_type": {
                  "type": "string",
                  "example": "web"
                },
                "browser": {
                  "type": "string",
                  "example": "Chrome 120.0"
                },
                "os": {
                  "type": "string",
                  "example": "Windows 11"
                }
              }
            }
          }
        },
        "LoginResponse": {
          "type": "object",
          "properties": {
            "access_token": {
              "type": "string",
              "description": "访问令牌",
              "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            },
            "refresh_token": {
              "type": "string",
              "description": "刷新令牌",
              "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            },
            "expires_in": {
              "type": "integer",
              "description": "令牌过期时间（秒）",
              "example": 7200
            },
            "session_id": {
              "type": "string",
              "description": "会话ID",
              "example": "sess_1234567890abcdef"
            },
            "user_info": {
              "$ref": "#/components/schemas/UserInfo"
            }
          }
        },
        "RefreshTokenRequest": {
          "type": "object",
          "required": [
            "refresh_token"
          ],
          "properties": {
            "refresh_token": {
              "type": "string",
              "description": "刷新令牌",
              "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            }
          }
        },
        "TokenResponse": {
          "type": "object",
          "properties": {
            "access_token": {
              "type": "string",
              "description": "新的访问令牌",
              "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            },
            "expires_in": {
              "type": "integer",
              "description": "令牌过期时间（秒）",
              "example": 7200
            }
          }
        },
        "PermissionCheckRequest": {
          "type": "object",
          "required": [
            "resource_type",
            "resource_path",
            "action"
          ],
          "properties": {
            "resource_type": {
              "type": "string",
              "enum": [
                "api",
                "menu",
                "button",
                "data"
              ],
              "description": "资源类型",
              "example": "api"
            },
            "resource_path": {
              "type": "string",
              "description": "资源路径",
              "example": "/api/v1/users"
            },
            "action": {
              "type": "string",
              "enum": [
                "read",
                "write",
                "delete",
                "execute"
              ],
              "description": "操作动作",
              "example": "read"
            }
          }
        },
        "PermissionCheckResponse": {
          "type": "object",
          "properties": {
            "granted": {
              "type": "boolean",
              "description": "是否授权",
              "example": true
            },
            "permission_code": {
              "type": "string",
              "description": "权限编码",
              "example": "user:read"
            },
            "granted_by_roles": {
              "type": "array",
              "description": "授权角色列表",
              "items": {
                "type": "string"
              },
              "example": [
                "admin",
                "user_manager"
              ]
            }
          }
        },
        "SessionListResponse": {
          "type": "object",
          "properties": {
            "current_session": {
              "type": "string",
              "description": "当前会话ID",
              "example": "sess_1234567890abcdef"
            },
            "sessions": {
              "type": "array",
              "description": "会话列表",
              "items": {
                "$ref": "#/components/schemas/SessionInfo"
              }
            }
          }
        },
        "SessionInfo": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string",
              "description": "会话ID",
              "example": "sess_1234567890abcdef"
            },
            "device_type": {
              "type": "string",
              "enum": [
                "web",
                "mobile",
                "api"
              ],
              "description": "设备类型",
              "example": "web"
            },
            "ip_address": {
              "type": "string",
              "description": "IP地址",
              "example": "192.168.1.100"
            },
            "location": {
              "type": "string",
              "description": "登录地点",
              "example": "北京市"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-14T10:00:00Z"
            },
            "last_accessed_at": {
              "type": "string",
              "format": "date-time",
              "description": "最后访问时间",
              "example": "2024-08-14T14:30:00Z"
            },
            "status": {
              "type": "string",
              "enum": [
                "active",
                "expired",
                "logout",
                "abnormal"
              ],
              "description": "会话状态",
              "example": "active"
            }
          }
        },
        "UserInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 1001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "username": {
              "type": "string",
              "description": "用户名",
              "example": "admin"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "example": "admin@demo.com"
            },
            "phone": {
              "type": "string",
              "description": "手机号",
              "example": "13800138000"
            },
            "real_name": {
              "type": "string",
              "description": "真实姓名",
              "example": "系统管理员"
            },
            "avatar_url": {
              "type": "string",
              "format": "uri",
              "description": "头像URL",
              "example": "https://cdn.example.com/avatars/admin.png"
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "状态：1-正常，2-停用，3-锁定",
              "example": 1
            },
            "last_login_time": {
              "type": "string",
              "format": "date-time",
              "description": "最后登录时间",
              "example": "2024-08-14T14:30:00Z"
            },
            "last_login_ip": {
              "type": "string",
              "description": "最后登录IP",
              "example": "192.168.1.100"
            },
            "login_count": {
              "type": "integer",
              "description": "登录次数",
              "example": 156
            },
            "mfa_enabled": {
              "type": "boolean",
              "description": "是否启用多因子认证",
              "example": true
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-14T10:00:00Z"
            }
          }
        },
        "UserDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/UserInfo"
            },
            {
              "type": "object",
              "properties": {
                "roles": {
                  "type": "array",
                  "description": "用户角色列表",
                  "items": {
                    "$ref": "#/components/schemas/RoleInfo"
                  }
                },
                "permissions": {
                  "type": "array",
                  "description": "用户权限列表",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "user:read",
                    "user:write",
                    "system:config"
                  ]
                }
              }
            }
          ]
        },
        "CreateUserRequest": {
          "type": "object",
          "required": [
            "username",
            "email",
            "real_name",
            "password"
          ],
          "properties": {
            "username": {
              "type": "string",
              "description": "用户名",
              "example": "john_doe"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "example": "john@demo.com"
            },
            "phone": {
              "type": "string",
              "description": "手机号",
              "example": "13800138000"
            },
            "real_name": {
              "type": "string",
              "description": "真实姓名",
              "example": "约翰·多伊"
            },
            "password": {
              "type": "string",
              "description": "初始密码",
              "example": "TempPassword123!"
            },
            "role_ids": {
              "type": "array",
              "description": "角色ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                2,
                3
              ]
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2
              ],
              "description": "初始状态",
              "example": 1
            }
          }
        },
        "UpdateUserRequest": {
          "type": "object",
          "properties": {
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱",
              "example": "john.updated@demo.com"
            },
            "phone": {
              "type": "string",
              "description": "手机号",
              "example": "13800138001"
            },
            "real_name": {
              "type": "string",
              "description": "真实姓名",
              "example": "约翰·多伊（更新）"
            },
            "avatar_url": {
              "type": "string",
              "format": "uri",
              "description": "头像URL",
              "example": "https://cdn.example.com/avatars/john_updated.png"
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "用户状态",
              "example": 1
            }
          }
        },
        "BatchImportResult": {
          "type": "object",
          "properties": {
            "total": {
              "type": "integer",
              "description": "总记录数",
              "example": 100
            },
            "success": {
              "type": "integer",
              "description": "成功导入数",
              "example": 95
            },
            "failed": {
              "type": "integer",
              "description": "失败记录数",
              "example": 5
            },
            "failed_records": {
              "type": "array",
              "description": "失败记录详情",
              "items": {
                "type": "object",
                "properties": {
                  "row": {
                    "type": "integer",
                    "description": "行号",
                    "example": 10
                  },
                  "username": {
                    "type": "string",
                    "description": "用户名",
                    "example": "duplicate_user"
                  },
                  "error": {
                    "type": "string",
                    "description": "错误信息",
                    "example": "用户名已存在"
                  }
                }
              }
            }
          }
        },
        "RoleInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "角色ID",
              "example": 10
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "role_code": {
              "type": "string",
              "description": "角色编码",
              "example": "admin"
            },
            "role_name": {
              "type": "string",
              "description": "角色名称",
              "example": "系统管理员"
            },
            "description": {
              "type": "string",
              "description": "角色描述",
              "example": "拥有系统所有权限的管理员角色"
            },
            "is_system": {
              "type": "boolean",
              "description": "是否系统角色",
              "example": true
            },
            "parent_role_id": {
              "type": "integer",
              "format": "int64",
              "nullable": true,
              "description": "父角色ID",
              "example": null
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2
              ],
              "description": "状态：1-正常，2-停用",
              "example": 1
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-14T10:00:00Z"
            }
          }
        },
        "CreateRoleRequest": {
          "type": "object",
          "required": [
            "role_code",
            "role_name"
          ],
          "properties": {
            "role_code": {
              "type": "string",
              "description": "角色编码",
              "example": "project_manager"
            },
            "role_name": {
              "type": "string",
              "description": "角色名称",
              "example": "项目经理"
            },
            "description": {
              "type": "string",
              "description": "角色描述",
              "example": "负责项目管理和团队协调"
            },
            "parent_role_id": {
              "type": "integer",
              "format": "int64",
              "nullable": true,
              "description": "父角色ID",
              "example": null
            },
            "permission_ids": {
              "type": "array",
              "description": "权限ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                1,
                2,
                5,
                8
              ]
            }
          }
        },
        "RolePermissionsResponse": {
          "type": "object",
          "properties": {
            "role_info": {
              "$ref": "#/components/schemas/RoleInfo"
            },
            "permissions": {
              "type": "array",
              "description": "直接分配的权限",
              "items": {
                "$ref": "#/components/schemas/PermissionInfo"
              }
            },
            "inherited_permissions": {
              "type": "array",
              "description": "继承的权限",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/PermissionInfo"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "inherited_from": {
                        "type": "string",
                        "description": "继承来源",
                        "example": "基础用户角色"
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "AssignPermissionsRequest": {
          "type": "object",
          "required": [
            "permission_ids",
            "action"
          ],
          "properties": {
            "permission_ids": {
              "type": "array",
              "description": "权限ID列表",
              "items": {
                "type": "integer",
                "format": "int64"
              },
              "example": [
                10,
                11,
                12
              ]
            },
            "action": {
              "type": "string",
              "enum": [
                "grant",
                "revoke"
              ],
              "description": "操作类型：grant-授权，revoke-撤销",
              "example": "grant"
            }
          }
        },
        "PermissionAssignResult": {
          "type": "object",
          "properties": {
            "granted_permissions": {
              "type": "integer",
              "description": "已授权权限数",
              "example": 3
            },
            "total_permissions": {
              "type": "integer",
              "description": "总权限数",
              "example": 15
            }
          }
        },
        "PermissionInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "权限ID",
              "example": 1
            },
            "permission_code": {
              "type": "string",
              "description": "权限编码",
              "example": "user:read"
            },
            "permission_name": {
              "type": "string",
              "description": "权限名称",
              "example": "查看用户"
            },
            "resource_type": {
              "type": "string",
              "enum": [
                "api",
                "menu",
                "button",
                "data"
              ],
              "description": "资源类型",
              "example": "api"
            },
            "resource_path": {
              "type": "string",
              "description": "资源路径",
              "example": "/api/v1/users"
            },
            "action": {
              "type": "string",
              "enum": [
                "read",
                "write",
                "delete",
                "execute"
              ],
              "description": "操作动作",
              "example": "read"
            },
            "description": {
              "type": "string",
              "description": "权限描述",
              "example": "允许查看用户列表和详情"
            },
            "is_system": {
              "type": "boolean",
              "description": "是否系统权限",
              "example": true
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-14T10:00:00Z"
            }
          }
        },
        "TenantInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "tenant_code": {
              "type": "string",
              "description": "租户编码",
              "example": "DEMO-20250814-001"
            },
            "tenant_name": {
              "type": "string",
              "description": "租户名称",
              "example": "演示科技有限公司"
            },
            "domain": {
              "type": "string",
              "description": "租户域名",
              "example": "demo.example.com"
            },
            "status": {
              "type": "integer",
              "enum": [
                1,
                2,
                3
              ],
              "description": "状态：1-正常，2-停用，3-过期",
              "example": 1
            },
            "max_users": {
              "type": "integer",
              "description": "最大用户数",
              "example": 500
            },
            "max_storage_gb": {
              "type": "integer",
              "description": "最大存储空间(GB)",
              "example": 100
            },
            "expire_time": {
              "type": "string",
              "format": "date-time",
              "description": "过期时间",
              "example": "2025-12-31T23:59:59Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-14T10:00:00Z"
            }
          }
        },
        "CreateTenantRequest": {
          "type": "object",
          "required": [
            "tenant_code",
            "tenant_name",
            "max_users"
          ],
          "properties": {
            "tenant_code": {
              "type": "string",
              "description": "租户编码",
              "example": "NEWCO-20250814-001"
            },
            "tenant_name": {
              "type": "string",
              "description": "租户名称",
              "example": "新公司有限公司"
            },
            "domain": {
              "type": "string",
              "description": "租户域名",
              "example": "newco.example.com"
            },
            "max_users": {
              "type": "integer",
              "description": "最大用户数",
              "example": 200
            },
            "max_storage_gb": {
              "type": "integer",
              "description": "最大存储空间(GB)",
              "example": 50
            },
            "expire_time": {
              "type": "string",
              "format": "date-time",
              "description": "过期时间",
              "example": "2025-12-31T23:59:59Z"
            }
          }
        },
        "ConfigInfo": {
          "type": "object",
          "properties": {
            "config_key": {
              "type": "string",
              "description": "配置键",
              "example": "security.password_policy.min_length"
            },
            "config_value": {
              "type": "string",
              "description": "配置值",
              "example": "8"
            },
            "config_type": {
              "type": "string",
              "enum": [
                "string",
                "number",
                "boolean",
                "json"
              ],
              "description": "配置类型",
              "example": "number"
            },
            "category": {
              "type": "string",
              "description": "配置分类",
              "example": "security"
            },
            "description": {
              "type": "string",
              "description": "配置描述",
              "example": "密码最小长度"
            },
            "is_public": {
              "type": "boolean",
              "description": "是否公开配置",
              "example": false
            }
          }
        },
        "UpdateConfigRequest": {
          "type": "object",
          "required": [
            "config_value"
          ],
          "properties": {
            "config_value": {
              "type": "string",
              "description": "配置值",
              "example": "12"
            },
            "description": {
              "type": "string",
              "description": "更新说明",
              "example": "更新密码最小长度要求"
            }
          }
        },
        "AuditLogInfo": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "日志ID",
              "example": 12345
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 1001
            },
            "username": {
              "type": "string",
              "description": "用户名",
              "example": "admin"
            },
            "action": {
              "type": "string",
              "description": "操作动作",
              "example": "user:create"
            },
            "resource_type": {
              "type": "string",
              "description": "资源类型",
              "example": "user"
            },
            "resource_id": {
              "type": "string",
              "description": "资源ID",
              "example": "1002"
            },
            "resource_name": {
              "type": "string",
              "description": "资源名称",
              "example": "john_doe"
            },
            "result": {
              "type": "integer",
              "enum": [
                0,
                1
              ],
              "description": "操作结果：1-成功，0-失败",
              "example": 1
            },
            "ip_address": {
              "type": "string",
              "description": "IP地址",
              "example": "192.168.1.100"
            },
            "duration_ms": {
              "type": "integer",
              "description": "操作耗时(毫秒)",
              "example": 150
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-14T15:00:00Z"
            }
          }
        },
        "InternalAuthVerifyRequest": {
          "type": "object",
          "required": [
            "user_id",
            "tenant_id",
            "resource_type",
            "resource_path",
            "action"
          ],
          "properties": {
            "user_id": {
              "type": "integer",
              "format": "int64",
              "description": "用户ID",
              "example": 1001
            },
            "tenant_id": {
              "type": "integer",
              "format": "int64",
              "description": "租户ID",
              "example": 1
            },
            "resource_type": {
              "type": "string",
              "enum": [
                "api",
                "menu",
                "button",
                "data"
              ],
              "description": "资源类型",
              "example": "api"
            },
            "resource_path": {
              "type": "string",
              "description": "资源路径",
              "example": "/api/v1/tickets"
            },
            "action": {
              "type": "string",
              "enum": [
                "read",
                "write",
                "delete",
                "execute"
              ],
              "description": "操作动作",
              "example": "create"
            }
          }
        },
        "InternalAuthVerifyResponse": {
          "type": "object",
          "properties": {
            "granted": {
              "type": "boolean",
              "description": "是否授权",
              "example": true
            },
            "user_info": {
              "type": "object",
              "description": "用户信息",
              "properties": {
                "id": {
                  "type": "integer",
                  "format": "int64",
                  "example": 1001
                },
                "username": {
                  "type": "string",
                  "example": "admin"
                },
                "tenant_id": {
                  "type": "integer",
                  "format": "int64",
                  "example": 1
                }
              }
            }
          }
        },
        "HealthCheckResponse": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "enum": [
                "healthy",
                "unhealthy",
                "degraded"
              ],
              "description": "系统状态",
              "example": "healthy"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "检查时间",
              "example": "2024-08-14T15:30:00Z"
            },
            "version": {
              "type": "string",
              "description": "系统版本",
              "example": "1.0.0"
            },
            "components": {
              "type": "object",
              "description": "组件状态",
              "properties": {
                "database": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "healthy"
                    },
                    "response_time_ms": {
                      "type": "integer",
                      "example": 15
                    }
                  }
                },
                "redis": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "healthy"
                    },
                    "response_time_ms": {
                      "type": "integer",
                      "example": 5
                    }
                  }
                },
                "elasticsearch": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "healthy"
                    },
                    "response_time_ms": {
                      "type": "integer",
                      "example": 25
                    }
                  }
                }
              }
            }
          }
        }
      },
      "issues": []
    },
    "REQ-018-财务管理模块": {
      "file_path": "docs/api/4.5.1/modules/REQ-018-财务管理模块/openapi.yaml",
      "components": {
        "BillingInvoice": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "description": "租户ID",
                  "example": 1001
                },
                "invoice_no": {
                  "type": "string",
                  "description": "账单编号",
                  "example": "INV-20240815-0001"
                },
                "customer_id": {
                  "type": "integer",
                  "description": "客户ID",
                  "example": 5001
                },
                "customer_name": {
                  "type": "string",
                  "description": "客户名称",
                  "example": "ABC科技有限公司"
                },
                "contract_id": {
                  "type": "integer",
                  "description": "合同ID",
                  "example": 12345
                },
                "billing_period_start": {
                  "type": "string",
                  "format": "date",
                  "description": "计费周期开始时间",
                  "example": "2024-08-01"
                },
                "billing_period_end": {
                  "type": "string",
                  "format": "date",
                  "description": "计费周期结束时间",
                  "example": "2024-08-31"
                },
                "base_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "基础费用",
                  "example": 10000.0
                },
                "usage_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "用量费用",
                  "example": 2000.0
                },
                "penalty_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "违约扣费",
                  "example": 0.0
                },
                "discount_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "折扣金额",
                  "example": 500.0
                },
                "tax_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "税费",
                  "example": 630.0
                },
                "total_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "总金额",
                  "example": 12130.0
                },
                "currency": {
                  "type": "string",
                  "description": "币种",
                  "example": "CNY"
                },
                "tax_rate": {
                  "type": "number",
                  "format": "decimal",
                  "description": "税率",
                  "example": 0.06
                },
                "exchange_rate": {
                  "type": "number",
                  "format": "decimal",
                  "description": "汇率",
                  "example": 1.0
                },
                "status": {
                  "type": "integer",
                  "description": "账单状态 1:待付款 2:已付款 3:已逾期 4:已取消 5:部分付款",
                  "enum": [
                    1,
                    2,
                    3,
                    4,
                    5
                  ],
                  "example": 1
                },
                "due_date": {
                  "type": "string",
                  "format": "date",
                  "description": "到期日期",
                  "example": "2024-09-14"
                },
                "paid_date": {
                  "type": "string",
                  "format": "date-time",
                  "description": "支付日期",
                  "example": "2024-09-10T15:30:00Z"
                },
                "overdue_days": {
                  "type": "integer",
                  "description": "逾期天数",
                  "example": 0
                },
                "risk_level": {
                  "type": "string",
                  "description": "风险等级",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ],
                  "example": "low"
                },
                "risk_score": {
                  "type": "number",
                  "format": "decimal",
                  "description": "风险评分",
                  "example": 15.5
                },
                "revenue_recognition_method": {
                  "type": "integer",
                  "description": "收入确认方式 1:一次性 2:分期确认",
                  "enum": [
                    1,
                    2
                  ],
                  "example": 1
                },
                "recognition_start_date": {
                  "type": "string",
                  "format": "date",
                  "description": "确认开始日期",
                  "example": "2024-08-01"
                },
                "recognition_end_date": {
                  "type": "string",
                  "format": "date",
                  "description": "确认结束日期",
                  "example": "2024-08-31"
                },
                "recognized_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "已确认金额",
                  "example": 12130.0
                },
                "created_by": {
                  "type": "integer",
                  "description": "创建人ID",
                  "example": 1001
                },
                "updated_by": {
                  "type": "integer",
                  "description": "更新人ID",
                  "example": 1001
                },
                "version": {
                  "type": "integer",
                  "description": "版本号",
                  "example": 1
                }
              }
            }
          ]
        },
        "InvoiceListItem": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "description": "账单ID",
              "example": 67890
            },
            "invoice_no": {
              "type": "string",
              "description": "账单编号",
              "example": "INV-20240815-0001"
            },
            "customer_id": {
              "type": "integer",
              "description": "客户ID",
              "example": 5001
            },
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "example": "ABC科技有限公司"
            },
            "billing_period_start": {
              "type": "string",
              "format": "date",
              "description": "计费周期开始时间",
              "example": "2024-08-01"
            },
            "billing_period_end": {
              "type": "string",
              "format": "date",
              "description": "计费周期结束时间",
              "example": "2024-08-31"
            },
            "total_amount": {
              "type": "number",
              "format": "decimal",
              "description": "总金额",
              "example": 12130.0
            },
            "currency": {
              "type": "string",
              "description": "币种",
              "example": "CNY"
            },
            "status": {
              "type": "integer",
              "description": "账单状态",
              "enum": [
                1,
                2,
                3,
                4,
                5
              ],
              "example": 1
            },
            "due_date": {
              "type": "string",
              "format": "date",
              "description": "到期日期",
              "example": "2024-09-14"
            },
            "overdue_days": {
              "type": "integer",
              "description": "逾期天数",
              "example": 0
            },
            "risk_level": {
              "type": "string",
              "description": "风险等级",
              "enum": [
                "low",
                "medium",
                "high"
              ],
              "example": "low"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-15T10:30:00Z"
            }
          }
        },
        "InvoiceGenerateRequest": {
          "type": "object",
          "required": [
            "customer_id",
            "contract_id",
            "billing_period_start",
            "billing_period_end"
          ],
          "properties": {
            "customer_id": {
              "type": "integer",
              "description": "客户ID",
              "example": 5001
            },
            "contract_id": {
              "type": "integer",
              "description": "合同ID",
              "example": 12345
            },
            "billing_period_start": {
              "type": "string",
              "format": "date",
              "description": "计费周期开始时间",
              "example": "2024-08-01"
            },
            "billing_period_end": {
              "type": "string",
              "format": "date",
              "description": "计费周期结束时间",
              "example": "2024-08-31"
            },
            "billing_items": {
              "type": "array",
              "description": "计费项目列表",
              "items": {
                "$ref": "#/components/schemas/BillingItem"
              }
            },
            "tax_rate": {
              "type": "number",
              "format": "decimal",
              "description": "税率",
              "example": 0.06
            },
            "discount_amount": {
              "type": "number",
              "format": "decimal",
              "description": "折扣金额",
              "example": 500.0
            },
            "force_regenerate": {
              "type": "boolean",
              "description": "是否强制重新生成",
              "default": false,
              "example": false
            },
            "auto_send": {
              "type": "boolean",
              "description": "是否自动发送",
              "default": true,
              "example": true
            }
          }
        },
        "InvoiceCreateRequest": {
          "type": "object",
          "required": [
            "customer_id",
            "billing_period_start",
            "billing_period_end",
            "total_amount"
          ],
          "properties": {
            "customer_id": {
              "type": "integer",
              "description": "客户ID",
              "example": 5001
            },
            "contract_id": {
              "type": "integer",
              "description": "合同ID",
              "example": 12345
            },
            "billing_period_start": {
              "type": "string",
              "format": "date",
              "description": "计费周期开始时间",
              "example": "2024-08-01"
            },
            "billing_period_end": {
              "type": "string",
              "format": "date",
              "description": "计费周期结束时间",
              "example": "2024-08-31"
            },
            "base_amount": {
              "type": "number",
              "format": "decimal",
              "description": "基础费用",
              "example": 10000.0
            },
            "usage_amount": {
              "type": "number",
              "format": "decimal",
              "description": "用量费用",
              "example": 2000.0
            },
            "penalty_amount": {
              "type": "number",
              "format": "decimal",
              "description": "违约扣费",
              "example": 0.0
            },
            "discount_amount": {
              "type": "number",
              "format": "decimal",
              "description": "折扣金额",
              "example": 500.0
            },
            "tax_amount": {
              "type": "number",
              "format": "decimal",
              "description": "税费",
              "example": 630.0
            },
            "total_amount": {
              "type": "number",
              "format": "decimal",
              "description": "总金额",
              "example": 12130.0
            },
            "currency": {
              "type": "string",
              "description": "币种",
              "default": "CNY",
              "example": "CNY"
            },
            "due_date": {
              "type": "string",
              "format": "date",
              "description": "到期日期",
              "example": "2024-09-14"
            },
            "revenue_recognition_method": {
              "type": "integer",
              "description": "收入确认方式",
              "enum": [
                1,
                2
              ],
              "default": 1,
              "example": 1
            }
          }
        },
        "InvoiceUpdateRequest": {
          "type": "object",
          "properties": {
            "discount_amount": {
              "type": "number",
              "format": "decimal",
              "description": "折扣金额",
              "example": 600.0
            },
            "due_date": {
              "type": "string",
              "format": "date",
              "description": "到期日期",
              "example": "2024-09-20"
            },
            "status": {
              "type": "integer",
              "description": "账单状态",
              "enum": [
                1,
                2,
                3,
                4,
                5
              ],
              "example": 1
            },
            "notes": {
              "type": "string",
              "description": "备注信息",
              "example": "客户申请延期付款"
            }
          }
        },
        "BillingItem": {
          "type": "object",
          "required": [
            "item_type",
            "description",
            "amount"
          ],
          "properties": {
            "item_type": {
              "type": "string",
              "description": "项目类型",
              "enum": [
                "base_fee",
                "usage_fee",
                "penalty_fee",
                "discount",
                "tax"
              ],
              "example": "base_fee"
            },
            "description": {
              "type": "string",
              "description": "项目描述",
              "example": "基础服务费"
            },
            "amount": {
              "type": "number",
              "format": "decimal",
              "description": "金额",
              "example": 10000.0
            },
            "quantity": {
              "type": "integer",
              "description": "数量",
              "example": 1
            },
            "unit_price": {
              "type": "number",
              "format": "decimal",
              "description": "单价",
              "example": 10000.0
            },
            "unit": {
              "type": "string",
              "description": "单位",
              "example": "月"
            }
          }
        },
        "PaymentRecord": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "description": "租户ID",
                  "example": 1001
                },
                "payment_no": {
                  "type": "string",
                  "description": "支付编号",
                  "example": "PAY-20240815-0001"
                },
                "invoice_id": {
                  "type": "integer",
                  "description": "账单ID",
                  "example": 67890
                },
                "payment_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "支付金额",
                  "example": 12130.0
                },
                "payment_currency": {
                  "type": "string",
                  "description": "支付币种",
                  "example": "CNY"
                },
                "exchange_rate": {
                  "type": "number",
                  "format": "decimal",
                  "description": "汇率",
                  "example": 1.0
                },
                "actual_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "实际到账金额",
                  "example": 12130.0
                },
                "payment_channel": {
                  "type": "string",
                  "description": "支付渠道",
                  "enum": [
                    "alipay",
                    "wechat",
                    "bank_transfer",
                    "credit_card"
                  ],
                  "example": "alipay"
                },
                "payment_method": {
                  "type": "string",
                  "description": "支付方式",
                  "example": "scan_code"
                },
                "channel_transaction_id": {
                  "type": "string",
                  "description": "渠道交易号",
                  "example": "2024081522001234567890"
                },
                "channel_fee": {
                  "type": "number",
                  "format": "decimal",
                  "description": "渠道手续费",
                  "example": 12.13
                },
                "payment_status": {
                  "type": "integer",
                  "description": "支付状态 1:待支付 2:支付中 3:支付成功 4:支付失败 5:已退款",
                  "enum": [
                    1,
                    2,
                    3,
                    4,
                    5
                  ],
                  "example": 3
                },
                "payment_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "支付时间",
                  "example": "2024-08-15T15:30:00Z"
                },
                "callback_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "回调时间",
                  "example": "2024-08-15T15:30:05Z"
                },
                "settlement_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "结算时间",
                  "example": "2024-08-16T09:00:00Z"
                },
                "reconciliation_status": {
                  "type": "integer",
                  "description": "对账状态 1:未对账 2:已对账 3:差异 4:已调整",
                  "enum": [
                    1,
                    2,
                    3,
                    4
                  ],
                  "example": 2
                },
                "reconciliation_time": {
                  "type": "string",
                  "format": "date-time",
                  "description": "对账时间",
                  "example": "2024-08-16T10:00:00Z"
                },
                "reconciliation_difference": {
                  "type": "number",
                  "format": "decimal",
                  "description": "对账差异金额",
                  "example": 0.0
                },
                "risk_check_status": {
                  "type": "integer",
                  "description": "风险检查状态 1:未检查 2:通过 3:风险 4:拒绝",
                  "enum": [
                    1,
                    2,
                    3,
                    4
                  ],
                  "example": 2
                },
                "risk_check_result": {
                  "type": "string",
                  "description": "风险检查结果",
                  "example": "正常交易"
                },
                "fraud_score": {
                  "type": "number",
                  "format": "decimal",
                  "description": "欺诈评分",
                  "example": 5.2
                }
              }
            }
          ]
        },
        "PaymentProcessRequest": {
          "type": "object",
          "required": [
            "invoice_id",
            "payment_amount",
            "payment_channel"
          ],
          "properties": {
            "invoice_id": {
              "type": "integer",
              "description": "账单ID",
              "example": 67890
            },
            "payment_amount": {
              "type": "number",
              "format": "decimal",
              "description": "支付金额",
              "example": 12130.0
            },
            "payment_channel": {
              "type": "string",
              "description": "支付渠道",
              "enum": [
                "alipay",
                "wechat",
                "bank_transfer",
                "credit_card"
              ],
              "example": "alipay"
            },
            "payment_method": {
              "type": "string",
              "description": "支付方式",
              "example": "scan_code"
            },
            "return_url": {
              "type": "string",
              "format": "uri",
              "description": "支付成功返回URL",
              "example": "https://portal.example.com/payment/return"
            },
            "notify_url": {
              "type": "string",
              "format": "uri",
              "description": "支付回调通知URL",
              "example": "https://portal.example.com/api/v1/finance/payments/notify"
            },
            "client_ip": {
              "type": "string",
              "description": "客户端IP地址",
              "example": "192.168.1.100"
            },
            "device_info": {
              "type": "string",
              "description": "设备信息",
              "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
            }
          }
        },
        "PaymentProcessResponse": {
          "type": "object",
          "properties": {
            "payment_id": {
              "type": "integer",
              "description": "支付记录ID",
              "example": 123456
            },
            "payment_no": {
              "type": "string",
              "description": "支付编号",
              "example": "PAY-20240815-0001"
            },
            "payment_url": {
              "type": "string",
              "format": "uri",
              "description": "支付链接",
              "example": "https://qr.alipay.com/bax08431qjhxf23ad5dc"
            },
            "qr_code": {
              "type": "string",
              "description": "二维码数据",
              "example": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
            },
            "expire_time": {
              "type": "string",
              "format": "date-time",
              "description": "过期时间",
              "example": "2024-08-15T16:00:00Z"
            },
            "payment_status": {
              "type": "integer",
              "description": "支付状态",
              "enum": [
                1,
                2,
                3,
                4,
                5
              ],
              "example": 1
            },
            "channel_transaction_id": {
              "type": "string",
              "description": "渠道交易号",
              "example": "2024081522001234567890"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-15T15:25:00Z"
            }
          }
        },
        "ContractExtension": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "tenant_id": {
                  "type": "integer",
                  "description": "租户ID",
                  "example": 1001
                },
                "contract_id": {
                  "type": "integer",
                  "description": "合同ID",
                  "example": 12345
                },
                "extension_request_id": {
                  "type": "string",
                  "description": "展期申请编号",
                  "example": "EXT-20240815-0001"
                },
                "extension_start_date": {
                  "type": "string",
                  "format": "date",
                  "description": "展期开始日期",
                  "example": "2024-09-01"
                },
                "extension_end_date": {
                  "type": "string",
                  "format": "date",
                  "description": "展期结束日期",
                  "example": "2024-09-30"
                },
                "extension_days": {
                  "type": "integer",
                  "description": "展期天数",
                  "example": 30
                },
                "billing_type": {
                  "type": "integer",
                  "description": "计费方式 1:免费 2:按日 3:按月 4:固定金额",
                  "enum": [
                    1,
                    2,
                    3,
                    4
                  ],
                  "example": 2
                },
                "daily_rate": {
                  "type": "number",
                  "format": "decimal",
                  "description": "日费率",
                  "example": 33.33
                },
                "monthly_rate": {
                  "type": "number",
                  "format": "decimal",
                  "description": "月费率",
                  "example": 1000.0
                },
                "fixed_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "固定金额",
                  "example": 1000.0
                },
                "total_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "总金额",
                  "example": 1000.0
                },
                "currency": {
                  "type": "string",
                  "description": "币种",
                  "example": "CNY"
                },
                "approval_status": {
                  "type": "integer",
                  "description": "审批状态 1:待审批 2:已批准 3:已拒绝 4:已撤销",
                  "enum": [
                    1,
                    2,
                    3,
                    4
                  ],
                  "example": 2
                },
                "approval_workflow_id": {
                  "type": "integer",
                  "description": "审批工作流ID",
                  "example": 789
                },
                "approved_by": {
                  "type": "integer",
                  "description": "审批人ID",
                  "example": 1002
                },
                "approved_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "审批时间",
                  "example": "2024-08-15T12:00:00Z"
                },
                "rejection_reason": {
                  "type": "string",
                  "description": "拒绝原因",
                  "example": "展期时间过长，需要重新评估"
                },
                "execution_status": {
                  "type": "integer",
                  "description": "执行状态 1:未生效 2:生效中 3:已结束 4:已取消",
                  "enum": [
                    1,
                    2,
                    3,
                    4
                  ],
                  "example": 2
                },
                "actual_start_date": {
                  "type": "string",
                  "format": "date",
                  "description": "实际开始日期",
                  "example": "2024-09-01"
                },
                "actual_end_date": {
                  "type": "string",
                  "format": "date",
                  "description": "实际结束日期",
                  "example": "2024-09-30"
                },
                "original_contract_end_date": {
                  "type": "string",
                  "format": "date",
                  "description": "原合同结束日期",
                  "example": "2024-08-31"
                },
                "new_contract_id": {
                  "type": "integer",
                  "description": "新合同ID",
                  "example": 12346
                },
                "auto_renewal_enabled": {
                  "type": "boolean",
                  "description": "是否启用自动续约",
                  "example": false
                },
                "created_by": {
                  "type": "integer",
                  "description": "创建人ID",
                  "example": 1001
                },
                "updated_by": {
                  "type": "integer",
                  "description": "更新人ID",
                  "example": 1002
                }
              }
            }
          ]
        },
        "ExtensionApplyRequest": {
          "type": "object",
          "required": [
            "extension_days",
            "billing_type"
          ],
          "properties": {
            "extension_days": {
              "type": "integer",
              "description": "展期天数",
              "minimum": 1,
              "maximum": 365,
              "example": 30
            },
            "billing_type": {
              "type": "integer",
              "description": "计费方式",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 2
            },
            "daily_rate": {
              "type": "number",
              "format": "decimal",
              "description": "日费率（按日计费时必填）",
              "example": 33.33
            },
            "monthly_rate": {
              "type": "number",
              "format": "decimal",
              "description": "月费率（按月计费时必填）",
              "example": 1000.0
            },
            "fixed_amount": {
              "type": "number",
              "format": "decimal",
              "description": "固定金额（固定金额计费时必填）",
              "example": 1000.0
            },
            "reason": {
              "type": "string",
              "description": "申请原因",
              "example": "新合同审批中，申请临时展期避免服务中断"
            },
            "auto_approve": {
              "type": "boolean",
              "description": "是否自动审批",
              "default": false,
              "example": false
            },
            "notification_enabled": {
              "type": "boolean",
              "description": "是否启用通知",
              "default": true,
              "example": true
            },
            "business_justification": {
              "type": "string",
              "description": "业务理由",
              "example": "客户续约意向明确，新合同预计15天内完成签署"
            }
          }
        },
        "ExtensionApprovalRequest": {
          "type": "object",
          "required": [
            "approval_decision"
          ],
          "properties": {
            "approval_decision": {
              "type": "string",
              "description": "审批决定",
              "enum": [
                "approve",
                "reject"
              ],
              "example": "approve"
            },
            "approval_comments": {
              "type": "string",
              "description": "审批意见",
              "example": "同意展期申请，客户信誉良好"
            },
            "adjusted_amount": {
              "type": "number",
              "format": "decimal",
              "description": "调整后金额",
              "example": 800.0
            },
            "conditions": {
              "type": "string",
              "description": "审批条件",
              "example": "展期期间需要提供额外担保"
            }
          }
        },
        "RevenueAnalysisResponse": {
          "type": "object",
          "properties": {
            "summary": {
              "type": "object",
              "description": "汇总信息",
              "properties": {
                "total_revenue": {
                  "type": "number",
                  "format": "decimal",
                  "description": "总收入",
                  "example": 1250000.0
                },
                "total_invoices": {
                  "type": "integer",
                  "description": "总账单数",
                  "example": 156
                },
                "average_invoice_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "平均账单金额",
                  "example": 8012.82
                },
                "payment_rate": {
                  "type": "number",
                  "format": "decimal",
                  "description": "付款率（%）",
                  "example": 94.5
                },
                "overdue_rate": {
                  "type": "number",
                  "format": "decimal",
                  "description": "逾期率（%）",
                  "example": 3.2
                }
              }
            },
            "time_series": {
              "type": "array",
              "description": "时间序列数据",
              "items": {
                "type": "object",
                "properties": {
                  "period": {
                    "type": "string",
                    "description": "时间周期",
                    "example": "2024-08"
                  },
                  "revenue": {
                    "type": "number",
                    "format": "decimal",
                    "description": "收入",
                    "example": 150000.0
                  },
                  "invoices_count": {
                    "type": "integer",
                    "description": "账单数量",
                    "example": 18
                  },
                  "paid_amount": {
                    "type": "number",
                    "format": "decimal",
                    "description": "已付金额",
                    "example": 142000.0
                  },
                  "overdue_amount": {
                    "type": "number",
                    "format": "decimal",
                    "description": "逾期金额",
                    "example": 8000.0
                  }
                }
              }
            },
            "forecast": {
              "type": "object",
              "description": "预测数据",
              "properties": {
                "next_month_revenue": {
                  "type": "number",
                  "format": "decimal",
                  "description": "下月预测收入",
                  "example": 165000.0
                },
                "confidence_level": {
                  "type": "number",
                  "format": "decimal",
                  "description": "置信度（%）",
                  "example": 85.5
                },
                "trend": {
                  "type": "string",
                  "description": "趋势",
                  "enum": [
                    "increasing",
                    "decreasing",
                    "stable"
                  ],
                  "example": "increasing"
                }
              }
            },
            "currency": {
              "type": "string",
              "description": "币种",
              "example": "CNY"
            },
            "generated_at": {
              "type": "string",
              "format": "date-time",
              "description": "生成时间",
              "example": "2024-08-15T10:30:00Z"
            }
          }
        },
        "CashFlowAnalysisResponse": {
          "type": "object",
          "properties": {
            "summary": {
              "type": "object",
              "description": "汇总信息",
              "properties": {
                "current_balance": {
                  "type": "number",
                  "format": "decimal",
                  "description": "当前余额",
                  "example": 2500000.0
                },
                "monthly_inflow": {
                  "type": "number",
                  "format": "decimal",
                  "description": "月度流入",
                  "example": 1200000.0
                },
                "monthly_outflow": {
                  "type": "number",
                  "format": "decimal",
                  "description": "月度流出",
                  "example": 800000.0
                },
                "net_cash_flow": {
                  "type": "number",
                  "format": "decimal",
                  "description": "净现金流",
                  "example": 400000.0
                }
              }
            },
            "historical_data": {
              "type": "array",
              "description": "历史数据",
              "items": {
                "type": "object",
                "properties": {
                  "month": {
                    "type": "string",
                    "description": "月份",
                    "example": "2024-08"
                  },
                  "inflow": {
                    "type": "number",
                    "format": "decimal",
                    "description": "流入",
                    "example": 1200000.0
                  },
                  "outflow": {
                    "type": "number",
                    "format": "decimal",
                    "description": "流出",
                    "example": 800000.0
                  },
                  "net_flow": {
                    "type": "number",
                    "format": "decimal",
                    "description": "净流量",
                    "example": 400000.0
                  },
                  "balance": {
                    "type": "number",
                    "format": "decimal",
                    "description": "余额",
                    "example": 2500000.0
                  }
                }
              }
            },
            "forecast_data": {
              "type": "array",
              "description": "预测数据",
              "items": {
                "type": "object",
                "properties": {
                  "month": {
                    "type": "string",
                    "description": "月份",
                    "example": "2024-09"
                  },
                  "predicted_inflow": {
                    "type": "number",
                    "format": "decimal",
                    "description": "预测流入",
                    "example": 1300000.0
                  },
                  "predicted_outflow": {
                    "type": "number",
                    "format": "decimal",
                    "description": "预测流出",
                    "example": 850000.0
                  },
                  "predicted_net_flow": {
                    "type": "number",
                    "format": "decimal",
                    "description": "预测净流量",
                    "example": 450000.0
                  },
                  "confidence_level": {
                    "type": "number",
                    "format": "decimal",
                    "description": "置信度",
                    "example": 82.5
                  }
                }
              }
            },
            "currency": {
              "type": "string",
              "description": "币种",
              "example": "CNY"
            },
            "generated_at": {
              "type": "string",
              "format": "date-time",
              "description": "生成时间",
              "example": "2024-08-15T10:30:00Z"
            }
          }
        },
        "RiskAssessmentResponse": {
          "type": "object",
          "properties": {
            "overall_risk": {
              "type": "object",
              "description": "整体风险",
              "properties": {
                "risk_level": {
                  "type": "string",
                  "description": "风险等级",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ],
                  "example": "medium"
                },
                "risk_score": {
                  "type": "number",
                  "format": "decimal",
                  "description": "风险评分",
                  "example": 65.5
                },
                "total_exposure": {
                  "type": "number",
                  "format": "decimal",
                  "description": "总风险敞口",
                  "example": 5000000.0
                }
              }
            },
            "customer_risks": {
              "type": "array",
              "description": "客户风险列表",
              "items": {
                "type": "object",
                "properties": {
                  "customer_id": {
                    "type": "integer",
                    "description": "客户ID",
                    "example": 5001
                  },
                  "customer_name": {
                    "type": "string",
                    "description": "客户名称",
                    "example": "ABC科技有限公司"
                  },
                  "risk_level": {
                    "type": "string",
                    "description": "风险等级",
                    "enum": [
                      "low",
                      "medium",
                      "high"
                    ],
                    "example": "high"
                  },
                  "risk_score": {
                    "type": "number",
                    "format": "decimal",
                    "description": "风险评分",
                    "example": 85.2
                  },
                  "outstanding_amount": {
                    "type": "number",
                    "format": "decimal",
                    "description": "未付金额",
                    "example": 50000.0
                  },
                  "overdue_days": {
                    "type": "integer",
                    "description": "逾期天数",
                    "example": 15
                  },
                  "payment_history_score": {
                    "type": "number",
                    "format": "decimal",
                    "description": "付款历史评分",
                    "example": 60.0
                  },
                  "recommended_action": {
                    "type": "string",
                    "description": "建议措施",
                    "example": "加强催收，考虑暂停服务"
                  }
                }
              }
            },
            "risk_factors": {
              "type": "array",
              "description": "风险因素",
              "items": {
                "type": "object",
                "properties": {
                  "factor_name": {
                    "type": "string",
                    "description": "因素名称",
                    "example": "逾期账单比例"
                  },
                  "factor_value": {
                    "type": "number",
                    "format": "decimal",
                    "description": "因素值",
                    "example": 12.5
                  },
                  "impact_level": {
                    "type": "string",
                    "description": "影响程度",
                    "enum": [
                      "low",
                      "medium",
                      "high"
                    ],
                    "example": "high"
                  },
                  "description": {
                    "type": "string",
                    "description": "描述",
                    "example": "当前逾期账单比例较高，需要关注"
                  }
                }
              }
            },
            "generated_at": {
              "type": "string",
              "format": "date-time",
              "description": "生成时间",
              "example": "2024-08-15T10:30:00Z"
            }
          }
        },
        "BillingRulesConfig": {
          "type": "object",
          "properties": {
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            },
            "base_fee_rules": {
              "type": "object",
              "description": "基础费用规则",
              "properties": {
                "calculation_method": {
                  "type": "string",
                  "description": "计算方法",
                  "enum": [
                    "fixed",
                    "tiered",
                    "percentage"
                  ],
                  "example": "fixed"
                },
                "default_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "默认金额",
                  "example": 10000.0
                },
                "currency": {
                  "type": "string",
                  "description": "币种",
                  "example": "CNY"
                }
              }
            },
            "usage_fee_rules": {
              "type": "object",
              "description": "用量费用规则",
              "properties": {
                "calculation_method": {
                  "type": "string",
                  "description": "计算方法",
                  "enum": [
                    "per_ticket",
                    "per_hour",
                    "tiered"
                  ],
                  "example": "per_ticket"
                },
                "unit_price": {
                  "type": "number",
                  "format": "decimal",
                  "description": "单价",
                  "example": 50.0
                },
                "free_quota": {
                  "type": "integer",
                  "description": "免费额度",
                  "example": 10
                },
                "currency": {
                  "type": "string",
                  "description": "币种",
                  "example": "CNY"
                }
              }
            },
            "penalty_rules": {
              "type": "object",
              "description": "违约扣费规则",
              "properties": {
                "sla_penalty_rate": {
                  "type": "number",
                  "format": "decimal",
                  "description": "SLA违约扣费率",
                  "example": 0.05
                },
                "max_penalty_amount": {
                  "type": "number",
                  "format": "decimal",
                  "description": "最大扣费金额",
                  "example": 5000.0
                },
                "currency": {
                  "type": "string",
                  "description": "币种",
                  "example": "CNY"
                }
              }
            },
            "discount_rules": {
              "type": "object",
              "description": "折扣规则",
              "properties": {
                "volume_discount": {
                  "type": "array",
                  "description": "量级折扣",
                  "items": {
                    "type": "object",
                    "properties": {
                      "min_amount": {
                        "type": "number",
                        "format": "decimal",
                        "description": "最小金额",
                        "example": 100000.0
                      },
                      "discount_rate": {
                        "type": "number",
                        "format": "decimal",
                        "description": "折扣率",
                        "example": 0.05
                      }
                    }
                  }
                },
                "loyalty_discount": {
                  "type": "object",
                  "description": "忠诚客户折扣",
                  "properties": {
                    "min_months": {
                      "type": "integer",
                      "description": "最少月数",
                      "example": 12
                    },
                    "discount_rate": {
                      "type": "number",
                      "format": "decimal",
                      "description": "折扣率",
                      "example": 0.03
                    }
                  }
                }
              }
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-15T10:30:00Z"
            },
            "updated_by": {
              "type": "integer",
              "description": "更新人ID",
              "example": 1001
            }
          }
        },
        "TaxRatesConfig": {
          "type": "object",
          "properties": {
            "tenant_id": {
              "type": "integer",
              "description": "租户ID",
              "example": 1001
            },
            "default_tax_rate": {
              "type": "number",
              "format": "decimal",
              "description": "默认税率",
              "example": 0.06
            },
            "tax_rates": {
              "type": "array",
              "description": "税率配置列表",
              "items": {
                "type": "object",
                "properties": {
                  "region": {
                    "type": "string",
                    "description": "地区",
                    "example": "北京"
                  },
                  "tax_type": {
                    "type": "string",
                    "description": "税种",
                    "example": "增值税"
                  },
                  "tax_rate": {
                    "type": "number",
                    "format": "decimal",
                    "description": "税率",
                    "example": 0.06
                  },
                  "effective_date": {
                    "type": "string",
                    "format": "date",
                    "description": "生效日期",
                    "example": "2024-01-01"
                  },
                  "expiry_date": {
                    "type": "string",
                    "format": "date",
                    "description": "失效日期",
                    "example": "2024-12-31"
                  }
                }
              }
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2024-08-15T10:30:00Z"
            },
            "updated_by": {
              "type": "integer",
              "description": "更新人ID",
              "example": 1001
            }
          }
        },
        "InvoiceDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/BillingInvoice"
            },
            {
              "type": "object",
              "properties": {
                "invoice_items": {
                  "type": "array",
                  "description": "账单明细",
                  "items": {
                    "$ref": "#/components/schemas/BillingItem"
                  }
                },
                "payment_records": {
                  "type": "array",
                  "description": "支付记录",
                  "items": {
                    "$ref": "#/components/schemas/PaymentRecord"
                  }
                },
                "contract_info": {
                  "type": "object",
                  "description": "合同信息",
                  "properties": {
                    "contract_no": {
                      "type": "string",
                      "description": "合同编号",
                      "example": "CON-20240101-0001"
                    },
                    "contract_name": {
                      "type": "string",
                      "description": "合同名称",
                      "example": "IT运维服务合同"
                    },
                    "service_level": {
                      "type": "string",
                      "description": "服务等级",
                      "example": "专业版"
                    }
                  }
                }
              }
            }
          ]
        },
        "PaymentDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/PaymentRecord"
            },
            {
              "type": "object",
              "properties": {
                "invoice_info": {
                  "type": "object",
                  "description": "账单信息",
                  "properties": {
                    "invoice_no": {
                      "type": "string",
                      "description": "账单编号",
                      "example": "INV-20240815-0001"
                    },
                    "total_amount": {
                      "type": "number",
                      "format": "decimal",
                      "description": "账单总金额",
                      "example": 12130.0
                    },
                    "due_date": {
                      "type": "string",
                      "format": "date",
                      "description": "到期日期",
                      "example": "2024-09-14"
                    }
                  }
                }
              }
            }
          ]
        },
        "ExtensionListItem": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "description": "展期ID",
              "example": 98765
            },
            "extension_request_id": {
              "type": "string",
              "description": "展期申请编号",
              "example": "EXT-20240815-0001"
            },
            "contract_id": {
              "type": "integer",
              "description": "合同ID",
              "example": 12345
            },
            "customer_name": {
              "type": "string",
              "description": "客户名称",
              "example": "ABC科技有限公司"
            },
            "extension_days": {
              "type": "integer",
              "description": "展期天数",
              "example": 30
            },
            "total_amount": {
              "type": "number",
              "format": "decimal",
              "description": "总金额",
              "example": 1000.0
            },
            "approval_status": {
              "type": "integer",
              "description": "审批状态",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 2
            },
            "execution_status": {
              "type": "integer",
              "description": "执行状态",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 2
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2024-08-15T10:30:00Z"
            }
          }
        },
        "ExtensionDetailInfo": {
          "allOf": [
            {
              "$ref": "#/components/schemas/ContractExtension"
            },
            {
              "type": "object",
              "properties": {
                "contract_info": {
                  "type": "object",
                  "description": "合同信息",
                  "properties": {
                    "contract_no": {
                      "type": "string",
                      "description": "合同编号",
                      "example": "CON-20240101-0001"
                    },
                    "customer_name": {
                      "type": "string",
                      "description": "客户名称",
                      "example": "ABC科技有限公司"
                    },
                    "original_end_date": {
                      "type": "string",
                      "format": "date",
                      "description": "原结束日期",
                      "example": "2024-08-31"
                    }
                  }
                },
                "approval_history": {
                  "type": "array",
                  "description": "审批历史",
                  "items": {
                    "type": "object",
                    "properties": {
                      "approver_id": {
                        "type": "integer",
                        "description": "审批人ID",
                        "example": 1002
                      },
                      "approver_name": {
                        "type": "string",
                        "description": "审批人姓名",
                        "example": "李经理"
                      },
                      "action": {
                        "type": "string",
                        "description": "审批动作",
                        "enum": [
                          "approve",
                          "reject",
                          "request_info"
                        ],
                        "example": "approve"
                      },
                      "comments": {
                        "type": "string",
                        "description": "审批意见",
                        "example": "同意展期申请"
                      },
                      "action_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "操作时间",
                        "example": "2024-08-15T12:00:00Z"
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "InvoiceBatchRequest": {
          "type": "object",
          "required": [
            "operation",
            "invoice_ids"
          ],
          "properties": {
            "operation": {
              "type": "string",
              "description": "操作类型",
              "enum": [
                "generate",
                "update",
                "delete",
                "send"
              ],
              "example": "generate"
            },
            "invoice_ids": {
              "type": "array",
              "description": "账单ID列表",
              "items": {
                "type": "integer"
              },
              "example": [
                67890,
                67891,
                67892
              ]
            },
            "batch_data": {
              "type": "object",
              "description": "批量操作数据",
              "additionalProperties": true
            }
          }
        },
        "InvoiceBatchResponse": {
          "type": "object",
          "properties": {
            "total_count": {
              "type": "integer",
              "description": "总数量",
              "example": 3
            },
            "success_count": {
              "type": "integer",
              "description": "成功数量",
              "example": 2
            },
            "failed_count": {
              "type": "integer",
              "description": "失败数量",
              "example": 1
            },
            "results": {
              "type": "array",
              "description": "操作结果",
              "items": {
                "type": "object",
                "properties": {
                  "invoice_id": {
                    "type": "integer",
                    "description": "账单ID",
                    "example": 67890
                  },
                  "status": {
                    "type": "string",
                    "description": "操作状态",
                    "enum": [
                      "success",
                      "failed"
                    ],
                    "example": "success"
                  },
                  "message": {
                    "type": "string",
                    "description": "操作消息",
                    "example": "操作成功"
                  },
                  "error_code": {
                    "type": "string",
                    "description": "错误码",
                    "example": "INVOICE_NOT_FOUND"
                  }
                }
              }
            }
          }
        },
        "PaymentNotifyRequest": {
          "type": "object",
          "required": [
            "payment_no",
            "channel_transaction_id",
            "payment_status"
          ],
          "properties": {
            "payment_no": {
              "type": "string",
              "description": "支付编号",
              "example": "PAY-20240815-0001"
            },
            "channel_transaction_id": {
              "type": "string",
              "description": "渠道交易号",
              "example": "2024081522001234567890"
            },
            "payment_status": {
              "type": "string",
              "description": "支付状态",
              "enum": [
                "success",
                "failed",
                "cancelled"
              ],
              "example": "success"
            },
            "payment_amount": {
              "type": "number",
              "format": "decimal",
              "description": "支付金额",
              "example": 12130.0
            },
            "actual_amount": {
              "type": "number",
              "format": "decimal",
              "description": "实际到账金额",
              "example": 12130.0
            },
            "channel_fee": {
              "type": "number",
              "format": "decimal",
              "description": "渠道手续费",
              "example": 12.13
            },
            "payment_time": {
              "type": "string",
              "format": "date-time",
              "description": "支付时间",
              "example": "2024-08-15T15:30:00Z"
            },
            "signature": {
              "type": "string",
              "description": "签名",
              "example": "abc123def456ghi789"
            },
            "extra_data": {
              "type": "object",
              "description": "额外数据",
              "additionalProperties": true
            }
          }
        },
        "ReconciliationRequest": {
          "type": "object",
          "required": [
            "reconciliation_date"
          ],
          "properties": {
            "reconciliation_date": {
              "type": "string",
              "format": "date",
              "description": "对账日期",
              "example": "2024-08-15"
            },
            "payment_channel": {
              "type": "string",
              "description": "支付渠道",
              "enum": [
                "alipay",
                "wechat",
                "bank_transfer",
                "credit_card"
              ],
              "example": "alipay"
            },
            "force_reconcile": {
              "type": "boolean",
              "description": "是否强制对账",
              "default": false,
              "example": false
            }
          }
        },
        "ReconciliationResponse": {
          "type": "object",
          "properties": {
            "reconciliation_id": {
              "type": "string",
              "description": "对账批次ID",
              "example": "REC-20240815-0001"
            },
            "reconciliation_date": {
              "type": "string",
              "format": "date",
              "description": "对账日期",
              "example": "2024-08-15"
            },
            "total_records": {
              "type": "integer",
              "description": "总记录数",
              "example": 150
            },
            "matched_records": {
              "type": "integer",
              "description": "匹配记录数",
              "example": 145
            },
            "unmatched_records": {
              "type": "integer",
              "description": "未匹配记录数",
              "example": 5
            },
            "difference_amount": {
              "type": "number",
              "format": "decimal",
              "description": "差异金额",
              "example": 25.5
            },
            "reconciliation_status": {
              "type": "string",
              "description": "对账状态",
              "enum": [
                "completed",
                "partial",
                "failed"
              ],
              "example": "partial"
            },
            "differences": {
              "type": "array",
              "description": "差异明细",
              "items": {
                "type": "object",
                "properties": {
                  "payment_no": {
                    "type": "string",
                    "description": "支付编号",
                    "example": "PAY-20240815-0001"
                  },
                  "system_amount": {
                    "type": "number",
                    "format": "decimal",
                    "description": "系统金额",
                    "example": 12130.0
                  },
                  "channel_amount": {
                    "type": "number",
                    "format": "decimal",
                    "description": "渠道金额",
                    "example": 12117.87
                  },
                  "difference": {
                    "type": "number",
                    "format": "decimal",
                    "description": "差异金额",
                    "example": 12.13
                  },
                  "difference_type": {
                    "type": "string",
                    "description": "差异类型",
                    "enum": [
                      "fee_difference",
                      "amount_mismatch",
                      "missing_record"
                    ],
                    "example": "fee_difference"
                  }
                }
              }
            },
            "processed_at": {
              "type": "string",
              "format": "date-time",
              "description": "处理时间",
              "example": "2024-08-16T10:00:00Z"
            }
          }
        },
        "BillingRulesUpdateRequest": {
          "type": "object",
          "properties": {
            "base_fee_rules": {
              "type": "object",
              "description": "基础费用规则",
              "additionalProperties": true
            },
            "usage_fee_rules": {
              "type": "object",
              "description": "用量费用规则",
              "additionalProperties": true
            },
            "penalty_rules": {
              "type": "object",
              "description": "违约扣费规则",
              "additionalProperties": true
            },
            "discount_rules": {
              "type": "object",
              "description": "折扣规则",
              "additionalProperties": true
            }
          }
        },
        "TaxRatesUpdateRequest": {
          "type": "object",
          "properties": {
            "default_tax_rate": {
              "type": "number",
              "format": "decimal",
              "description": "默认税率",
              "example": 0.06
            },
            "tax_rates": {
              "type": "array",
              "description": "税率配置列表",
              "items": {
                "type": "object",
                "properties": {
                  "region": {
                    "type": "string",
                    "description": "地区",
                    "example": "北京"
                  },
                  "tax_type": {
                    "type": "string",
                    "description": "税种",
                    "example": "增值税"
                  },
                  "tax_rate": {
                    "type": "number",
                    "format": "decimal",
                    "description": "税率",
                    "example": 0.06
                  },
                  "effective_date": {
                    "type": "string",
                    "format": "date",
                    "description": "生效日期",
                    "example": "2024-01-01"
                  },
                  "expiry_date": {
                    "type": "string",
                    "format": "date",
                    "description": "失效日期",
                    "example": "2024-12-31"
                  }
                }
              }
            }
          }
        },
        "ExtensionRejectionRequest": {
          "type": "object",
          "required": [
            "rejection_reason"
          ],
          "properties": {
            "rejection_reason": {
              "type": "string",
              "description": "拒绝原因",
              "example": "展期时间过长，需要重新评估合同条款"
            },
            "alternative_suggestion": {
              "type": "string",
              "description": "替代建议",
              "example": "建议缩短展期时间至15天"
            }
          }
        },
        "CustomerAnalysisResponse": {
          "type": "object",
          "properties": {
            "summary": {
              "type": "object",
              "description": "汇总信息",
              "properties": {
                "total_customers": {
                  "type": "integer",
                  "description": "总客户数",
                  "example": 50
                },
                "high_value_customers": {
                  "type": "integer",
                  "description": "高价值客户数",
                  "example": 15
                },
                "at_risk_customers": {
                  "type": "integer",
                  "description": "风险客户数",
                  "example": 8
                },
                "average_revenue_per_customer": {
                  "type": "number",
                  "format": "decimal",
                  "description": "平均客户收入",
                  "example": 25000.0
                }
              }
            },
            "customer_segments": {
              "type": "array",
              "description": "客户分群",
              "items": {
                "type": "object",
                "properties": {
                  "segment_name": {
                    "type": "string",
                    "description": "分群名称",
                    "example": "高价值客户"
                  },
                  "customer_count": {
                    "type": "integer",
                    "description": "客户数量",
                    "example": 15
                  },
                  "total_revenue": {
                    "type": "number",
                    "format": "decimal",
                    "description": "总收入",
                    "example": 750000.0
                  },
                  "average_revenue": {
                    "type": "number",
                    "format": "decimal",
                    "description": "平均收入",
                    "example": 50000.0
                  },
                  "payment_rate": {
                    "type": "number",
                    "format": "decimal",
                    "description": "付款率",
                    "example": 98.5
                  }
                }
              }
            },
            "top_customers": {
              "type": "array",
              "description": "头部客户",
              "items": {
                "type": "object",
                "properties": {
                  "customer_id": {
                    "type": "integer",
                    "description": "客户ID",
                    "example": 5001
                  },
                  "customer_name": {
                    "type": "string",
                    "description": "客户名称",
                    "example": "ABC科技有限公司"
                  },
                  "total_revenue": {
                    "type": "number",
                    "format": "decimal",
                    "description": "总收入",
                    "example": 120000.0
                  },
                  "payment_rate": {
                    "type": "number",
                    "format": "decimal",
                    "description": "付款率",
                    "example": 100.0
                  },
                  "risk_level": {
                    "type": "string",
                    "description": "风险等级",
                    "enum": [
                      "low",
                      "medium",
                      "high"
                    ],
                    "example": "low"
                  },
                  "last_payment_date": {
                    "type": "string",
                    "format": "date",
                    "description": "最后付款日期",
                    "example": "2024-08-10"
                  }
                }
              }
            },
            "generated_at": {
              "type": "string",
              "format": "date-time",
              "description": "生成时间",
              "example": "2024-08-15T10:30:00Z"
            }
          }
        }
      },
      "issues": []
    },
    "REQ-014-工作流引擎系统": {
      "file_path": "docs/api/4.5.1/modules/REQ-014-工作流引擎系统/openapi.yaml",
      "components": {
        "WorkflowDefinition": {
          "allOf": [
            {
              "$ref": "../domains/common.yaml#/components/schemas/BaseEntity"
            },
            {
              "type": "object",
              "properties": {
                "process_key": {
                  "type": "string",
                  "description": "流程标识",
                  "example": "expense_approval"
                },
                "process_name": {
                  "type": "string",
                  "description": "流程名称",
                  "example": "费用报销审批流程"
                },
                "process_version": {
                  "type": "integer",
                  "description": "流程版本",
                  "example": 1
                },
                "category": {
                  "type": "string",
                  "description": "流程分类",
                  "example": "finance"
                },
                "description": {
                  "type": "string",
                  "description": "流程描述",
                  "example": "员工费用报销审批流程，支持多级审批和条件分支"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "DRAFT",
                    "PUBLISHED",
                    "DEPRECATED"
                  ],
                  "description": "流程状态",
                  "example": "PUBLISHED"
                },
                "is_template": {
                  "type": "boolean",
                  "description": "是否为模板",
                  "example": false
                },
                "created_by": {
                  "type": "integer",
                  "description": "创建人ID",
                  "example": 1001
                }
              }
            }
          ]
        },
        "WorkflowDefinitionDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/WorkflowDefinition"
            },
            {
              "type": "object",
              "properties": {
                "bpmn_xml": {
                  "type": "string",
                  "description": "BPMN流程定义XML",
                  "example": "<?xml version=\"1.0\" encoding=\"UTF-8\"?><bpmn:definitions>...</bpmn:definitions>"
                },
                "form_config": {
                  "type": "object",
                  "description": "表单配置",
                  "example": {
                    "fields": [
                      {
                        "name": "amount",
                        "type": "number",
                        "label": "报销金额",
                        "required": true,
                        "validation": {
                          "min": 0,
                          "max": 50000
                        }
                      }
                    ]
                  }
                },
                "business_rules": {
                  "type": "object",
                  "description": "业务规则",
                  "example": {
                    "approval_rules": [
                      {
                        "condition": "amount <= 1000",
                        "approvers": [
                          "direct_manager"
                        ]
                      },
                      {
                        "condition": "amount > 1000 && amount <= 5000",
                        "approvers": [
                          "direct_manager",
                          "finance_manager"
                        ]
                      }
                    ]
                  }
                },
                "timeout_config": {
                  "type": "object",
                  "description": "超时配置",
                  "example": {
                    "default_timeout": 3600,
                    "node_timeouts": {
                      "manager_approval": 7200,
                      "finance_approval": 14400
                    }
                  }
                }
              }
            }
          ]
        },
        "WorkflowDefinitionCreateRequest": {
          "type": "object",
          "required": [
            "process_key",
            "process_name",
            "bpmn_xml"
          ],
          "properties": {
            "process_key": {
              "type": "string",
              "description": "流程标识",
              "example": "expense_approval"
            },
            "process_name": {
              "type": "string",
              "description": "流程名称",
              "example": "费用报销审批流程"
            },
            "category": {
              "type": "string",
              "description": "流程分类",
              "example": "finance"
            },
            "description": {
              "type": "string",
              "description": "流程描述",
              "example": "员工费用报销审批流程，支持多级审批和条件分支"
            },
            "bpmn_xml": {
              "type": "string",
              "description": "BPMN流程定义XML",
              "example": "<?xml version=\"1.0\" encoding=\"UTF-8\"?><bpmn:definitions>...</bpmn:definitions>"
            },
            "form_config": {
              "type": "object",
              "description": "表单配置"
            },
            "business_rules": {
              "type": "object",
              "description": "业务规则"
            },
            "timeout_config": {
              "type": "object",
              "description": "超时配置"
            },
            "is_template": {
              "type": "boolean",
              "description": "是否为模板",
              "default": false,
              "example": false
            }
          }
        },
        "WorkflowDefinitionUpdateRequest": {
          "type": "object",
          "properties": {
            "process_name": {
              "type": "string",
              "description": "流程名称",
              "example": "费用报销审批流程"
            },
            "description": {
              "type": "string",
              "description": "流程描述",
              "example": "员工费用报销审批流程，支持多级审批和条件分支"
            },
            "bpmn_xml": {
              "type": "string",
              "description": "BPMN流程定义XML",
              "example": "<?xml version=\"1.0\" encoding=\"UTF-8\"?><bpmn:definitions>...</bpmn:definitions>"
            },
            "form_config": {
              "type": "object",
              "description": "表单配置"
            },
            "business_rules": {
              "type": "object",
              "description": "业务规则"
            },
            "timeout_config": {
              "type": "object",
              "description": "超时配置"
            }
          }
        },
        "WorkflowInstance": {
          "type": "object",
          "properties": {
            "instance_id": {
              "type": "string",
              "description": "流程实例ID",
              "example": "WF-20250815-0001"
            },
            "process_key": {
              "type": "string",
              "description": "流程标识",
              "example": "expense_approval"
            },
            "process_name": {
              "type": "string",
              "description": "流程名称",
              "example": "费用报销审批流程"
            },
            "business_key": {
              "type": "string",
              "description": "业务标识",
              "example": "EXP-20250815-0001"
            },
            "initiator_id": {
              "type": "integer",
              "description": "发起人ID",
              "example": 1001
            },
            "initiator_name": {
              "type": "string",
              "description": "发起人姓名",
              "example": "张三"
            },
            "current_activity": {
              "type": "string",
              "description": "当前活动",
              "example": "manager_approval"
            },
            "current_assignee": {
              "type": "integer",
              "description": "当前处理人ID",
              "example": 1002
            },
            "priority": {
              "type": "integer",
              "description": "优先级：1-紧急，2-高，3-中，4-低",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 2
            },
            "status": {
              "type": "string",
              "enum": [
                "RUNNING",
                "COMPLETED",
                "TERMINATED",
                "SUSPENDED"
              ],
              "description": "实例状态",
              "example": "RUNNING"
            },
            "start_time": {
              "type": "string",
              "format": "date-time",
              "description": "开始时间",
              "example": "2025-08-15T10:30:00Z"
            },
            "end_time": {
              "type": "string",
              "format": "date-time",
              "description": "结束时间",
              "example": "2025-08-15T16:30:00Z"
            },
            "timeout_time": {
              "type": "string",
              "format": "date-time",
              "description": "超时时间",
              "example": "2025-08-16T18:00:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:30:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T14:30:00Z"
            }
          }
        },
        "WorkflowInstanceDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/WorkflowInstance"
            },
            {
              "type": "object",
              "properties": {
                "instance_data": {
                  "type": "object",
                  "description": "实例数据",
                  "example": {
                    "amount": 3500,
                    "category": "travel",
                    "applicant": "张三",
                    "department": "技术部"
                  }
                },
                "variables": {
                  "type": "object",
                  "description": "流程变量",
                  "example": {
                    "amount": 3500,
                    "category": "travel",
                    "approval_result": "approved"
                  }
                },
                "tasks": {
                  "type": "array",
                  "description": "任务列表",
                  "items": {
                    "$ref": "#/components/schemas/WorkflowTask"
                  }
                }
              }
            }
          ]
        },
        "WorkflowInstanceStartRequest": {
          "type": "object",
          "required": [
            "process_key"
          ],
          "properties": {
            "process_key": {
              "type": "string",
              "description": "流程标识",
              "example": "expense_approval"
            },
            "business_key": {
              "type": "string",
              "description": "业务标识",
              "example": "EXP-20250815-0001"
            },
            "variables": {
              "type": "object",
              "description": "流程变量",
              "example": {
                "amount": 3500,
                "category": "travel",
                "applicant": "张三",
                "department": "技术部",
                "description": "出差费用报销"
              }
            },
            "form_data": {
              "type": "object",
              "description": "表单数据",
              "example": {
                "receipts": [
                  "receipt1.jpg",
                  "receipt2.jpg"
                ],
                "travel_dates": {
                  "start": "2025-08-10",
                  "end": "2025-08-12"
                }
              }
            },
            "priority": {
              "type": "integer",
              "description": "优先级：1-紧急，2-高，3-中，4-低",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "default": 3,
              "example": 2
            }
          }
        },
        "WorkflowInstanceStartResponse": {
          "type": "object",
          "properties": {
            "instance_id": {
              "type": "string",
              "description": "流程实例ID",
              "example": "WF-20250815-0001"
            },
            "process_key": {
              "type": "string",
              "description": "流程标识",
              "example": "expense_approval"
            },
            "status": {
              "type": "string",
              "description": "实例状态",
              "example": "RUNNING"
            },
            "current_activity": {
              "type": "string",
              "description": "当前活动",
              "example": "manager_approval"
            },
            "next_tasks": {
              "type": "array",
              "description": "下一步任务",
              "items": {
                "type": "object",
                "properties": {
                  "task_id": {
                    "type": "string",
                    "example": "TASK-20250815-0001"
                  },
                  "task_name": {
                    "type": "string",
                    "example": "部门经理审批"
                  },
                  "assignee": {
                    "type": "string",
                    "example": "manager001"
                  },
                  "due_date": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2025-08-16T18:00:00Z"
                  }
                }
              }
            }
          }
        },
        "WorkflowTask": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string",
              "description": "任务ID",
              "example": "TASK-20250815-0001"
            },
            "instance_id": {
              "type": "string",
              "description": "流程实例ID",
              "example": "WF-20250815-0001"
            },
            "task_definition_key": {
              "type": "string",
              "description": "任务定义标识",
              "example": "manager_approval"
            },
            "task_name": {
              "type": "string",
              "description": "任务名称",
              "example": "部门经理审批"
            },
            "task_type": {
              "type": "integer",
              "description": "任务类型：1-用户任务，2-服务任务，3-脚本任务",
              "enum": [
                1,
                2,
                3
              ],
              "example": 1
            },
            "assignee_id": {
              "type": "integer",
              "description": "分配人ID",
              "example": 1002
            },
            "assignee_name": {
              "type": "string",
              "description": "分配人姓名",
              "example": "李经理"
            },
            "business_key": {
              "type": "string",
              "description": "业务标识",
              "example": "EXP-20250815-0001"
            },
            "priority": {
              "type": "integer",
              "description": "优先级：1-紧急，2-高，3-中，4-低",
              "enum": [
                1,
                2,
                3,
                4
              ],
              "example": 2
            },
            "status": {
              "type": "string",
              "enum": [
                "PENDING",
                "IN_PROGRESS",
                "COMPLETED",
                "SKIPPED"
              ],
              "description": "任务状态",
              "example": "PENDING"
            },
            "due_date": {
              "type": "string",
              "format": "date-time",
              "description": "截止时间",
              "example": "2025-08-16T18:00:00Z"
            },
            "claim_time": {
              "type": "string",
              "format": "date-time",
              "description": "认领时间",
              "example": "2025-08-15T11:00:00Z"
            },
            "start_time": {
              "type": "string",
              "format": "date-time",
              "description": "开始时间",
              "example": "2025-08-15T11:00:00Z"
            },
            "end_time": {
              "type": "string",
              "format": "date-time",
              "description": "完成时间",
              "example": "2025-08-15T16:30:00Z"
            },
            "created_at": {
              "type": "string",
              "format": "date-time",
              "description": "创建时间",
              "example": "2025-08-15T10:30:00Z"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time",
              "description": "更新时间",
              "example": "2025-08-15T16:30:00Z"
            }
          }
        },
        "WorkflowTaskDetail": {
          "allOf": [
            {
              "$ref": "#/components/schemas/WorkflowTask"
            },
            {
              "type": "object",
              "properties": {
                "task_data": {
                  "type": "object",
                  "description": "任务数据",
                  "example": {
                    "amount": 3500,
                    "category": "travel",
                    "applicant": "张三"
                  }
                },
                "form_data": {
                  "type": "object",
                  "description": "表单数据",
                  "example": {
                    "receipts": [
                      "receipt1.jpg",
                      "receipt2.jpg"
                    ],
                    "travel_dates": {
                      "start": "2025-08-10",
                      "end": "2025-08-12"
                    }
                  }
                },
                "candidate_users": {
                  "type": "array",
                  "description": "候选用户列表",
                  "items": {
                    "type": "integer"
                  },
                  "example": [
                    1001,
                    1002,
                    1003
                  ]
                },
                "candidate_roles": {
                  "type": "array",
                  "description": "候选角色列表",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "manager",
                    "finance_manager"
                  ]
                }
              }
            }
          ]
        },
        "WorkflowTaskCompleteRequest": {
          "type": "object",
          "properties": {
            "variables": {
              "type": "object",
              "description": "流程变量",
              "example": {
                "approval_result": "approved",
                "approval_comment": "同意报销，注意控制费用",
                "approved_amount": 3200
              }
            },
            "form_data": {
              "type": "object",
              "description": "表单数据",
              "example": {
                "signature": "manager_signature.png",
                "approval_time": "2025-08-15T16:30:00Z"
              }
            },
            "comment": {
              "type": "string",
              "description": "处理意见",
              "example": "审批通过，请注意控制费用"
            }
          }
        },
        "WorkflowTaskCompleteResponse": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string",
              "description": "任务ID",
              "example": "TASK-20250815-0001"
            },
            "instance_id": {
              "type": "string",
              "description": "流程实例ID",
              "example": "WF-20250815-0001"
            },
            "next_activity": {
              "type": "string",
              "description": "下一个活动",
              "example": "finance_approval"
            },
            "next_tasks": {
              "type": "array",
              "description": "下一步任务",
              "items": {
                "type": "object",
                "properties": {
                  "task_id": {
                    "type": "string",
                    "example": "TASK-20250815-0002"
                  },
                  "task_name": {
                    "type": "string",
                    "example": "财务审批"
                  },
                  "assignee": {
                    "type": "string",
                    "example": "finance001"
                  },
                  "due_date": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2025-08-17T18:00:00Z"
                  }
                }
              }
            }
          }
        },
        "WorkflowTaskDelegateRequest": {
          "type": "object",
          "required": [
            "delegate_to"
          ],
          "properties": {
            "delegate_to": {
              "type": "integer",
              "description": "委托给的用户ID",
              "example": 1002
            },
            "delegate_reason": {
              "type": "string",
              "description": "委托原因",
              "example": "出差期间委托处理"
            },
            "delegate_until": {
              "type": "string",
              "format": "date-time",
              "description": "委托截止时间",
              "example": "2025-08-20T18:00:00Z"
            }
          }
        },
        "WorkflowStatistics": {
          "type": "object",
          "properties": {
            "total_instances": {
              "type": "integer",
              "description": "总流程实例数",
              "example": 1250
            },
            "running_instances": {
              "type": "integer",
              "description": "运行中实例数",
              "example": 85
            },
            "completed_instances": {
              "type": "integer",
              "description": "已完成实例数",
              "example": 1150
            },
            "terminated_instances": {
              "type": "integer",
              "description": "已终止实例数",
              "example": 15
            },
            "total_tasks": {
              "type": "integer",
              "description": "总任务数",
              "example": 3200
            },
            "pending_tasks": {
              "type": "integer",
              "description": "待处理任务数",
              "example": 120
            },
            "completed_tasks": {
              "type": "integer",
              "description": "已完成任务数",
              "example": 3050
            },
            "overdue_tasks": {
              "type": "integer",
              "description": "超期任务数",
              "example": 30
            },
            "avg_completion_time": {
              "type": "number",
              "description": "平均完成时间（小时）",
              "example": 24.5
            },
            "avg_task_processing_time": {
              "type": "number",
              "description": "平均任务处理时间（小时）",
              "example": 4.2
            },
            "process_statistics": {
              "type": "array",
              "description": "按流程分组的统计",
              "items": {
                "type": "object",
                "properties": {
                  "process_key": {
                    "type": "string",
                    "example": "expense_approval"
                  },
                  "process_name": {
                    "type": "string",
                    "example": "费用报销审批流程"
                  },
                  "total_instances": {
                    "type": "integer",
                    "example": 450
                  },
                  "avg_completion_time": {
                    "type": "number",
                    "example": 18.5
                  },
                  "completion_rate": {
                    "type": "number",
                    "description": "完成率（百分比）",
                    "example": 95.2
                  }
                }
              }
            },
            "user_statistics": {
              "type": "array",
              "description": "按用户分组的统计",
              "items": {
                "type": "object",
                "properties": {
                  "user_id": {
                    "type": "integer",
                    "example": 1001
                  },
                  "user_name": {
                    "type": "string",
                    "example": "张三"
                  },
                  "pending_tasks": {
                    "type": "integer",
                    "example": 8
                  },
                  "completed_tasks": {
                    "type": "integer",
                    "example": 125
                  },
                  "avg_processing_time": {
                    "type": "number",
                    "example": 3.8
                  },
                  "completion_rate": {
                    "type": "number",
                    "example": 98.5
                  }
                }
              }
            }
          }
        }
      },
      "issues": []
    }
  },
  "domain_components": {
    "ticket-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "engineer-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "data-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "client-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "common": {
      "ApiResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "请求是否成功"
          },
          "message": {
            "type": "string",
            "description": "响应消息"
          },
          "data": {
            "description": "响应数据"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "响应时间戳"
          }
        },
        "required": [
          "success",
          "message",
          "timestamp"
        ]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "请求是否成功",
            "example": false
          },
          "message": {
            "type": "string",
            "description": "错误消息"
          },
          "error_code": {
            "type": "string",
            "description": "错误代码"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "响应时间戳"
          }
        },
        "required": [
          "success",
          "message",
          "error_code",
          "timestamp"
        ]
      },
      "PagedResponse": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ApiResponse"
          },
          {
            "type": "object",
            "properties": {
              "pagination": {
                "$ref": "#/components/schemas/PaginationInfo"
              }
            }
          }
        ]
      },
      "PaginationInfo": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "description": "当前页码",
            "minimum": 1
          },
          "size": {
            "type": "integer",
            "description": "每页大小",
            "minimum": 1
          },
          "total": {
            "type": "integer",
            "description": "总记录数",
            "minimum": 0
          },
          "pages": {
            "type": "integer",
            "description": "总页数",
            "minimum": 0
          }
        },
        "required": [
          "page",
          "size",
          "total",
          "pages"
        ]
      },
      "BaseEntity": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "唯一标识符"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        },
        "required": [
          "id",
          "created_at",
          "updated_at"
        ]
      }
    },
    "ops-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "finance-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "sla-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "experience-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "portal-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "system-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "notification-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "auth-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "workflow-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "customer-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "integration-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    },
    "knowledge-domain": {
      "ApiResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ApiResponse"
      },
      "PagedResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/PagedResponse"
      },
      "ErrorResponse": {
        "$ref": "../global-api-index.yaml#/components/schemas/ErrorResponse"
      }
    }
  },
  "recommendations": []
}