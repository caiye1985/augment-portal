/*
 * 深色模式白色背景强制修复
 * 专门用于解决顽固的白色背景问题
 */

[data-theme="dark"] {
  /* ===== 全局强制规则 ===== */

  /* 禁止任何元素使用白色背景 */
  * {
    /* 检查并强制修复白色背景 */
  }

  /* 强制修复所有可能的白色背景选择器 */
  div[style*="background: white"],
  div[style*="background: #fff"],
  div[style*="background: #ffffff"],
  div[style*="background-color: white"],
  div[style*="background-color: #fff"],
  div[style*="background-color: #ffffff"],
  div[style*="background-color: rgb(255, 255, 255)"],
  .bg-white,
  .white-bg,
  .background-white {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  /* ===== Element Plus 组件深度修复 ===== */

  /* 选择器组件 */
  .el-select,
  .el-select__wrapper,
  .el-select .el-input,
  .el-select .el-input__wrapper,
  .el-select .el-input__inner,
  .el-select-dropdown,
  .el-select-dropdown__item {
    background-color: var(--bg-card) !important;
    border-color: var(--border-color) !important;
    color: var(--text-primary) !important;
  }

  .el-select-dropdown__item:hover {
    background-color: var(--bg-hover) !important;
  }

  .el-select-dropdown__item.selected {
    background-color: var(--primary-color) !important;
    color: var(--text-inverse) !important;
  }

  /* 卡片组件深度修复 */
  .el-card,
  .el-card__header,
  .el-card__body,
  .el-card__footer {
    background-color: #1e293b !important;
    border-color: #334155 !important;
    color: #f8fafc !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;
  }

  /* 标签页组件深度修复 */
  .el-tabs,
  .el-tabs__header,
  .el-tabs__nav-wrap,
  .el-tabs__nav-scroll,
  .el-tabs__nav,
  .el-tabs__item,
  .el-tabs__content,
  .el-tab-pane {
    background-color: #1e293b !important;
    border-color: #334155 !important;
    color: #f8fafc !important;
  }

  .el-tabs--card .el-tabs__item {
    background-color: #334155 !important;
    border-color: #475569 !important;
  }

  .el-tabs--card .el-tabs__item.is-active {
    background-color: #1e293b !important;
    border-bottom-color: #1e293b !important;
    color: #f8fafc !important;
  }

  .el-tabs--card .el-tabs__item:not(.is-active):hover {
    background-color: #475569 !important;
  }

  /* 树形组件深度修复 */
  .el-tree,
  .el-tree-node,
  .el-tree-node__content,
  .el-tree-node__children {
    background-color: #1e293b !important;
    color: #f8fafc !important;
  }

  .el-tree-node__content:hover {
    background-color: #334155 !important;
  }

  .el-tree-node.is-current > .el-tree-node__content {
    background-color: #3b82f6 !important;
    color: #ffffff !important;
  }

  /* 表格组件深度修复 */
  .el-table,
  .el-table__header-wrapper,
  .el-table__body-wrapper,
  .el-table__footer-wrapper {
    background-color: #1e293b !important;
  }

  .el-table th,
  .el-table td {
    background-color: #1e293b !important;
    border-color: #334155 !important;
    color: #f8fafc !important;
  }

  .el-table th.el-table__cell {
    background-color: #334155 !important;
  }

  .el-table tr:hover td {
    background-color: var(--bg-hover) !important;
  }

  .el-table--striped .el-table__body tr.el-table__row--striped td {
    background-color: var(--bg-tertiary) !important;
  }

  /* ===== 自定义组件强制修复 ===== */

  /* 统计卡片 */
  .stat-card,
  .stats-container,
  .statistics-card,
  .metric-card {
    background-color: var(--bg-card) !important;
    border-color: var(--border-color) !important;
    color: var(--text-primary) !important;
    box-shadow: var(--shadow-md) !important;
  }

  .stat-card .stat-number,
  .stat-card .stat-label {
    color: var(--text-primary) !important;
  }

  /* 页面头部 */
  .page-header,
  .content-header,
  .section-header {
    background-color: var(--bg-card) !important;
    border-color: var(--border-color) !important;
    color: var(--text-primary) !important;
  }

  .page-header h1,
  .page-header h2,
  .page-header h3,
  .page-header p {
    color: var(--text-primary) !important;
  }

  /* 内容容器 */
  .content-container,
  .main-content,
  .page-content,
  .section-content,
  .demo-container {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
  }

  /* 筛选栏 */
  .filter-bar,
  .search-bar,
  .toolbar {
    background-color: #1e293b !important;
    border-color: #334155 !important;
    color: #f8fafc !important;
  }

  /* 列表容器 */
  .list-container,
  .data-list,
  .item-list {
    background-color: #1e293b !important;
    border-color: #334155 !important;
  }

  /* 表单容器 */
  .form-container,
  .form-section {
    background-color: #1e293b !important;
    color: #f8fafc !important;
  }

  /* ===== 特定页面组件修复 ===== */

  /* 工程师管理页面 */
  .engineer-card,
  .engineer-list,
  .engineer-detail {
    background-color: #1e293b !important;
    border-color: #334155 !important;
    color: #f8fafc !important;
  }

  /* 任务管理页面 */
  .task-card,
  .task-list,
  .task-detail {
    background-color: #1e293b !important;
    border-color: #334155 !important;
    color: #f8fafc !important;
  }

  /* 消息管理页面 */
  .message-card,
  .message-list,
  .message-detail {
    background-color: #1e293b !important;
    border-color: #334155 !important;
    color: #f8fafc !important;
  }

  /* ===== 强制覆盖内联样式 ===== */

  /* 使用属性选择器强制覆盖内联样式 */
  [style*="background-color: rgb(255, 255, 255)"] {
    background-color: #1e293b !important;
    color: #f8fafc !important;
  }

  [style*="background: rgb(255, 255, 255)"] {
    background-color: #1e293b !important;
    color: #f8fafc !important;
  }

  [style*="background-color: white"] {
    background-color: #1e293b !important;
    color: #f8fafc !important;
  }

  [style*="background: white"] {
    background-color: #1e293b !important;
    color: #f8fafc !important;
  }

  /* ===== 确保文字可读性 ===== */

  /* 确保所有文字在深色背景上可读 */
  .el-text,
  .text-content,
  p, span, div, label {
    color: #f8fafc !important;
  }

  /* 链接颜色 */
  a {
    color: #60a5fa !important;
  }

  a:hover {
    color: #93c5fd !important;
  }

  /* 次要文字 */
  .text-secondary,
  .secondary-text,
  .muted-text {
    color: #cbd5e1 !important;
  }
}
